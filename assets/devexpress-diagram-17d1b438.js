function _e(he,Se){for(var fe=0;fe<Se.length;fe++){const le=Se[fe];if(typeof le!="string"&&!Array.isArray(le)){for(const ue in le)if(ue!=="default"&&!(ue in he)){const j=Object.getOwnPropertyDescriptor(le,ue);j&&Object.defineProperty(he,ue,j.get?j:{enumerable:!0,get:()=>le[ue]})}}}return Object.freeze(Object.defineProperty(he,Symbol.toStringTag,{value:"Module"}))}var Te=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Oe(he){return he&&he.__esModule&&Object.prototype.hasOwnProperty.call(he,"default")?he.default:he}var Ie={exports:{}};/*! For license information please see dx-diagram.min.js.LICENSE.txt */(function(he,Se){(function(fe,le){he.exports=le()})(Te,()=>(()=>{var fe={9279:(j,h)=>{Object.defineProperty(h,"__esModule",{value:!0});var d=function(){function u(){}return u.IdentUserAgent=function(g,v){v===void 0&&(v=!1);var p=["Mozilla","IE","Firefox","Netscape","Safari","Chrome","Opera","Opera10","Edge"],s="IE",i="Win",e={Safari:2,Chrome:.1,Mozilla:1.9,Netscape:8,Firefox:2,Opera:9,IE:6,Edge:12};if(g&&g.length!==0){g=g.toLowerCase(),u.indentPlatformMajorVersion(g);try{for(var t={Windows:"Win",Macintosh:"Mac","Mac OS":"Mac",Mac_PowerPC:"Mac","cpu os":"MacMobile","cpu iphone os":"MacMobile",Android:"Android","!Windows Phone":"WinPhone","!WPDesktop":"WinPhone","!ZuneWP":"WinPhone"},n="(?:/|\\s*)?",o="(\\d+)(?:\\.((?:\\d+?[1-9])|\\d)0*?)?",r="(?:"+o+")?",a={Safari:"applewebkit(?:.*?(?:version/"+o+"[\\.\\w\\d]*?(?:\\s+mobile/\\S*)?\\s+safari))?",Chrome:"(?:chrome|crios)(?!frame)"+n+r,Mozilla:"mozilla(?:.*rv:"+r+".*Gecko)?",Netscape:"(?:netscape|navigator)\\d*/?\\s*"+r,Firefox:"firefox"+n+r,Opera:"(?:opera|\\sopr)"+n+r,Opera10:"opera.*\\s*version"+n+r,IE:"msie\\s*"+r,Edge:"edge"+n+r},c=null,f=-1,m=0;m<p.length;m++){var y=p[m],l=new RegExp(a[y],"i").exec(g);if(l&&l.index>=0){if(c==="IE"&&f>=11&&y==="Safari")continue;(c=y)==="Opera10"&&(c="Opera");var P="trident"+n+r;f=u.GetBrowserVersion(g,l,P,u.getIECompatibleVersionString()),c==="Mozilla"&&f>=11&&(c="IE")}}c||(c=s);var C=f!==-1;C||(f=e[c]);var I=null,x=Number.MAX_VALUE;for(var b in t)if(Object.prototype.hasOwnProperty.call(t,b)){var S=b.substr(0,1)==="!",w=g.indexOf((S?b.substr(1):b).toLowerCase());w>=0&&(w<x||S)&&(x=S?0:w,I=t[b])}var T=g.toUpperCase().match("SM-[A-Z]"),_=T&&T.length>0;I==="WinPhone"&&f<9&&(f=Math.floor(u.getVersionFromTrident(g,"trident"+n+r))),!v&&c==="IE"&&f>7&&document.documentMode<f&&(f=document.documentMode),I==="WinPhone"&&(f=Math.max(9,f)),I||(I=i),I!==t["cpu os"]||C||(f=4),u.fillUserAgentInfo(p,c,f,I,_)}catch{u.fillUserAgentInfo(p,s,e[s],i)}}else u.fillUserAgentInfo(p,s,e[s],i)},u.GetBrowserVersion=function(g,v,p,s){var i=u.getVersionFromMatches(v);if(s){var e=u.getVersionFromTrident(g,p);if(s==="edge"||parseInt(s)===e)return e}return i},u.getIECompatibleVersionString=function(){if(document.compatible){for(var g=0;g<document.compatible.length;g++)if(document.compatible[g].userAgent==="IE"&&document.compatible[g].version)return document.compatible[g].version.toLowerCase()}return""},u.isTouchEnabled=function(){return u.hasTouchStart()||u.hasMaxTouchPoints()||u.hasMsMaxTouchPoints()},u.hasTouchStart=function(){return"ontouchstart"in window},u.hasMaxTouchPoints=function(){return navigator.maxTouchPoints>0},u.hasMsMaxTouchPoints=function(){return navigator.msMaxTouchPoints>0},u.hasNavigator=function(){return typeof navigator<"u"},u.fillUserAgentInfo=function(g,v,p,s,i){i===void 0&&(i=!1);for(var e=0;e<g.length;e++){var t=g[e];u[t]=t===v}u.Version=Math.floor(10*p)/10,u.MajorVersion=Math.floor(u.Version),u.WindowsPlatform=s==="Win"||s==="WinPhone",u.MacOSMobilePlatform=s==="MacMobile"||s==="Mac"&&u.isTouchEnabled(),u.MacOSPlatform=s==="Mac"&&!u.MacOSMobilePlatform,u.AndroidMobilePlatform=s==="Android",u.WindowsPhonePlatform=s==="WinPhone",u.WebKitFamily=u.Safari||u.Chrome||u.Opera&&u.MajorVersion>=15,u.NetscapeFamily=u.Netscape||u.Mozilla||u.Firefox,u.WebKitTouchUI=u.MacOSMobilePlatform||u.AndroidMobilePlatform;var n=u.IE&&u.MajorVersion>9&&u.WindowsPlatform&&u.UserAgent.toLowerCase().indexOf("touch")>=0;if(u.MSTouchUI=n||u.Edge&&!!window.navigator.maxTouchPoints,u.TouchUI=u.WebKitTouchUI||u.MSTouchUI,u.MobileUI=u.WebKitTouchUI||u.WindowsPhonePlatform,u.AndroidDefaultBrowser=u.AndroidMobilePlatform&&!u.Chrome,u.AndroidChromeBrowser=u.AndroidMobilePlatform&&u.Chrome,i&&(u.SamsungAndroidDevice=i),u.MSTouchUI){var o=u.UserAgent.toLowerCase().indexOf("arm;")>-1;u.VirtualKeyboardSupported=o||u.WindowsPhonePlatform}else u.VirtualKeyboardSupported=u.WebKitTouchUI;u.fillDocumentElementBrowserTypeClassNames(g)},u.indentPlatformMajorVersion=function(g){var v=/(?:(?:windows nt|macintosh|mac os|cpu os|cpu iphone os|android|windows phone|linux) )(\d+)(?:[-0-9_.])*/.exec(g);v&&(u.PlaformMajorVersion=v[1])},u.getVersionFromMatches=function(g){var v=-1,p="";return g&&(g[1]&&(p+=g[1],g[2]&&(p+="."+g[2])),p!==""&&(v=parseFloat(p),isNaN(v)&&(v=-1))),v},u.getVersionFromTrident=function(g,v){var p=new RegExp(v,"i").exec(g);return u.getVersionFromMatches(p)+4},u.fillDocumentElementBrowserTypeClassNames=function(g){for(var v="",p=g.concat(["WindowsPlatform","MacOSPlatform","MacOSMobilePlatform","AndroidMobilePlatform","WindowsPhonePlatform","WebKitFamily","WebKitTouchUI","MSTouchUI","TouchUI","AndroidDefaultBrowser"]),s=0;s<p.length;s++){var i=p[s];u[i]&&(v+="dx"+i+" ")}v+="dxBrowserVersion-"+u.MajorVersion,typeof document<"u"&&document&&document.documentElement&&(document.documentElement.className!==""&&(v=" "+v),document.documentElement.className+=v,u.Info=v)},u.getUserAgent=function(){return u.hasNavigator()&&navigator.userAgent?navigator.userAgent.toLowerCase():""},u.UserAgent=u.getUserAgent(),u._foo=u.IdentUserAgent(u.UserAgent),u}();h.Browser=d},1772:(j,h)=>{Object.defineProperty(h,"__esModule",{value:!0});var d=function(){function g(){this.suspendUpdateCount=0,this.occurredEvents=0}return g.prototype.beginUpdate=function(){this.suspendUpdateCount===0&&this.onUpdateLocked(),this.suspendUpdateCount<0?this.suspendUpdateCount--:this.suspendUpdateCount++},g.prototype.endUpdate=function(){if(this.suspendUpdateCount<0?this.suspendUpdateCount++:this.suspendUpdateCount>0&&this.suspendUpdateCount--,!this.isUpdateLocked()){var v=this.occurredEvents;this.occurredEvents=0,this.onUpdateUnlocked(v)}},g.prototype.suspendUpdate=function(){if(this.suspendUpdateCount>0){this.suspendUpdateCount*=-1;var v=this.occurredEvents;this.occurredEvents=0,this.onUpdateUnlocked(v)}},g.prototype.continueUpdate=function(){this.suspendUpdateCount<0&&(this.suspendUpdateCount*=-1)},g.prototype.isUpdateLocked=function(){return this.suspendUpdateCount>0},g.prototype.onUpdateLocked=function(){},g.prototype.registerOccurredEvent=function(v){this.occurredEvents|=v},g.prototype.resetOccurredEvents=function(){this.occurredEvents=0},g.prototype.isLocked=function(){return this.suspendUpdateCount!==0},g}();h.BatchUpdatableObject=d;var u=function(){function g(){}return g.prototype.beginUpdate=function(){},g.prototype.endUpdate=function(){},g}();h.EmptyBatchUpdatableObject=u},7820:(j,h)=>{Object.defineProperty(h,"__esModule",{value:!0});var d=function(){function u(g){g===void 0&&(g=0),this.value=g}return u.prototype.get=function(g){return(this.value&g)===g},u.prototype.set=function(g,v){return(this.value&g)===g!==v&&(v?this.value|=g:this.value^=g),this},u.prototype.add=function(g){this.value|=g},u.prototype.anyOf=function(){for(var g=[],v=0;v<arguments.length;v++)g[v]=arguments[v];for(var p=0,s=g;p<s.length;p++){var i=s[p];if((this.value&i)===i)return!0}return!1},u.prototype.getValue=function(){return this.value},u.prototype.clone=function(){return new u(this.value)},u}();h.Flag=d},6799:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0});var u=d(655),g=function(e,t){this.minElement=e,this.maxElement=t};h.MinMax=g;var v=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return u.__extends(t,e),Object.defineProperty(t.prototype,"length",{get:function(){return this.maxElement-this.minElement},enumerable:!0,configurable:!0}),t}(g);h.MinMaxNumber=v;var p=function(e,t){this.minElement=e,this.minValue=t};h.ExtendedMin=p;var s=function(e,t){this.maxElement=e,this.maxValue=t};h.ExtendedMax=s;var i=function(e){function t(n,o,r,a){var c=e.call(this,n,r)||this;return c.minValue=o,c.maxValue=a,c}return u.__extends(t,e),t}(g);h.ExtendedMinMax=i},9291:(j,h)=>{Object.defineProperty(h,"__esModule",{value:!0});var d=function(){function u(){}return u.hundredthsOfMillimeterToTwipsRound=function(g){return Math.round(1440*g/2540)},u.documentsToTwips=function(g){return 24*g/5},u.pixelsToTwips=function(g){return Math.round(u.pixelsToTwipsF(g))},u.pixelsToTwipsCustomDpi=function(g,v){return Math.round(u.pixelsToTwipsFCustomDpi(g,v))},u.inchesToTwips=function(g){return Math.round(u.inchesToTwipsF(g))},u.pointsToTwips=function(g){return Math.round(u.pointsToTwipsF(g))},u.picasToTwips=function(g){return Math.round(1440*g/u.PICAS_PER_INCH)},u.centimetersToTwips=function(g){return Math.round(u.centimetersToTwipsF(g))},u.pixelsToTwipsF=function(g){return 1440*g/u.DPI},u.pixelsToTwipsFCustomDpi=function(g,v){return 1440*g/v},u.inchesToTwipsF=function(g){return 1440*g},u.pointsToTwipsF=function(g){return 20*g},u.centimetersToTwipsF=function(g){return 1440*g/u.CENTIMETERS_PER_INCH},u.twipsToDegrees=function(g){return g/6e4},u.twipsToRadians=function(g){return g/6e4*Math.PI/180},u.degreesToTwips=function(g){return 6e4*g},u.radiansToTwips=function(g){return 6e4*g/Math.PI*180},u.radiansToDegrees=function(g){return g/Math.PI*180},u.twipsToFD=function(g){return Math.round(2048*g/1875)},u.fdToTwips=function(g){return Math.round(1875*g/2048)},u.emuToTwips=function(g){return g/635},u.twipsToPixels=function(g){return Math.round(u.twipsToPixelsF(g))},u.inchesToPixels=function(g){return Math.round(u.DPI*g)},u.centimeterToPixel=function(g){return Math.round(this.centimeterToPixelF(g))},u.centimeterToPixelF=function(g){return g*u.DPI/u.CENTIMETERS_PER_INCH},u.millimetersToPixel=function(g){return Math.round(g/(u.CENTIMETERS_PER_INCH/u.DPI)/10)},u.pointsToPixels=function(g){return Math.round(g*u.DPI/72)},u.pointsToPixelsF=function(g){return g*u.DPI/72},u.twipsToPixelsF=function(g){return g*u.DPI/1440},u.pixelsToPoints=function(g){return Math.round(72*g/u.DPI)},u.pixelsToPointsF=function(g){return 72*g/u.DPI},u.twipsToPoints=function(g){return Math.round(this.twipsToPointsF(g))},u.twipsToPointsF=function(g){return g/20},u.twipsToInches=function(g){return g/1440},u.pixelsToInches=function(g){return g/u.DPI},u.twipsToCentimeters=function(g){return g*u.CENTIMETERS_PER_INCH/1440},u.pixelToCentimeters=function(g){return g*u.CENTIMETERS_PER_INCH/u.DPI},u.twipsToHundredthsOfMillimeter=function(g){return Math.round(127*g/72)},u.pixelsToHundredthsOfMillimeter=function(g){return Math.round(2540*g/u.DPI)},u.hundredthsOfMillimeterToTwips=function(g){return 15*g/127},u.twipsToEmu=function(g){return 635*g},u.twipsToDegree=function(g){return g/6e4},u.DPI=96,u.CENTIMETERS_PER_INCH=2.54,u.PICAS_PER_INCH=6,u}();h.UnitConverter=d},5596:(j,h)=>{Object.defineProperty(h,"__esModule",{value:!0});var d=function(){function u(){}return u.euclideanDistance=function(g,v){var p=g.x-v.x,s=g.y-v.y;return Math.sqrt(p*p+s*s)},u.manhattanDistance=function(g,v){return Math.abs(g.x-v.x)+Math.abs(g.y-v.y)},u}();h.Metrics=d},4125:(j,h)=>{Object.defineProperty(h,"__esModule",{value:!0});var d=function(){function u(g,v,p,s){this.left=g,this.right=v,this.top=p,this.bottom=s}return u.empty=function(){return new u(0,0,0,0)},Object.defineProperty(u.prototype,"horizontal",{get:function(){return this.left+this.right},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"vertical",{get:function(){return this.top+this.bottom},enumerable:!0,configurable:!0}),u.fromNumber=function(g){return new u(g,g,g,g)},u.fromOffsets=function(g){return new u(g.left,g.right,g.top,g.bottom)},u.fromSide=function(g,v){return new u(g,g,v,v)},u.prototype.normalize=function(){return this.left=Math.max(0,this.left),this.right=Math.max(0,this.right),this.top=Math.max(0,this.top),this.bottom=Math.max(0,this.bottom),this},u.prototype.toString=function(){return JSON.stringify(this)},u.prototype.isEmpty=function(){return this.left===0&&this.right===0&&this.top===0&&this.bottom===0},u.prototype.offset=function(g){return this.left+=g.left,this.right+=g.right,this.top+=g.top,this.bottom+=g.bottom,this},u.prototype.multiply=function(g,v,p,s){switch(arguments.length){case 1:return this.left*=g,this.right*=g,this.top*=g,this.bottom*=g,this;case 2:return this.left*=g,this.right*=g,this.top*=v,this.bottom*=v,this;case 4:return this.left*=g,this.right*=v,this.top*=p,this.bottom*=s,this}return this},u.prototype.clone=function(){return new u(this.left,this.right,this.top,this.bottom)},u.prototype.copyFrom=function(g){this.left=g.left,this.right=g.right,this.top=g.top,this.bottom=g.bottom},u.prototype.equals=function(g){return this.top===g.top&&this.bottom===g.bottom&&this.right===g.right&&this.left===g.left},u.prototype.applyConverter=function(g){return this.left=g(this.left),this.right=g(this.right),this.top=g(this.top),this.bottom=g(this.bottom),this},u}();h.Offsets=d},8900:(j,h)=>{Object.defineProperty(h,"__esModule",{value:!0});var d=function(){function u(g,v){this.x=g,this.y=v}return u.zero=function(){return new u(0,0)},u.fromNumber=function(g){return new u(g,g)},u.prototype.isZero=function(){return this.x===0&&this.y===0},u.prototype.toString=function(){return JSON.stringify(this)},u.prototype.copyFrom=function(g){this.x=g.x,this.y=g.y},u.prototype.clone=function(){return new u(this.x,this.y)},u.prototype.equals=function(g){return this.x===g.x&&this.y===g.y},u.prototype.offset=function(g,v){return this.x+=g,this.y+=v,this},u.prototype.offsetByPoint=function(g){return this.x+=g.x,this.y+=g.y,this},u.prototype.multiply=function(g,v){return this.x*=g,this.y*=v,this},u.prototype.negative=function(){return this.x*=-1,this.y*=-1,this},u.prototype.applyConverter=function(g){return this.x=g(this.x),this.y=g(this.y),this},u.plus=function(g,v){return new u(g.x+v.x,g.y+v.y)},u.minus=function(g,v){return new u(g.x-v.x,g.y-v.y)},u.xComparer=function(g,v){return g.x-v.x},u.yComparer=function(g,v){return g.y-v.y},u.equals=function(g,v){return g.x===v.x&&g.y===v.y},u}();h.Point=d},8011:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0});var u,g=d(7820),v=d(1104),p=d(8860),s=d(8900),i=d(6353),e=function(){function n(o,r,a,c){this.x=o,this.y=r,this.width=a,this.height=c}return Object.defineProperty(n.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"center",{get:function(){return n.center(this)},enumerable:!0,configurable:!0}),n.prototype.createRectangle=function(){return new n(this.x,this.y,this.width,this.height)},n.prototype.createSize=function(){return new i.Size(this.width,this.height)},n.prototype.createPosition=function(){return new s.Point(this.x,this.y)},n.prototype.createVerticalInterval=function(){return new p.FixedInterval(this.y,this.height)},n.prototype.createHorizontalInterval=function(){return new p.FixedInterval(this.x,this.width)},n.fromGeometry=function(o,r){return new n(o.x,o.y,r.width,r.height)},n.fromPoints=function(o,r){return new n(Math.min(o.x,r.x),Math.min(o.y,r.y),Math.abs(o.x-r.x),Math.abs(o.y-r.y))},n.fromPositions=function(o,r,a,c){return new n(Math.min(o,a),Math.min(r,c),Math.abs(a-o),Math.abs(c-r))},n.fromCenter=function(o,r){return new n(o.x-r,o.y-r,2*r,2*r)},n.prototype.isCollapsed=function(){return this.width===0||this.height===0},n.prototype.isEmpty=function(){return this.x===0&&this.y===0&&this.width===0&&this.height===0},n.prototype.toString=function(){return JSON.stringify(this)},n.prototype.setPosition=function(o){return this.x=o.x,this.y=o.y,this},n.prototype.setSize=function(o){return this.width=o.width,this.height=o.height,this},n.prototype.setGeomerty=function(o){return this.x=o.x,this.y=o.y,this.width=o.width,this.height=o.height,this},n.prototype.moveRectangle=function(o,r){return this.x+=o,this.y+=r,this},n.prototype.moveRectangleByPoint=function(o){return this.x+=o.x,this.y+=o.y,this},n.prototype.resize=function(o,r){return this.width+=o,this.height+=r,this},n.prototype.nonNegativeSize=function(){return this.width<0&&(this.width=0),this.height<0&&(this.height=0),this},n.prototype.multiply=function(o,r){return this.x*=o,this.y*=r,this.width*=o,this.height*=r,this},n.prototype.equals=function(o){return n.equals(this,o)},n.prototype.clone=function(){var o=new n(0,0,0,0);return o.copyFrom(this),o},n.prototype.copyFrom=function(o){this.x=o.x,this.y=o.y,this.width=o.width,this.height=o.height},n.prototype.containsPoint=function(o){return n.containsPoint(this,o)},n.prototype.containsRectangle=function(o){return this.x<=o.x&&this.right>=o.right&&this.y<=o.y&&this.bottom>=o.bottom},n.prototype.inflate=function(o,r){return r===void 0&&(r=o),this.x-=o,this.y-=r,this.width+=2*o,this.height+=2*r,this},n.prototype.applyOffsetsInside=function(o){return this.x+=o.left,this.y+=o.top,this.width-=o.left+o.right,this.height-=o.top+o.bottom,this},n.prototype.applyNormalizedOffsetsInside=function(o){var r=Math.max(0,o.left),a=r+Math.max(0,o.right);a!==0&&(a<=this.width?(this.x+=r,this.width-=a):(this.x+=this.width*(r/a),this.width=0));var c=Math.max(0,o.top),f=c+Math.max(0,o.bottom);return f!==0&&(f<=this.height?(this.y+=c,this.height-=f):(this.y+=this.height*(c/f),this.height=0)),this},n.prototype.applyOffsetsOutside=function(o){return this.x-=o.left,this.y-=o.top,this.width+=o.left+o.right,this.height+=o.top+o.bottom,this},n.prototype.applyConverter=function(o){return this.x=o(this.x),this.y=o(this.y),this.width=o(this.width),this.height=o(this.height),this},n.getHorizIntersection=function(o,r){return v.IntervalAlgorithms.getIntersection(new p.FixedInterval(o.x,o.width),new p.FixedInterval(r.x,r.width))},n.getVertIntersection=function(o,r){return v.IntervalAlgorithms.getIntersection(new p.FixedInterval(o.y,o.height),new p.FixedInterval(r.y,r.height))},n.getIntersection=function(o,r){var a=v.IntervalAlgorithms.getIntersection(new p.FixedInterval(o.x,o.width),new p.FixedInterval(r.x,r.width));if(!a)return null;var c=v.IntervalAlgorithms.getIntersection(new p.FixedInterval(o.y,o.height),new p.FixedInterval(r.y,r.height));return c?new n(a.start,c.start,a.length,c.length):null},n.getHorNonCollapsedIntersection=function(o,r){var a=n.getHorizIntersection(o,r);return a&&!a.isCollapsed()?a:null},n.getVertNonCollapsedIntersection=function(o,r){var a=n.getVertIntersection(o,r);return a&&!a.isCollapsed()?a:null},n.getNonCollapsedIntersection=function(o,r){var a=n.getIntersection(o,r);return a&&!a.isCollapsed()?a:null},n.areIntersected=function(o,r){return!(o.x>r.x+r.width||r.x>o.x+o.width||o.y>r.y+r.height||r.y>o.y+o.height)},n.union=function(o,r){var a=Math.max(o.x+o.width,r.x+r.width),c=Math.max(o.y+o.height,r.y+r.height),f=Math.min(o.x,r.x),m=Math.min(o.y,r.y);return new n(f,m,a-f,c-m)},n.equals=function(o,r){return o.x===r.x&&o.y===r.y&&o.width===r.width&&o.height===r.height},n.center=function(o){return new s.Point(o.x+o.width/2,o.y+o.height/2)},n.containsPoint=function(o,r){var a=o.x+o.width,c=o.y+o.height;return r.y>=o.y&&c>=r.y&&r.x>=o.x&&a>=r.x},n}();h.Rectangle=e,function(n){n[n.None=0]="None",n[n.Top=1]="Top",n[n.Bottom=2]="Bottom",n[n.Left=4]="Left",n[n.Right=8]="Right"}(u=h.HitTestDeviation||(h.HitTestDeviation={}));var t=function(){function n(o,r){this.initRectangle=o,this.initPoint=r,this.deviation=new g.Flag(u.None)}return n.prototype.calcDeviation=function(){return this.initPoint.x<this.initRectangle.x?this.deviation.set(u.Left,!0):this.initPoint.x>this.initRectangle.right&&this.deviation.set(u.Right,!0),this.initPoint.y<this.initRectangle.y?this.deviation.set(u.Top,!0):this.initPoint.y>this.initRectangle.bottom&&this.deviation.set(u.Bottom,!0),this},n.prototype.calcAdditionalParams=function(){return this.insidePoint=this.initPoint.clone(),this.offsetToInside=new s.Point(0,0),this.deviation.get(u.Left)?(this.insidePoint.x=this.initRectangle.x,this.offsetToInside.x=this.insidePoint.x-this.initPoint.x):this.deviation.get(u.Right)&&(this.insidePoint.x=this.initRectangle.right,this.offsetToInside.x=this.initPoint.x-this.insidePoint.x),this.deviation.get(u.Top)?(this.insidePoint.y=this.initRectangle.y,this.offsetToInside.y=this.insidePoint.y-this.initPoint.y):this.deviation.get(u.Bottom)&&(this.insidePoint.y=this.initRectangle.bottom,this.offsetToInside.y=this.initPoint.y-this.insidePoint.y),this},n}();h.RectangleDeviation=t},1335:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0});var u=d(8679),g=d(5596),v=d(8900),p=d(8011),s=function(){function i(e,t){this.startPoint=e,this.endPoint=t}return Object.defineProperty(i.prototype,"length",{get:function(){return g.Metrics.euclideanDistance(this.startPoint,this.endPoint)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"xLength",{get:function(){return Math.abs(this.endPoint.x-this.startPoint.x)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"yLength",{get:function(){return Math.abs(this.endPoint.y-this.startPoint.y)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"center",{get:function(){return new v.Point(this.startPoint.x+(this.endPoint.x-this.startPoint.x)/2,this.startPoint.y+(this.endPoint.y-this.startPoint.y)/2)},enumerable:!0,configurable:!0}),i.prototype.isIntersected=function(e){return this.startPoint.equals(e.startPoint)||this.endPoint.equals(e.startPoint)||this.startPoint.equals(e.endPoint)||this.endPoint.equals(e.endPoint)||this.intersectCore(e)&&e.intersectCore(this)},i.prototype.containsPoint=function(e,t){return t===void 0&&(t=1e-7),this.startPoint.equals(e)||this.endPoint.equals(e)||u.MathUtils.numberCloseTo(this.length,g.Metrics.euclideanDistance(this.startPoint,e)+g.Metrics.euclideanDistance(this.endPoint,e),t)},i.prototype.isIntersectedByRect=function(e){if(p.Rectangle.containsPoint(e,this.startPoint)||p.Rectangle.containsPoint(e,this.endPoint))return!0;var t=e.x,n=e.x+e.width,o=e.y,r=e.y+e.height;return this.isIntersected(new i(new v.Point(t,o),new v.Point(t,r)))||this.isIntersected(new i(new v.Point(n,o),new v.Point(n,r)))||this.isIntersected(new i(new v.Point(t,o),new v.Point(n,o)))||this.isIntersected(new i(new v.Point(t,r),new v.Point(n,r)))},i.prototype.intersectCore=function(e){if(this.startPoint.x===this.endPoint.x){if(this.startPoint.x-e.endPoint.x!=0)return(this.startPoint.x-e.startPoint.x)/(this.startPoint.x-e.endPoint.x)<=0;if(e.endPoint.y-this.endPoint.y!=0)return(e.endPoint.y-this.startPoint.y)/(e.endPoint.y-this.endPoint.y)<=0}if(this.startPoint.y===this.endPoint.y){if(this.startPoint.y-e.endPoint.y!=0)return(this.startPoint.y-e.startPoint.y)/(this.startPoint.y-e.endPoint.y)<=0;if(e.endPoint.x-this.endPoint.x!=0)return(e.endPoint.x-this.startPoint.x)/(e.endPoint.x-this.endPoint.x)<=0}var t=(this.endPoint.y-this.startPoint.y)/(this.endPoint.x-this.startPoint.x),n=this.startPoint.y+(e.startPoint.x-this.startPoint.x)*t,o=this.startPoint.y+(e.endPoint.x-this.startPoint.x)*t,r=e.startPoint.y-n,a=e.endPoint.y-o;return r===0&&a===0?(this.startPoint.y-n)/(this.endPoint.y-n)<=0||(this.startPoint.y-o)/(this.endPoint.y-o)<=0:r===0||a===0||r/a<0},i}();h.Segment=s},6353:(j,h)=>{Object.defineProperty(h,"__esModule",{value:!0});var d=function(){function u(g,v){this.width=g,this.height=v}return u.empty=function(){return new u(0,0)},u.fromNumber=function(g){return new u(g,g)},u.initByCommonAction=function(g){var v=function(s){return s.width},p=function(s){return s.height};return new u(g(v,p),g(p,v))},u.prototype.isEmpty=function(){return this.width===0&&this.height===0},u.prototype.toString=function(){return JSON.stringify(this)},u.prototype.nonNegativeSize=function(){return this.width<0&&(this.width=0),this.height<0&&(this.height=0),this},u.prototype.offset=function(g,v){return this.width=this.width+g,this.height=this.height+v,this},u.prototype.multiply=function(g,v){return this.width*=g,this.height*=v,this},u.prototype.equals=function(g){return this.width===g.width&&this.height===g.height},u.prototype.clone=function(){return new u(this.width,this.height)},u.prototype.copyFrom=function(g){this.width=g.width,this.height=g.height},u.prototype.applyConverter=function(g){return this.width=g(this.width),this.height=g(this.height),this},u.equals=function(g,v){return g.width===v.width&&g.height===v.height},u}();h.Size=d},9716:(j,h)=>{Object.defineProperty(h,"__esModule",{value:!0});var d=function(){function u(g,v){g===void 0&&(g=0),v===void 0&&(v=0),this.x=g,this.y=v}return Object.defineProperty(u.prototype,"length",{get:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},enumerable:!0,configurable:!0}),u.fromPoints=function(g,v){return new u(v.x-g.x,v.y-g.y)},u.fromSegment=function(g){return new u(g.endPoint.x-g.startPoint.x,g.endPoint.y-g.startPoint.y)},u.prototype.normalize=function(){var g=this.length;return g!==0&&(this.x/=g,this.y/=g),this},u.prototype.negative=function(){return this.x*=-1,this.y*=-1,this},Object.defineProperty(u,"axisX",{get:function(){return new u(1,0)},enumerable:!0,configurable:!0}),Object.defineProperty(u,"axisY",{get:function(){return new u(0,1)},enumerable:!0,configurable:!0}),u.angleBetween=function(g,v){var p=u.scalarProduct(g,v)/(g.length*v.length);return Math.acos(p)},u.scalarProduct=function(g,v){return g.x*v.x+g.y*v.y},u}();h.Vector=d},1104:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0});var u=d(2940),g=d(2400),v=d(8860),p=d(6102),s=function(){function i(){}return i.oneConstainsOtherArraysOfInterval=function(e,t){for(var n=u.ListUtils.deepCopy(t),o=n.pop();o;){if(!u.ListUtils.unsafeAnyOf(e,function(r){return r.containsInterval(o)}))return!1;o=n.pop()}return!0},i.getIntersection=function(e,t){return i.getIntersectionTemplate(e,t,e)},i.getIntersectionTemplate=function(e,t,n){var o=Math.max(e.start,t.start),r=Math.min(e.end,t.end);return o>r?null:n.makeByStartEnd(o,r)},i.getIntersectionNonNullLength=function(e,t){return i.getIntersectionNonNullLengthTemplate(e,t,e)},i.getIntersectionNonNullLengthTemplate=function(e,t,n){var o=i.getIntersectionTemplate(e,t,n);return o&&o.length?o:null},i.getIntersectionsTwoArraysOfInterval=function(e,t){return i.getIntersectionsTwoArraysOfIntervalTemplate(e,t,e[0])},i.getIntersectionsTwoArraysOfIntervalTemplate=function(e,t,n){for(var o=[],r=e.length,a=t.length,c=0,f=0,m=e[c],y=t[f],l=null;c<r&&f<a;){var P=i.getIntersectionTemplate(m,y,n);P&&(l&&l.end===P.start?l.length+=P.length:(l=P,o.push(l))),m.end<y.end?m=e[++c]:y=t[++f]}return o},i.getAffectedObjects=function(e,t,n,o){return n===void 0&&(n=function(r){return g.SearchUtils.normedInterpolationIndexOf(e,function(a){return a.interval.start},r)}),o===void 0&&(o=function(r,a,c){return r.start===c&&a===0}),i.getAffectedObjectsTemplate(e,t,t[0],n,o)},i.getAffectedObjectsTemplate=function(e,t,n,o,r){o===void 0&&(o=function(I){return g.SearchUtils.normedInterpolationIndexOf(e,function(x){return x.interval.start},I)}),r===void 0&&(r=function(I,x,b){return I.start===b&&x===0});for(var a=new p.SparseIntervalsCollector(n),c=0,f=t;c<f.length;c++)for(var m=f[c],y=Math.max(0,o(m.start,e)),l=void 0;l=e[y];y++){var P=l.interval;if(P.start>m.end)break;var C=i.getIntersectionTemplate(P,m,n);C&&(C.length||r(P,m.length,C.start))&&a.add(y)}return a.getIntervals()},i.handleAffectedObjects=function(e,t,n,o){o===void 0&&(o=function(C){return g.SearchUtils.normedInterpolationIndexOf(e,function(I){return I.interval.start},C)});for(var r=new v.FixedInterval(0,0),a=0,c=t;a<c.length;a++)for(var f=c[a],m=Math.max(0,o(f.start,e)),y=void 0;y=e[m];m++){var l=y.interval;if(l.start>f.end)break;var P=i.getIntersectionTemplate(l,f,r);P&&n(y,m,f,P)}},i.getMergedIntervals=function(e,t){return i.getMergedIntervalsTemplate(e,t,e[0])},i.getMergedIntervalsTemplate=function(e,t,n){if(e.length<2)return e.length>0?[n.makeByStartLength(e[0].start,e[0].length)]:[];for(var o=t?[].concat(e).sort(function(y,l){return y.start-l.start}):e,r=[],a=0,c=void 0;c=o[a];){var f=c.start,m=c.end;for(++a;(c=o[a])!==void 0&&c.start<=m;a++)c.end>m&&(m=c.end);r.push(n.makeByStartEnd(f,m))}return r},i.reflectIntervals=function(e,t){return i.reflectIntervalsTemplate(e,t,t)},i.reflectIntervalsTemplate=function(e,t,n){if(!e.length)return[n.makeByStartLength(t.start,t.length)];var o=u.ListUtils.last(e).end,r=u.ListUtils.reducedMap(e,function(a,c){return i.getIntersectionNonNullLengthTemplate(n.makeByStartEnd(e[c-1].end,a.start),t,n)},1);return t.start<e[0].start&&r.unshift(n.makeByStartEnd(t.start,e[0].start)),t.end>o&&r.push(n.makeByStartEnd(o,t.end)),r},i.reflectionOfPointOnInterval=function(e,t,n){return(e-t.start)/t.length*n.length+n.start},i}();h.IntervalAlgorithms=s},7814:(j,h)=>{Object.defineProperty(h,"__esModule",{value:!0});var d=function(){function u(){}return Object.defineProperty(u.prototype,"center",{get:function(){return this.start+this.length/2},enumerable:!0,configurable:!0}),u.prototype.isNormalized=function(){return this.end>=this.start},u.prototype.isCollapsed=function(){return this.length===0},u.prototype.equals=function(g){return this.start===g.start&&this.end===g.end},u.isCollapsed=function(g){return!g[1]&&g[0].isCollapsed()},u.prototype.containsInterval=function(g){return this.start<=g.start&&this.end>=g.end},u.prototype.containsIntervalWithoutEnd=function(g){return this.start<=g.start&&this.end>g.end},u.prototype.contains=function(g){return this.start<=g&&g<this.end},u.prototype.containsWithIntervalEnd=function(g){return this.start<=g&&g<=this.end},u.prototype.containsWithoutIntervalEndAndStart=function(g){return this.start<g&&g<this.end},u}();h.ConstInterval=d},8860:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0});var u=d(655),g=function(v){function p(s,i){var e=v.call(this)||this;return e.start=s,e.length=i,e}return u.__extends(p,v),Object.defineProperty(p.prototype,"end",{get:function(){return this.start+this.length},set:function(s){this.length=s-this.start},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"center",{get:function(){return this.start+this.length/2},enumerable:!0,configurable:!0}),p.prototype.copyFrom=function(s){this.start=s.start,this.length=s.length},p.prototype.equals=function(s){return s&&this.start===s.start&&this.length===s.length},p.prototype.clone=function(){return new p(this.start,this.length)},p.prototype.makeByStartEnd=function(s,i){return new p(s,i-s)},p.prototype.makeByStartLength=function(s,i){return new p(s,i)},p.prototype.makeByLengthEnd=function(s,i){return new p(i-s,s)},p.fromPositions=function(s,i){return new p(s,i-s)},p.makeByConstInterval=function(s){return new p(s.start,s.length)},p.prototype.expand=function(s){var i=Math.max(s.end,this.end);return this.start=Math.min(s.start,this.start),this.end=i,this},p}(d(8678).MutableInterval);h.FixedInterval=g},8678:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0});var u=d(655),g=function(v){function p(){return v!==null&&v.apply(this,arguments)||this}return u.__extends(p,v),p.prototype.normalizeLength=function(){return this.length<0&&(this.length=0),this},p}(d(7814).ConstInterval);h.MutableInterval=g},6102:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0});var u=d(448),g=function(){function v(p){this.intervals=[],this.template=p}return v.prototype.add=function(p){this.curr&&this.curr.end===p?this.curr.length++:(this.curr=this.template.makeByStartLength(p,1),this.intervals.push(this.curr))},v.prototype.getIntervals=function(){return new u.SparseIntervals(this.intervals)},v}();h.SparseIntervalsCollector=g},448:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0});var u=d(8094),g=d(510),v=function(){function p(s){s===void 0&&(s=[]),this.list=s,this._count=0,this._numIntervals=0;for(var i=0,e=s;i<e.length;i++){var t=e[i];this._count+=t.length,this._numIntervals++}}return Object.defineProperty(p.prototype,"count",{get:function(){return this._count},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"numIntervals",{get:function(){return this._numIntervals},enumerable:!0,configurable:!0}),p.prototype.getInterval=function(s){return this.list[s]},p.prototype.getNativeIterator=function(){return new u.SparseIntervalsIterator(this)},p.prototype.getObjectsIterator=function(s){return new g.SparseObjectsIterator(this,s)},p}();h.SparseIntervals=v},8094:(j,h)=>{Object.defineProperty(h,"__esModule",{value:!0});var d=function(){function u(g){this.sparseIntervals=g,this.intervalIndex=-1}return Object.defineProperty(u.prototype,"isStarted",{get:function(){return!!this.curr},enumerable:!0,configurable:!0}),u.prototype.moveNext=function(){return this.curr&&this.posInInterval+1<this.curr.length?(this.posInInterval++,this.index++,this.initObject(),!0):this.intervalIndex+1<this.sparseIntervals.numIntervals&&(this.intervalIndex++,this.curr=this.sparseIntervals.getInterval(this.intervalIndex),this.curr.length?(this.posInInterval=0,this.index=this.curr.start,this.initObject(),!0):this.moveNext())},u.prototype.movePrev=function(){return this.curr&&this.posInInterval-1>=this.curr.start?(this.posInInterval--,this.index--,this.initObject(),!0):(this.isStarted||(this.intervalIndex=this.sparseIntervals.numIntervals),this.intervalIndex-1>=0&&(this.intervalIndex--,this.curr=this.sparseIntervals.getInterval(this.intervalIndex),this.posInInterval=Math.max(this.curr.length-1,this.curr.start),this.index=this.curr.start,this.initObject(),!0))},u.prototype.initObject=function(){},u}();h.SparseIntervalsIterator=d},510:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0});var u=d(655),g=function(v){function p(s,i){var e=v.call(this,s)||this;return e.objects=i,e}return u.__extends(p,v),p.prototype.initObject=function(){this.obj=this.objects[this.index]},p}(d(8094).SparseIntervalsIterator);h.SparseObjectsIterator=g},6477:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0});var u=d(2674),g=d(4633),v=function(){function p(){}return p.normalizeToDataUrl=function(s,i){return p.checkPrependDataUrl(s)||(s=p.prependByDataUrl(s,i)),s},p.prependByDataUrl=function(s,i){return"data:"+i+";base64,"+s},p.checkPrependDataUrl=function(s){return p.dataUrl.test(s)},p.deleteDataUrlPrefix=function(s){return s.replace(p.dataUrl,"")},p.getUint8Array=function(s){for(var i=(s=atob(s)).length,e=new Uint8Array(i);i--;)e[i]=s.charCodeAt(i);return e},p.fromArrayBuffer=function(s){for(var i=[],e=new Uint8Array(s),t=e.byteLength,n=0;n<t;n++)i.push(String.fromCharCode(e[n]));return window.btoa(i.join(""))},p.getFileFromBase64=function(s,i,e){i===void 0&&(i="");var t=p.getUint8Array(s);return u.FileUtils.createFile([t],i,e)},p.getMimeTypeAsString=function(s){var i=s.match(p.dataUrl);return i?i[1]:null},p.getKnownMimeType=function(s){var i=s.match(p.dataUrl);return i?g.MimeTypeUtils.stringTypeToType(i[1]):g.DxMimeType.Unknown},p.fromBlobAsArrayBuffer=function(s,i){var e=new FileReader;e.onloadend=function(){return i(p.fromArrayBuffer(e.result))},e.readAsArrayBuffer(s)},p.fromBlobAsDataUrl=function(s,i){var e=new FileReader;e.onloadend=function(){return i(e.result)},e.readAsDataURL(s)},p.dataUrl=/^data:(.*?)(;(.*?))??(;base64)?,/,p}();h.Base64Utils=v},13:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0});var u=d(49),g=function(){function v(){}return v.getAlpha=function(p){return p>>24&255},v.getRed=function(p){return p>>16&255},v.getGreen=function(p){return p>>8&255},v.getBlue=function(p){return 255&p},v.redPartToString=function(p){var s=v.getRed(p).toString(16);return s.length>1?s:"0"+s},v.greenPartToString=function(p){var s=v.getGreen(p).toString(16);return s.length>1?s:"0"+s},v.bluePartToString=function(p){var s=v.getBlue(p).toString(16);return s.length>1?s:"0"+s},v.fromArgbNumber=function(p,s,i,e){return p<<24|s<<16|i<<8|e},v.fromRgbaString=function(p,s){s===void 0&&(s=255);var i=p.replace(/ +/g,"").match(/(rgba?)|(\d+(\.\d+)?%?)|(\.\d+)/g);if(i&&i.length>3){for(var e=[],t=1,n=void 0;n=i[t];t++){var o=n.indexOf("%")!==-1?Math.round(2.55*parseFloat(n)):parseInt(n);if(o<0||o>255)return null;e.push(o)}if(p.indexOf("rgba")===0){if(isNaN(e[3])||e[3]<0||e[3]>1)return null;e[3]<=1&&(e[3]=Math.round(255*e[3]))}else if(e[3])return null;return(255&e[0])<<16|(255&e[1])<<8|255&e[2]|(255&(e.length>3?e[3]:s))<<24}return null},v.fromHashString=function(p,s){return s===void 0&&(s=255),v.isHashColorString(p)?(p.charAt(0)==="#"&&(p=p.substr(1)),p.length===3&&(p=u.StringUtils.repeat(p.charAt(0),2)+u.StringUtils.repeat(p.charAt(1),2)+u.StringUtils.repeat(p.charAt(2),2)),parseInt(p,16)|s<<24):null},v.fromColorName=function(p,s){s===void 0&&(s=255);var i=v.colorNames[p.toLowerCase()];return i?v.fromHashString(i,s):null},v.fromString=function(p,s){s===void 0&&(s=255);var i=v.fromRgbaString(p,s);if(i!==null)return i;var e=v.fromHashString(p,s);return e!==null?e:v.fromColorName(p,s)},v.colorToHash=function(p){return"#"+v.redPartToString(p)+v.greenPartToString(p)+v.bluePartToString(p)},v.stringToHash=function(p){var s=this.fromString(p);return s!==null?this.colorToHash(s):null},v.isHashColorString=function(p){return/^#?([0-9a-f]{6})$/i.test(p)||/^#?([0-9a-f]{3})$/i.test(p)},v.isKnownColorName=function(p){return!!v.colorNames[p.toLowerCase()]},v.isGray=function(p){var s=v.getRed(p);return s===v.getGreen(p)&&s===v.getBlue(p)},v.DARK_COLOR=-16777216,v.LIGHT_COLOR=-1,v.colorNames={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",feldspar:"#d19275",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#00ff00",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslateblue:"#8470ff",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",violetred:"#d02090",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32",windowtext:"#000000"},v}();h.ColorUtils=g},2491:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0});var u=d(49);h.isDefined=function(g){return g!=null},h.boolToInt=function(g){return g?1:0},h.boolToString=function(g){return g?"1":"0"},h.isNumber=function(g){return typeof g=="number"},h.isString=function(g){return typeof g=="string"},h.isNonNullString=function(g){return!!g},h.isEven=function(g){return g%2!=0},h.isOdd=function(g){return g%2==0},h.numberToStringBin=function(g,v){return v===void 0&&(v=0),u.StringUtils.padLeft(g.toString(2),v,"0")},h.numberToStringHex=function(g,v){return v===void 0&&(v=0),u.StringUtils.padLeft(g.toString(16),v,"0")}},4170:(j,h)=>{Object.defineProperty(h,"__esModule",{value:!0});var d=function(){function g(){}return g.number=function(v,p){return v-p},g.string=function(v,p){return v===p?0:v>p?1:-1},g.stringIgnoreCase=function(v,p){return(v=v.toLowerCase())===(p=p.toLowerCase())?0:v>p?1:-1},g}();h.Comparers=d;var u=function(){function g(){}return g.simpleType=function(v,p){return v===p},g.object=function(v,p){return v&&p&&(v===p||v.equals(p))},g}();h.Equals=u},6907:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0});var u=d(9279),g=d(2491),v=d(8679),p=d(49),s=function(){function t(){}return t.clearInnerHtml=function(n){for(;n.firstChild;)n.removeChild(n.firstChild)},t.setStylePosition=function(n,o){n.left=v.MathUtils.round(o.x,3)+"px",n.top=v.MathUtils.round(o.y,3)+"px"},t.setStyleSize=function(n,o){n.width=v.MathUtils.round(o.width,3)+"px",n.height=v.MathUtils.round(o.height,3)+"px"},t.setStyleSizeAndPosition=function(n,o){t.setStylePosition(n,o),t.setStyleSize(n,o)},t.hideNode=function(n){if(n){var o=n.parentNode;o&&o.removeChild(n)}},t.isHTMLElementNode=function(n){return n.nodeType===Node.ELEMENT_NODE},t.isTextNode=function(n){return n.nodeType===Node.TEXT_NODE},t.isElementNode=function(n){return n.nodeType===Node.ELEMENT_NODE},t.isHTMLTableRowElement=function(n){return n.tagName==="TR"},t.isItParent=function(n,o){if(!n||!o)return!1;for(;o;){if(o===n)return!0;if(o.tagName==="BODY")return!1;o=o.parentNode}return!1},t.getParentByTagName=function(n,o){for(o=o.toUpperCase();n;){if(n.tagName==="BODY")return null;if(n.tagName===o)return n;n=n.parentNode}return null},t.getDocumentScrollTop=function(){var n=u.Browser.IE&&t.getCurrentStyle(document.body).overflow==="hidden"&&document.body.scrollTop>0;return u.Browser.WebKitFamily||u.Browser.Edge||n?u.Browser.MacOSMobilePlatform?window.pageYOffset:u.Browser.WebKitFamily&&document.documentElement.scrollTop||document.body.scrollTop:document.documentElement.scrollTop},t.getDocumentScrollLeft=function(){var n=u.Browser.IE&&t.getCurrentStyle(document.body).overflow==="hidden"&&document.body.scrollLeft>0;return u.Browser.Edge||n?document.body?document.body.scrollLeft:document.documentElement.scrollLeft:u.Browser.WebKitFamily?document.documentElement.scrollLeft||document.body.scrollLeft:document.documentElement.scrollLeft},t.getCurrentStyle=function(n){if(n.currentStyle)return n.currentStyle;if(document.defaultView&&document.defaultView.getComputedStyle){var o=document.defaultView.getComputedStyle(n,null);if(!o&&u.Browser.Firefox&&window.frameElement){for(var r=[],a=window.frameElement;!(o=document.defaultView.getComputedStyle(n,null));)r.push([a,a.style.display]),a.style.setProperty("display","block","important"),a=a.tagName==="BODY"?a.ownerDocument.defaultView.frameElement:a.parentNode;o=function(m){if(typeof m!="object"||!g.isDefined(m))return m;var y={};for(var l in m)y[l]=m[l];return y}(o);for(var c=void 0,f=0;c=r[f];f++)c[0].style.display=c[1];document.body.offsetWidth}return o}return window.getComputedStyle(n,null)},t.setFocus=function(n){function o(){try{n.focus(),u.Browser.IE&&document.activeElement!==n&&n.focus()}catch{}}u.Browser.MacOSMobilePlatform?o():setTimeout(function(){o()},100)},t.hasClassName=function(n,o){try{var r=o.split(" "),a=n.classList;if(a){for(var c=r.length-1;c>=0;c--)if(!a.contains(r[c]))return!1}else{var f=n.getAttribute&&n.getAttribute("class");if(!f)return!1;var m=f.split(" ");for(c=r.length-1;c>=0;c--)if(m.indexOf(r[c])<0)return!1}return!0}catch{return!1}},t.addClassName=function(n,o){if(!t.hasClassName(n,o)){var r=n.getAttribute&&n.getAttribute("class");n.setAttribute("class",r===""?o:r+" "+o)}},t.removeClassName=function(n,o){var r=" "+(n.getAttribute&&n.getAttribute("class"))+" ",a=r.replace(" "+o+" "," ");r.length!==a.length&&n.setAttribute("class",p.StringUtils.trim(a))},t.toggleClassName=function(n,o,r){r===void 0?t.hasClassName(n,o)?t.removeClassName(n,o):t.addClassName(n,o):r?t.addClassName(n,o):t.removeClassName(n,o)},t.pxToInt=function(n){return i(n,parseInt)},t.pxToFloat=function(n){return i(n,parseFloat)},t.getAbsolutePositionY=function(n){function o(r){return Math.round(r.getBoundingClientRect().top+t.getDocumentScrollTop())}return n?u.Browser.IE?function(r){return u.Browser.IE&&r.parentNode===null?0:r.getBoundingClientRect().top+t.getDocumentScrollTop()}(n):u.Browser.Firefox&&u.Browser.Version>=3?o(n):u.Browser.Opera?function(r){var a=!0;r&&t.isHTMLTableRowElement(r)&&r.cells.length>0&&(r=r.cells[0]);for(var c=e(r,!1);r!=null;)c+=r.offsetTop,a||(c-=r.scrollTop),r=r.offsetParent,a=!1;return c+=document.body.scrollTop}(n):u.Browser.NetscapeFamily&&(!u.Browser.Firefox||u.Browser.Version<3)?function(r){for(var a=e(r,!1),c=!0;r!=null;){if(a+=r.offsetTop,c||r.offsetParent==null||(a-=r.scrollTop),!c&&u.Browser.Firefox){var f=t.getCurrentStyle(r);r.tagName==="DIV"&&f.overflow!=="visible"&&(a+=t.pxToInt(f.borderTopWidth))}c=!1,r=r.offsetParent}return a}(n):u.Browser.WebKitFamily||u.Browser.Edge?o(n):function(r){for(var a=0,c=!0;r!=null;)a+=r.offsetTop,c||r.offsetParent==null||(a-=r.scrollTop),c=!1,r=r.offsetParent;return a}(n):0},t.getAbsolutePositionX=function(n){function o(r){return Math.round(r.getBoundingClientRect().left+t.getDocumentScrollLeft())}return n?u.Browser.IE?function(r){return u.Browser.IE&&r.parentNode===null?0:r.getBoundingClientRect().left+t.getDocumentScrollLeft()}(n):u.Browser.Firefox&&u.Browser.Version>=3?o(n):u.Browser.Opera&&u.Browser.Version<=12?function(r){for(var a=!0,c=e(r,!0);r!=null;)c+=r.offsetLeft,a||(c-=r.scrollLeft),r=r.offsetParent,a=!1;return c+=document.body.scrollLeft}(n):u.Browser.NetscapeFamily&&(!u.Browser.Firefox||u.Browser.Version<3)?function(r){for(var a=e(r,!0),c=!0;r!=null;){if(a+=r.offsetLeft,c||r.offsetParent==null||(a-=r.scrollLeft),!c&&u.Browser.Firefox){var f=t.getCurrentStyle(r);r.tagName==="DIV"&&f.overflow!=="visible"&&(a+=t.pxToInt(f.borderLeftWidth))}c=!1,r=r.offsetParent}return a}(n):u.Browser.WebKitFamily||u.Browser.Edge?o(n):function(r){for(var a=0,c=!0;r!=null;)a+=r.offsetLeft,c||r.offsetParent==null||(a-=r.scrollLeft),c=!1,r=r.offsetParent;return a}(n):0},t.isInteractiveControl=function(n){return["A","INPUT","SELECT","OPTION","TEXTAREA","BUTTON","IFRAME"].indexOf(n.tagName)>-1},t.getClearClientHeight=function(n){return n.offsetHeight-(t.getTopBottomPaddings(n)+t.getVerticalBordersWidth(n))},t.getTopBottomPaddings=function(n,o){var r=o||t.getCurrentStyle(n);return t.pxToInt(r.paddingTop)+t.pxToInt(r.paddingBottom)},t.getVerticalBordersWidth=function(n,o){g.isDefined(o)||(o=u.Browser.IE&&u.Browser.MajorVersion!==9&&window.getComputedStyle?window.getComputedStyle(n):t.getCurrentStyle(n));var r=0;return o.borderTopStyle!=="none"&&(r+=t.pxToFloat(o.borderTopWidth)),o.borderBottomStyle!=="none"&&(r+=t.pxToFloat(o.borderBottomWidth)),r},t.getNodes=function(n,o){for(var r=n.all||n.getElementsByTagName("*"),a=[],c=0;c<r.length;c++){var f=r[c];o(f)&&a.push(f)}return a},t.getChildNodes=function(n,o){for(var r=n.childNodes,a=[],c=0;c<r.length;c++){var f=r[c];o(f)&&a.push(f)}return a},t.getNodesByClassName=function(n,o){if(n.querySelectorAll){var r=n.querySelectorAll("."+o),a=[];return r.forEach(function(c){return a.push(c)}),a}return t.getNodes(n,function(c){return t.hasClassName(c,o)})},t.getChildNodesByClassName=function(n,o){return n.querySelectorAll?function(r,a){for(var c=[],f=0;f<r.length;f++){var m=r[f];a(m)&&c.push(m)}return c}(n.querySelectorAll("."+o),function(r){return r.parentNode===n}):t.getChildNodes(n,function(r){return!!t.isElementNode(r)&&g.isNonNullString(r.className)&&t.hasClassName(r,r.className)})},t.getVerticalScrollBarWidth=function(){if(t.verticalScrollBarWidth===void 0){var n=document.createElement("DIV");n.style.cssText="position: absolute; top: 0px; left: 0px; visibility: hidden; width: 200px; height: 150px; overflow: hidden; box-sizing: content-box",document.body.appendChild(n);var o=document.createElement("P");n.appendChild(o),o.style.cssText="width: 100%; height: 200px;";var r=o.offsetWidth;n.style.overflow="scroll";var a=o.offsetWidth;r===a&&(a=n.clientWidth),t.verticalScrollBarWidth=r-a,document.body.removeChild(n)}return t.verticalScrollBarWidth},t.getHorizontalBordersWidth=function(n,o){g.isDefined(o)||(o=u.Browser.IE&&window.getComputedStyle?window.getComputedStyle(n):t.getCurrentStyle(n));var r=0;return o.borderLeftStyle!=="none"&&(r+=t.pxToFloat(o.borderLeftWidth)),o.borderRightStyle!=="none"&&(r+=t.pxToFloat(o.borderRightWidth)),r},t.getFontFamiliesFromCssString=function(n){return n.split(",").map(function(o){return p.StringUtils.trim(o.replace(/'|"/gi,""))})},t.getInnerText=function(n){if(u.Browser.Safari&&u.Browser.MajorVersion<=5){t.html2PlainTextFilter===null&&(t.html2PlainTextFilter=document.createElement("DIV"),t.html2PlainTextFilter.style.width="0",t.html2PlainTextFilter.style.height="0",t.html2PlainTextFilter.style.overflow="visible",t.html2PlainTextFilter.style.display="none",document.body.appendChild(t.html2PlainTextFilter));var o=t.html2PlainTextFilter;o.innerHTML=n.innerHTML,o.style.display="";var r=o.innerText;return o.style.display="none",r}return u.Browser.NetscapeFamily||u.Browser.WebKitFamily||u.Browser.IE&&u.Browser.Version>=9||u.Browser.Edge?n.textContent:n.innerText},t.html2PlainTextFilter=null,t.verticalScrollBarWidth=void 0,t}();function i(t,n){var o=0;if(g.isDefined(t)&&t!=="")try{var r=t.indexOf("px");r>-1&&(o=n(t.substr(0,r)))}catch{}return o}function e(t,n){for(var o=0,r=!0;t!=null&&t.tagName!=="BODY";){var a=s.getCurrentStyle(t);if(a.position==="absolute")break;r||t.tagName!=="DIV"||a.position!==""&&a.position!=="static"||(o-=n?t.scrollLeft:t.scrollTop),t=t.parentNode,r=!1}return o}h.DomUtils=s},9712:(j,h)=>{Object.defineProperty(h,"__esModule",{value:!0});var d=function(){function u(){}return u.encodeHtml=function(g){return g.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},u.decodeHtml=function(g){return g.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">")},u.prepareTextForRequest=function(g){return g.replace(/%/g,"%25").replace(/&/g,"%26amp;").replace(/\+/g,"%2B").replace(/</g,"%26lt;").replace(/>/g,"%26gt;").replace(/"/g,"%26quot;")},u.prepareTextForCallBackRequest=function(g){return g.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},u.decodeViaTextArea=function(g){var v=document.createElement("TEXTAREA");return v.innerHTML=g,v.value},u}();h.EncodeUtils=d},3714:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0});var u=d(9279),g=d(2491),v=d(6907),p=d(1632),s=function(){function i(){}return i.preventEvent=function(e){e.cancelable&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},i.getEventSource=function(e){return g.isDefined(e)?i.getEventSourceCore(e):null},i.getEventSourceByPosition=function(e){if(!g.isDefined(e))return null;if(!document.elementFromPoint)return i.getEventSourceCore(e);var t=i.getEventX(e)-(i.clientEventRequiresDocScrollCorrection()?v.DomUtils.getDocumentScrollLeft():0),n=i.getEventY(e)-(i.clientEventRequiresDocScrollCorrection()?v.DomUtils.getDocumentScrollTop():0);return t===void 0||n===void 0?i.getEventSourceCore(e):document.elementFromPoint(t,n)},i.getEventSourceCore=function(e){return e.srcElement?e.srcElement:e.target},i.getMouseWheelEventName=function(){return u.Browser.Safari?"mousewheel":u.Browser.NetscapeFamily&&u.Browser.MajorVersion<17?"DOMMouseScroll":"wheel"},i.isLeftButtonPressed=function(e){return!!p.TouchUtils.isTouchEvent(e)||!!(e=u.Browser.IE&&g.isDefined(event)?event:e)&&(u.Browser.IE&&u.Browser.Version<11?!!u.Browser.MSTouchUI||e.button%2==1:u.Browser.WebKitFamily?e.type==="pointermove"||e.type==="pointerenter"||e.type==="pointerleave"?e.buttons===1:e.which===1:u.Browser.NetscapeFamily||u.Browser.Edge||u.Browser.IE&&u.Browser.Version>=11?i.isMoveEventName(e.type)?e.buttons===1:e.which===1:!u.Browser.Opera||e.button===0)},i.isMoveEventName=function(e){return e===p.TouchUtils.touchMouseMoveEventName||e===i.getMoveEventName()},i.getMoveEventName=function(){return window.PointerEvent?"pointermove":u.Browser.TouchUI?"touchmove":"mousemove"},i.preventEventAndBubble=function(e){i.preventEvent(e),e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0},i.clientEventRequiresDocScrollCorrection=function(){var e=u.Browser.Safari&&u.Browser.Version<3,t=u.Browser.MacOSMobilePlatform&&u.Browser.Version<5.1;return u.Browser.AndroidDefaultBrowser||u.Browser.AndroidChromeBrowser||!(e||t)},i.getEventX=function(e){return p.TouchUtils.isTouchEvent(e)?p.TouchUtils.getEventX(e):e.clientX+(i.clientEventRequiresDocScrollCorrection()?v.DomUtils.getDocumentScrollLeft():0)},i.getEventY=function(e){return p.TouchUtils.isTouchEvent(e)?p.TouchUtils.getEventY(e):e.clientY+(i.clientEventRequiresDocScrollCorrection()?v.DomUtils.getDocumentScrollTop():0)},i.cancelBubble=function(e){e.cancelBubble=!0},i.getWheelDelta=function(e){var t;return t=u.Browser.NetscapeFamily&&u.Browser.MajorVersion<17?-e.detail:u.Browser.Safari?e.wheelDelta:-e.deltaY,u.Browser.Opera&&u.Browser.Version<9&&(t=-t),t},i}();h.EvtUtils=s},2674:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0});var u=d(9279),g=d(6477),v=d(2491),p=function(){function s(){}return s.loadJavascriptFile=function(i,e){var t,n=document.getElementsByTagName("head")[0];if(!n){n=document.createElement("head");var o=document.getElementsByTagName("body")[0];(t=o.parentNode)===null||t===void 0||t.insertBefore(n,o)}var r=document.createElement("script");return r.onload=e,r.src=i,n.appendChild(r),{htmlScriptElement:r}},s.startDownloadFileLocal=function(i,e){if(i instanceof ArrayBuffer&&(i=g.Base64Utils.fromArrayBuffer(i)),v.isString(i)&&(i=g.Base64Utils.getFileFromBase64(i)),window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(i,e);else{var t=document.createElement("a"),n=URL.createObjectURL(i);t.href=n,t.download=e,document.body.appendChild(t),t.click(),setTimeout(function(){document.body.removeChild(t),window.URL.revokeObjectURL(n)},0)}},s.createFile=function(i,e,t){var n;if(u.Browser.IE||u.Browser.Edge&&u.Browser.MajorVersion<86){var o=new Blob(i,t);return o.lastModifiedDate=(n=t==null?void 0:t.lastModified)!==null&&n!==void 0?n:Date.now(),o.name=e,o}return new File(i,e,t)},s.isFile=function(i){return u.Browser.IE||u.Browser.Edge&&u.Browser.MajorVersion<86?i instanceof File||i instanceof Blob&&v.isDefined(i.name):i instanceof File},s}();h.FileUtils=p},2153:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0});var u,g,v=d(9279),p=d(9712),s=d(49),i=function(){function e(){}return e.getKeyModifiers=function(t){var n=0;return t.altKey&&(n|=u.Alt),t.ctrlKey&&(n|=u.Ctrl),t.shiftKey&&(n|=u.Shift),t.metaKey&&(n|=u.Meta),n},e.getShortcutCode=function(t,n,o,r,a){var c=t;return c|=n?u.Ctrl:0,c|=o?u.Shift:0,c|=r?u.Alt:0,c|=a?u.Meta:0},e.getShortcutCodeByEvent=function(t){return e.getShortcutCode(e.getEventKeyCode(t),t.ctrlKey,t.shiftKey,t.altKey,!!v.Browser.MacOSPlatform&&t.metaKey)},e.getEventKeyCode=function(t){return v.Browser.NetscapeFamily||v.Browser.Opera?t.which:t.keyCode},e.parseShortcutString=function(t){if(!t)return 0;var n=!1,o=!1,r=!1,a=!1,c=null,f=t.toString().split("+");if(f.length>0)for(var m=0;m<f.length;m++){var y=s.StringUtils.trim(f[m].toUpperCase());switch(y){case"CONTROL":case"CONTROLKEY":case"CTRL":n=!0;break;case"SHIFT":case"SHIFTKEY":o=!0;break;case"ALT":r=!0;break;case"CMD":a=!0;break;case"F1":c=g.F1;break;case"F2":c=g.F2;break;case"F3":c=g.F3;break;case"F4":c=g.F4;break;case"F5":c=g.F5;break;case"F6":c=g.F6;break;case"F7":c=g.F7;break;case"F8":c=g.F8;break;case"F9":c=g.F9;break;case"F10":c=g.F10;break;case"F11":c=g.F11;break;case"F12":c=g.F12;break;case"RETURN":case"ENTER":c=g.Enter;break;case"HOME":c=g.Home;break;case"END":c=g.End;break;case"LEFT":c=g.Left;break;case"RIGHT":c=g.Right;break;case"UP":c=g.Up;break;case"DOWN":c=g.Down;break;case"PAGEUP":c=g.PageUp;break;case"PAGEDOWN":c=g.PageDown;break;case"SPACE":c=g.Space;break;case"TAB":c=g.Tab;break;case"BACKSPACE":case"BACK":c=g.Backspace;break;case"CONTEXT":c=g.ContextMenu;break;case"ESCAPE":case"ESC":c=g.Esc;break;case"DELETE":case"DEL":c=g.Delete;break;case"INSERT":case"INS":c=g.Insert;break;case"PLUS":c="+".charCodeAt(0);break;default:c=y.charCodeAt(0)}}else alert(p.EncodeUtils.decodeViaTextArea("Invalid shortcut"));return e.getShortcutCode(c,n,o,r,a)},e}();h.KeyUtils=i,function(e){e[e.None=0]="None",e[e.Ctrl=65536]="Ctrl",e[e.Shift=262144]="Shift",e[e.Alt=1048576]="Alt",e[e.Meta=16777216]="Meta"}(u=h.ModifierKey||(h.ModifierKey={})),function(e){e[e.Backspace=8]="Backspace",e[e.Tab=9]="Tab",e[e.Enter=13]="Enter",e[e.Pause=19]="Pause",e[e.CapsLock=20]="CapsLock",e[e.Esc=27]="Esc",e[e.Space=32]="Space",e[e.PageUp=33]="PageUp",e[e.PageDown=34]="PageDown",e[e.End=35]="End",e[e.Home=36]="Home",e[e.Left=37]="Left",e[e.Up=38]="Up",e[e.Right=39]="Right",e[e.Down=40]="Down",e[e.Insert=45]="Insert",e[e.Delete=46]="Delete",e[e.Key_0=48]="Key_0",e[e.Key_1=49]="Key_1",e[e.Key_2=50]="Key_2",e[e.Key_3=51]="Key_3",e[e.Key_4=52]="Key_4",e[e.Key_5=53]="Key_5",e[e.Key_6=54]="Key_6",e[e.Key_7=55]="Key_7",e[e.Key_8=56]="Key_8",e[e.Key_9=57]="Key_9",e[e.Key_a=65]="Key_a",e[e.Key_b=66]="Key_b",e[e.Key_c=67]="Key_c",e[e.Key_d=68]="Key_d",e[e.Key_e=69]="Key_e",e[e.Key_f=70]="Key_f",e[e.Key_g=71]="Key_g",e[e.Key_h=72]="Key_h",e[e.Key_i=73]="Key_i",e[e.Key_j=74]="Key_j",e[e.Key_k=75]="Key_k",e[e.Key_l=76]="Key_l",e[e.Key_m=77]="Key_m",e[e.Key_n=78]="Key_n",e[e.Key_o=79]="Key_o",e[e.Key_p=80]="Key_p",e[e.Key_q=81]="Key_q",e[e.Key_r=82]="Key_r",e[e.Key_s=83]="Key_s",e[e.Key_t=84]="Key_t",e[e.Key_u=85]="Key_u",e[e.Key_v=86]="Key_v",e[e.Key_w=87]="Key_w",e[e.Key_x=88]="Key_x",e[e.Key_y=89]="Key_y",e[e.Key_z=90]="Key_z",e[e.Windows=91]="Windows",e[e.ContextMenu=93]="ContextMenu",e[e.Numpad_0=96]="Numpad_0",e[e.Numpad_1=97]="Numpad_1",e[e.Numpad_2=98]="Numpad_2",e[e.Numpad_3=99]="Numpad_3",e[e.Numpad_4=100]="Numpad_4",e[e.Numpad_5=101]="Numpad_5",e[e.Numpad_6=102]="Numpad_6",e[e.Numpad_7=103]="Numpad_7",e[e.Numpad_8=104]="Numpad_8",e[e.Numpad_9=105]="Numpad_9",e[e.Multiply=106]="Multiply",e[e.Add=107]="Add",e[e.Subtract=109]="Subtract",e[e.Decimal=110]="Decimal",e[e.Divide=111]="Divide",e[e.F1=112]="F1",e[e.F2=113]="F2",e[e.F3=114]="F3",e[e.F4=115]="F4",e[e.F5=116]="F5",e[e.F6=117]="F6",e[e.F7=118]="F7",e[e.F8=119]="F8",e[e.F9=120]="F9",e[e.F10=121]="F10",e[e.F11=122]="F11",e[e.F12=123]="F12",e[e.NumLock=144]="NumLock",e[e.ScrollLock=145]="ScrollLock",e[e.Semicolon=186]="Semicolon",e[e.Equals=187]="Equals",e[e.Comma=188]="Comma",e[e.Dash=189]="Dash",e[e.Period=190]="Period",e[e.ForwardSlash=191]="ForwardSlash",e[e.GraveAccent=192]="GraveAccent",e[e.OpenBracket=219]="OpenBracket",e[e.BackSlash=220]="BackSlash",e[e.CloseBracket=221]="CloseBracket",e[e.SingleQuote=222]="SingleQuote"}(g=h.KeyCode||(h.KeyCode={}))},2940:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0});var u=d(6799),g=d(4170),v=function(){function p(){}return p.remove=function(s,i){var e=s.indexOf(i,0);e>=0&&s.splice(e,1)},p.removeBy=function(s,i){for(var e=s.length,t=0;t<e;t++)if(i(s[t],t))return s.splice(t,1)[0];return null},p.shallowCopy=function(s){return s.slice()},p.deepCopy=function(s){return p.map(s,function(i){return i.clone()})},p.initByValue=function(s,i){for(var e=[];s>0;s--)e.push(i);return e},p.initByCallback=function(s,i){for(var e=[],t=0;t<s;t++)e.push(i(t));return e},p.forEachOnInterval=function(s,i){for(var e=s.end,t=s.start;t<e;t++)i(t)},p.reverseForEachOnInterval=function(s,i){for(var e=s.start,t=s.end-1;t>=e;t--)i(t)},p.reducedMap=function(s,i,e,t){e===void 0&&(e=0),t===void 0&&(t=s.length);for(var n=[],o=e;o<t;o++){var r=i(s[o],o);r!==null&&n.push(r)}return n},p.filter=function(s,i,e,t){e===void 0&&(e=0),t===void 0&&(t=s.length);for(var n=[],o=e;o<t;o++){var r=s[o];i(r,o)&&n.push(r)}return n},p.map=function(s,i,e,t){e===void 0&&(e=0),t===void 0&&(t=s.length);for(var n=[],o=e;o<t;o++)n.push(i(s[o],o));return n},p.indexBy=function(s,i,e,t){e===void 0&&(e=0),t===void 0&&(t=s.length);for(var n=e;n<t;n++)if(i(s[n],n))return n;return-1},p.reverseIndexBy=function(s,i,e,t){e===void 0&&(e=s.length-1),t===void 0&&(t=0);for(var n=e;n>=t;n--)if(i(s[n],n))return n;return-1},p.elementBy=function(s,i,e,t){e===void 0&&(e=0),t===void 0&&(t=s.length);var n=p.indexBy(s,i,e,t);return n<0?null:s[n]},p.reverseElementBy=function(s,i,e,t){e===void 0&&(e=s.length-1),t===void 0&&(t=0);var n=p.reverseIndexBy(s,i,e,t);return n<0?null:s[n]},p.last=function(s){return s[s.length-1]},p.setLast=function(s,i){return s[s.length-1]=i},p.incLast=function(s){return++s[s.length-1]},p.decLast=function(s){return--s[s.length-1]},p.equals=function(s,i){return s.length===i.length&&p.allOf2(s,i,function(e,t){return e.equals(t)})},p.equalsByReference=function(s,i){var e=s.length;if(e!==s.length)return!1;for(var t=0;t<e;t++)if(s[t]!==i[t])return!1;return!0},p.unique=function(s,i,e,t){e===void 0&&(e=i),t===void 0&&(t=function(){});var n=s.length;if(n===0)return[];var o=(s=s.sort(i))[0],r=p.reducedMap(s,function(a){return e(o,a)!==0?(o=a,a):(t(a),null)},1,n);return r.unshift(s[0]),r},p.uniqueNumber=function(s){s=s.sort(g.Comparers.number);for(var i=Number.NaN,e=s.length-1;e>=0;e--)i===s[e]?s.splice(e,1):i=s[e];return s},p.forEach=function(s,i,e,t){e===void 0&&(e=0),t===void 0&&(t=s.length);for(var n=e;n<t;n++)i(s[n],n)},p.forEach2=function(s,i,e,t,n){t===void 0&&(t=0),n===void 0&&(n=s.length);for(var o=t;o<n;o++)e(s[o],i[o],o)},p.reverseForEach=function(s,i,e,t){e===void 0&&(e=s.length-1),t===void 0&&(t=0);for(var n=e;n>=t;n--)i(s[n],n)},p.reverseIndexOf=function(s,i,e,t){e===void 0&&(e=s.length-1),t===void 0&&(t=0);for(var n=e;n>=t;n--)if(s[n]===i)return n;return-1},p.accumulate=function(s,i,e,t,n){t===void 0&&(t=0),n===void 0&&(n=s.length);for(var o=i,r=t;r<n;r++)o=e(o,s[r],r);return o},p.accumulateNumber=function(s,i,e,t,n){e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=s.length);for(var o=e,r=t;r<n;r++)o+=i(s[r],r,o);return o},p.anyOf=function(s,i,e,t){e===void 0&&(e=0),t===void 0&&(t=s.length);for(var n=e;n<t;n++)if(i(s[n],n))return!0;return!1},p.unsafeAnyOf=function(s,i,e,t){e===void 0&&(e=0),t===void 0&&(t=s.length);for(var n=e;n<t;n++){var o=i(s[n],n);if(o)return o}return null},p.reverseAnyOf=function(s,i,e,t){e===void 0&&(e=s.length-1),t===void 0&&(t=0);for(var n=e;n>=t;n--)if(i(s[n],n))return!0;return!1},p.unsafeReverseAnyOf=function(s,i,e,t){e===void 0&&(e=s.length-1),t===void 0&&(t=0);for(var n=e;n>=t;n--){var o=i(s[n],n);if(o)return o}return null},p.anyOf2=function(s,i,e,t,n){t===void 0&&(t=0),n===void 0&&(n=s.length);for(var o=t;o<n;o++)if(e(s[o],i[o],o))return!0;return!1},p.allOf=function(s,i,e,t){e===void 0&&(e=0),t===void 0&&(t=s.length);for(var n=e;n<t;n++)if(!i(s[n],n))return!1;return!0},p.allOf2=function(s,i,e,t,n){t===void 0&&(t=0),n===void 0&&(n=s.length);for(var o=t;o<n;o++)if(!e(s[o],i[o],o))return!1;return!0},p.allOfOnInterval=function(s,i){for(var e=s.end,t=s.start;t<e;t++)if(!i(t))return!1;return!0},p.addListOnTail=function(s,i){for(var e=0,t=void 0;t=i[e];e++)s.push(t);return s},p.joinLists=function(s){for(var i=[],e=1;e<arguments.length;e++)i[e-1]=arguments[e];return p.accumulate(i,[],function(t,n){return p.addListOnTail(t,s(n)),t})},p.push=function(s,i){return s.push(i),s},p.countIf=function(s,i){return p.accumulateNumber(s,function(e,t){return i(e,t)?1:0})},p.clear=function(s){s.splice(0)},p.merge=function(s,i,e,t,n,o){if(n===void 0&&(n=0),o===void 0&&(o=s.length),s=s.slice(n,o),o-n<2)return s;for(var r=(s=s.sort(i))[n],a=[r],c=n+1;c<o;c++){var f=s[c];e(r,f)?t(r,f):(r=f,a.push(r))}return a},p.min=function(s,i,e,t){e===void 0&&(e=0),t===void 0&&(t=s.length);var n=p.minExtended(s,i,e,t);return n?n.minElement:null},p.max=function(s,i,e,t){e===void 0&&(e=0),t===void 0&&(t=s.length);var n=p.maxExtended(s,i,e,t);return n?n.maxElement:null},p.minMax=function(s,i,e,t){e===void 0&&(e=0),t===void 0&&(t=s.length);var n=p.minMaxExtended(s,i,e,t);return n?new u.MinMax(n.minElement,n.maxElement):null},p.minExtended=function(s,i,e,t){if(e===void 0&&(e=0),t===void 0&&(t=s.length),s.length===0)return null;for(var n=s[e],o=i(n),r=e+1;r<t;r++){var a=s[r],c=i(a);c<o&&(o=c,n=a)}return new u.ExtendedMin(n,o)},p.maxExtended=function(s,i,e,t){if(e===void 0&&(e=0),t===void 0&&(t=s.length),s.length===0)return null;for(var n=s[e],o=i(n),r=e+1;r<t;r++){var a=s[r],c=i(a);c>o&&(o=c,n=a)}return new u.ExtendedMax(n,o)},p.minMaxExtended=function(s,i,e,t){if(e===void 0&&(e=0),t===void 0&&(t=s.length),s.length===0)return null;for(var n=s[e],o=n,r=i(n),a=r,c=e+1;c<t;c++){var f=s[c],m=i(f);m<r?(r=m,n=f):m>a&&(a=m,o=f)}return new u.ExtendedMinMax(n,r,o,a)},p.minByCmp=function(s,i,e,t){if(e===void 0&&(e=0),t===void 0&&(t=s.length),s.length===0)return null;for(var n=s[e],o=e+1;o<t;o++){var r=s[o];i(r,n)<0&&(n=r)}return n},p.maxByCmp=function(s,i,e,t){if(e===void 0&&(e=0),t===void 0&&(t=s.length),s.length===0)return null;for(var n=s[e],o=e+1;o<t;o++){var r=s[o];i(r,n)>0&&(n=r)}return n},p.minMaxByCmp=function(s,i,e,t){if(e===void 0&&(e=0),t===void 0&&(t=s.length),s.length===0)return null;for(var n=s[e],o=n,r=e+1;r<t;r++){var a=s[r],c=i(a,n);c>0?o=a:c<0&&(n=a)}return new u.MinMax(n,o)},p}();h.ListUtils=v},8679:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0});var u=d(2940),g=function(){function v(){}return v.round=function(p,s){s===void 0&&(s=0);var i=v.powFactor[s];return Math.round(p*i)/i},v.numberCloseTo=function(p,s,i){return i===void 0&&(i=1e-5),Math.abs(p-s)<i},v.restrictValue=function(p,s,i){return i<s&&(i=s),p>i?i:p<s?s:p},v.getRandomInt=function(p,s){return Math.floor(Math.random()*(s-p+1))+p},v.generateGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(p){var s=16*Math.random()|0;return(p==="x"?s:3&s|8).toString(16)})},v.powFactor=u.ListUtils.initByCallback(20,function(p){return Math.pow(10,p)}),v.somePrimes=[1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003],v}();h.MathUtils=g},4633:(j,h)=>{var d,u,g,v;Object.defineProperty(h,"__esModule",{value:!0}),h.OpenXmlMimeType="application/vnd.openxmlformats-officedocument.wordprocessingml.document",h.RtfMimeType="application/rtf",h.PlainTextMimeType="text/plain",h.DocmMimeType="application/vnd.ms-word.document.macroEnabled.12",h.ImagePngMimeType="image/png",h.ImageGifMimeType="image/gif",h.ImageJpegMimeType="image/jpeg",h.ImagePjpegMimeType="image/pjpeg",h.ImageSvgMimeType="image/svg+xml",h.ImageTiffMimeType="image/tiff",h.ImageIcoMimeType="image/vnd.microsoft.icon",h.ImageWbmpMimeType="image/vnd.wap.wbmp",h.ImageWebpMimeType="image/webp",function(s){s[s.Unknown=0]="Unknown",s[s.OpenXml=1]="OpenXml",s[s.Rtf=2]="Rtf",s[s.PlainText=3]="PlainText",s[s.Docm=4]="Docm",s[s.Png=5]="Png",s[s.Gif=6]="Gif",s[s.Jpeg=7]="Jpeg",s[s.Pjpeg=8]="Pjpeg",s[s.Svg=9]="Svg",s[s.Tiff=10]="Tiff",s[s.Ico=11]="Ico",s[s.Wbmp=12]="Wbmp",s[s.Webp=13]="Webp"}(v=h.DxMimeType||(h.DxMimeType={}));var p=function(){function s(){}return s.stringTypeToExtension=function(i){var e=s.stringTypeToTypeMap[i];return e===void 0?"":s.typeToExtensionMap[e]},s.typeToExtension=function(i){var e=s.typeToExtensionMap[i];return e??""},s.extensionToType=function(i){(i=i.toLowerCase())[0]!=="."&&(i+=".");var e=s.extensionToTypeMap[i];return e??v.Unknown},s.typeToStringType=function(i){var e=s.typeToStringTypeMap[i];return e??""},s.stringTypeToType=function(i){var e=s.stringTypeToTypeMap[i];return e===void 0?v.Unknown:e},s.stringTypeToTypeMap=((d={})[h.OpenXmlMimeType]=v.OpenXml,d[h.RtfMimeType]=v.Rtf,d[h.PlainTextMimeType]=v.PlainText,d[h.DocmMimeType]=v.Docm,d[h.ImagePngMimeType]=v.Png,d[h.ImageGifMimeType]=v.Gif,d[h.ImageJpegMimeType]=v.Jpeg,d[h.ImagePjpegMimeType]=v.Pjpeg,d[h.ImageSvgMimeType]=v.Svg,d[h.ImageTiffMimeType]=v.Tiff,d[h.ImageIcoMimeType]=v.Ico,d[h.ImageWbmpMimeType]=v.Wbmp,d[h.ImageWebpMimeType]=v.Webp,d),s.typeToStringTypeMap=((u={})[v.Unknown]=void 0,u[v.OpenXml]=h.OpenXmlMimeType,u[v.Rtf]=h.RtfMimeType,u[v.PlainText]=h.PlainTextMimeType,u[v.Docm]=h.DocmMimeType,u[v.Png]=h.ImagePngMimeType,u[v.Gif]=h.ImageGifMimeType,u[v.Jpeg]=h.ImageJpegMimeType,u[v.Pjpeg]=h.ImagePjpegMimeType,u[v.Svg]=h.ImageSvgMimeType,u[v.Tiff]=h.ImageTiffMimeType,u[v.Ico]=h.ImageIcoMimeType,u[v.Wbmp]=h.ImageWbmpMimeType,u[v.Webp]=h.ImageWebpMimeType,u),s.typeToExtensionMap=((g={})[v.Unknown]=void 0,g[v.OpenXml]=".docx",g[v.Rtf]=".rtf",g[v.PlainText]=".txt",g[v.Docm]=".docm",g[v.Png]=".png",g[v.Gif]=".gif",g[v.Jpeg]=".jpeg",g[v.Pjpeg]=".pjpeg",g[v.Svg]=".svg",g[v.Tiff]=".tiff",g[v.Ico]=".ico",g[v.Wbmp]=".wbmp",g[v.Webp]=".webp",g),s.extensionToTypeMap={".docx":v.OpenXml,".rtf":v.Rtf,".txt":v.PlainText,".docm":v.Docm,".png":v.Png,".gif":v.Gif,".jpeg":v.Jpeg,".pjpeg":v.Pjpeg,".svg":v.Svg,".tiff":v.Tiff,".ico":v.Ico,".wbmp":v.Wbmp,".webp":v.Webp},s}();h.MimeTypeUtils=p},2400:(j,h)=>{Object.defineProperty(h,"__esModule",{value:!0});var d=function(){function u(){}return u.binaryIndexOf=function(g,v,p,s){p===void 0&&(p=0),s===void 0&&(s=-2);var i=p===0;for(s===-2&&(s=g.length-1);p<=s;){var e=p+(s-p>>1),t=v(g[e]);if(t<0)p=e+1;else{if(!(t>0))return e;s=e-1}}return i?~p:-1},u.normedBinaryIndexOf=function(g,v,p,s){p===void 0&&(p=0),s===void 0&&(s=-2);var i=u.binaryIndexOf(g,v,p,s);return u.binaryIndexNormalizator(i)},u.binaryIndexNormalizator=function(g){return g<0?~g-1:g},u.normedInterpolationIndexOf=function(g,v,p,s,i){s===void 0&&(s=0),i===void 0&&(i=-2),i===-2&&(i=g.length-1);var e=g[Math.min(s,i)];if(e===void 0||p<v(e))return-1;for(var t=v(g[s]),n=v(g[i]);;){if(!(p>t&&p<n))return p===t?s:i;var o=s+Math.floor((p-t)*(i-s)/(n-t)),r=v(g[o]);if(p>r){if(p<(t=v(g[s=o+1])))return o}else{if(!(p<r))return o;n=v(g[i=o-1])}}},u}();h.SearchUtils=d},49:(j,h)=>{Object.defineProperty(h,"__esModule",{value:!0});var d=function(){function u(){}return u.isAlpha=function(g){return g>="a"&&g<="z"||g>="A"&&g<="Z"},u.isDigit=function(g){return g>="0"&&g<="9"},u.stringHashCode=function(g){var v=0;if(g.length===0)return v;for(var p=g.length,s=0;s<p;s++)v=(v<<5)-v+g.charCodeAt(s),v|=0;return v},u.endsAt=function(g,v){var p=g.length-1,s=v.length-1,i=p-s;if(i<0)return!1;for(;p>=i;p--,s--)if(g[p]!==v[s])return!1;return!0},u.startsAt=function(g,v){return g.substr(0,v.length)===v},u.stringInLowerCase=function(g){return g.toLowerCase()===g},u.stringInUpperCase=function(g){return g.toUpperCase()===g},u.atLeastOneSymbolInUpperCase=function(g){for(var v=0,p=void 0;p=g[v];v++)if(u.stringInUpperCase(p)&&!u.stringInLowerCase(p))return!0;return!1},u.getSymbolFromEnd=function(g,v){return g[g.length-v]},u.trim=function(g,v){if(v===void 0)return u.trimInternal(g,!0,!0);var p=v.join("");return g.replace(new RegExp("(^["+p+"]*)|(["+p+"]*$)","g"),"")},u.trimStart=function(g,v){if(v===void 0)return u.trimInternal(g,!0,!1);var p=v.join("");return g.replace(new RegExp("^["+p+"]*","g"),"")},u.trimEnd=function(g,v){if(v===void 0)return u.trimInternal(g,!1,!0);var p=v.join("");return g.replace(new RegExp("["+p+"]*$","g"),"")},u.getDecimalSeparator=function(){return 1.1.toLocaleString().substr(1,1)},u.repeat=function(g,v){return new Array(v<=0?0:v+1).join(g)},u.isNullOrEmpty=function(g){return!g||!g.length},u.padLeft=function(g,v,p){return u.repeat(p,Math.max(0,v-g.length))+g},u.trimInternal=function(g,v,p){var s=g.length;if(!s)return g;if(s<764833){var i=g;return v&&(i=i.replace(/^\s+/,"")),p&&(i=i.replace(/\s+$/,"")),i}var e=0;if(p)for(;s>0&&/\s/.test(g[s-1]);)s--;if(v&&s>0)for(;e<s&&/\s/.test(g[e]);)e++;return g.substring(e,s)},u}();h.StringUtils=d},1632:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0});var u=d(9279),g=d(2491),v=function(){function p(){}return p.onEventAttachingToDocument=function(s,i){return!u.Browser.MacOSMobilePlatform||!p.isTouchEventName(s)||(p.documentTouchHandlers[s]||(p.documentTouchHandlers[s]=[]),p.documentTouchHandlers[s].push(i),p.documentEventAttachingAllowed)},p.isTouchEventName=function(s){return u.Browser.WebKitTouchUI&&(s.indexOf("touch")>-1||s.indexOf("gesture")>-1)},p.isTouchEvent=function(s){return u.Browser.WebKitTouchUI&&g.isDefined(s.changedTouches)},p.getEventX=function(s){return u.Browser.IE?s.pageX:s.changedTouches[0].pageX},p.getEventY=function(s){return u.Browser.IE?s.pageY:s.changedTouches[0].pageY},p.touchMouseDownEventName=u.Browser.WebKitTouchUI?"touchstart":u.Browser.Edge&&u.Browser.MSTouchUI&&window.PointerEvent?"pointerdown":"mousedown",p.touchMouseUpEventName=u.Browser.WebKitTouchUI?"touchend":u.Browser.Edge&&u.Browser.MSTouchUI&&window.PointerEvent?"pointerup":"mouseup",p.touchMouseMoveEventName=u.Browser.WebKitTouchUI?"touchmove":u.Browser.Edge&&u.Browser.MSTouchUI&&window.PointerEvent?"pointermove":"mousemove",p.msTouchDraggableClassName="dxMSTouchDraggable",p.documentTouchHandlers={},p.documentEventAttachingAllowed=!0,p}();h.TouchUtils=v},7097:(j,h,d)=>{d(8091).polyfill()},8091:j=>{function h(d,u){if(d==null)throw new TypeError("Cannot convert first argument to object");for(var g=Object(d),v=1;v<arguments.length;v++){var p=arguments[v];if(p!=null)for(var s=Object.keys(Object(p)),i=0,e=s.length;i<e;i++){var t=s[i],n=Object.getOwnPropertyDescriptor(p,t);n!==void 0&&n.enumerable&&(g[t]=p[t])}}return g}j.exports={assign:h,polyfill:function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:h})}}},8721:(j,h,d)=>{d.r(h)},5656:function(j,h,d){var u,g=this&&this.__extends||(u=function(n,o){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var c in a)a.hasOwnProperty(c)&&(r[c]=a[c])},u(n,o)},function(n,o){function r(){this.constructor=n}u(n,o),n.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)});Object.defineProperty(h,"__esModule",{value:!0}),h.ApiController=void 0;var v,p=d(1772),s=d(6031),i=d(4867),e=d(3607),t=function(n){function o(r,a,c){var f=n.call(this)||this;return f.events=r,f.model=c,f.selection=a,f}return g(o,n),o.prototype.notifySelectionChanged=function(r){this.isUpdateLocked()?this.registerOccurredEvent(v.SelectionChanged):this.raiseSelectionChanged()},o.prototype.notifyToolboxDragStart=function(){this.events.raise("notifyToolboxItemDragStart")},o.prototype.notifyToolboxDragEnd=function(){this.events.raise("notifyToolboxItemDragEnd")},o.prototype.notifyToolboxDraggingMouseMove=function(){},o.prototype.notifyClick=function(r){var a=this;this.tryRaiseUserAction(r,function(c){return a.events.raise("notifyItemClick",c)})},o.prototype.notifyDblClick=function(r){var a=this;this.tryRaiseUserAction(r,function(c){return a.events.raise("notifyItemDblClick",c)})},o.prototype.createNativeItem=function(r){return r&&this.cleanupNativeItem(r.toNative(this.model.units))},o.prototype.createNativeShape=function(r){return this.createNativeItem(r)},o.prototype.createNativeConnector=function(r){return this.createNativeItem(r)},o.prototype.convertUnit=function(r){return i.ModelUtils.getlUnitValue(this.model.units,r)},o.prototype.convertPoint=function(r){return new e.Point(this.convertUnit(r.x),this.convertUnit(r.y))},o.prototype.convertSize=function(r){return new e.Size(this.convertUnit(r.width),this.convertUnit(r.height))},o.prototype.cleanupNativeItem=function(r){var a=this.dataSource;return a&&(a.isAutoGeneratedKey(r.fromKey)&&(r.fromKey=void 0),a.isAutoGeneratedKey(r.key)&&(r.key=void 0),a.isAutoGeneratedKey(r.toKey)&&(r.toKey=void 0)),r},o.prototype.setDataSource=function(r){this.dataSource=r},o.prototype.tryRaiseUserAction=function(r,a){var c=this;if(this.isUserAction(r)){var f=this.model.findItem(r.source.key);f&&this.events.raise1(function(m){return a(c.createNativeItem(f))})}},o.prototype.isUserAction=function(r){return r.source&&(r.source.type===s.MouseEventElementType.Shape||r.source.type===s.MouseEventElementType.ShapeExpandButton||r.source.type===s.MouseEventElementType.ShapeParameterBox||r.source.type===s.MouseEventElementType.ShapeResizeBox||r.source.type===s.MouseEventElementType.ShapeConnectionPoint||r.source.type===s.MouseEventElementType.Connector||r.source.type===s.MouseEventElementType.ConnectorPoint||r.source.type===s.MouseEventElementType.ConnectorSide||r.source.type===s.MouseEventElementType.ConnectorOrthogonalSide||r.source.type===s.MouseEventElementType.ConnectorText)},o.prototype.onUpdateUnlocked=function(r){r&v.SelectionChanged&&this.raiseSelectionChanged()},o.prototype.raiseSelectionChanged=function(){var r=this,a=this.selection.getKeys().map(function(c){return r.createNativeItem(r.model.findItem(c))});this.events.raise1(function(c){return c.notifySelectionChanged(a)})},o}(p.BatchUpdatableObject);h.ApiController=t,function(n){n[n.SelectionChanged=1]="SelectionChanged"}(v||(v={}))},7185:function(j,h,d){var u,g=this&&this.__extends||(u=function(e,t){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var r in o)o.hasOwnProperty(r)&&(n[r]=o[r])},u(e,t)},function(e,t){function n(){this.constructor=e}u(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(h,"__esModule",{value:!0}),h.NativeConnector=h.NativeShape=h.NativeItem=void 0;var v=d(4867),p=function(){function e(t,n){this.id=t,this.key=n,this.unitsApplied=!1}return e.prototype.applyUnits=function(t){this.unitsApplied||t===void 0||(this.applyUnitsCore(t),this.unitsApplied=!0)},e}();h.NativeItem=p;var s=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return g(t,e),t.prototype.applyUnitsCore=function(n){this.position.x=v.ModelUtils.getlUnitValue(n,this.position.x),this.position.y=v.ModelUtils.getlUnitValue(n,this.position.y),this.size.width=v.ModelUtils.getlUnitValue(n,this.size.width),this.size.height=v.ModelUtils.getlUnitValue(n,this.size.height)},t}(p);h.NativeShape=s;var i=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return g(t,e),t.prototype.applyUnitsCore=function(n){this.points.forEach(function(o){o.x=v.ModelUtils.getlUnitValue(n,o.x),o.y=v.ModelUtils.getlUnitValue(n,o.y)})},t}(p);h.NativeConnector=i},8906:function(j,h,d){var u,g=this&&this.__extends||(u=function(r,a){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var m in f)f.hasOwnProperty(m)&&(c[m]=f[m])},u(r,a)},function(r,a){function c(){this.constructor=r}u(r,a),r.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)});Object.defineProperty(h,"__esModule",{value:!0}),h.AutoLayoutCommandBase=void 0;var v=d(4867),p=d(9741),s=d(5503),i=d(7959),e=d(8675),t=d(8011),n=d(7626),o=function(r){function a(){return r!==null&&r.apply(this,arguments)||this}return g(a,r),a.prototype.executeCore=function(c,f){var m=this;this.control.history.beginTransaction();var y=this.getAffectedShapes(),l=this.getAffectedConnectors(),P=this.createLayoutSettings(),C=v.ModelUtils.getGraphInfoByItems(this.control.model,y,l,!1);if(C.length){var I,x=this.control.model,b=e.GeometryUtils.getCommonRectangle(e.Utils.flatten(C.map(function(S){return S.graph.items.map(function(w){return x.findItem(w.key)})})).concat(C.map(function(S){return S.container})).filter(function(S){return S}).map(function(S){return S.rectangle}));this.control.history.addAndRedo(new n.ScrollIntoViewOnUndoHistoryItem(this.control.view,b)),C.forEach(function(S){var w=m.createLayout(P,S.graph),T=v.ModelUtils.getNonGraphItems(m.control.model,S.container,w.nodeToLayout,y,l),_=v.ModelUtils.applyLayout(m.control.history,m.control.model,S.container,S.graph,w,T,P,m.control.settings.snapToGrid,m.control.settings.gridSize,!1);I=I&&t.Rectangle.union(I,_)||_}),v.ModelUtils.tryUpdateModelRectangle(this.control.history),this.control.history.addAndRedo(new n.ScrollIntoViewOnRedoHistoryItem(this.control.view,I))}return this.control.history.endTransaction(),!0},a.prototype.getAffectedShapes=function(){return this.control.selection.isEmpty()?this.control.model.items.filter(function(c){return c instanceof s.Shape&&!c.locked}):this.control.selection.getSelectedShapes(!1,!0)},a.prototype.getAffectedConnectors=function(){return this.control.selection.isEmpty()?this.control.model.items.filter(function(c){return c instanceof i.Connector&&!c.locked}):this.control.selection.getSelectedConnectors(!1,!0)},a}(p.SimpleCommandBase);h.AutoLayoutCommandBase=o},30:function(j,h,d){var u,g=this&&this.__extends||(u=function(e,t){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var r in o)o.hasOwnProperty(r)&&(n[r]=o[r])},u(e,t)},function(e,t){function n(){this.constructor=e}u(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(h,"__esModule",{value:!0}),h.AutoLayoutLayeredHorizontalCommand=void 0;var v=d(8906),p=d(1256),s=d(8710),i=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return g(t,e),t.prototype.createLayoutSettings=function(){var n=new s.LayoutSettings;return n.orientation=s.DataLayoutOrientation.Horizontal,n},t.prototype.createLayout=function(n,o){return new p.SugiyamaLayoutBuilder(n,o).build()},t}(v.AutoLayoutCommandBase);h.AutoLayoutLayeredHorizontalCommand=i},7826:function(j,h,d){var u,g=this&&this.__extends||(u=function(s,i){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},u(s,i)},function(s,i){function e(){this.constructor=s}u(s,i),s.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)});Object.defineProperty(h,"__esModule",{value:!0}),h.AutoLayoutLayeredHorizontalRightToLeftCommand=void 0;var v=d(8710),p=function(s){function i(){return s!==null&&s.apply(this,arguments)||this}return g(i,s),i.prototype.createLayoutSettings=function(){var e=s.prototype.createLayoutSettings.call(this);return e.direction=v.LogicalDirectionKind.Backward,e},i}(d(30).AutoLayoutLayeredHorizontalCommand);h.AutoLayoutLayeredHorizontalRightToLeftCommand=p},554:function(j,h,d){var u,g=this&&this.__extends||(u=function(s,i){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},u(s,i)},function(s,i){function e(){this.constructor=s}u(s,i),s.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)});Object.defineProperty(h,"__esModule",{value:!0}),h.AutoLayoutLayeredVerticalBottomToTopCommand=void 0;var v=d(8710),p=function(s){function i(){return s!==null&&s.apply(this,arguments)||this}return g(i,s),i.prototype.createLayoutSettings=function(){var e=s.prototype.createLayoutSettings.call(this);return e.direction=v.LogicalDirectionKind.Backward,e},i}(d(9427).AutoLayoutLayeredVerticalCommand);h.AutoLayoutLayeredVerticalBottomToTopCommand=p},9427:function(j,h,d){var u,g=this&&this.__extends||(u=function(e,t){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var r in o)o.hasOwnProperty(r)&&(n[r]=o[r])},u(e,t)},function(e,t){function n(){this.constructor=e}u(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(h,"__esModule",{value:!0}),h.AutoLayoutLayeredVerticalCommand=void 0;var v=d(8906),p=d(1256),s=d(8710),i=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return g(t,e),t.prototype.createLayoutSettings=function(){var n=new s.LayoutSettings;return n.orientation=s.DataLayoutOrientation.Vertical,n},t.prototype.createLayout=function(n,o){return new p.SugiyamaLayoutBuilder(n,o).build()},t}(v.AutoLayoutCommandBase);h.AutoLayoutLayeredVerticalCommand=i},7004:function(j,h,d){var u,g=this&&this.__extends||(u=function(e,t){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var r in o)o.hasOwnProperty(r)&&(n[r]=o[r])},u(e,t)},function(e,t){function n(){this.constructor=e}u(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(h,"__esModule",{value:!0}),h.AutoLayoutTreeHorizontalCommand=void 0;var v=d(8906),p=d(9533),s=d(8710),i=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return g(t,e),t.prototype.createLayoutSettings=function(){var n=this.control.settings.snapToGrid?this.control.settings.gridSize:void 0,o=new s.TreeLayoutSettings(n);return o.orientation=s.DataLayoutOrientation.Horizontal,o},t.prototype.createLayout=function(n,o){return new p.TreeLayoutBuilder(n,o).build()},t}(v.AutoLayoutCommandBase);h.AutoLayoutTreeHorizontalCommand=i},5010:function(j,h,d){var u,g=this&&this.__extends||(u=function(s,i){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},u(s,i)},function(s,i){function e(){this.constructor=s}u(s,i),s.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)});Object.defineProperty(h,"__esModule",{value:!0}),h.AutoLayoutTreeHorizontalRightToLeftCommand=void 0;var v=d(8710),p=function(s){function i(){return s!==null&&s.apply(this,arguments)||this}return g(i,s),i.prototype.createLayoutSettings=function(){var e=s.prototype.createLayoutSettings.call(this);return e.direction=v.LogicalDirectionKind.Backward,e},i}(d(7004).AutoLayoutTreeHorizontalCommand);h.AutoLayoutTreeHorizontalRightToLeftCommand=p},2217:function(j,h,d){var u,g=this&&this.__extends||(u=function(s,i){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},u(s,i)},function(s,i){function e(){this.constructor=s}u(s,i),s.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)});Object.defineProperty(h,"__esModule",{value:!0}),h.AutoLayoutTreeVerticalBottomToTopCommand=void 0;var v=d(8710),p=function(s){function i(){return s!==null&&s.apply(this,arguments)||this}return g(i,s),i.prototype.createLayoutSettings=function(){var e=s.prototype.createLayoutSettings.call(this);return e.direction=v.LogicalDirectionKind.Backward,e},i}(d(375).AutoLayoutTreeVerticalCommand);h.AutoLayoutTreeVerticalBottomToTopCommand=p},375:function(j,h,d){var u,g=this&&this.__extends||(u=function(e,t){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var r in o)o.hasOwnProperty(r)&&(n[r]=o[r])},u(e,t)},function(e,t){function n(){this.constructor=e}u(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(h,"__esModule",{value:!0}),h.AutoLayoutTreeVerticalCommand=void 0;var v=d(8906),p=d(9533),s=d(8710),i=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return g(t,e),t.prototype.createLayoutSettings=function(){var n=this.control.settings.snapToGrid?this.control.settings.gridSize:void 0,o=new s.TreeLayoutSettings(n);return o.orientation=s.DataLayoutOrientation.Vertical,o},t.prototype.createLayout=function(n,o){return new p.TreeLayoutBuilder(n,o).build()},t}(v.AutoLayoutCommandBase);h.AutoLayoutTreeVerticalCommand=i},4982:function(j,h,d){var u,g=this&&this.__extends||(u=function(p,s){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t])},u(p,s)},function(p,s){function i(){this.constructor=p}u(p,s),p.prototype=s===null?Object.create(s):(i.prototype=s.prototype,new i)});Object.defineProperty(h,"__esModule",{value:!0}),h.ClipboardCommand=void 0;var v=function(p){function s(){return p!==null&&p.apply(this,arguments)||this}return g(s,p),s.prototype.setClipboardData=function(i){this.control.render&&this.control.render.input.setClipboardData(i),s.clipboardData=i},s.prototype.getClipboardData=function(i){this.control.render&&this.isPasteSupportedByBrowser()?this.control.render.input.getClipboardData(i):i(s.clipboardData)},s.prototype.isPasteSupportedByBrowser=function(){return this.control.render&&this.control.render.input.isPasteSupportedByBrowser()},s}(d(9741).SimpleCommandBase);h.ClipboardCommand=v},5827:function(j,h,d){var u,g=this&&this.__extends||(u=function(s,i){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},u(s,i)},function(s,i){function e(){this.constructor=s}u(s,i),s.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)});Object.defineProperty(h,"__esModule",{value:!0}),h.CopySelectionCommand=void 0;var v=d(5885),p=function(s){function i(){return s!==null&&s.apply(this,arguments)||this}return g(i,s),i.prototype.isEnabled=function(){return s.prototype.isEnabled.call(this)&&!this.control.selection.isEmpty(!0)},i.prototype.isEnabledInReadOnlyMode=function(){return!0},i.prototype.executeCore=function(e){var t=new v.Exporter().exportItems(this.control.selection.getSelectedItems(!0,!0));return this.setClipboardData(t),!0},i}(d(4982).ClipboardCommand);h.CopySelectionCommand=p},2664:function(j,h,d){var u,g=this&&this.__extends||(u=function(i,e){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var o in n)n.hasOwnProperty(o)&&(t[o]=n[o])},u(i,e)},function(i,e){function t(){this.constructor=i}u(i,e),i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)});Object.defineProperty(h,"__esModule",{value:!0}),h.CutSelectionCommand=void 0;var v=d(5885),p=d(4867),s=function(i){function e(){return i!==null&&i.apply(this,arguments)||this}return g(e,i),e.prototype.isEnabled=function(){var t=this.control.selection.getSelectedItems();return i.prototype.isEnabled.call(this)&&t.length&&(t.length>1||this.permissionsProvider.canDeleteItems(t))},e.prototype.executeCore=function(t){var n=new v.Exporter,o=this.control.selection.getSelectedItems(!0,!0),r=n.exportItems(o);return this.permissionsProvider.beginDeleteItems(o),this.setClipboardData(r),p.ModelUtils.deleteSelection(this.control.history,this.control.model,this.control.selection),this.permissionsProvider.endDeleteItems(),!0},Object.defineProperty(e.prototype,"isPermissionsRequired",{get:function(){return!0},enumerable:!1,configurable:!0}),e}(d(4982).ClipboardCommand);h.CutSelectionCommand=s},4200:function(j,h,d){var u,g=this&&this.__extends||(u=function(s,i){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},u(s,i)},function(s,i){function e(){this.constructor=s}u(s,i),s.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)});Object.defineProperty(h,"__esModule",{value:!0}),h.PasteSelectionCommand=void 0;var v=d(8900),p=function(s){function i(){return s!==null&&s.apply(this,arguments)||this}return g(i,s),i.prototype.getEventPositionOffset=function(e,t){return new v.Point(0,0)},i}(d(7688).PasteSelectionCommandBase);h.PasteSelectionCommand=p},7688:function(j,h,d){var u,g=this&&this.__extends||(u=function(f,m){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,l){y.__proto__=l}||function(y,l){for(var P in l)l.hasOwnProperty(P)&&(y[P]=l[P])},u(f,m)},function(f,m){function y(){this.constructor=f}u(f,m),f.prototype=m===null?Object.create(m):(y.prototype=m.prototype,new y)});Object.defineProperty(h,"__esModule",{value:!0}),h.PasteSelectionCommandBase=void 0;var v=d(4982),p=d(2406),s=d(5503),i=d(4383),e=d(7959),t=d(3849),n=d(4867),o=d(4297),r=d(8900),a=d(9291),c=function(f){function m(){return f!==null&&f.apply(this,arguments)||this}return g(m,f),m.prototype.isEnabled=function(){return f.prototype.isEnabled.call(this)&&(this.isPasteSupportedByBrowser()||v.ClipboardCommand.clipboardData!==void 0)},m.prototype.isVisible=function(){return this.isPasteSupportedByBrowser()||v.ClipboardCommand.clipboardData!==void 0},m.prototype.parseClipboardData=function(y){var l;l=new p.Importer(this.control.shapeDescriptionManager,y).importItems(this.control.model);var P=this.getEventPositionOffset(l,this.control.contextMenuPosition);P=this.getCorrectedOffsetByModel(l,P);for(var C=0;C<l.length;C++){var I=l[C];I instanceof s.Shape?I.position.offsetByPoint(P):I instanceof e.Connector&&I.points.forEach(function(x){return x.offsetByPoint(P)})}return l},m.prototype.getCorrectedOffsetByModel=function(y,l){var P=y.reduce(function(x,b){var S=b instanceof s.Shape?b.position.x:b instanceof e.Connector?b.getMinX():Number.MAX_VALUE,w=b instanceof s.Shape?b.position.y:b instanceof e.Connector?b.getMinY():Number.MAX_VALUE;return(w<x.y||w===x.y&&S<x.x)&&(x.topLeftItem=b,x.x=S,x.y=w),x},{topLeftItem:y[0],x:Number.MAX_VALUE,y:Number.MAX_VALUE}).topLeftItem;if(P instanceof s.Shape){var C=this.getShapeCorrectedPosition(this.control.model,P,l);return new r.Point(C.x-P.position.x,C.y-P.position.y)}if(P instanceof e.Connector){var I=this.getConnectorCorrectedPoints(this.control.model,P,l);return new r.Point(P.points[0].x-I[0].x,P.points[0].y-I[0].y)}},m.prototype.executeCore=function(y,l){var P=this,C=!0;return l?this.performPaste(l):this.getClipboardData(function(I){C=P.execute(I)}),C},m.prototype.addItemForSortingRecursive=function(y,l){if(y[l.key])return y[l.key];if(l instanceof e.Connector)return l.endItem?y[l.key]=this.addItemForSortingRecursive(y,l.endItem)-.5:l.beginItem?y[l.key]=this.addItemForSortingRecursive(y,l.beginItem)+.5:y[l.key]=-1,y[l.key];if(l.attachedConnectors.length===0)return y[l.key]=0;for(var P=0;P<l.attachedConnectors.length;P++){var C=l.attachedConnectors[P].beginItem;return l.attachedConnectors[P].endItem===l&&C&&C!==l.attachedConnectors[P].endItem?y[l.key]=this.addItemForSortingRecursive(y,C)+1:y[l.key]=0}},m.prototype.getSortedPasteItems=function(y){for(var l=[],P=[],C={},I=0;I<y.length;I++){var x=y[I];x instanceof s.Shape?l.push(x):x instanceof e.Connector&&(P.push(x),this.addItemForSortingRecursive(C,x))}return P.sort(function(b,S){return C[S.key]-C[b.key]}),l.concat(P)},m.prototype.performPaste=function(y){this.control.beginUpdateCanvas(),this.control.history.beginTransaction();var l={},P=this.parseClipboardData(y);P=this.getSortedPasteItems(P);for(var C=0;C<P.length;C++){var I=P[C];I instanceof s.Shape?this.control.history.addAndRedo(new i.ImportShapeHistoryItem(I)):I instanceof e.Connector&&this.control.history.addAndRedo(new t.ImportConnectorHistoryItem(I));var x=I.container&&I.container.key;x&&l[x]!==void 0?x&&l[x]!==void 0&&(l[I.key]=!1):l[I.key]=!0}n.ModelUtils.tryUpdateModelRectangle(this.control.history),this.control.history.addAndRedo(new o.SetSelectionHistoryItem(this.control.selection,Object.keys(l).filter(function(b){return l[b]}))),this.control.history.endTransaction(),this.control.endUpdateCanvas(),this.control.barManager.updateItemsState()},m.prototype.getShapeCorrectedPosition=function(y,l,P){for(var C=l.position.clone().offsetByPoint(P);y.findShapeAtPosition(C);)C.offset(m.positionOffset,m.positionOffset);return C},m.prototype.getConnectorCorrectedPoints=function(y,l,P){for(var C=l.points.map(function(I){return I.clone().offsetByPoint(P)});y.findConnectorAtPoints(C);)C.forEach(function(I){I.x+=m.positionOffset,I.y+=m.positionOffset});return C},Object.defineProperty(m.prototype,"isPermissionsRequired",{get:function(){return!0},enumerable:!1,configurable:!0}),m.positionOffset=a.UnitConverter.pixelsToTwips(10),m}(v.ClipboardCommand);h.PasteSelectionCommandBase=c},437:function(j,h,d){var u,g=this&&this.__extends||(u=function(t,n){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var a in r)r.hasOwnProperty(a)&&(o[a]=r[a])},u(t,n)},function(t,n){function o(){this.constructor=t}u(t,n),t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)});Object.defineProperty(h,"__esModule",{value:!0}),h.PasteSelectionInPositionCommand=void 0;var v=d(7688),p=d(5503),s=d(7959),i=d(8900),e=function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return g(n,t),n.prototype.getEventPositionOffset=function(o,r){if(!r)return i.Point.zero();var a=o.reduce(function(f,m){return{x:Math.min(f.x,m instanceof p.Shape?m.position.x:m instanceof s.Connector?m.getMinX():Number.MAX_VALUE),y:Math.min(f.y,m instanceof p.Shape?m.position.y:m instanceof s.Connector?m.getMinY():Number.MAX_VALUE)}},{x:Number.MAX_VALUE,y:Number.MAX_VALUE}),c=this.control.render.getModelPointByEventPoint(r.x,r.y);return new i.Point(c.x-a.x,c.y-a.y)},n}(v.PasteSelectionCommandBase);h.PasteSelectionInPositionCommand=e},9687:(j,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.CommandBase=void 0;var d=function(){function u(g){this.control=g}return u.prototype.execute=function(g){this.isPermissionsRequired&&this.permissionsProvider.lockPermissions();var v=this.getState();if(this.isPermissionsRequired&&this.permissionsProvider.unlockPermissions(),!v.enabled)return!1;this.control.beginUpdate();var p=!1;return p=this.isPermissionsRequired?this.executeWithPermissions(v,g):this.executeCore(v,g),this.control.endUpdate(),p&&this.updateControlState(),p},u.prototype.executeWithPermissions=function(g,v){var p=!1;return this.permissionsProvider.beginStorePermissions(),this.control.history.beginTransaction(),p=this.executeCore(g,v),this.permissionsProvider.isStoredPermissionsGranted()||(this.permissionsProvider.lockPermissions(),this.control.history.undoTransaction(),this.permissionsProvider.unlockPermissions(),p=!1),this.control.history.endTransaction(),this.permissionsProvider.endStorePermissions(),p},u.prototype.updateControlState=function(){this.lockInputPositionUpdating()||this.control.selection.inputPosition.reset(),this.lockUIUpdating()||this.control.barManager.updateItemsState()},Object.defineProperty(u.prototype,"permissionsProvider",{get:function(){return this.control&&this.control.permissionsProvider},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"isPermissionsRequired",{get:function(){return!1},enumerable:!1,configurable:!0}),u.prototype.lockUIUpdating=function(){return!1},u.prototype.lockInputPositionUpdating=function(){return!1},u}();h.CommandBase=d},7156:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.CommandManager=h.DiagramCommand=void 0;var u,g=d(264),v=d(6679),p=d(3614),s=d(6596),i=d(4845),e=d(4378),t=d(7607),n=d(3411),o=d(7480),r=d(4077),a=d(6106),c=d(1649),f=d(3166),m=d(8700),y=d(2301),l=d(7306),P=d(2452),C=d(2153),I=d(375),x=d(4503),b=d(7550),S=d(7649),w=d(1813),T=d(3690),_=d(2276),M=d(1203),A=d(5827),E=d(2664),U=d(4200),R=d(1239),O=d(4624),N=d(3591),V=d(30),H=d(5925),L=d(4522),D=d(9538),K=d(125),F=d(7004),q=d(9427),ee=d(9031),Q=d(6049),X=d(4999),z=d(4419),B=d(8016),k=d(72),W=d(6619),G=d(7795),Y=d(9970),J=d(4281),$=d(437),te=d(5830),oe=d(9158),re=d(962),ie=d(4643),se=d(4681),ae=d(2217),pe=d(5010),ge=d(554),ye=d(7826),me=d(7717);(function(Z){Z[Z.Undo=0]="Undo",Z[Z.Redo=1]="Redo",Z[Z.Cut=2]="Cut",Z[Z.Copy=3]="Copy",Z[Z.Paste=4]="Paste",Z[Z.PasteInPosition=5]="PasteInPosition",Z[Z.SelectAll=6]="SelectAll",Z[Z.Delete=7]="Delete",Z[Z.Import=8]="Import",Z[Z.ImportBPMN=9]="ImportBPMN",Z[Z.Export=10]="Export",Z[Z.ExportSvg=11]="ExportSvg",Z[Z.ExportPng=12]="ExportPng",Z[Z.ExportJpg=13]="ExportJpg",Z[Z.BindDocument=14]="BindDocument",Z[Z.UnbindDocument=15]="UnbindDocument",Z[Z.Bold=16]="Bold",Z[Z.Italic=17]="Italic",Z[Z.Underline=18]="Underline",Z[Z.FontName=19]="FontName",Z[Z.FontSize=20]="FontSize",Z[Z.FontColor=21]="FontColor",Z[Z.FillColor=22]="FillColor",Z[Z.StrokeColor=23]="StrokeColor",Z[Z.TextLeftAlign=24]="TextLeftAlign",Z[Z.TextCenterAlign=25]="TextCenterAlign",Z[Z.TextRightAlign=26]="TextRightAlign",Z[Z.ConnectorLineOption=27]="ConnectorLineOption",Z[Z.ConnectorStartLineEnding=28]="ConnectorStartLineEnding",Z[Z.ConnectorEndLineEnding=29]="ConnectorEndLineEnding",Z[Z.BringToFront=30]="BringToFront",Z[Z.SendToBack=31]="SendToBack",Z[Z.MoveLeft=32]="MoveLeft",Z[Z.MoveStepLeft=33]="MoveStepLeft",Z[Z.MoveRight=34]="MoveRight",Z[Z.MoveStepRight=35]="MoveStepRight",Z[Z.MoveUp=36]="MoveUp",Z[Z.MoveStepUp=37]="MoveStepUp",Z[Z.MoveDown=38]="MoveDown",Z[Z.MoveStepDown=39]="MoveStepDown",Z[Z.CloneLeft=40]="CloneLeft",Z[Z.CloneRight=41]="CloneRight",Z[Z.CloneUp=42]="CloneUp",Z[Z.CloneDown=43]="CloneDown",Z[Z.AutoLayoutTree=44]="AutoLayoutTree",Z[Z.AutoLayoutFlow=45]="AutoLayoutFlow",Z[Z.AutoLayoutTreeVertical=46]="AutoLayoutTreeVertical",Z[Z.AutoLayoutTreeHorizontal=47]="AutoLayoutTreeHorizontal",Z[Z.AutoLayoutLayeredVertical=48]="AutoLayoutLayeredVertical",Z[Z.AutoLayoutLayeredHorizontal=49]="AutoLayoutLayeredHorizontal",Z[Z.Lock=50]="Lock",Z[Z.Unlock=51]="Unlock",Z[Z.Units=52]="Units",Z[Z.ViewUnits=53]="ViewUnits",Z[Z.PageSize=54]="PageSize",Z[Z.PageLandscape=55]="PageLandscape",Z[Z.PageColor=56]="PageColor",Z[Z.GridSize=57]="GridSize",Z[Z.ShowGrid=58]="ShowGrid",Z[Z.SnapToGrid=59]="SnapToGrid",Z[Z.ZoomLevel=60]="ZoomLevel",Z[Z.Fullscreen=61]="Fullscreen",Z[Z.ToggleSimpleView=62]="ToggleSimpleView",Z[Z.ToggleReadOnly=63]="ToggleReadOnly",Z[Z.EditShapeImage=64]="EditShapeImage",Z[Z.FitToScreen=65]="FitToScreen",Z[Z.SwitchAutoZoom=66]="SwitchAutoZoom",Z[Z.ToggleAutoZoom=67]="ToggleAutoZoom",Z[Z.FitToWidth=68]="FitToWidth",Z[Z.ZoomLevelItems=69]="ZoomLevelItems",Z[Z.GridSizeItems=70]="GridSizeItems",Z[Z.PageSizeItems=71]="PageSizeItems",Z[Z.ImportXML=72]="ImportXML",Z[Z.InsertShapeImage=73]="InsertShapeImage",Z[Z.DeleteShapeImage=74]="DeleteShapeImage",Z[Z.StrokeStyle=75]="StrokeStyle",Z[Z.StrokeWidth=76]="StrokeWidth",Z[Z.AutoLayoutTreeVerticalBottomToTop=77]="AutoLayoutTreeVerticalBottomToTop",Z[Z.AutoLayoutTreeHorizontalRightToLeft=78]="AutoLayoutTreeHorizontalRightToLeft",Z[Z.AutoLayoutLayeredVerticalBottomToTop=79]="AutoLayoutLayeredVerticalBottomToTop",Z[Z.AutoLayoutLayeredHorizontalRightToLeft=80]="AutoLayoutLayeredHorizontalRightToLeft",Z[Z.Zoom25=81]="Zoom25",Z[Z.Zoom50=82]="Zoom50",Z[Z.Zoom75=83]="Zoom75",Z[Z.Zoom100=84]="Zoom100",Z[Z.Zoom125=85]="Zoom125",Z[Z.Zoom150=86]="Zoom150",Z[Z.Zoom200=87]="Zoom200",Z[Z.AutoZoomToContent=88]="AutoZoomToContent",Z[Z.AutoZoomToWidth=89]="AutoZoomToWidth",Z[Z.ZoomLevelInPercentage=90]="ZoomLevelInPercentage",Z[Z.ConnectorRoutingMode=91]="ConnectorRoutingMode"})(u=h.DiagramCommand||(h.DiagramCommand={}));var ve=function(){function Z(ne){this.commands={},this.shortcutsToCommand={},this.lastCommandsChain=[],this.executingCommandsChain=[],this.executingCommandCounter=0,this.isPublicApiCall=!1,this.createCommand(ne,u.Undo,v.UndoCommand,C.ModifierKey.Ctrl|C.KeyCode.Key_z,C.ModifierKey.Meta|C.KeyCode.Key_z),this.createCommand(ne,u.Redo,p.RedoCommand,C.ModifierKey.Ctrl|C.KeyCode.Key_y,C.ModifierKey.Ctrl|C.ModifierKey.Shift|C.KeyCode.Key_z,C.ModifierKey.Meta|C.ModifierKey.Shift|C.KeyCode.Key_z),this.createCommand(ne,u.Cut,E.CutSelectionCommand,C.KeyCode.Key_x|C.ModifierKey.Ctrl,C.KeyCode.Key_x|C.ModifierKey.Meta,C.KeyCode.Delete|C.ModifierKey.Shift),this.createCommand(ne,u.Copy,A.CopySelectionCommand,C.KeyCode.Key_c|C.ModifierKey.Ctrl,C.KeyCode.Key_c|C.ModifierKey.Meta,C.KeyCode.Insert|C.ModifierKey.Ctrl),this.createCommand(ne,u.Paste,U.PasteSelectionCommand),this.createCommand(ne,u.PasteInPosition,$.PasteSelectionInPositionCommand),this.createCommand(ne,u.SelectAll,P.SelectAllCommand,C.KeyCode.Key_a|C.ModifierKey.Ctrl,C.KeyCode.Key_a|C.ModifierKey.Meta),this.createCommand(ne,u.Delete,g.DeleteCommand,C.KeyCode.Delete,C.KeyCode.Backspace),this.createCommand(ne,u.Import,s.ImportCommand),this.createCommand(ne,u.ImportBPMN,R.ImportBPMNCommand),this.createCommand(ne,u.ImportXML,te.ImportXMLCommand),this.createCommand(ne,u.Export,i.ExportCommand),this.createCommand(ne,u.ExportSvg,_.ExportSvgCommand),this.createCommand(ne,u.ExportPng,T.ExportPngCommand),this.createCommand(ne,u.ExportJpg,M.ExportJpgCommand),this.createCommand(ne,u.BindDocument,D.BindDocumentCommand),this.createCommand(ne,u.UnbindDocument,K.UnbindDocumentCommand),this.createCommand(ne,u.Bold,e.ToggleFontBoldCommand,C.ModifierKey.Ctrl|C.KeyCode.Key_b,C.ModifierKey.Meta|C.KeyCode.Key_b),this.createCommand(ne,u.Italic,t.ToggleFontItalicCommand,C.ModifierKey.Ctrl|C.KeyCode.Key_i,C.ModifierKey.Meta|C.KeyCode.Key_i),this.createCommand(ne,u.Underline,n.ToggleFontUnderlineCommand,C.ModifierKey.Ctrl|C.KeyCode.Key_u,C.ModifierKey.Meta|C.KeyCode.Key_u),this.createCommand(ne,u.FontName,o.ChangeFontNameCommand),this.createCommand(ne,u.FontSize,r.ChangeFontSizeCommand),this.createCommand(ne,u.FontColor,a.ChangeFontColorCommand),this.createCommand(ne,u.FillColor,c.ChangeFillColorCommand),this.createCommand(ne,u.StrokeColor,f.ChangeStrokeColorCommand),this.createCommand(ne,u.StrokeStyle,ie.ChangeStrokeStyleCommand),this.createCommand(ne,u.StrokeWidth,se.ChangeStrokeWidthCommand),this.createCommand(ne,u.TextLeftAlign,m.TextLeftAlignCommand),this.createCommand(ne,u.TextCenterAlign,m.TextCenterAlignCommand),this.createCommand(ne,u.TextRightAlign,m.TextRightAlignCommand),this.createCommand(ne,u.ConnectorLineOption,l.ChangeConnectorLineOptionCommand),this.createCommand(ne,u.ConnectorStartLineEnding,y.ChangeConnectorStartLineEndingCommand),this.createCommand(ne,u.ConnectorEndLineEnding,y.ChangeConnectorEndLineEndingCommand),this.createCommand(ne,u.BringToFront,N.BringToFrontCommand),this.createCommand(ne,u.SendToBack,O.SendToBackCommand),this.createCommand(ne,u.MoveLeft,H.MoveLeftCommand,C.ModifierKey.Ctrl|C.KeyCode.Left,C.ModifierKey.Ctrl|C.ModifierKey.Shift|C.KeyCode.Left),this.createCommand(ne,u.MoveRight,H.MoveRightCommand,C.ModifierKey.Ctrl|C.KeyCode.Right,C.ModifierKey.Ctrl|C.ModifierKey.Shift|C.KeyCode.Right),this.createCommand(ne,u.MoveUp,H.MoveUpCommand,C.ModifierKey.Ctrl|C.KeyCode.Up,C.ModifierKey.Ctrl|C.ModifierKey.Shift|C.KeyCode.Up),this.createCommand(ne,u.MoveDown,H.MoveDownCommand,C.ModifierKey.Ctrl|C.KeyCode.Down,C.ModifierKey.Ctrl|C.ModifierKey.Shift|C.KeyCode.Down),this.createCommand(ne,u.MoveStepLeft,H.MoveStepLeftCommand,C.KeyCode.Left,C.ModifierKey.Shift|C.KeyCode.Left),this.createCommand(ne,u.MoveStepRight,H.MoveStepRightCommand,C.KeyCode.Right,C.ModifierKey.Shift|C.KeyCode.Right),this.createCommand(ne,u.MoveStepUp,H.MoveStepUpCommand,C.KeyCode.Up,C.ModifierKey.Shift|C.KeyCode.Up),this.createCommand(ne,u.MoveStepDown,H.MoveStepDownCommand,C.KeyCode.Down,C.ModifierKey.Shift|C.KeyCode.Down),this.createCommand(ne,u.CloneLeft,X.CloneLeftCommand,C.ModifierKey.Alt|C.KeyCode.Left,C.ModifierKey.Alt|C.ModifierKey.Shift|C.KeyCode.Left),this.createCommand(ne,u.CloneRight,X.CloneRightCommand,C.ModifierKey.Alt|C.KeyCode.Right,C.ModifierKey.Alt|C.ModifierKey.Shift|C.KeyCode.Right),this.createCommand(ne,u.CloneUp,X.CloneUpCommand,C.ModifierKey.Alt|C.KeyCode.Up,C.ModifierKey.Alt|C.ModifierKey.Shift|C.KeyCode.Up),this.createCommand(ne,u.CloneDown,X.CloneDownCommand,C.ModifierKey.Alt|C.KeyCode.Down,C.ModifierKey.Alt|C.ModifierKey.Shift|C.KeyCode.Down),this.createCommand(ne,u.Lock,ee.LockCommand),this.createCommand(ne,u.Unlock,Q.UnLockCommand),this.createCommand(ne,u.AutoLayoutTree,I.AutoLayoutTreeVerticalCommand),this.createCommand(ne,u.AutoLayoutFlow,V.AutoLayoutLayeredHorizontalCommand),this.createCommand(ne,u.Units,z.ChangeUnitsCommand),this.createCommand(ne,u.ViewUnits,z.ChangeViewUnitsCommand),this.createCommand(ne,u.PageSize,w.ChangePageSizeCommand),this.createCommand(ne,u.PageLandscape,S.ChangePageLandscapeCommand),this.createCommand(ne,u.PageColor,B.ChangePageColorCommand),this.createCommand(ne,u.GridSize,b.ChangeGridSizeCommand),this.createCommand(ne,u.ShowGrid,k.ChangeShowGridCommand),this.createCommand(ne,u.SnapToGrid,x.ChangeSnapToGridCommand),this.createCommand(ne,u.ZoomLevel,L.ChangeZoomLevelCommand),this.createCommand(ne,u.ZoomLevelInPercentage,L.ChangeZoomLevelInPercentageCommand),this.createCommand(ne,u.AutoLayoutTreeVertical,I.AutoLayoutTreeVerticalCommand),this.createCommand(ne,u.AutoLayoutTreeVerticalBottomToTop,ae.AutoLayoutTreeVerticalBottomToTopCommand),this.createCommand(ne,u.AutoLayoutTreeHorizontal,F.AutoLayoutTreeHorizontalCommand),this.createCommand(ne,u.AutoLayoutTreeHorizontalRightToLeft,pe.AutoLayoutTreeHorizontalRightToLeftCommand),this.createCommand(ne,u.AutoLayoutLayeredVertical,q.AutoLayoutLayeredVerticalCommand),this.createCommand(ne,u.AutoLayoutLayeredVerticalBottomToTop,ge.AutoLayoutLayeredVerticalBottomToTopCommand),this.createCommand(ne,u.AutoLayoutLayeredHorizontal,V.AutoLayoutLayeredHorizontalCommand),this.createCommand(ne,u.AutoLayoutLayeredHorizontalRightToLeft,ye.AutoLayoutLayeredHorizontalRightToLeftCommand),this.createCommand(ne,u.Fullscreen,W.ToggleFullscreenCommand,C.KeyCode.F11),this.createCommand(ne,u.ToggleSimpleView,G.ToggleSimpleViewCommand),this.createCommand(ne,u.ToggleReadOnly,Y.ToggleReadOnlyCommand),this.createCommand(ne,u.InsertShapeImage,oe.InsertShapeImageCommand),this.createCommand(ne,u.EditShapeImage,J.EditShapeImageCommand),this.createCommand(ne,u.DeleteShapeImage,re.DeleteShapeImageCommand),this.createCommand(ne,u.FitToScreen,L.FitToScreenCommand),this.createCommand(ne,u.FitToWidth,L.FitToWidthCommand),this.createCommand(ne,u.SwitchAutoZoom,L.SwitchAutoZoomCommand),this.createCommand(ne,u.ToggleAutoZoom,L.ToggleAutoZoomCommand),this.createCommand(ne,u.ZoomLevelItems,L.ChangeZoomLevelItemsCommand),this.createCommand(ne,u.GridSizeItems,b.ChangeGridSizeItemsCommand),this.createCommand(ne,u.PageSizeItems,w.ChangePageSizeItemsCommand),this.createCommand(ne,u.Zoom25,L.ChangeZoomLevelTo25Command),this.createCommand(ne,u.Zoom50,L.ChangeZoomLevelTo50Command),this.createCommand(ne,u.Zoom75,L.ChangeZoomLevelTo75Command),this.createCommand(ne,u.Zoom100,L.ChangeZoomLevelTo100Command),this.createCommand(ne,u.Zoom125,L.ChangeZoomLevelTo125Command),this.createCommand(ne,u.Zoom150,L.ChangeZoomLevelTo150Command),this.createCommand(ne,u.Zoom200,L.ChangeZoomLevelTo200Command),this.createCommand(ne,u.AutoZoomToContent,L.ToggleAutoZoomToContentCommand),this.createCommand(ne,u.AutoZoomToWidth,L.ToggleAutoZoomToWidthCommand),this.createCommand(ne,u.ConnectorRoutingMode,me.ChangeConnectorRoutingModeCommand)}return Z.prototype.getCommand=function(ne){return this.commands[ne]},Z.prototype.beforeExecuting=function(ne){this.executingCommandsChain.push(ne),this.executingCommandCounter++},Z.prototype.afterExecuting=function(){this.executingCommandCounter--,this.executingCommandCounter===0&&(this.lastCommandsChain=this.executingCommandsChain,this.executingCommandsChain=[])},Z.prototype.processShortcut=function(ne){var ce=this.shortcutsToCommand[ne];return!!ce&&ce.execute()},Z.prototype.processPaste=function(ne){var ce=this.getCommand(u.Paste);return ce&&ce.isEnabled()&&ce.execute(ne),!0},Z.prototype.notifySelectionChanged=function(ne){this.lastCommandsChain=[]},Z.prototype.notifyScrollPositionChanged=function(){},Z.prototype.createCommand=function(ne,ce,Pe){for(var de=[],Ce=3;Ce<arguments.length;Ce++)de[Ce-3]=arguments[Ce];this.commands[ce]=new Pe(ne);for(var xe=0;xe<de.length;xe++){var be=de[xe];typeof be=="number"&&(this.shortcutsToCommand[be]=this.commands[ce])}},Z}();h.CommandManager=ve},2102:(j,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.SimpleCommandState=void 0;var d=function(u,g,v,p,s){this.visible=!0,this.denyUpdateValue=!1,this.enabled=u,this.value=g,this.items=p,this.visible=s,this.defaultValue=v};h.SimpleCommandState=d},264:function(j,h,d){var u,g=this&&this.__extends||(u=function(s,i){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},u(s,i)},function(s,i){function e(){this.constructor=s}u(s,i),s.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)});Object.defineProperty(h,"__esModule",{value:!0}),h.DeleteCommand=void 0;var v=d(4867),p=function(s){function i(){return s!==null&&s.apply(this,arguments)||this}return g(i,s),i.prototype.isEnabled=function(){var e=this.control.selection.getSelectedItems();return s.prototype.isEnabled.call(this)&&e.length&&(e.length>1||this.permissionsProvider.canDeleteItems(e))},i.prototype.executeCore=function(e){var t=this.control.selection.getSelectedItems(!0,!0);return this.permissionsProvider.beginDeleteItems(t),v.ModelUtils.deleteSelection(this.control.history,this.control.model,this.control.selection),this.permissionsProvider.endDeleteItems(),!0},Object.defineProperty(i.prototype,"isPermissionsRequired",{get:function(){return!0},enumerable:!1,configurable:!0}),i}(d(9741).SimpleCommandBase);h.DeleteCommand=p},3614:function(j,h,d){var u,g=this&&this.__extends||(u=function(p,s){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t])},u(p,s)},function(p,s){function i(){this.constructor=p}u(p,s),p.prototype=s===null?Object.create(s):(i.prototype=s.prototype,new i)});Object.defineProperty(h,"__esModule",{value:!0}),h.RedoCommand=void 0;var v=function(p){function s(){return p!==null&&p.apply(this,arguments)||this}return g(s,p),s.prototype.executeCore=function(i){return this.control.beginUpdateCanvas(),this.permissionsProvider.lockPermissions(),this.control.history.redo(),this.permissionsProvider.unlockPermissions(),this.control.endUpdateCanvas(),!0},s.prototype.isEnabled=function(){return p.prototype.isEnabled.call(this)&&this.control.history.canRedo()},s}(d(9741).SimpleCommandBase);h.RedoCommand=v},2452:function(j,h,d){var u,g=this&&this.__extends||(u=function(p,s){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t])},u(p,s)},function(p,s){function i(){this.constructor=p}u(p,s),p.prototype=s===null?Object.create(s):(i.prototype=s.prototype,new i)});Object.defineProperty(h,"__esModule",{value:!0}),h.SelectAllCommand=void 0;var v=function(p){function s(){return p!==null&&p.apply(this,arguments)||this}return g(s,p),s.prototype.isEnabledInReadOnlyMode=function(){return!0},s.prototype.executeCore=function(i,e){var t=[];return this.control.model.iterateItems(function(n){return t.push(n.key)}),this.control.selection.set(t),!0},s}(d(9741).SimpleCommandBase);h.SelectAllCommand=v},6679:function(j,h,d){var u,g=this&&this.__extends||(u=function(p,s){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t])},u(p,s)},function(p,s){function i(){this.constructor=p}u(p,s),p.prototype=s===null?Object.create(s):(i.prototype=s.prototype,new i)});Object.defineProperty(h,"__esModule",{value:!0}),h.UndoCommand=void 0;var v=function(p){function s(){return p!==null&&p.apply(this,arguments)||this}return g(s,p),s.prototype.executeCore=function(i){return this.control.beginUpdateCanvas(),this.permissionsProvider.lockPermissions(),this.control.history.undo(),this.permissionsProvider.unlockPermissions(),this.control.endUpdateCanvas(),!0},s.prototype.isEnabled=function(){return p.prototype.isEnabled.call(this)&&this.control.history.canUndo()},s}(d(9741).SimpleCommandBase);h.UndoCommand=v},9538:function(j,h,d){var u,g=this&&this.__extends||(u=function(s,i){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},u(s,i)},function(s,i){function e(){this.constructor=s}u(s,i),s.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)});Object.defineProperty(h,"__esModule",{value:!0}),h.BindDocumentCommand=void 0;var v=d(3503),p=function(s){function i(){return s!==null&&s.apply(this,arguments)||this}return g(i,s),i.prototype.isEnabledInReadOnlyMode=function(){return!0},i.prototype.executeCore=function(e,t){if(!t||!Array.isArray(t.nodeDataSource))throw Error("Format exception");return this.performImportData(t),this.control.updateLayout(!0),!0},i.prototype.performImportData=function(e){var t=this.control.createDocumentDataSource(e.nodeDataSource,e.edgeDataSource,e.dataParameters,e.nodeDataImporter,e.edgeDataImporter);this.control.beginUpdateCanvas(),this.permissionsProvider.lockPermissions();var n=new v.DataLayoutParameters(this.control.settings,e.layoutParameters);t.createModelItems(this.control.history,this.control.model,this.control.shapeDescriptionManager,this.control.selection,n,this.control.settings.snapToGrid,this.control.settings.gridSize,this.control.measurer),this.permissionsProvider.unlockPermissions(),this.control.endUpdateCanvas()},i}(d(9741).SimpleCommandBase);h.BindDocumentCommand=p},125:function(j,h,d){var u,g=this&&this.__extends||(u=function(s,i){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},u(s,i)},function(s,i){function e(){this.constructor=s}u(s,i),s.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)});Object.defineProperty(h,"__esModule",{value:!0}),h.UnbindDocumentCommand=void 0;var v=d(4867),p=function(s){function i(){return s!==null&&s.apply(this,arguments)||this}return g(i,s),i.prototype.isEnabledInReadOnlyMode=function(){return!0},i.prototype.executeCore=function(e){return this.permissionsProvider.lockPermissions(),this.control.deleteDocumentDataSource(),v.ModelUtils.deleteAllItems(this.control.history,this.control.model,this.control.selection),this.control.history.clear(),this.permissionsProvider.unlockPermissions(),!0},i}(d(9741).SimpleCommandBase);h.UnbindDocumentCommand=p},4845:function(j,h,d){var u,g=this&&this.__extends||(u=function(s,i){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},u(s,i)},function(s,i){function e(){this.constructor=s}u(s,i),s.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)});Object.defineProperty(h,"__esModule",{value:!0}),h.ExportCommand=void 0;var v=d(5885),p=function(s){function i(){return s!==null&&s.apply(this,arguments)||this}return g(i,s),i.prototype.executeCore=function(e,t){return t(new v.Exporter().export(this.control.model)),!0},i}(d(1081).ExportImportCommandBase);h.ExportCommand=p},4012:function(j,h,d){var u,g=this&&this.__extends||(u=function(a,c){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,m){f.__proto__=m}||function(f,m){for(var y in m)m.hasOwnProperty(y)&&(f[y]=m[y])},u(a,c)},function(a,c){function f(){this.constructor=a}u(a,c),a.prototype=c===null?Object.create(c):(f.prototype=c.prototype,new f)});Object.defineProperty(h,"__esModule",{value:!0}),h.ExportImageCommand=void 0;var v=d(8693),p=d(3872),s=d(1081),i=d(5885),e=d(1114),t=d(1733),n=d(6078),o=d(7176),r=function(a){function c(f){var m=a.call(this,f)||this;return m.exporter=new i.Exporter,m}return g(c,a),c.prototype.isEnabled=function(){return!o.ImageCache.instance.hasNonLoadedImages()},c.prototype.executeCore=function(f,m){var y=this;try{var l=this.getExportManager();this.getExportFunc()(this.control.model.size.clone(),this.control.model.pageColor,l,function(P){m(P,y.getExtension()),y.tryDispose()},this.control.settings.useCanvgForExportToImage)}catch(P){throw this.tryDispose(),P}return!0},c.prototype.getExportManager=function(){var f=this.getOrCreateMeasurer(),m=this.control.render&&this.control.render.items||this.createItemsManager(f);return this.exportManager||(this.exportManager=new p.CanvasExportManager(m.itemsContainer,f,this.control.instanceId))},c.prototype.createItemsManager=function(f){this.svgElement=e.RenderHelper.createSvgElement(document.body,!0);var m=new v.CanvasItemsManager(this.svgElement,1,new n.ExportDOMManipulator(f),this.control.instanceId);return this.control.modelManipulator.onModelChanged.add(m),this.control.modelManipulator.commitItemsCreateChanges(),m},c.prototype.tryDispose=function(){this.svgElement&&(document.body.removeChild(this.svgElement),delete this.svgElement),this.tempMeasurer&&(this.tempMeasurer.clean(),this.tempMeasurer=void 0),this.exportManager=void 0},c.prototype.getOrCreateMeasurer=function(){return this.control.measurer||(this.tempMeasurer=new t.TextMeasurer(document.body))},c}(s.ExportImportCommandBase);h.ExportImageCommand=r},1081:function(j,h,d){var u,g=this&&this.__extends||(u=function(p,s){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t])},u(p,s)},function(p,s){function i(){this.constructor=p}u(p,s),p.prototype=s===null?Object.create(s):(i.prototype=s.prototype,new i)});Object.defineProperty(h,"__esModule",{value:!0}),h.ExportImportCommandBase=void 0;var v=function(p){function s(){return p!==null&&p.apply(this,arguments)||this}return g(s,p),s.prototype.isEnabledInReadOnlyMode=function(){return!0},s}(d(9741).SimpleCommandBase);h.ExportImportCommandBase=v},1203:function(j,h,d){var u,g=this&&this.__extends||(u=function(p,s){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t])},u(p,s)},function(p,s){function i(){this.constructor=p}u(p,s),p.prototype=s===null?Object.create(s):(i.prototype=s.prototype,new i)});Object.defineProperty(h,"__esModule",{value:!0}),h.ExportJpgCommand=void 0;var v=function(p){function s(){return p!==null&&p.apply(this,arguments)||this}return g(s,p),s.prototype.getExtension=function(){return"jpg"},s.prototype.getExportFunc=function(){return this.exporter.exportJpg},s}(d(4012).ExportImageCommand);h.ExportJpgCommand=v},3690:function(j,h,d){var u,g=this&&this.__extends||(u=function(p,s){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t])},u(p,s)},function(p,s){function i(){this.constructor=p}u(p,s),p.prototype=s===null?Object.create(s):(i.prototype=s.prototype,new i)});Object.defineProperty(h,"__esModule",{value:!0}),h.ExportPngCommand=void 0;var v=function(p){function s(){return p!==null&&p.apply(this,arguments)||this}return g(s,p),s.prototype.getExtension=function(){return"png"},s.prototype.getExportFunc=function(){return this.exporter.exportPng},s}(d(4012).ExportImageCommand);h.ExportPngCommand=v},2276:function(j,h,d){var u,g=this&&this.__extends||(u=function(p,s){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t])},u(p,s)},function(p,s){function i(){this.constructor=p}u(p,s),p.prototype=s===null?Object.create(s):(i.prototype=s.prototype,new i)});Object.defineProperty(h,"__esModule",{value:!0}),h.ExportSvgCommand=void 0;var v=function(p){function s(){return p!==null&&p.apply(this,arguments)||this}return g(s,p),s.prototype.getExtension=function(){return"svg"},s.prototype.getExportFunc=function(){return this.exporter.exportSvg},s}(d(4012).ExportImageCommand);h.ExportSvgCommand=v},1239:function(j,h,d){var u,g=this&&this.__extends||(u=function(c,f){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,y){m.__proto__=y}||function(m,y){for(var l in y)y.hasOwnProperty(l)&&(m[l]=y[l])},u(c,f)},function(c,f){function m(){this.constructor=c}u(c,f),c.prototype=f===null?Object.create(f):(m.prototype=f.prototype,new m)});Object.defineProperty(h,"__esModule",{value:!0}),h.ImportBPMNCommand=void 0;var v=d(5941),p=d(4867),s=d(4145),i=d(8900),e=d(7959),t=d(9603),n=d(3477),o=d(1256),r=d(8710),a=function(c){function f(){return c!==null&&c.apply(this,arguments)||this}return g(f,c),f.prototype.executeCore=function(m,y){var l=new v.BPMNImporter(y).import();return this.updateModel(l),!0},f.prototype.updateModel=function(m){var y=this,l={},P=[],C=[];this.control.history.beginTransaction(),m.items.forEach(function(x){var b=new s.AddShapeHistoryItem(y.getShapeDescription(x.type),new i.Point(0,0),x.text,x.key);y.control.history.addAndRedo(b),l[x.key]=b.shapeKey;var S=y.control.model.findShape(b.shapeKey);P.push(S)}),m.edges.forEach(function(x){var b=y.control.model.findShape(l[x.from]),S=y.control.model.findShape(l[x.to]),w=new t.AddConnectorHistoryItem([b.getConnectionPointPosition(0),S.getConnectionPointPosition(0)]);y.control.history.addAndRedo(w);var T=y.control.model.findConnector(w.connectorKey);y.control.history.addAndRedo(new n.AddConnectionHistoryItem(T,b,0,e.ConnectorPosition.Begin)),y.control.history.addAndRedo(new n.AddConnectionHistoryItem(T,S,0,e.ConnectorPosition.End)),C.push(T)});var I=new r.LayoutSettings;p.ModelUtils.getGraphInfoByItems(this.control.model,P,C).forEach(function(x){var b=new o.SugiyamaLayoutBuilder(I,x.graph).build(),S=p.ModelUtils.getNonGraphItems(y.control.model,x.container,b.nodeToLayout,P,C);p.ModelUtils.applyLayout(y.control.history,y.control.model,void 0,x.graph,b,S,I,y.control.settings.snapToGrid,y.control.settings.gridSize,!1)}),p.ModelUtils.tryUpdateModelRectangle(this.control.history),this.control.history.endTransaction()},f.prototype.getShapeDescription=function(m){return this.control.shapeDescriptionManager.get(m)},f}(d(1081).ExportImportCommandBase);h.ImportBPMNCommand=a},6596:function(j,h,d){var u,g=this&&this.__extends||(u=function(s,i){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},u(s,i)},function(s,i){function e(){this.constructor=s}u(s,i),s.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)});Object.defineProperty(h,"__esModule",{value:!0}),h.ImportCommand=void 0;var v=d(2406),p=function(s){function i(){return s!==null&&s.apply(this,arguments)||this}return g(i,s),i.prototype.executeCore=function(e,t){this.permissionsProvider.lockPermissions();var n=t.data?t.data:t,o=new v.Importer(this.control.shapeDescriptionManager,n);if(t.keepExistingItems===!0)o.importItemsData(this.control.model),this.control.importItemsData();else{var r=o.import();this.control.importModel(r)}return this.permissionsProvider.unlockPermissions(),!0},i}(d(1081).ExportImportCommandBase);h.ImportCommand=p},5830:function(j,h,d){var u,g=this&&this.__extends||(u=function(s,i){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},u(s,i)},function(s,i){function e(){this.constructor=s}u(s,i),s.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)});Object.defineProperty(h,"__esModule",{value:!0}),h.ImportXMLCommand=void 0;var v=d(780),p=function(s){function i(){return s!==null&&s.apply(this,arguments)||this}return g(i,s),i.prototype.executeCore=function(e,t){var n=new v.XmlImporter(this.control.shapeDescriptionManager,t).import();return this.control.importModel(n),!0},i}(d(1081).ExportImportCommandBase);h.ImportXMLCommand=p},4999:function(j,h,d){var u,g=this&&this.__extends||(u=function(n,o){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var c in a)a.hasOwnProperty(c)&&(r[c]=a[c])},u(n,o)},function(n,o){function r(){this.constructor=n}u(n,o),n.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)});Object.defineProperty(h,"__esModule",{value:!0}),h.CloneDownCommand=h.CloneUpCommand=h.CloneRightCommand=h.CloneLeftCommand=h.CloneCommand=void 0;var v=d(4867),p=function(n){function o(){return n!==null&&n.apply(this,arguments)||this}return g(o,n),o.prototype.isEnabled=function(){var r=this.control.selection.getSelectedItems();return n.prototype.isEnabled.call(this)&&r.length&&r.length>0&&this.permissionsProvider.canAddItems(r)},o.prototype.executeCore=function(r,a){var c=v.ModelUtils.createRectangle(this.control.selection.getSelectedItems());return v.ModelUtils.cloneSelectionToOffset(this.control.history,this.control.model,void 0,this.control.selection,this.getOffsetX(c),this.getOffsetY(c)),!0},Object.defineProperty(o.prototype,"isPermissionsRequired",{get:function(){return!0},enumerable:!1,configurable:!0}),o.prototype.getOffsetX=function(r){return 0},o.prototype.getOffsetY=function(r){return 0},o}(d(9741).SimpleCommandBase);h.CloneCommand=p;var s=function(n){function o(){return n!==null&&n.apply(this,arguments)||this}return g(o,n),o.prototype.getOffsetX=function(r){return-r.width},o}(p);h.CloneLeftCommand=s;var i=function(n){function o(){return n!==null&&n.apply(this,arguments)||this}return g(o,n),o.prototype.getOffsetX=function(r){return r.width},o}(p);h.CloneRightCommand=i;var e=function(n){function o(){return n!==null&&n.apply(this,arguments)||this}return g(o,n),o.prototype.getOffsetY=function(r){return-r.height},o}(p);h.CloneUpCommand=e;var t=function(n){function o(){return n!==null&&n.apply(this,arguments)||this}return g(o,n),o.prototype.getOffsetY=function(r){return r.height},o}(p);h.CloneDownCommand=t},5925:function(j,h,d){var u,g=this&&this.__extends||(u=function(l,P){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,I){C.__proto__=I}||function(C,I){for(var x in I)I.hasOwnProperty(x)&&(C[x]=I[x])},u(l,P)},function(l,P){function C(){this.constructor=l}u(l,P),l.prototype=P===null?Object.create(P):(C.prototype=P.prototype,new C)});Object.defineProperty(h,"__esModule",{value:!0}),h.MoveStepDownCommand=h.MoveDownCommand=h.MoveStepUpCommand=h.MoveUpCommand=h.MoveStepRightCommand=h.MoveRightCommand=h.MoveStepLeftCommand=h.MoveLeftCommand=h.MoveCommand=void 0;var v=d(8900),p=d(4867),s=d(9291),i=d(9741),e=d(4742),t=function(l){function P(){return l!==null&&l.apply(this,arguments)||this}return g(P,l),P.prototype.isEnabled=function(){return l.prototype.isEnabled.call(this)&&!this.control.selection.isEmpty()},P.prototype.executeCore=function(C,I){var x=this;this.control.history.beginTransaction();var b=this.control.selection,S=new e.SelectionDragHelper(this.control.history,this.control.model,this.permissionsProvider,new v.Point(0,0),b.getSelectedItems(!0));return S.initDraggingShapes(b.getSelectedShapes(!1,!0),!1),S.initDraggingConnectors(b.getSelectedConnectors(!1,!0),!1),S.move(!1,function(w){return x.getPosition(w)},function(){},function(){}),p.ModelUtils.tryUpdateModelRectangle(this.control.history,function(w,T){return S.onTryUpdateModelSize(w,T)}),this.control.history.endTransaction(),!0},Object.defineProperty(P.prototype,"isPermissionsRequired",{get:function(){return!0},enumerable:!1,configurable:!0}),P}(i.SimpleCommandBase);h.MoveCommand=t;var n=function(l){function P(){return l!==null&&l.apply(this,arguments)||this}return g(P,l),P.prototype.getPosition=function(C){return C.clone().offset(-s.UnitConverter.pixelsToTwips(1),0)},P}(t);h.MoveLeftCommand=n;var o=function(l){function P(){return l!==null&&l.apply(this,arguments)||this}return g(P,l),P.prototype.getPosition=function(C){return this.control.settings.snapToGrid?new v.Point(p.ModelUtils.getSnappedPos(this.control.model,this.control.settings.gridSize,C.x-(this.control.settings.gridSize/2+2),!0),C.y):C.clone().offset(-this.control.settings.gridSize,0)},P}(t);h.MoveStepLeftCommand=o;var r=function(l){function P(){return l!==null&&l.apply(this,arguments)||this}return g(P,l),P.prototype.getPosition=function(C){return C.clone().offset(s.UnitConverter.pixelsToTwips(1),0)},P}(t);h.MoveRightCommand=r;var a=function(l){function P(){return l!==null&&l.apply(this,arguments)||this}return g(P,l),P.prototype.getPosition=function(C){return this.control.settings.snapToGrid?new v.Point(p.ModelUtils.getSnappedPos(this.control.model,this.control.settings.gridSize,C.x+(this.control.settings.gridSize/2+2),!0),C.y):C.clone().offset(this.control.settings.gridSize,0)},P}(t);h.MoveStepRightCommand=a;var c=function(l){function P(){return l!==null&&l.apply(this,arguments)||this}return g(P,l),P.prototype.getPosition=function(C){return C.clone().offset(0,-s.UnitConverter.pixelsToTwips(1))},P}(t);h.MoveUpCommand=c;var f=function(l){function P(){return l!==null&&l.apply(this,arguments)||this}return g(P,l),P.prototype.getPosition=function(C){return this.control.settings.snapToGrid?new v.Point(C.x,p.ModelUtils.getSnappedPos(this.control.model,this.control.settings.gridSize,C.y-(this.control.settings.gridSize/2+2),!1)):C.clone().offset(0,-this.control.settings.gridSize)},P}(t);h.MoveStepUpCommand=f;var m=function(l){function P(){return l!==null&&l.apply(this,arguments)||this}return g(P,l),P.prototype.getPosition=function(C){return C.clone().offset(0,s.UnitConverter.pixelsToTwips(1))},P}(t);h.MoveDownCommand=m;var y=function(l){function P(){return l!==null&&l.apply(this,arguments)||this}return g(P,l),P.prototype.getPosition=function(C){return this.control.settings.snapToGrid?new v.Point(C.x,p.ModelUtils.getSnappedPos(this.control.model,this.control.settings.gridSize,C.y+(this.control.settings.gridSize/2+2),!1)):C.clone().offset(0,this.control.settings.gridSize)},P}(t);h.MoveStepDownCommand=y},7550:function(j,h,d){var u,g=this&&this.__extends||(u=function(i,e){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var o in n)n.hasOwnProperty(o)&&(t[o]=n[o])},u(i,e)},function(i,e){function t(){this.constructor=i}u(i,e),i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)});Object.defineProperty(h,"__esModule",{value:!0}),h.ChangeGridSizeItemsCommand=h.ChangeGridSizeCommand=void 0;var v=d(9741),p=function(i){function e(){return i!==null&&i.apply(this,arguments)||this}return g(e,i),e.prototype.isEnabledInReadOnlyMode=function(){return!0},e.prototype.getValue=function(){return this.getModelUnit(this.control.settings.gridSize)},e.prototype.executeCore=function(t,n){return this.control.settings.gridSize=this.getModelUnitTwipsValue(n),!0},e.prototype.getItems=function(){var t=this;return this.control.settings.gridSizeItems.map(function(n){return{value:t.getModelUnit(n),text:t.getViewUnitText(n)}})},e}(v.SimpleCommandBase);h.ChangeGridSizeCommand=p;var s=function(i){function e(){return i!==null&&i.apply(this,arguments)||this}return g(e,i),e.prototype.isEnabledInReadOnlyMode=function(){return!0},e.prototype.getValue=function(){var t=this;return this.control.settings.gridSizeItems.map(function(n){return t.getModelUnit(n)})},e.prototype.executeCore=function(t,n){var o=this;return this.control.settings.gridSizeItems=n.map(function(r){return o.getModelUnitTwipsValue(r)}),!0},e}(v.SimpleCommandBase);h.ChangeGridSizeItemsCommand=s},8016:function(j,h,d){var u,g=this&&this.__extends||(u=function(t,n){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var a in r)r.hasOwnProperty(a)&&(o[a]=r[a])},u(t,n)},function(t,n){function o(){this.constructor=t}u(t,n),t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)});Object.defineProperty(h,"__esModule",{value:!0}),h.ChangePageColorCommand=void 0;var v=d(3499),p=d(7195),s=d(6613),i=d(13),e=function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return g(n,t),n.prototype.getValue=function(){return i.ColorUtils.colorToHash(this.control.model.pageColor)},n.prototype.getDefaultValue=function(){return i.ColorUtils.colorToHash(s.DiagramModel.defaultPageColor)},n.prototype.createHistoryItems=function(o){return[new p.ChangePageColorHistoryItem(i.ColorUtils.fromString(o))]},n}(v.ChangePagePropertyCommand);h.ChangePageColorCommand=e},7649:function(j,h,d){var u,g=this&&this.__extends||(u=function(i,e){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var o in n)n.hasOwnProperty(o)&&(t[o]=n[o])},u(i,e)},function(i,e){function t(){this.constructor=i}u(i,e),i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)});Object.defineProperty(h,"__esModule",{value:!0}),h.ChangePageLandscapeCommand=void 0;var v=d(3499),p=d(1380),s=function(i){function e(){return i!==null&&i.apply(this,arguments)||this}return g(e,i),e.prototype.getValue=function(){return this.control.model.pageLandscape},e.prototype.createHistoryItems=function(t){return[new p.ChangePageLandscapeHistoryItem(t)]},e}(v.ChangePagePropertyCommand);h.ChangePageLandscapeCommand=s},3499:function(j,h,d){var u,g=this&&this.__extends||(u=function(s,i){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},u(s,i)},function(s,i){function e(){this.constructor=s}u(s,i),s.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)});Object.defineProperty(h,"__esModule",{value:!0}),h.ChangePagePropertyCommand=void 0;var v=d(4867),p=function(s){function i(){return s!==null&&s.apply(this,arguments)||this}return g(i,s),i.prototype.executeCore=function(e,t){var n=this;return this.control.history.beginTransaction(),this.createHistoryItems(t).forEach(function(o){n.control.history.addAndRedo(o)}),v.ModelUtils.tryUpdateModelRectangle(this.control.history),this.control.history.endTransaction(),!0},i.prototype.getItems=function(){return null},i}(d(9741).SimpleCommandBase);h.ChangePagePropertyCommand=p},1813:function(j,h,d){var u,g=this&&this.__extends||(u=function(n,o){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var c in a)a.hasOwnProperty(c)&&(r[c]=a[c])},u(n,o)},function(n,o){function r(){this.constructor=n}u(n,o),n.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)});Object.defineProperty(h,"__esModule",{value:!0}),h.ChangePageSizeItemsCommand=h.ChangePageSizeCommand=void 0;var v=d(3499),p=d(6353),s=d(1044),i=d(9741),e=function(n){function o(){return n!==null&&n.apply(this,arguments)||this}return g(o,n),o.prototype.getValue=function(){return this.getModelUnitSize(this.control.model.pageSize)},o.prototype.createHistoryItems=function(r){return[new s.ChangePageSizeHistoryItem(new p.Size(this.getModelUnitTwipsValue(r.width),this.getModelUnitTwipsValue(r.height)))]},o.prototype.getItems=function(){var r=this;return this.control.settings.pageSizeItems.map(function(a){return{value:r.getModelUnitSize(a.size),text:a.text.replace("{width}",r.getViewUnitText(a.size.width)).replace("{height}",r.getViewUnitText(a.size.height))}})},o.prototype.getModelUnitSize=function(r){return new p.Size(this.getModelUnit(r.width),this.getModelUnit(r.height))},o}(v.ChangePagePropertyCommand);h.ChangePageSizeCommand=e;var t=function(n){function o(){return n!==null&&n.apply(this,arguments)||this}return g(o,n),o.prototype.isEnabled=function(){return!0},o.prototype.getValue=function(){var r=this;return this.control.settings.pageSizeItems.map(function(a){return{size:new p.Size(r.getModelUnit(a.width),r.getModelUnit(a.height)),text:a.text}})},o.prototype.executeCore=function(r,a){var c=this;return this.control.settings.pageSizeItems=a.map(function(f){return{size:new p.Size(c.getModelUnitTwipsValue(f.width),c.getModelUnitTwipsValue(f.height)),text:f.text}}),!0},o}(i.SimpleCommandBase);h.ChangePageSizeItemsCommand=t},72:function(j,h,d){var u,g=this&&this.__extends||(u=function(p,s){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t])},u(p,s)},function(p,s){function i(){this.constructor=p}u(p,s),p.prototype=s===null?Object.create(s):(i.prototype=s.prototype,new i)});Object.defineProperty(h,"__esModule",{value:!0}),h.ChangeShowGridCommand=void 0;var v=function(p){function s(){return p!==null&&p.apply(this,arguments)||this}return g(s,p),s.prototype.isEnabledInReadOnlyMode=function(){return!0},s.prototype.executeCore=function(i,e){var t=e===void 0?!this.control.settings.showGrid:!!e;return this.control.settings.showGrid!==t&&(this.control.settings.showGrid=t,!0)},s.prototype.getValue=function(){return this.control.settings.showGrid},s}(d(9741).SimpleCommandBase);h.ChangeShowGridCommand=v},4503:function(j,h,d){var u,g=this&&this.__extends||(u=function(p,s){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t])},u(p,s)},function(p,s){function i(){this.constructor=p}u(p,s),p.prototype=s===null?Object.create(s):(i.prototype=s.prototype,new i)});Object.defineProperty(h,"__esModule",{value:!0}),h.ChangeSnapToGridCommand=void 0;var v=function(p){function s(){return p!==null&&p.apply(this,arguments)||this}return g(s,p),s.prototype.executeCore=function(i,e){var t=e===void 0?!this.control.settings.snapToGrid:!!e;return this.control.settings.snapToGrid!==t&&(this.control.settings.snapToGrid=t,!0)},s.prototype.getValue=function(){return this.control.settings.snapToGrid},s}(d(9741).SimpleCommandBase);h.ChangeSnapToGridCommand=v},4419:function(j,h,d){var u,g=this&&this.__extends||(u=function(n,o){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var c in a)a.hasOwnProperty(c)&&(r[c]=a[c])},u(n,o)},function(n,o){function r(){this.constructor=n}u(n,o),n.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)});Object.defineProperty(h,"__esModule",{value:!0}),h.ChangeViewUnitsCommand=h.ChangeUnitsCommand=void 0;var v=d(3499),p=d(7479),s=d(9741),i=d(6224),e=function(n){function o(){return n!==null&&n.apply(this,arguments)||this}return g(o,n),o.prototype.isEnabledInReadOnlyMode=function(){return!0},o.prototype.getValue=function(){return this.control.model.units},o.prototype.createHistoryItems=function(r){return[new p.ChangeUnitsHistoryItem(r)]},o.prototype.getItems=function(){return Object.keys(i.DiagramLocalizationService.unitItems).map(function(r){return{value:parseInt(r),text:i.DiagramLocalizationService.unitItems[r]}})},o}(v.ChangePagePropertyCommand);h.ChangeUnitsCommand=e;var t=function(n){function o(){return n!==null&&n.apply(this,arguments)||this}return g(o,n),o.prototype.isEnabledInReadOnlyMode=function(){return!0},o.prototype.getValue=function(){return this.control.settings.viewUnits},o.prototype.executeCore=function(r,a){return this.control.settings.viewUnits=a,!0},o.prototype.getItems=function(){return Object.keys(i.DiagramLocalizationService.unitItems).map(function(r){return{value:parseInt(r),text:i.DiagramLocalizationService.unitItems[r]}})},o}(s.SimpleCommandBase);h.ChangeViewUnitsCommand=t},4522:function(j,h,d){var u,g=this&&this.__extends||(u=function(S,w){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,_){T.__proto__=_}||function(T,_){for(var M in _)_.hasOwnProperty(M)&&(T[M]=_[M])},u(S,w)},function(S,w){function T(){this.constructor=S}u(S,w),S.prototype=w===null?Object.create(w):(T.prototype=w.prototype,new T)});Object.defineProperty(h,"__esModule",{value:!0}),h.ToggleAutoZoomCommand=h.ToggleAutoZoomToWidthCommand=h.ToggleAutoZoomToContentCommand=h.SwitchAutoZoomCommand=h.FitToWidthCommand=h.FitToScreenCommand=h.ChangeZoomLevelItemsCommand=h.ChangeZoomLevelTo200Command=h.ChangeZoomLevelTo150Command=h.ChangeZoomLevelTo125Command=h.ChangeZoomLevelTo100Command=h.ChangeZoomLevelTo75Command=h.ChangeZoomLevelTo50Command=h.ChangeZoomLevelTo25Command=h.ChangeZoomLevelInPercentageCommand=h.ChangeZoomLevelCommand=void 0;var v=d(9741),p=d(240),s=function(S){function w(){return S!==null&&S.apply(this,arguments)||this}return g(w,S),w.prototype.isEnabledInReadOnlyMode=function(){return!0},w.prototype.getValue=function(){return this.control.view.getZoom()},w.prototype.executeCore=function(T,_){return this.control.settings.zoomLevel=_,this.control.settings.autoZoom=p.AutoZoomMode.Disabled,this.control.updateLayout(!0),!0},w.prototype.getItems=function(){return this.control.settings.zoomLevelItems.map(function(T){return{value:T,text:100*T+"%"}})},w}(v.SimpleCommandBase);h.ChangeZoomLevelCommand=s;var i=function(S){function w(){return S!==null&&S.apply(this,arguments)||this}return g(w,S),w.prototype.executeCore=function(T,_){return S.prototype.executeCore.call(this,T,_/100)},w.prototype.getValue=function(){return 100*this.control.view.getZoom()},w}(s);h.ChangeZoomLevelInPercentageCommand=i;var e=function(S){function w(){return S!==null&&S.apply(this,arguments)||this}return g(w,S),w.prototype.getValue=function(){return this.control.view.getZoom()===this.exactValue},w.prototype.executeCore=function(T,_){return S.prototype.executeCore.call(this,T,this.exactValue),!0},w.prototype.getItems=function(){},w}(s),t=function(S){function w(){var T=S!==null&&S.apply(this,arguments)||this;return T.exactValue=.25,T}return g(w,S),w}(e);h.ChangeZoomLevelTo25Command=t;var n=function(S){function w(){var T=S!==null&&S.apply(this,arguments)||this;return T.exactValue=.5,T}return g(w,S),w}(e);h.ChangeZoomLevelTo50Command=n;var o=function(S){function w(){var T=S!==null&&S.apply(this,arguments)||this;return T.exactValue=.75,T}return g(w,S),w}(e);h.ChangeZoomLevelTo75Command=o;var r=function(S){function w(){var T=S!==null&&S.apply(this,arguments)||this;return T.exactValue=1,T}return g(w,S),w}(e);h.ChangeZoomLevelTo100Command=r;var a=function(S){function w(){var T=S!==null&&S.apply(this,arguments)||this;return T.exactValue=1.25,T}return g(w,S),w}(e);h.ChangeZoomLevelTo125Command=a;var c=function(S){function w(){var T=S!==null&&S.apply(this,arguments)||this;return T.exactValue=1.5,T}return g(w,S),w}(e);h.ChangeZoomLevelTo150Command=c;var f=function(S){function w(){var T=S!==null&&S.apply(this,arguments)||this;return T.exactValue=2,T}return g(w,S),w}(e);h.ChangeZoomLevelTo200Command=f;var m=function(S){function w(){return S!==null&&S.apply(this,arguments)||this}return g(w,S),w.prototype.isEnabledInReadOnlyMode=function(){return!0},w.prototype.getValue=function(){return this.control.settings.zoomLevelItems},w.prototype.executeCore=function(T,_){return this.control.settings.zoomLevelItems=_,!0},w}(v.SimpleCommandBase);h.ChangeZoomLevelItemsCommand=m;var y=function(S){function w(){return S!==null&&S.apply(this,arguments)||this}return g(w,S),w.prototype.isEnabled=function(){return S.prototype.isEnabled.call(this)&&!!this.control.render},w.prototype.isEnabledInReadOnlyMode=function(){return!0},w.prototype.executeCore=function(T){var _=this.getZoomLevel();return this.control.settings.zoomLevel=_,this.control.settings.autoZoom=p.AutoZoomMode.Disabled,this.control.updateLayout(!0),!0},w}(v.SimpleCommandBase),l=function(S){function w(){return S!==null&&S.apply(this,arguments)||this}return g(w,S),w.prototype.getZoomLevel=function(){return this.control.render.view.getActualAutoZoomLevel(p.AutoZoomMode.FitContent)},w}(y);h.FitToScreenCommand=l;var P=function(S){function w(){return S!==null&&S.apply(this,arguments)||this}return g(w,S),w.prototype.getZoomLevel=function(){return this.control.render.view.getActualAutoZoomLevel(p.AutoZoomMode.FitToWidth)},w}(y);h.FitToWidthCommand=P;var C=function(S){function w(){return S!==null&&S.apply(this,arguments)||this}return g(w,S),w.prototype.isEnabledInReadOnlyMode=function(){return!0},w.prototype.getValue=function(){return this.control.settings.autoZoom},w.prototype.executeCore=function(T,_){return _=parseInt(_),this.control.settings.autoZoom!==_&&(_===p.AutoZoomMode.Disabled&&(this.control.settings.zoomLevel=this.control.view.getZoom()),this.control.settings.autoZoom=_,this.control.updateLayout(!0),!0)},w}(v.SimpleCommandBase);h.SwitchAutoZoomCommand=C;var I=function(S){function w(){return S!==null&&S.apply(this,arguments)||this}return g(w,S),w.prototype.getValue=function(){return this.control.settings.autoZoom===p.AutoZoomMode.FitContent},w.prototype.executeCore=function(T,_){return S.prototype.executeCore.call(this,T,p.AutoZoomMode.FitContent)},w}(C);h.ToggleAutoZoomToContentCommand=I;var x=function(S){function w(){return S!==null&&S.apply(this,arguments)||this}return g(w,S),w.prototype.getValue=function(){return this.control.settings.autoZoom===p.AutoZoomMode.FitToWidth},w.prototype.executeCore=function(T,_){return S.prototype.executeCore.call(this,T,p.AutoZoomMode.FitToWidth)},w}(C);h.ToggleAutoZoomToWidthCommand=x;var b=function(S){function w(){return S!==null&&S.apply(this,arguments)||this}return g(w,S),w.prototype.isEnabled=function(){return S.prototype.isEnabled.call(this)&&!!this.control.render},w.prototype.isEnabledInReadOnlyMode=function(){return!0},w.prototype.getValue=function(){return this.control.settings.autoZoom},w.prototype.executeCore=function(T,_){var M;return M=_===void 0?this.control.settings.autoZoom===p.AutoZoomMode.Disabled?p.AutoZoomMode.FitContent:p.AutoZoomMode.Disabled:_?p.AutoZoomMode.FitContent:p.AutoZoomMode.Disabled,this.control.settings.autoZoom!==M&&(M||(this.control.settings.zoomLevel=this.control.view.getZoom()),this.control.settings.autoZoom=M,this.control.updateLayout(!0),!0)},w}(v.SimpleCommandBase);h.ToggleAutoZoomCommand=b},6619:function(j,h,d){var u,g=this&&this.__extends||(u=function(p,s){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t])},u(p,s)},function(p,s){function i(){this.constructor=p}u(p,s),p.prototype=s===null?Object.create(s):(i.prototype=s.prototype,new i)});Object.defineProperty(h,"__esModule",{value:!0}),h.ToggleFullscreenCommand=void 0;var v=function(p){function s(){return p!==null&&p.apply(this,arguments)||this}return g(s,p),s.prototype.isEnabledInReadOnlyMode=function(){return!0},s.prototype.getValue=function(){return this.control.settings.fullscreen},s.prototype.executeCore=function(i,e){var t=typeof e=="boolean"?e:!i.value;return this.control.settings.fullscreen!==t&&(this.control.settings.fullscreen=!i.value,this.control.notifyToggleFullscreen(this.control.settings.fullscreen)),!0},s}(d(9741).SimpleCommandBase);h.ToggleFullscreenCommand=v},9970:function(j,h,d){var u,g=this&&this.__extends||(u=function(p,s){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t])},u(p,s)},function(p,s){function i(){this.constructor=p}u(p,s),p.prototype=s===null?Object.create(s):(i.prototype=s.prototype,new i)});Object.defineProperty(h,"__esModule",{value:!0}),h.ToggleReadOnlyCommand=void 0;var v=function(p){function s(){return p!==null&&p.apply(this,arguments)||this}return g(s,p),s.prototype.isEnabledInReadOnlyMode=function(){return!0},s.prototype.getValue=function(){return this.control.settings.readOnly},s.prototype.executeCore=function(i,e){return typeof e=="boolean"?this.control.settings.readOnly=e:e===void 0&&(this.control.settings.readOnly=!i.value),!0},s}(d(9741).SimpleCommandBase);h.ToggleReadOnlyCommand=v},7795:function(j,h,d){var u,g=this&&this.__extends||(u=function(p,s){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t])},u(p,s)},function(p,s){function i(){this.constructor=p}u(p,s),p.prototype=s===null?Object.create(s):(i.prototype=s.prototype,new i)});Object.defineProperty(h,"__esModule",{value:!0}),h.ToggleSimpleViewCommand=void 0;var v=function(p){function s(){return p!==null&&p.apply(this,arguments)||this}return g(s,p),s.prototype.isEnabledInReadOnlyMode=function(){return!0},s.prototype.getValue=function(){return this.control.settings.simpleView},s.prototype.executeCore=function(i,e){return typeof e=="boolean"?this.control.settings.simpleView=e:e===void 0&&(this.control.settings.simpleView=!i.value),this.control.updateLayout(!0),!0},s}(d(9741).SimpleCommandBase);h.ToggleSimpleViewCommand=v},3591:function(j,h,d){var u,g=this&&this.__extends||(u=function(s,i){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},u(s,i)},function(s,i){function e(){this.constructor=s}u(s,i),s.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)});Object.defineProperty(h,"__esModule",{value:!0}),h.BringToFrontCommand=void 0;var v=d(5982),p=function(s){function i(){return s!==null&&s.apply(this,arguments)||this}return g(i,s),i.prototype.isEnabled=function(){var e=this.control.selection.getSelectedItems();return s.prototype.isEnabled.call(this)&&e.length>0&&this.needBringToFront(e)},i.prototype.executeCore=function(e,t){var n=this;return this.control.history.beginTransaction(),this.control.selection.getSelectedItems().forEach(function(o){var r=n.control.model.getIntersectItemsMaxZIndex(o)+1;n.control.history.addAndRedo(new v.ChangeZindexHistoryItem(o,r))}),this.control.history.endTransaction(),!0},i.prototype.needBringToFront=function(e){for(var t=this,n=function(c){var f=o.control.model.getIntersectItemsMaxZIndex(e[c]);if(f>e[c].zIndex)return{value:!0};if(f===e[c].zIndex){var m=!1;return o.control.model.getIntersectItems(e[c]).filter(function(y){return y.zIndex===e[c].zIndex}).forEach(function(y){t.control.model.getItemIndex(y)>t.control.model.getItemIndex(e[c])&&(m=!0)}),{value:m}}},o=this,r=0;r<e.length;r++){var a=n(r);if(typeof a=="object")return a.value}return!1},i}(d(9741).SimpleCommandBase);h.BringToFrontCommand=p},2301:function(j,h,d){var u,g=this&&this.__extends||(u=function(e,t){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var r in o)o.hasOwnProperty(r)&&(n[r]=o[r])},u(e,t)},function(e,t){function n(){this.constructor=e}u(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(h,"__esModule",{value:!0}),h.ChangeConnectorEndLineEndingCommand=h.ChangeConnectorStartLineEndingCommand=void 0;var v=d(7551),p=d(4612),s=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return g(t,e),t.prototype.getPropertyName=function(){return"startLineEnding"},t.prototype.getPropertyDefaultValue=function(){return p.ConnectorLineEnding.None},t}(v.ChangeConnectorPropertyCommand);h.ChangeConnectorStartLineEndingCommand=s;var i=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return g(t,e),t.prototype.getPropertyName=function(){return"endLineEnding"},t.prototype.getPropertyDefaultValue=function(){return p.ConnectorLineEnding.Arrow},t}(v.ChangeConnectorPropertyCommand);h.ChangeConnectorEndLineEndingCommand=i},7306:function(j,h,d){var u,g=this&&this.__extends||(u=function(i,e){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var o in n)n.hasOwnProperty(o)&&(t[o]=n[o])},u(i,e)},function(i,e){function t(){this.constructor=i}u(i,e),i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)});Object.defineProperty(h,"__esModule",{value:!0}),h.ChangeConnectorLineOptionCommand=void 0;var v=d(7551),p=d(4612),s=function(i){function e(){return i!==null&&i.apply(this,arguments)||this}return g(e,i),e.prototype.getPropertyName=function(){return"lineOption"},e.prototype.getPropertyDefaultValue=function(){return p.ConnectorLineOption.Straight},e}(v.ChangeConnectorPropertyCommand);h.ChangeConnectorLineOptionCommand=s},7551:function(j,h,d){var u,g=this&&this.__extends||(u=function(s,i){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},u(s,i)},function(s,i){function e(){this.constructor=s}u(s,i),s.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)});Object.defineProperty(h,"__esModule",{value:!0}),h.ChangeConnectorPropertyCommand=void 0;var v=d(8236),p=function(s){function i(){return s!==null&&s.apply(this,arguments)||this}return g(i,s),i.prototype.getValue=function(){return this.control.selection.inputPosition.getCurrentConnectorPropertyValue(this.getPropertyName())},i.prototype.getDefaultValue=function(){return this.getPropertyDefaultValue()},i.prototype.executeCore=function(e,t){var n=this;return this.control.history.beginTransaction(),this.control.selection.getSelectedConnectors().forEach(function(o){var r=n.getPropertyName();n.control.history.addAndRedo(new v.ChangeConnectorPropertyHistoryItem(o.key,r,t))}),this.control.selection.inputPosition.setConnectorPropertyValue(this.getPropertyName(),t),this.control.history.endTransaction(),!0},i.prototype.lockInputPositionUpdating=function(){return!0},i.prototype.isEnabled=function(){var e=this.control.selection.getSelectedConnectors();return s.prototype.isEnabled.call(this)&&e.length>0},i}(d(9741).SimpleCommandBase);h.ChangeConnectorPropertyCommand=p},7717:function(j,h,d){var u,g=this&&this.__extends||(u=function(i,e){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var o in n)n.hasOwnProperty(o)&&(t[o]=n[o])},u(i,e)},function(i,e){function t(){this.constructor=i}u(i,e),i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)});Object.defineProperty(h,"__esModule",{value:!0}),h.ChangeConnectorRoutingModeCommand=void 0;var v=d(9741),p=d(240),s=function(i){function e(){return i!==null&&i.apply(this,arguments)||this}return g(e,i),e.prototype.getValue=function(){return this.control.settings.connectorRoutingMode},e.prototype.executeCore=function(t,n){var o=n!==void 0?n:p.ConnectorRoutingMode.None;return this.control.settings.connectorRoutingMode=o,!0},e}(v.SimpleCommandBase);h.ChangeConnectorRoutingModeCommand=s},1307:function(j,h,d){var u,g=this&&this.__extends||(u=function(s,i){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},u(s,i)},function(s,i){function e(){this.constructor=s}u(s,i),s.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)});Object.defineProperty(h,"__esModule",{value:!0}),h.ChangeLockedCommand=void 0;var v=d(4867),p=function(s){function i(){return s!==null&&s.apply(this,arguments)||this}return g(i,s),i.prototype.isEnabled=function(){var e=this,t=this.control.selection.getSelectedItems(!0),n=!1;return t.forEach(function(o){o.locked!==e.getLockState()&&(n=!0)}),s.prototype.isEnabled.call(this)&&n},i.prototype.executeCore=function(e,t){return v.ModelUtils.changeSelectionLocked(this.control.history,this.control.model,this.control.selection,this.getLockState()),!0},i}(d(9741).SimpleCommandBase);h.ChangeLockedCommand=p},9031:function(j,h,d){var u,g=this&&this.__extends||(u=function(p,s){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t])},u(p,s)},function(p,s){function i(){this.constructor=p}u(p,s),p.prototype=s===null?Object.create(s):(i.prototype=s.prototype,new i)});Object.defineProperty(h,"__esModule",{value:!0}),h.LockCommand=void 0;var v=function(p){function s(){return p!==null&&p.apply(this,arguments)||this}return g(s,p),s.prototype.getLockState=function(){return!0},s}(d(1307).ChangeLockedCommand);h.LockCommand=v},4624:function(j,h,d){var u,g=this&&this.__extends||(u=function(s,i){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},u(s,i)},function(s,i){function e(){this.constructor=s}u(s,i),s.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)});Object.defineProperty(h,"__esModule",{value:!0}),h.SendToBackCommand=void 0;var v=d(5982),p=function(s){function i(){return s!==null&&s.apply(this,arguments)||this}return g(i,s),i.prototype.isEnabled=function(){var e=this.control.selection.getSelectedItems();return s.prototype.isEnabled.call(this)&&e.length>0&&this.needSendToBack(e)},i.prototype.executeCore=function(e,t){var n=this;return this.control.history.beginTransaction(),this.control.selection.getSelectedItems().forEach(function(o){var r=n.control.model.getIntersectItemsMinZIndex(o)-1;n.control.history.addAndRedo(new v.ChangeZindexHistoryItem(o,r))}),this.control.history.endTransaction(),!0},i.prototype.needSendToBack=function(e){for(var t=this,n=function(c){var f=o.control.model.getIntersectItemsMinZIndex(e[c]);if(f<e[c].zIndex)return{value:!0};if(f===e[c].zIndex){var m=!1;return o.control.model.getIntersectItems(e[c]).filter(function(y){return y.zIndex===e[c].zIndex}).forEach(function(y){t.control.model.getItemIndex(y)<t.control.model.getItemIndex(e[c])&&(m=!0)}),{value:m}}},o=this,r=0;r<e.length;r++){var a=n(r);if(typeof a=="object")return a.value}return!1},i}(d(9741).SimpleCommandBase);h.SendToBackCommand=p},6049:function(j,h,d){var u,g=this&&this.__extends||(u=function(p,s){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t])},u(p,s)},function(p,s){function i(){this.constructor=p}u(p,s),p.prototype=s===null?Object.create(s):(i.prototype=s.prototype,new i)});Object.defineProperty(h,"__esModule",{value:!0}),h.UnLockCommand=void 0;var v=function(p){function s(){return p!==null&&p.apply(this,arguments)||this}return g(s,p),s.prototype.getLockState=function(){return!1},s}(d(1307).ChangeLockedCommand);h.UnLockCommand=v},962:function(j,h,d){var u,g=this&&this.__extends||(u=function(p,s){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t])},u(p,s)},function(p,s){function i(){this.constructor=p}u(p,s),p.prototype=s===null?Object.create(s):(i.prototype=s.prototype,new i)});Object.defineProperty(h,"__esModule",{value:!0}),h.DeleteShapeImageCommand=void 0;var v=function(p){function s(){return p!==null&&p.apply(this,arguments)||this}return g(s,p),s.prototype.isEnabled=function(){var i=this.getSelectedShape();return p.prototype.isEnabled.call(this)&&!i.image.isEmpty},s.prototype.executeCore=function(i,e){return p.prototype.executeCore.call(this,i,void 0)},s}(d(7650).EditShapeImageCommandBase);h.DeleteShapeImageCommand=v},4281:function(j,h,d){var u,g=this&&this.__extends||(u=function(p,s){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t])},u(p,s)},function(p,s){function i(){this.constructor=p}u(p,s),p.prototype=s===null?Object.create(s):(i.prototype=s.prototype,new i)});Object.defineProperty(h,"__esModule",{value:!0}),h.EditShapeImageCommand=void 0;var v=function(p){function s(){return p!==null&&p.apply(this,arguments)||this}return g(s,p),s.prototype.isEnabled=function(){var i=this.getSelectedShape();return p.prototype.isEnabled.call(this)&&!i.image.isEmpty},s}(d(7650).EditShapeImageCommandBase);h.EditShapeImageCommand=v},7650:function(j,h,d){var u,g=this&&this.__extends||(u=function(s,i){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},u(s,i)},function(s,i){function e(){this.constructor=s}u(s,i),s.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)});Object.defineProperty(h,"__esModule",{value:!0}),h.EditShapeImageCommandBase=void 0;var v=d(8210),p=function(s){function i(){return s!==null&&s.apply(this,arguments)||this}return g(i,s),i.prototype.isEnabled=function(){var e=this.getSelectedShape();return s.prototype.isEnabled.call(this)&&!!e&&!e.locked&&e.enableImage&&e.allowEditImage},i.prototype.getValue=function(){var e=this.getSelectedShape();return e?e.image.exportUrl:void 0},i.prototype.getSelectedShape=function(){var e=this.control.selection.getSelectedShapes(!0);return e.length===1?e[0]:void 0},i.prototype.executeCore=function(e,t){this.control.history.beginTransaction();var n=this.control.selection.getSelectedShapes(!1);return this.control.history.addAndRedo(new v.ChangeShapeImageHistoryItem(n[0],t)),this.control.history.endTransaction(),!0},i}(d(9741).SimpleCommandBase);h.EditShapeImageCommandBase=p},9158:function(j,h,d){var u,g=this&&this.__extends||(u=function(p,s){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t])},u(p,s)},function(p,s){function i(){this.constructor=p}u(p,s),p.prototype=s===null?Object.create(s):(i.prototype=s.prototype,new i)});Object.defineProperty(h,"__esModule",{value:!0}),h.InsertShapeImageCommand=void 0;var v=function(p){function s(){return p!==null&&p.apply(this,arguments)||this}return g(s,p),s.prototype.isEnabled=function(){var i=this.getSelectedShape();return p.prototype.isEnabled.call(this)&&i.image.isEmpty},s}(d(7650).EditShapeImageCommandBase);h.InsertShapeImageCommand=v},9741:function(j,h,d){var u,g=this&&this.__extends||(u=function(t,n){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var a in r)r.hasOwnProperty(a)&&(o[a]=r[a])},u(t,n)},function(t,n){function o(){this.constructor=t}u(t,n),t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)});Object.defineProperty(h,"__esModule",{value:!0}),h.SimpleCommandBase=void 0;var v=d(9687),p=d(2102),s=d(4867),i=d(6224),e=function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return g(n,t),n.prototype.getState=function(){return new p.SimpleCommandState(this.isEnabled(),this.getValue(),this.getDefaultValue(),this.getItems(),this.isVisible())},n.prototype.isVisible=function(){return!0},n.prototype.isEnabled=function(){return!this.control.settings.readOnly||this.isEnabledInReadOnlyMode()},n.prototype.isEnabledInReadOnlyMode=function(){return!1},n.prototype.getValue=function(){},n.prototype.getDefaultValue=function(){},n.prototype.getItems=function(){},n.prototype.getModelUnit=function(o){return s.ModelUtils.getlUnitValue(this.control.model.units,o)},n.prototype.getModelUnitText=function(o){return s.ModelUtils.getUnitText(this.control.model.units,i.DiagramLocalizationService.unitItems,i.DiagramLocalizationService.formatUnit,o)},n.prototype.getModelUnitTwipsValue=function(o){return s.ModelUtils.getTwipsValue(this.control.model.units,o)},n.prototype.getViewUnit=function(o){return s.ModelUtils.getlUnitValue(this.control.settings.viewUnits,o)},n.prototype.getViewUnitText=function(o){return s.ModelUtils.getUnitText(this.control.settings.viewUnits,i.DiagramLocalizationService.unitItems,i.DiagramLocalizationService.formatUnit,o)},n.prototype.getViewUnitTwipsValue=function(o){return s.ModelUtils.getTwipsValue(this.control.settings.viewUnits,o)},n}(v.CommandBase);h.SimpleCommandBase=e},1649:function(j,h,d){var u,g=this&&this.__extends||(u=function(i,e){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var o in n)n.hasOwnProperty(o)&&(t[o]=n[o])},u(i,e)},function(i,e){function t(){this.constructor=i}u(i,e),i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)});Object.defineProperty(h,"__esModule",{value:!0}),h.ChangeFillColorCommand=void 0;var v=d(5726),p=d(13),s=function(i){function e(){return i!==null&&i.apply(this,arguments)||this}return g(e,i),e.prototype.processParameter=function(t){return p.ColorUtils.stringToHash(t)},e.prototype.getStyleProperty=function(){return"fill"},e}(v.ChangeStylePropertyCommand);h.ChangeFillColorCommand=s},6106:function(j,h,d){var u,g=this&&this.__extends||(u=function(i,e){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var o in n)n.hasOwnProperty(o)&&(t[o]=n[o])},u(i,e)},function(i,e){function t(){this.constructor=i}u(i,e),i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)});Object.defineProperty(h,"__esModule",{value:!0}),h.ChangeFontColorCommand=void 0;var v=d(2722),p=d(13),s=function(i){function e(){return i!==null&&i.apply(this,arguments)||this}return g(e,i),e.prototype.processParameter=function(t){return p.ColorUtils.stringToHash(t)},e.prototype.getStyleProperty=function(){return"fill"},e}(v.ChangeStyleTextPropertyCommand);h.ChangeFontColorCommand=s},7480:function(j,h,d){var u,g=this&&this.__extends||(u=function(p,s){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t])},u(p,s)},function(p,s){function i(){this.constructor=p}u(p,s),p.prototype=s===null?Object.create(s):(i.prototype=s.prototype,new i)});Object.defineProperty(h,"__esModule",{value:!0}),h.ChangeFontNameCommand=void 0;var v=function(p){function s(){return p!==null&&p.apply(this,arguments)||this}return g(s,p),s.prototype.getStyleProperty=function(){return"font-family"},s}(d(2722).ChangeStyleTextPropertyCommand);h.ChangeFontNameCommand=v},4077:function(j,h,d){var u,g=this&&this.__extends||(u=function(p,s){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t])},u(p,s)},function(p,s){function i(){this.constructor=p}u(p,s),p.prototype=s===null?Object.create(s):(i.prototype=s.prototype,new i)});Object.defineProperty(h,"__esModule",{value:!0}),h.ChangeFontSizeCommand=void 0;var v=function(p){function s(){return p!==null&&p.apply(this,arguments)||this}return g(s,p),s.prototype.getStyleProperty=function(){return"font-size"},s}(d(2722).ChangeStyleTextPropertyCommand);h.ChangeFontSizeCommand=v},3166:function(j,h,d){var u,g=this&&this.__extends||(u=function(i,e){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var o in n)n.hasOwnProperty(o)&&(t[o]=n[o])},u(i,e)},function(i,e){function t(){this.constructor=i}u(i,e),i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)});Object.defineProperty(h,"__esModule",{value:!0}),h.ChangeStrokeColorCommand=void 0;var v=d(5726),p=d(13),s=function(i){function e(){return i!==null&&i.apply(this,arguments)||this}return g(e,i),e.prototype.processParameter=function(t){return p.ColorUtils.stringToHash(t)},e.prototype.getStyleProperty=function(){return"stroke"},e}(v.ChangeStylePropertyCommand);h.ChangeStrokeColorCommand=s},4643:function(j,h,d){var u,g=this&&this.__extends||(u=function(p,s){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t])},u(p,s)},function(p,s){function i(){this.constructor=p}u(p,s),p.prototype=s===null?Object.create(s):(i.prototype=s.prototype,new i)});Object.defineProperty(h,"__esModule",{value:!0}),h.ChangeStrokeStyleCommand=void 0;var v=function(p){function s(){return p!==null&&p.apply(this,arguments)||this}return g(s,p),s.prototype.getStyleProperty=function(){return"stroke-dasharray"},s}(d(5726).ChangeStylePropertyCommand);h.ChangeStrokeStyleCommand=v},4681:function(j,h,d){var u,g=this&&this.__extends||(u=function(p,s){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t])},u(p,s)},function(p,s){function i(){this.constructor=p}u(p,s),p.prototype=s===null?Object.create(s):(i.prototype=s.prototype,new i)});Object.defineProperty(h,"__esModule",{value:!0}),h.ChangeStrokeWidthCommand=void 0;var v=function(p){function s(){return p!==null&&p.apply(this,arguments)||this}return g(s,p),s.prototype.getStyleProperty=function(){return"stroke-width"},s}(d(5726).ChangeStylePropertyCommand);h.ChangeStrokeWidthCommand=v},5726:function(j,h,d){var u,g=this&&this.__extends||(u=function(e,t){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var r in o)o.hasOwnProperty(r)&&(n[r]=o[r])},u(e,t)},function(e,t){function n(){this.constructor=e}u(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(h,"__esModule",{value:!0}),h.ChangeStylePropertyCommand=void 0;var v=d(521),p=d(4634),s=d(1552),i=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return g(t,e),t.prototype.getValue=function(){return this.control.selection.inputPosition.getCurrentStylePropertyValue(this.getStyleProperty())},t.prototype.getStyleObj=function(n){return n.style},t.prototype.getDefaultStyleObj=function(){return new s.Style},t.prototype.createHistoryItem=function(n,o,r){return new p.ChangeStyleHistoryItem(n.key,o,r)},t.prototype.updateInputPosition=function(n){this.control.selection.inputPosition.setStylePropertyValue(this.getStyleProperty(),n)},t}(v.ChangeStylePropertyCommandBase);h.ChangeStylePropertyCommand=i},521:function(j,h,d){var u,g=this&&this.__extends||(u=function(p,s){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t])},u(p,s)},function(p,s){function i(){this.constructor=p}u(p,s),p.prototype=s===null?Object.create(s):(i.prototype=s.prototype,new i)});Object.defineProperty(h,"__esModule",{value:!0}),h.ChangeStylePropertyCommandBase=void 0;var v=function(p){function s(){return p!==null&&p.apply(this,arguments)||this}return g(s,p),s.prototype.executeCore=function(i,e){var t=this;this.control.history.beginTransaction();var n=this.control.selection.getSelectedItems();return e=this.processParameter(e),n.forEach(function(o){var r=t.getStyleProperty();t.control.history.addAndRedo(t.createHistoryItem(o,r,e))}),this.updateInputPosition(e),this.control.history.endTransaction(),!0},s.prototype.getDefaultValue=function(){return this.getDefaultStyleObj()[this.getStyleProperty()]},s.prototype.processParameter=function(i){return i},s}(d(8351).StylePropertyCommandBase);h.ChangeStylePropertyCommandBase=v},2722:function(j,h,d){var u,g=this&&this.__extends||(u=function(e,t){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var r in o)o.hasOwnProperty(r)&&(n[r]=o[r])},u(e,t)},function(e,t){function n(){this.constructor=e}u(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(h,"__esModule",{value:!0}),h.ChangeStyleTextPropertyCommand=void 0;var v=d(521),p=d(926),s=d(1552),i=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return g(t,e),t.prototype.getValue=function(){return this.control.selection.inputPosition.getCurrentTextStylePropertyValue(this.getStyleProperty())},t.prototype.getStyleObj=function(n){return n.styleText},t.prototype.getDefaultStyleObj=function(){return new s.TextStyle},t.prototype.createHistoryItem=function(n,o,r){return new p.ChangeStyleTextHistoryItem(n.key,o,r)},t.prototype.updateInputPosition=function(n){this.control.selection.inputPosition.setTextStylePropertyValue(this.getStyleProperty(),n)},t}(v.ChangeStylePropertyCommandBase);h.ChangeStyleTextPropertyCommand=i},8700:function(j,h,d){var u,g=this&&this.__extends||(u=function(e,t){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var r in o)o.hasOwnProperty(r)&&(n[r]=o[r])},u(e,t)},function(e,t){function n(){this.constructor=e}u(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(h,"__esModule",{value:!0}),h.TextRightAlignCommand=h.TextCenterAlignCommand=h.TextLeftAlignCommand=h.ChangeTextAlignCommand=void 0;var v=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return g(t,e),t.prototype.getStyleProperty=function(){return"text-anchor"},t}(d(6980).ToggleStyleTextPropertyCommand);h.ChangeTextAlignCommand=v;var p=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return g(t,e),t.prototype.getStylePropertyValue=function(){return"start"},t}(v);h.TextLeftAlignCommand=p;var s=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return g(t,e),t.prototype.getStylePropertyValue=function(){return"middle"},t}(v);h.TextCenterAlignCommand=s;var i=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return g(t,e),t.prototype.getStylePropertyValue=function(){return"end"},t}(v);h.TextRightAlignCommand=i},8351:function(j,h,d){var u,g=this&&this.__extends||(u=function(p,s){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t])},u(p,s)},function(p,s){function i(){this.constructor=p}u(p,s),p.prototype=s===null?Object.create(s):(i.prototype=s.prototype,new i)});Object.defineProperty(h,"__esModule",{value:!0}),h.StylePropertyCommandBase=void 0;var v=function(p){function s(){return p!==null&&p.apply(this,arguments)||this}return g(s,p),s.prototype.lockInputPositionUpdating=function(){return!0},s}(d(9741).SimpleCommandBase);h.StylePropertyCommandBase=v},4378:function(j,h,d){var u,g=this&&this.__extends||(u=function(p,s){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t])},u(p,s)},function(p,s){function i(){this.constructor=p}u(p,s),p.prototype=s===null?Object.create(s):(i.prototype=s.prototype,new i)});Object.defineProperty(h,"__esModule",{value:!0}),h.ToggleFontBoldCommand=void 0;var v=function(p){function s(){return p!==null&&p.apply(this,arguments)||this}return g(s,p),s.prototype.getStyleProperty=function(){return"font-weight"},s.prototype.getStylePropertyValue=function(){return"bold"},s}(d(6980).ToggleStyleTextPropertyCommand);h.ToggleFontBoldCommand=v},7607:function(j,h,d){var u,g=this&&this.__extends||(u=function(p,s){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t])},u(p,s)},function(p,s){function i(){this.constructor=p}u(p,s),p.prototype=s===null?Object.create(s):(i.prototype=s.prototype,new i)});Object.defineProperty(h,"__esModule",{value:!0}),h.ToggleFontItalicCommand=void 0;var v=function(p){function s(){return p!==null&&p.apply(this,arguments)||this}return g(s,p),s.prototype.getStyleProperty=function(){return"font-style"},s.prototype.getStylePropertyValue=function(){return"italic"},s}(d(6980).ToggleStyleTextPropertyCommand);h.ToggleFontItalicCommand=v},3411:function(j,h,d){var u,g=this&&this.__extends||(u=function(p,s){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t])},u(p,s)},function(p,s){function i(){this.constructor=p}u(p,s),p.prototype=s===null?Object.create(s):(i.prototype=s.prototype,new i)});Object.defineProperty(h,"__esModule",{value:!0}),h.ToggleFontUnderlineCommand=void 0;var v=function(p){function s(){return p!==null&&p.apply(this,arguments)||this}return g(s,p),s.prototype.getStyleProperty=function(){return"text-decoration"},s.prototype.getStylePropertyValue=function(){return"underline"},s}(d(6980).ToggleStyleTextPropertyCommand);h.ToggleFontUnderlineCommand=v},6980:function(j,h,d){var u,g=this&&this.__extends||(u=function(e,t){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var r in o)o.hasOwnProperty(r)&&(n[r]=o[r])},u(e,t)},function(e,t){function n(){this.constructor=e}u(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(h,"__esModule",{value:!0}),h.ToggleStyleTextPropertyCommand=void 0;var v=d(8351),p=d(926),s=d(1552),i=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return g(t,e),t.prototype.getValue=function(){return this.control.selection.inputPosition.getCurrentTextStylePropertyValue(this.getStyleProperty())===this.getStylePropertyValue()},t.prototype.executeCore=function(n){var o=this;this.control.history.beginTransaction();var r=this.getStyleProperty(),a=n.value?s.TextStyle.defaultInstance[r]:this.getStylePropertyValue();return this.control.selection.getSelectedItems().forEach(function(c){o.control.history.addAndRedo(new p.ChangeStyleTextHistoryItem(c.key,r,a))}),this.control.selection.inputPosition.setTextStylePropertyValue(this.getStyleProperty(),a),this.control.history.endTransaction(),!0},t.prototype.getStyleObj=function(n){return n.styleText},t.prototype.getDefaultStyleObj=function(){return new s.TextStyle},t}(v.StylePropertyCommandBase);h.ToggleStyleTextPropertyCommand=i},5035:function(j,h){var d,u=this&&this.__extends||(d=function(s,i){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},d(s,i)},function(s,i){function e(){this.constructor=s}d(s,i),s.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)});Object.defineProperty(h,"__esModule",{value:!0}),h.DataSourceEdgeDataImporter=h.DataSourceNodeDataImporter=h.DataSourceItemDataImporter=void 0;var g=function(){this.getKey=function(s){return s.id},this.setKey=function(s,i){s.id=i},this.getCustomData=void 0,this.setCustomData=void 0,this.getLocked=void 0,this.setLocked=void 0,this.getStyle=void 0,this.setStyle=void 0,this.getStyleText=void 0,this.setStyleText=void 0,this.getZIndex=void 0,this.setZIndex=void 0};h.DataSourceItemDataImporter=g;var v=function(s){function i(){var e=s!==null&&s.apply(this,arguments)||this;return e.getType=void 0,e.setType=void 0,e.getText=void 0,e.setText=void 0,e.getImage=void 0,e.setImage=void 0,e.getLeft=void 0,e.setLeft=void 0,e.getTop=void 0,e.setTop=void 0,e.getWidth=void 0,e.setWidth=void 0,e.getHeight=void 0,e.setHeight=void 0,e.getChildren=void 0,e.setChildren=void 0,e.getParentKey=void 0,e.setParentKey=void 0,e.getItems=void 0,e.setItems=void 0,e.getContainerKey=void 0,e.setContainerKey=void 0,e}return u(i,s),i}(g);h.DataSourceNodeDataImporter=v;var p=function(s){function i(){var e=s!==null&&s.apply(this,arguments)||this;return e.getFrom=function(t){return t.from},e.setFrom=function(t,n){t.from=n},e.getFromPointIndex=void 0,e.setFromPointIndex=void 0,e.getTo=function(t){return t.to},e.setTo=function(t,n){t.to=n},e.getToPointIndex=void 0,e.setToPointIndex=void 0,e.getPoints=void 0,e.setPoints=void 0,e.getText=void 0,e.setText=void 0,e.getLineOption=void 0,e.setLineOption=void 0,e.getStartLineEnding=void 0,e.setStartLineEnding=void 0,e.getEndLineEnding=void 0,e.setEndLineEnding=void 0,e}return u(i,s),i}(g);h.DataSourceEdgeDataImporter=p},3503:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.DataLayoutParameters=h.DataLayoutType=void 0;var u,g=d(8710),v=d(9533),p=d(1256);(function(i){i[i.Tree=0]="Tree",i[i.Sugiyama=1]="Sugiyama"})(u=h.DataLayoutType||(h.DataLayoutType={}));var s=function(){function i(e,t){this.sizeSettings=e,t&&(t.type!==void 0&&(this.layoutType=t.type,this.layoutSettings=this.layoutType===u.Sugiyama?new g.LayoutSettings:new g.TreeLayoutSettings),t.orientation!==void 0&&(this.layoutSettings.orientation=t.orientation),this.skipPointIndices=t.skipPointIndices,this.autoSizeEnabled=t.autoSizeEnabled)}return Object.defineProperty(i.prototype,"needAutoLayout",{get:function(){return this.layoutType!==void 0},enumerable:!1,configurable:!0}),i.prototype.getLayoutBuilder=function(e){return this.layoutType===u.Tree?new v.TreeLayoutBuilder(this.layoutSettings,e):new p.SugiyamaLayoutBuilder(this.layoutSettings,e)},i}();h.DataLayoutParameters=s},4225:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.DataSource=void 0;var u=d(9291),g=d(8900),v=d(6353),p=d(3477),s=d(9603),i=d(4145),e=d(8930),t=d(4629),n=d(8236),o=d(5144),r=d(9559),a=d(7443),c=d(8210),f=d(6516),m=d(5982),y=d(4634),l=d(926),P=d(7959),C=d(4867),I=d(2259),x=d(4246),b=d(8675),S=d(13),w=d(4914),T=d(8396),_=d(3490),M=d(5035),A=d(5558),E=d(58),U=function(){function R(O,N,V,H,L,D){if(this.key=O,this.nodes=[],this.edges=[],this.autoGeneratedDataKeys={},this.addInternalKeyOnInsert=!1,this.useNodeParentId=!1,this.useNodeContainerId=!1,this.useNodeChildren=!1,this.useNodeItems=!1,this.canUseAutoSize=!1,this.canUpdateEdgeDataSource=!1,this.containers=null,O==null)throw new Error("DataSource key must be specified");this.key=O.toString(),this.loadParameters(H||{}),this.nodeDataImporter=this.createNodeDataImporter(L),this.edgeDataImporter=this.createEdgeDataImporter(D),this.nodeDataSource=N||[],this.edgeDataSource=V||[],this.canUpdateEdgeDataSource=!!V,this.fetchData()}return R.prototype.loadParameters=function(O){this.addInternalKeyOnInsert=!!O.addInternalKeyOnInsert},R.prototype.isAutoGeneratedKey=function(O){return O&&!!this.autoGeneratedDataKeys[O]},R.prototype.createNodeDataImporter=function(O){var N=new M.DataSourceNodeDataImporter;return O&&this.assignNodeDataImporterProperties(O,N),N},R.prototype.createEdgeDataImporter=function(O){var N=new M.DataSourceEdgeDataImporter;return O&&this.assignEdgeDataImporterProperties(O,N),N},R.prototype.assignItemDataImporterProperties=function(O,N){O.getKey&&(N.getKey=O.getKey),O.setKey&&(N.setKey=O.setKey),O.getCustomData&&(N.getCustomData=O.getCustomData),O.setCustomData&&(N.setCustomData=O.setCustomData),O.getLocked&&(N.getLocked=O.getLocked),O.setLocked&&(N.setLocked=O.setLocked),O.getStyle&&(N.getStyle=O.getStyle),O.setStyle&&(N.setStyle=O.setStyle),O.getStyleText&&(N.getStyleText=O.getStyleText),O.setStyleText&&(N.setStyleText=O.setStyleText),O.getZIndex&&(N.getZIndex=O.getZIndex),O.setZIndex&&(N.setZIndex=O.setZIndex)},R.prototype.assignNodeDataImporterProperties=function(O,N){this.assignItemDataImporterProperties(O,N),O.getType&&(N.getType=O.getType),O.setType&&(N.setType=O.setType),O.getImage&&(N.getImage=O.getImage),O.setImage&&(N.setImage=O.setImage),O.getText&&(N.getText=O.getText),O.setText&&(N.setText=O.setText),O.getLeft&&(N.getLeft=O.getLeft),O.setLeft&&(N.setLeft=O.setLeft),O.getTop&&(N.getTop=O.getTop),O.setTop&&(N.setTop=O.setTop),O.getWidth&&(N.getWidth=O.getWidth),O.setWidth&&(N.setWidth=O.setWidth),O.getHeight&&(N.getHeight=O.getHeight),O.setHeight&&(N.setHeight=O.setHeight),O.getChildren&&(N.getChildren=O.getChildren),O.setChildren&&(N.setChildren=O.setChildren),O.getParentKey&&(N.getParentKey=O.getParentKey),O.setParentKey&&(N.setParentKey=O.setParentKey),O.getItems&&(N.getItems=O.getItems),O.setItems&&(N.setItems=O.setItems),O.getContainerKey&&(N.getContainerKey=O.getContainerKey),O.setContainerKey&&(N.setContainerKey=O.setContainerKey)},R.prototype.assignEdgeDataImporterProperties=function(O,N){this.assignItemDataImporterProperties(O,N),O.getFrom&&(N.getFrom=O.getFrom),O.setFrom&&(N.setFrom=O.setFrom),O.getFromPointIndex&&(N.getFromPointIndex=O.getFromPointIndex),O.setFromPointIndex&&(N.setFromPointIndex=O.setFromPointIndex),O.getTo&&(N.getTo=O.getTo),O.setTo&&(N.setTo=O.setTo),O.getToPointIndex&&(N.getToPointIndex=O.getToPointIndex),O.setToPointIndex&&(N.setToPointIndex=O.setToPointIndex),O.getPoints&&(N.getPoints=O.getPoints),O.setPoints&&(N.setPoints=O.setPoints),O.getText&&(N.getText=O.getText),O.setText&&(N.setText=O.setText),O.getLineOption&&(N.getLineOption=O.getLineOption),O.setLineOption&&(N.setLineOption=O.setLineOption),O.getStartLineEnding&&(N.getStartLineEnding=O.getStartLineEnding),O.setStartLineEnding&&(N.setStartLineEnding=O.setStartLineEnding),O.getEndLineEnding&&(N.getEndLineEnding=O.getEndLineEnding),O.setEndLineEnding&&(N.setEndLineEnding=O.setEndLineEnding)},R.prototype.fetchData=function(){var O=this;if(this.nodes=[],this.edges=[],this.autoGeneratedDataKeys={},this.useNodeParentId=this.nodeDataImporter.getParentKey!==void 0,this.useNodeContainerId=this.nodeDataImporter.getContainerKey!==void 0,this.useNodeItems=this.nodeDataImporter.getItems!==void 0,this.useNodeChildren=this.nodeDataImporter.getChildren!==void 0,this.canUseAutoSize=this.nodeDataImporter.getWidth===void 0&&this.nodeDataImporter.getText!==void 0,this.useEdgesArray()&&this.useNodeParentId)throw new Error("You cannot use edges array and parentKey simultaneously.");if(this.useEdgesArray()&&this.useNodeItems)throw new Error("You cannot use edges array and items array simultaneously.");if(this.useNodeParentId&&this.useNodeItems)throw new Error("You cannot use parentKey and items array simultaneously.");if(this.useNodeContainerId&&this.useNodeChildren)throw new Error("You cannot use containerKey and children array simultaneously.");this.nodeDataSource.forEach(function(N){O.addNode(N)}),this.useEdgesArray()?this.edgeDataSource.forEach(function(N){O.addEdge(N)}):this.nodes.forEach(function(N){O.addNodeEdgesByParentId(N)})},R.prototype.isContainer=function(O){var N=this;return!this.containers&&this.useNodeContainerId&&(this.containers=this.nodeDataSource.map(function(V){return N.nodeDataImporter.getContainerKey(V)}).filter(function(V){return V!=null}).reduce(function(V,H){return V[H]=!0,V},{})),this.containers&&this.containers[O]},R.prototype.refetchData=function(O,N){var V=this;this.nodeDataSource=O||this.nodeDataSource,this.edgeDataSource=N||this.edgeDataSource;var H=this.nodes.slice(),L=this.edges.slice();return this.fetchData(),{nodes:this.getItemChanges(H,this.nodes,function(D,K){return D.key===K.key||D.dataObj===K.dataObj}),edges:this.getItemChanges(L,this.edges,function(D,K){return V.useNodeParentId||V.useNodeItems?D.key===K.key||D.from===K.from&&D.to===K.to:D.key===K.key||D.dataObj===K.dataObj})}},R.prototype.getItemChanges=function(O,N,V){var H=this,L=O.filter(function(F){return H.containsItem(N,F,V)}),D=O.filter(function(F){return!H.containsItem(N,F,V)}),K=N.filter(function(F){return!H.containsItem(O,F,V)});return{remained:L.map(function(F){return F.key}),remainedNewKeys:L.map(function(F){var q;return(q=N.find(function(ee){return V(F,ee)}))===null||q===void 0?void 0:q.key}),removed:D.map(function(F){return F.key}),added:K.map(function(F){return F.key})}},R.prototype.containsItem=function(O,N,V){var H=!1;return O.forEach(function(L){!H&&V(L,N)&&(H=!0)}),H},R.prototype.useEdgesArray=function(){return Array.isArray(this.edgeDataSource)&&(this.edgeDataSource.length||!(this.useNodeParentId||this.useNodeItems))},R.prototype.addNode=function(O,N,V,H){var L=this,D=this.nodeDataImporter.getChildren&&this.nodeDataImporter.getChildren(O),K=D&&Array.isArray(D)&&D.length,F=K||this.isContainer(this.nodeDataImporter.getKey(O)),q=this.nodeDataImporter.getType&&this.nodeDataImporter.getType(O)||F&&I.ShapeTypes.VerticalContainer||I.ShapeTypes.Rectangle,ee=this.nodeDataImporter.getText&&(this.nodeDataImporter.getText(O)||""),Q=this.addNodeInternal(O,q,ee,N,V,H);if(this.assignNodeProperties(Q,O),K&&D.forEach(function(z){L.addNode(z,void 0,Q.key,O)}),this.useNodeItems){var X=this.nodeDataImporter.getItems(O);Array.isArray(X)&&X.length&&X.forEach(function(z){var B=L.addNode(z,O,V,H);L.addEdgeInternal(void 0,Q.key,B.key)})}return Q},R.prototype.addNodeEdgesByParentId=function(O){if(this.useNodeParentId){var N=this.nodeDataImporter.getParentKey(O.dataObj);N!=null&&this.findNode(N)&&this.addEdgeInternal(void 0,this.getNodeKey(O.dataObj,this.nodeDataImporter.getParentKey),this.getNodeKey(O.dataObj,this.nodeDataImporter.getKey))}},R.prototype.addNodeInternal=function(O,N,V,H,L,D){var K=this.nodeDataImporter.getKey(O),F=K??C.ModelUtils.getGuidItemKey(),q=new A.DataSourceNodeItem(this.key,F,O,N,V,H,L,D);return this.nodes.push(q),K==null&&(K=F,this.autoGeneratedDataKeys[F]=!0),q},R.prototype.addEdge=function(O){var N=this.addEdgeInternal(O,this.getNodeKey(O,this.edgeDataImporter.getFrom),this.getNodeKey(O,this.edgeDataImporter.getTo));return this.assignEdgeProperties(N,O),N},R.prototype.addEdgeInternal=function(O,N,V){var H=O&&this.edgeDataImporter.getKey(O),L=H??C.ModelUtils.getGuidItemKey(),D=new A.DataSourceEdgeItem(this.key,L,O,N,V);return this.edges.push(D),H==null&&(H=L,this.autoGeneratedDataKeys[L]=!0),D},R.prototype.assignItemProperties=function(O,N,V){if(V.getCustomData&&(O.customData=b.ObjectUtils.cloneObject(V.getCustomData(N))),V.getLocked&&(O.locked=V.getLocked(N)),V.getStyle){var H=V.getStyle(N);O.style=typeof H=="string"?w.Data.cssTextToObject(H):H}V.getStyleText&&(H=V.getStyleText(N),O.styleText=typeof H=="string"?w.Data.cssTextToObject(H):H),V.getZIndex&&(O.zIndex=V.getZIndex(N))},R.prototype.assignNodeProperties=function(O,N){this.assignItemProperties(O,N,this.nodeDataImporter),this.nodeDataImporter.getImage&&(O.image=this.nodeDataImporter.getImage(N)),this.nodeDataImporter.getLeft&&(O.left=this.nodeDataImporter.getLeft(N)),this.nodeDataImporter.getTop&&(O.top=this.nodeDataImporter.getTop(N)),this.nodeDataImporter.getWidth&&(O.width=this.nodeDataImporter.getWidth(N)),this.nodeDataImporter.getHeight&&(O.height=this.nodeDataImporter.getHeight(N)),this.nodeDataImporter.getContainerKey&&(O.containerKey=this.nodeDataImporter.getContainerKey(N))},R.prototype.assignEdgeProperties=function(O,N){if(this.assignItemProperties(O,N,this.edgeDataImporter),this.edgeDataImporter.getFromPointIndex&&(O.fromPointIndex=this.edgeDataImporter.getFromPointIndex(N)),this.edgeDataImporter.getToPointIndex&&(O.toPointIndex=this.edgeDataImporter.getToPointIndex(N)),this.edgeDataImporter.getPoints&&(O.points=this.edgeDataImporter.getPoints(N)),this.edgeDataImporter.getText){var V=this.edgeDataImporter.getText(N);if(O.texts={},typeof V=="object"){for(var H in V)if(Object.prototype.hasOwnProperty.call(V,H)){var L=parseFloat(H),D=V[H];isNaN(L)||typeof D!="string"||D===""||(L=Math.min(1,Math.max(0,L)),O.texts[L]=D)}}else typeof V=="string"&&V!==""&&(O.texts[P.CONNECTOR_DEFAULT_TEXT_POSITION]=V)}this.edgeDataImporter.getLineOption&&(O.lineOption=this.edgeDataImporter.getLineOption(N)),this.edgeDataImporter.getStartLineEnding&&(O.startLineEnding=this.edgeDataImporter.getStartLineEnding(N)),this.edgeDataImporter.getEndLineEnding&&(O.endLineEnding=this.edgeDataImporter.getEndLineEnding(N))},R.prototype.findNode=function(O){return this.nodes.filter(function(N){return O!==void 0&&N.key===O})[0]},R.prototype.findEdge=function(O){return this.edges.filter(function(N){return O!==void 0&&N.key===O})[0]},R.prototype.getNodeKey=function(O,N){return N(O)},R.prototype.createModelItems=function(O,N,V,H,L,D,K,F){var q=this;this.beginChangesNotification(),O.clear(),O.beginTransaction(),C.ModelUtils.deleteAllItems(O,N,H),N.initializeKeyCounter();var ee=D?Math.max(1,Math.floor(2e3/K))*K:2e3,Q=0,X=0,z={},B=[],k=[];this.nodes.forEach(function(W){var G=new g.Point(X++*ee,Q*ee),Y=q.createShapeByNode(O,N,H,V,W,G,L,D,K,F);W.key!==void 0&&(z[W.key]=Y.key),X>4&&(X=0,Q++),B.push(Y)}),this.nodes.forEach(function(W){if(W.containerKey!==void 0&&W.containerKey!==null){var G=z[W.key],Y=N.findShape(G),J=z[W.containerKey],$=N.findShape(J);$&&C.ModelUtils.insertToContainer(O,N,Y,$)}}),this.edges.forEach(function(W){var G=N.findShape(z[W.to]),Y=N.findShape(z[W.from]),J=q.createConnectorByEdge(O,N,H,W,Y,G);J&&(k.push(J),C.ModelUtils.updateConnectorContainer(O,N,J))}),L.needAutoLayout&&this.applyLayout(O,N,B,k,L,D,K),C.ModelUtils.tryUpdateModelRectangle(O),O.endTransaction(!0),this.endChangesNotification(!0)},R.prototype.updateModelItems=function(O,N,V,H,L,D,K,F,q,ee,Q,X){var z=this;this.beginChangesNotification(),O.beginTransaction();var B=[],k=[],W=[],G=q.nodes.removed.map(function($){return N.findShapeByDataKey($)}).filter(function($){return $});G.forEach(function($){$.attachedConnectors.forEach(function(te){te.beginItem&&te.beginItem!==$&&k.push(te.beginItem),te.endItem&&te.endItem!==$&&k.push(te.endItem)})}),C.ModelUtils.deleteItems(O,N,H,G,!0);var Y=q.edges.removed.map(function($){return N.findConnectorByDataKey($)}).filter(function($){return $});Y.forEach(function($){$.beginItem&&k.push($.beginItem),$.endItem&&k.push($.endItem)}),C.ModelUtils.deleteItems(O,N,H,Y,!0),k=this.purgeLayoutShapes(k,G),(K||[]).forEach(function($){if(q.nodes.remained.indexOf($)!==-1){var te=z.findNode($);if(te){var oe=N.findShapeByDataKey($);if(oe){var re=oe.position.clone();z.changeShapeByDataItem(O,N,oe,te,re),z.changeItemByDataItem(O,oe,te)}else oe=z.createShapeByNode(O,N,H,V,te,new g.Point(0,0),L,ee,Q,X);z.updateShapeContainer(O,N,oe,te),k.push(oe),B.push(oe)}}}),q.nodes.remained.forEach(function($,te){var oe=N.findShapeByDataKey($);oe&&(oe.dataKey=q.nodes.remainedNewKeys[te])}),q.nodes.added.forEach(function($){var te=z.findNode($),oe=z.createShapeByNode(O,N,H,V,te,new g.Point(0,0),L,ee,Q,X);z.updateShapeContainer(O,N,oe,te),k.push(oe)}),q.edges.added.forEach(function($){var te=z.findEdge($),oe=N.findShapeByDataKey(te.from),re=N.findShapeByDataKey(te.to),ie=z.createConnectorByEdge(O,N,H,te,oe,re);ie&&(C.ModelUtils.updateConnectorContainer(O,N,ie),W.push(ie))});var J=K||[];q.edges.remained.forEach(function($){var te=z.findEdge($);!te||q.nodes.added.indexOf(te.from)===-1&&q.nodes.added.indexOf(te.to)===-1||J.push($)}),J.forEach(function($){if(q.edges.remained.indexOf($)!==-1){var te=z.findEdge($);if(te){var oe=N.findShapeByDataKey(te.from),re=N.findShapeByDataKey(te.to),ie=N.findConnectorByDataKey($);ie?(z.changeConnectorPointsByDataItem(O,ie,z.getConnectorPointsByEdge(N,te,oe,re,!1)),z.changeConnectorByDataItem(O,N,ie,oe,re,te),z.changeItemByDataItem(O,ie,te)):ie=z.createConnectorByEdge(O,N,H,te,oe,re),ie&&(C.ModelUtils.updateConnectorContainer(O,N,ie),W.push(ie),B.push(ie))}}}),q.edges.remained.forEach(function($,te){var oe=N.findConnectorByDataKey($);oe&&(oe.dataKey=q.edges.remainedNewKeys[te])}),B.length&&F&&B.forEach(function($){$.hasTemplate&&F($)}),L.needAutoLayout&&(k.length||W.length)&&this.applyLayout(O,N,k,W,L,ee,Q),C.ModelUtils.tryUpdateModelRectangle(O),O.endTransaction(!D),this.endChangesNotification(!1)},R.prototype.purgeLayoutShapes=function(O,N){var V=N.reduce(function(H,L){return(H[L.key]=!0)&&H},{});return O.reduce(function(H,L){return H.keySet[L.key]===void 0&&V[L.key]===void 0&&(H.uniqueShapes.push(L),H.keySet[L.key]=!0),H},{uniqueShapes:[],keySet:{}}).uniqueShapes},R.prototype.applyShapeAutoSize=function(O,N,V,H,L,D){if(H.description.enableText){var K=H.textRectangle.createSize(),F=H.size,q=K.width-F.width,ee=K.height-F.height,Q=H.getMaxWidth(V.shapeMaxWidth),X=H.getMaxHeight(V.shapeMaxHeight),z=function(W,G){return typeof W=="number"?u.UnitConverter.twipsToPixelsF(W+(G?q:ee)):void 0},B=_.getOptimalTextRectangle(H.text,H.styleText,x.TextOwner.Shape,N,K.clone().applyConverter(u.UnitConverter.twipsToPixelsF),H.description.keepRatioOnAutoSize,z(H.getMinWidth(V.shapeMinWidth),!0),z(Q,!0),z(H.getMinHeight(V.shapeMinHeight),!1),z(X,!1)).clone().applyConverter(u.UnitConverter.pixelsToTwips);if(!B.equals(K)){var k=H.description.getSizeByText(B,H);L&&D&&(k=new v.Size(Math.min(D*Math.ceil(k.width/D),Q||Number.MAX_VALUE),Math.min(D*Math.ceil(k.height/D),X||Number.MAX_VALUE))),O.addAndRedo(new t.ResizeShapeHistoryItem(H.key,H.position,k))}}},R.prototype.applyLayout=function(O,N,V,H,L,D,K){C.ModelUtils.getGraphInfoByItems(N,V,H).forEach(function(F){var q=L.getLayoutBuilder(F.graph).build(),ee=C.ModelUtils.getNonGraphItems(N,F.container,q.nodeToLayout,V,H);C.ModelUtils.applyLayout(O,N,F.container,F.graph,q,ee,L.layoutSettings,D,K,L.skipPointIndices)})},R.prototype.changeItemByDataItem=function(O,N,V){if(V.customData===void 0||b.ObjectUtils.compareObjects(V.customData,N.customData)||O.addAndRedo(new r.ChangeCustomDataHistoryItem(N.key,V.customData)),V.zIndex!==void 0&&V.zIndex!==N.zIndex&&O.addAndRedo(new m.ChangeZindexHistoryItem(N,V.zIndex)),V.style!==void 0)for(var H in V.style)Object.prototype.hasOwnProperty.call(V.style,H)&&(D=this.getPreparedStyleValue(V.style[H],T.isColorProperty(H)))!==N.style[H]&&O.addAndRedo(new y.ChangeStyleHistoryItem(N.key,H,D));var L=N.style.getDefaultInstance();if(N.style.forEach(function(F){V.style&&V.style[F]===void 0&&N.style[F]!==L[F]&&O.addAndRedo(new y.ChangeStyleHistoryItem(N.key,F,L[F]))}),V.styleText!==void 0)for(var H in V.styleText){var D;Object.prototype.hasOwnProperty.call(V.styleText,H)&&(D=this.getPreparedStyleValue(V.styleText[H],T.isColorProperty(H)))!==N.styleText[H]&&O.addAndRedo(new l.ChangeStyleTextHistoryItem(N.key,H,D))}var K=N.styleText.getDefaultInstance();N.styleText.forEach(function(F){V.styleText&&V.styleText[F]===void 0&&N.styleText[F]!==K[F]&&O.addAndRedo(new l.ChangeStyleTextHistoryItem(N.key,F,K[F]))}),V.locked!==void 0&&V.locked!==N.locked&&O.addAndRedo(new a.ChangeLockedHistoryItem(N,V.locked))},R.prototype.getPreparedStyleValue=function(O,N){if(N){var V=S.ColorUtils.stringToHash(O);V!==null&&(O=V)}return O},R.prototype.createShapeByNode=function(O,N,V,H,L,D,K,F,q,ee){var Q=new i.AddShapeHistoryItem(H.get(L.type),D,"",L.key);O.addAndRedo(Q);var X=N.findShape(Q.shapeKey);return C.ModelUtils.updateNewShapeProperties(O,V,Q.shapeKey),this.changeShapeByDataItem(O,N,X,L,D),this.changeItemByDataItem(O,X,L),ee&&this.canUseAutoSize&&K.autoSizeEnabled&&this.applyShapeAutoSize(O,ee,K.sizeSettings,X,F,q),X},R.prototype.changeShapeByDataItem=function(O,N,V,H,L){H.left!==void 0&&(L.x=C.ModelUtils.getTwipsValue(N.units,H.left)),H.top!==void 0&&(L.y=C.ModelUtils.getTwipsValue(N.units,H.top)),C.ModelUtils.setShapePosition(O,N,V,L,!1),H.type!==void 0&&C.ModelUtils.changeShapeType(O,N,V,H.type);var D=V.size.clone();H.width!==void 0&&(D.width=C.ModelUtils.getTwipsValue(N.units,H.width)),H.height!==void 0&&(D.height=C.ModelUtils.getTwipsValue(N.units,H.height)),C.ModelUtils.setShapeSize(O,N,V,L,D),C.ModelUtils.updateShapeAttachedConnectors(O,N,V),H.text!==void 0&&H.text!==V.text&&O.addAndRedo(new f.ChangeShapeTextHistoryItem(V,H.text)),H.image!==void 0&&H.image!==V.image.actualUrl&&O.addAndRedo(new c.ChangeShapeImageHistoryItem(V,H.image))},R.prototype.updateShapeContainer=function(O,N,V,H){var L=H.containerKey!==void 0?N.findShapeByDataKey(H.containerKey):void 0;L!==V.container&&(L?C.ModelUtils.insertToContainer(O,N,V,L):C.ModelUtils.removeFromContainer(O,N,V))},R.prototype.getConnectorPointsByEdge=function(O,N,V,H,L){var D=[],K=this.createModelPointFromDataSourceEdgeItemPoints(O.units,N);if(K&&K.length>1)for(var F=K.length-1,q=0;q<=F;q++){var ee=K[q];if(ee!==null)D.push(ee);else{if(!V&&!H)return;q===0&&V?D.push(V.position.clone()):q===F&&H&&D.push(H.position.clone())}}else L&&(V&&D.push(V.position.clone()),H&&D.push(H.position.clone()));return D},R.prototype.createModelPointFromDataSourceEdgeItemPoints=function(O,N){var V=this,H=[];if(Array.isArray(N.points))return N.points.forEach(function(L){return H.push(V.isValidDataSourceEdgeItemPoint(L)?V.createModelPoint(O,L):null)}),H},R.prototype.createModelPoint=function(O,N){return new g.Point(C.ModelUtils.getTwipsValue(O,N.x),C.ModelUtils.getTwipsValue(O,N.y))},R.prototype.isValidDataSourceEdgeItemPoint=function(O){return O!=null&&O.x!==void 0&&O.y!==void 0&&O.x!==null&&O.y!==null},R.prototype.createConnectorByEdge=function(O,N,V,H,L,D){var K,F=H.key,q=this.getConnectorPointsByEdge(N,H,L,D,!0);if(q&&q.length>1){var ee=new s.AddConnectorHistoryItem(q,F);O.addAndRedo(ee),K=N.findConnector(ee.connectorKey),C.ModelUtils.updateNewConnectorProperties(O,V,ee.connectorKey),this.changeConnectorByDataItem(O,N,K,L,D,H),this.changeItemByDataItem(O,K,H)}return K},R.prototype.changeConnectorByDataItem=function(O,N,V,H,L,D){var K=D.fromPointIndex!==void 0?D.fromPointIndex:V.beginConnectionPointIndex;V.beginItem===H&&V.beginConnectionPointIndex===K||(V.beginItem&&O.addAndRedo(new e.DeleteConnectionHistoryItem(V,P.ConnectorPosition.Begin)),H&&O.addAndRedo(new p.AddConnectionHistoryItem(V,H,K,P.ConnectorPosition.Begin)));var F=D.toPointIndex!==void 0?D.toPointIndex:V.endConnectionPointIndex;if(V.endItem===L&&V.endConnectionPointIndex===F||(V.endItem&&O.addAndRedo(new e.DeleteConnectionHistoryItem(V,P.ConnectorPosition.End)),L&&O.addAndRedo(new p.AddConnectionHistoryItem(V,L,F,P.ConnectorPosition.End))),C.ModelUtils.updateConnectorAttachedPoints(O,N,V),D.texts!==void 0&&!this.compareTexts(D,V)){for(var q in V.texts.forEach(function(Q){O.addAndRedo(new o.ChangeConnectorTextHistoryItem(V,Q.position,void 0))}),D.texts)if(Object.prototype.hasOwnProperty.call(D.texts,q)){var ee=parseFloat(q);O.addAndRedo(new o.ChangeConnectorTextHistoryItem(V,ee,D.texts[q]))}}D.lineOption!==void 0&&D.lineOption!==V.properties.lineOption&&O.addAndRedo(new n.ChangeConnectorPropertyHistoryItem(V.key,"lineOption",D.lineOption)),D.startLineEnding!==void 0&&D.startLineEnding!==V.properties.startLineEnding&&O.addAndRedo(new n.ChangeConnectorPropertyHistoryItem(V.key,"startLineEnding",D.startLineEnding)),D.endLineEnding!==void 0&&D.endLineEnding!==V.properties.endLineEnding&&O.addAndRedo(new n.ChangeConnectorPropertyHistoryItem(V.key,"endLineEnding",D.endLineEnding))},R.prototype.changeConnectorPointsByDataItem=function(O,N,V){V&&V.length>1&&V.join(",")!==N.points.join(",")&&O.addAndRedo(new E.ReplaceConnectorPointsHistoryItem(N.key,V))},R.prototype.compareTexts=function(O,N){var V=O.texts||{},H=Object.keys(V).length===N.getTextCount();if(H){for(var L in V)if(Object.prototype.hasOwnProperty.call(V,L)){var D=parseFloat(L);this.compareStrings(N.getText(D),V[L])||(H=!1)}}return H},R.prototype.compareStrings=function(O,N){return typeof O=="string"&&typeof N=="string"?O===N:this.isEmptyString(O)&&this.isEmptyString(N)},R.prototype.isEmptyString=function(O){return O===""||O==null},R}();h.DataSource=U},5558:function(j,h,d){var u,g=this&&this.__extends||(u=function(e,t){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var r in o)o.hasOwnProperty(r)&&(n[r]=o[r])},u(e,t)},function(e,t){function n(){this.constructor=e}u(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(h,"__esModule",{value:!0}),h.DataSourceEdgeItem=h.DataSourceNodeItem=h.DataSourceItem=void 0;var v=d(7959),p=function(e,t,n){this.sourceKey=e,this.key=t,this.dataObj=n};h.DataSourceItem=p;var s=function(e){function t(n,o,r,a,c,f,m,y){var l=e.call(this,n,o,r)||this;return l.type=a,l.text=c,l.parentDataObj=f,l.containerKey=m,l.containerDataObj=y,l}return g(t,e),t}(p);h.DataSourceNodeItem=s;var i=function(e){function t(n,o,r,a,c){var f=e.call(this,n,o,r)||this;return f.sourceKey=n,f.from=a,f.to=c,f}return g(t,e),Object.defineProperty(t.prototype,"text",{get:function(){return this.texts&&this.texts[v.CONNECTOR_DEFAULT_TEXT_POSITION]},enumerable:!1,configurable:!0}),t}(p);h.DataSourceEdgeItem=i},8717:function(j,h,d){var u,g=this&&this.__extends||(u=function(m,y){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,P){l.__proto__=P}||function(l,P){for(var C in P)P.hasOwnProperty(C)&&(l[C]=P[C])},u(m,y)},function(m,y){function l(){this.constructor=m}u(m,y),m.prototype=y===null?Object.create(y):(l.prototype=y.prototype,new l)});Object.defineProperty(h,"__esModule",{value:!0}),h.DocumentDataSource=h.UpdateNodeKeyRelatedObjectsStackAction=h.UpdateNodeKeyRelatedObjectsStackItem=void 0;var v=d(2259),p=d(5503),s=d(7959),i=d(4225),e=d(4867),t=d(4914),n=d(8675),o=d(49),r=d(8679),a=function(m,y){this.shape=m,this.nodeObj=y};h.UpdateNodeKeyRelatedObjectsStackItem=a;var c=function(m,y){this.kind=m,this.nodeObj=y};h.UpdateNodeKeyRelatedObjectsStackAction=c;var f=function(m){function y(l,P,C,I,x,b){var S=m.call(this,"Document",P,C,I,x,b)||this;return S.changesListener=l,S.nodeInsertingLockCount=0,S.updateNodeKeyRelatedObjectsCount=0,S.updateNodeKeyRelatedObjectsStack=[],S.updateNodeKeyRelatedObjectsStackActions=[],S}return g(y,m),y.prototype.updateItemsByModel=function(l){var P=this;this.beginChangesNotification(),this.deleteNodes(l),this.deleteEdges(l),l.items.forEach(function(C){C instanceof p.Shape&&P.updateNode(l,C),C instanceof s.Connector&&P.updateEdge(l,C)}),this.endChangesNotification(!1)},y.prototype.isItemObjectModified=function(l,P,C){var I=C.setLocked&&P.locked!==l.locked||C.setZIndex&&P.zIndex!==l.zIndex||C.setCustomData&&!n.ObjectUtils.compareObjects(P.customData,l.customData);if(!I&&C.setStyle){var x=l.style.getDefaultInstance();l.style.forEach(function(S){l.style[S]!==x[S]&&l.style[S]!==(P.style&&P.style[S])&&(I=!0)})}if(!I&&C.setStyleText){var b=l.styleText.getDefaultInstance();l.styleText.forEach(function(S){l.styleText[S]!==b[S]&&l.styleText[S]!==(P.styleText&&P.styleText[S])&&(I=!0)})}return I},y.prototype.setDataObjectKeyRelatedProperty=function(l,P,C,I){(I||this.autoGeneratedDataKeys[C]===void 0)&&l(P,C)},y.prototype.updateItemObjectProperties=function(l,P,C){if(C.setCustomData&&(l.customData=n.ObjectUtils.cloneObject(P.customData),l.dataObj&&l.customData!==void 0&&C.setCustomData(l.dataObj,P.customData)),C.setLocked&&(l.locked=P.locked,l.dataObj&&l.locked!==void 0&&C.setLocked(l.dataObj,P.locked)),C.setStyle){var I=P.style.toObject();l.style=I,l.dataObj&&l.style!==void 0&&C.setStyle(l.dataObj,t.Data.objectToCssText(I))}if(C.setStyleText){var x=P.styleText.toObject();l.styleText=x,l.dataObj&&l.styleText!==void 0&&C.setStyleText(l.dataObj,t.Data.objectToCssText(x))}C.setZIndex&&(l.zIndex=P.zIndex,l.dataObj&&l.zIndex!==void 0&&C.setZIndex(l.dataObj,P.zIndex))},y.prototype.deleteItems=function(l,P,C,I){l.slice().forEach(function(x){if(x.key!==void 0&&x.key!==null&&!P(x.key)){var b=C(x),S=b.indexOf(x.dataObj);b.splice(S,1),I(x,S>-1)}})},y.prototype.updateNode=function(l,P){var C=this,I=this.findNode(P.dataKey);if(I)this.isNodeObjectModified(P,I,l.units)?(this.updateNodeObjectProperties(P,I,l.units),this.updateNodeObjectConnectedProperties(P,I),this.beginChangesNotification(),this.changesListener.notifyNodeUpdated.call(this.changesListener,this.nodeDataImporter.getKey(I.dataObj||I.key),I.dataObj,function(b,S){C.endChangesNotification(!1)},function(b){C.endChangesNotification(!1)})):this.updateNodeObjectConnectedProperties(P,I,this.changesListener);else{var x={};P.dataKey!==void 0&&P.dataKey!==null&&this.nodeDataImporter.setKey(x,P.dataKey),I=this.addNodeInternal(x,P.description.key,P.text),this.nodeDataSource.push(I.dataObj),this.setDataObjectKeyRelatedProperty(this.nodeDataImporter.setKey,x,I.key,this.addInternalKeyOnInsert),this.updateNodeObjectProperties(P,I,l.units),this.updateNodeObjectConnectedProperties(P,I),this.updateNodeObjectKey(P,I,I.dataObj),this.beginChangesNotification(),this.beginNodeInserting(),this.changesListener.notifyNodeInserted.call(this.changesListener,I.dataObj,function(b){C.updateNodeObjectKey(P,I,b),C.endNodeInserting(),C.endChangesNotification(!1)},function(b){C.endNodeInserting(),C.endChangesNotification(!1)})}},y.prototype.areImageUrlsEqual=function(l,P){return l===P||o.StringUtils.isNullOrEmpty(l)&&o.StringUtils.isNullOrEmpty(P)},y.prototype.isNodeObjectModified=function(l,P,C){return this.isItemObjectModified(l,P,this.nodeDataImporter)||P.type!==l.description.key&&!(P.type===void 0&&l.description.key===v.ShapeTypes.Rectangle)||!this.compareStrings(P.text,l.text)||this.nodeDataImporter.setImage&&!this.areImageUrlsEqual(P.image,l.image.actualUrl)||this.nodeDataImporter.setLeft&&!r.MathUtils.numberCloseTo(P.left,e.ModelUtils.getlUnitValue(C,l.position.x))||this.nodeDataImporter.setTop&&!r.MathUtils.numberCloseTo(P.top,e.ModelUtils.getlUnitValue(C,l.position.y))||this.nodeDataImporter.setWidth&&!r.MathUtils.numberCloseTo(P.width,e.ModelUtils.getlUnitValue(C,l.size.width))||this.nodeDataImporter.setHeight&&!r.MathUtils.numberCloseTo(P.height,e.ModelUtils.getlUnitValue(C,l.size.height))},y.prototype.updateNodeObjectProperties=function(l,P,C){if(this.updateItemObjectProperties(P,l,this.nodeDataImporter),this.nodeDataImporter.setType&&(P.type=l.description.key,this.nodeDataImporter.setType(P.dataObj,l.description.key)),this.nodeDataImporter.setText&&(P.text=l.text,this.nodeDataImporter.setText(P.dataObj,l.text)),this.nodeDataImporter.setImage&&(P.image=l.image.actualUrl,this.nodeDataImporter.setImage(P.dataObj,l.image.actualUrl===void 0?null:l.image.actualUrl)),this.nodeDataImporter.setLeft){var I=e.ModelUtils.getlUnitValue(C,l.position.x);P.left=I,this.nodeDataImporter.setLeft(P.dataObj,I)}if(this.nodeDataImporter.setTop){var x=e.ModelUtils.getlUnitValue(C,l.position.y);P.top=x,this.nodeDataImporter.setTop(P.dataObj,x)}if(this.nodeDataImporter.setWidth){var b=e.ModelUtils.getlUnitValue(C,l.size.width);P.width=b,this.nodeDataImporter.setWidth(P.dataObj,b)}if(this.nodeDataImporter.setHeight){var S=e.ModelUtils.getlUnitValue(C,l.size.height);P.height=S,this.nodeDataImporter.setHeight(P.dataObj,S)}},y.prototype.updateNodeObjectConnectedProperties=function(l,P,C){if(this.useNodeParentId&&this.nodeDataImporter.setParentKey!==void 0){var I=this.getParentItemKey(l),x=this.findNode(I);this.updateNodeObjectParentKey(P,x,C)}if(this.useNodeContainerId&&this.nodeDataImporter.setContainerKey!==void 0){var b=this.getContainerShapeKey(l),S=this.findNode(b);this.updateNodeObjectContainerKey(P,S,C)}this.useNodeItems&&this.nodeDataImporter.setItems!==void 0&&(I=this.getParentItemKey(l),x=this.findNode(I),this.updateNodeObjectItems(P,x,C)),this.useNodeChildren&&this.nodeDataImporter.setChildren!==void 0&&(b=this.getContainerShapeKey(l),S=this.findNode(b),this.updateNodeObjectChildren(P,S,C))},y.prototype.IsNodeParentIdMode=function(){return this.useNodeParentId&&this.nodeDataImporter.setParentKey!==void 0},y.prototype.IsNodeItemsMode=function(){return this.useNodeItems&&this.nodeDataImporter.setItems!==void 0},y.prototype.updateNodeObjectParentKey=function(l,P,C){var I=this.nodeDataImporter.getParentKey(l.dataObj),x=P?this.nodeDataImporter.getKey(P.dataObj):void 0;I===x||this.isRootParentKey(I)&&this.isRootParentKey(x)||(this.setDataObjectKeyRelatedProperty(this.nodeDataImporter.setParentKey,l.dataObj,x,!1),C&&(this.isInUpdateNodeKeyRelatedObjects()?this.addToUpdateNodeKeyRelatedObjectsStackAction("shape",l):this.updateNodeObjectContainerOrParentKeyInternal(l,C)))},y.prototype.updateNodeObjectParentKeyInternal=function(l,P){var C=this;this.beginChangesNotification(),P.notifyNodeUpdated.call(P,this.nodeDataImporter.getKey(l.dataObj)||l.key,l.dataObj,function(I,x){C.endChangesNotification(!1)},function(I){C.endChangesNotification(!1)})},y.prototype.updateNodeObjectContainerKey=function(l,P,C){var I=this.nodeDataImporter.getContainerKey(l.dataObj),x=P?this.nodeDataImporter.getKey(P.dataObj):void 0;I===x||this.isRootParentKey(I)&&this.isRootParentKey(x)||(this.setDataObjectKeyRelatedProperty(this.nodeDataImporter.setContainerKey,l.dataObj,x,!1),C&&(this.isInUpdateNodeKeyRelatedObjects()?this.addToUpdateNodeKeyRelatedObjectsStackAction("shape",l):this.updateNodeObjectContainerOrParentKeyInternal(l,C)))},y.prototype.updateNodeObjectContainerOrParentKeyInternal=function(l,P){var C=this;this.beginChangesNotification(),P.notifyNodeUpdated.call(P,this.nodeDataImporter.getKey(l.dataObj)||l.key,l.dataObj,function(I,x){C.endChangesNotification(!1)},function(I){C.endChangesNotification(!1)})},y.prototype.isRootParentKey=function(l){return l==null||!this.findNode(l)},y.prototype.updateNodeObjectItems=function(l,P,C){var I=this;if((P&&l.parentDataObj!==P.dataObj||!P&&l.parentDataObj)&&(!P||!this.checkNodeCyrcleItems(l.dataObj,P.dataObj))){var x=l.parentDataObj?this.nodeDataImporter.getItems(l.parentDataObj):this.nodeDataSource,b=x.indexOf(l.dataObj);x.splice(b,1);var S=P?this.nodeDataImporter.getItems(P.dataObj):this.nodeDataSource;S?S.push(l.dataObj):this.nodeDataImporter.setItems(P.dataObj,[l.dataObj]),l.parentDataObj=P&&P.dataObj,C&&(this.beginChangesNotification(),C.notifyNodeUpdated.call(C,this.nodeDataImporter.getKey(l.dataObj)||l.key,l.dataObj,function(w,T){I.endChangesNotification(!1)},function(w){I.endChangesNotification(!1)}))}},y.prototype.updateNodeObjectChildren=function(l,P,C){var I=this;if(P&&l.containerDataObj!==P.dataObj||!P&&l.containerDataObj){var x=l.containerDataObj?this.nodeDataImporter.getChildren(l.containerDataObj):this.nodeDataSource,b=x.indexOf(l.dataObj);x.splice(b,1);var S=P?this.nodeDataImporter.getChildren(P.dataObj):this.nodeDataSource;S?S.push(l.dataObj):this.nodeDataImporter.setChildren(P.dataObj,[l.dataObj]),l.containerDataObj=P&&P.dataObj,C&&(this.beginChangesNotification(),C.notifyNodeUpdated.call(C,this.nodeDataImporter.getKey(l.dataObj)||l.key,l.dataObj,function(w,T){I.endChangesNotification(!1)},function(w){I.endChangesNotification(!1)}))}},y.prototype.checkNodeCyrcleItems=function(l,P){var C=this,I=!1,x=this.nodeDataImporter.getItems(l);return x&&x.forEach(function(b){I=I||b===P||C.checkNodeCyrcleItems(b,P)}),I},y.prototype.updateNodeObjectKey=function(l,P,C){var I=this.nodeDataImporter.getKey(C),x=!1;if(I!=null&&I!==P.key&&(delete this.autoGeneratedDataKeys[P.key],P.key=I,x=!0),l.dataKey=P.key,P.dataObj!==C){var b=this.getNodeArray(P),S=b.indexOf(P.dataObj);b.splice(S,1,C),P.dataObj=C}x&&this.updateNodeKeyRelatedObjects(l,P)},y.prototype.updateNodeKeyRelatedObjects=function(l,P){var C=this;this.isInNodeInserting()?this.addToUpdateNodeKeyRelatedObjectsStack(l,P):(this.useNodeParentId&&this.nodeDataImporter.setParentKey!==void 0&&this.getChildItems(l).forEach(function(I){var x=C.findNode(I.dataKey);x&&C.updateNodeObjectParentKey(x,P,C.changesListener)}),this.useNodeContainerId&&this.nodeDataImporter.setContainerKey!==void 0&&l.children.forEach(function(I){var x=I instanceof p.Shape?C.findNode(I.dataKey):void 0;x&&C.updateNodeObjectContainerKey(x,P,C.changesListener)}),this.useEdgesArray()&&l.attachedConnectors.forEach(function(I){var x=C.findEdge(I.dataKey);x&&(l===I.beginItem&&C.updateEdgeObjectFromProperty(P,x,C.changesListener),l===I.endItem&&C.updateEdgeObjectToProperty(P,x,C.changesListener))}))},y.prototype.deleteNodes=function(l){var P=this;this.deleteItems(this.nodes,function(C){return l.findShapeByDataKey(C)},function(C){return P.getNodeArray(C)},function(C,I){var x=C.dataObj&&P.nodeDataImporter.getKey(C.dataObj)||C.key,b=P.findNode(x);b&&P.nodes.splice(P.nodes.indexOf(b),1),I&&(P.beginChangesNotification(),P.changesListener.notifyNodeRemoved.call(P.changesListener,x,C.dataObj,function(S,w){P.endChangesNotification(!1)},function(S){P.endChangesNotification(!1)}))})},y.prototype.getParentItem=function(l){for(var P=0;P<l.attachedConnectors.length;P++)if(l.attachedConnectors[P].endItem===l)return l.attachedConnectors[P].beginItem},y.prototype.getParentItemKey=function(l){var P=this.getParentItem(l);return P&&P.dataKey},y.prototype.getNodeArray=function(l){var P;return this.useNodeItems&&l.parentDataObj?P=this.nodeDataImporter.getItems(l.parentDataObj):l.containerDataObj&&(P=this.nodeDataImporter.getChildren(l.containerDataObj)),P||this.nodeDataSource},y.prototype.getContainerShapeKey=function(l){return l.container&&l.container.dataKey},y.prototype.getChildItems=function(l){for(var P=[],C=0;C<l.attachedConnectors.length;C++)l.attachedConnectors[C].beginItem===l&&l.attachedConnectors[C].endItem&&P.push(l.attachedConnectors[C].endItem);return P},y.prototype.updateEdge=function(l,P){var C=this,I=P.beginItem?P.beginItem.dataKey:void 0,x=P.endItem?P.endItem.dataKey:void 0,b=this.findEdge(P.dataKey);if(b)this.isEdgeObjectModified(P,b,l.units)&&(this.updateEdgeObjectProperties(P,b,l.units),b.dataObj&&(this.beginChangesNotification(),this.changesListener.notifyEdgeUpdated.call(this.changesListener,this.edgeDataImporter.getKey(b.dataObj)||b.key,b.dataObj,function(w,T){C.endChangesNotification(!1)},function(w){C.endChangesNotification(!1)})));else{var S=this.useEdgesArray()&&this.canUpdateEdgeDataSource?{}:void 0;S&&P.dataKey!==void 0&&P.dataKey!==null&&this.edgeDataImporter.setKey(S,P.dataKey),b=this.addEdgeInternal(S,I,x),S&&(this.setDataObjectKeyRelatedProperty(this.edgeDataImporter.setKey,S,b.key,this.addInternalKeyOnInsert),this.edgeDataSource.push(b.dataObj)),this.updateEdgeObjectProperties(P,b,l.units),this.updateEdgeObjectKey(P,b,b.dataObj),S&&(this.beginChangesNotification(),this.beginNodeInserting(),this.changesListener.notifyEdgeInserted.call(this.changesListener,b.dataObj,function(w){C.updateEdgeObjectKey(P,b,w),C.endNodeInserting(),C.endChangesNotification(!1)},function(w){C.endNodeInserting(),C.endChangesNotification(!1)}))}},y.prototype.isEdgeObjectModified=function(l,P,C){return this.isItemObjectModified(l,P,this.edgeDataImporter)||(P.from!==null?P.from:void 0)!==(l.beginItem?l.beginItem.dataKey:void 0)||(P.to===null?void 0:P.to)!==(l.endItem?l.endItem.dataKey:void 0)||this.edgeDataImporter.setFromPointIndex&&P.fromPointIndex!==l.beginConnectionPointIndex||this.edgeDataImporter.setToPointIndex&&P.toPointIndex!==l.endConnectionPointIndex||this.edgeDataImporter.setPoints&&(!P.points||!this.pointsAreEqual(P.points.map(function(I){return I.x}),l.points.map(function(I){return e.ModelUtils.getlUnitValue(C,I.x)}))||!this.pointsAreEqual(P.points.map(function(I){return I.y}),l.points.map(function(I){return e.ModelUtils.getlUnitValue(C,I.y)})))||this.edgeDataImporter.setText&&!this.compareTexts(P,l)||this.edgeDataImporter.setLineOption&&P.lineOption!==l.properties.lineOption||this.edgeDataImporter.setStartLineEnding&&P.startLineEnding!==l.properties.startLineEnding||this.edgeDataImporter.setEndLineEnding&&P.endLineEnding!==l.properties.endLineEnding},y.prototype.pointsAreEqual=function(l,P){var C=l.length;if(C!==l.length)return!1;for(var I=0;I<C;I++)if(!r.MathUtils.numberCloseTo(l[I],P[I]))return!1;return!0},y.prototype.updateEdgeObjectFromProperty=function(l,P,C){if(P.from=l&&l.key,P.dataObj){var I=l&&l.dataObj&&this.nodeDataImporter.getKey(l.dataObj);this.setDataObjectKeyRelatedProperty(this.edgeDataImporter.setFrom,P.dataObj,I,!1),C&&(this.isInUpdateNodeKeyRelatedObjects()?this.addToUpdateNodeKeyRelatedObjectsStackAction("edge",P):this.updateEdgeObjectFromOrToPropertyInternal(P,C))}},y.prototype.updateEdgeObjectFromOrToPropertyInternal=function(l,P){var C=this;this.beginChangesNotification(),P.notifyEdgeUpdated.call(P,this.nodeDataImporter.getKey(l.dataObj)||l.key,l.dataObj,function(I,x){C.endChangesNotification(!1)},function(I){C.endChangesNotification(!1)})},y.prototype.updateEdgeObjectToProperty=function(l,P,C){if(P.to=l&&l.key,P.dataObj){var I=l&&l.dataObj&&this.nodeDataImporter.getKey(l.dataObj);this.setDataObjectKeyRelatedProperty(this.edgeDataImporter.setTo,P.dataObj,I,!1),C&&(this.isInUpdateNodeKeyRelatedObjects()?this.addToUpdateNodeKeyRelatedObjectsStackAction("edge",P):this.updateEdgeObjectFromOrToPropertyInternal(P,C))}},y.prototype.updateEdgeObjectProperties=function(l,P,C){if(this.updateItemObjectProperties(P,l,this.edgeDataImporter),this.edgeDataImporter.setFrom){var I=this.findNode(l.beginItem&&l.beginItem.dataKey);this.updateEdgeObjectFromProperty(I,P)}if(this.edgeDataImporter.setTo){var x=this.findNode(l.endItem&&l.endItem.dataKey);this.updateEdgeObjectToProperty(x,P)}if(this.edgeDataImporter.setFromPointIndex&&(P.fromPointIndex=l.beginConnectionPointIndex,P.dataObj&&this.edgeDataImporter.setFromPointIndex(P.dataObj,l.beginConnectionPointIndex)),this.edgeDataImporter.setToPointIndex&&(P.toPointIndex=l.endConnectionPointIndex,P.dataObj&&this.edgeDataImporter.setToPointIndex(P.dataObj,l.endConnectionPointIndex)),this.edgeDataImporter.setPoints){var b=l.points.map(function(_){return{x:e.ModelUtils.getlUnitValue(C,_.x),y:e.ModelUtils.getlUnitValue(C,_.y)}});P.points=b,P.dataObj&&this.edgeDataImporter.setPoints(P.dataObj,b)}if(this.edgeDataImporter.setText){var S=void 0;l.getTextCount()===1&&l.getText()&&(S=l.getText());var w={};if(l.texts.forEach(function(_){w[_.position]=_.value}),P.texts=w,P.dataObj){var T="";S?T=S:w&&Object.keys(w).length&&(T=w),this.edgeDataImporter.setText(P.dataObj,T)}}this.edgeDataImporter.setLineOption&&(P.lineOption=l.properties.lineOption,P.dataObj&&this.edgeDataImporter.setLineOption(P.dataObj,l.properties.lineOption)),this.edgeDataImporter.setStartLineEnding&&(P.startLineEnding=l.properties.startLineEnding,P.dataObj&&this.edgeDataImporter.setStartLineEnding(P.dataObj,l.properties.startLineEnding)),this.edgeDataImporter.setEndLineEnding&&(P.endLineEnding=l.properties.endLineEnding,P.dataObj&&this.edgeDataImporter.setEndLineEnding(P.dataObj,l.properties.endLineEnding))},y.prototype.updateEdgeObjectKey=function(l,P,C){var I=C&&this.edgeDataImporter.getKey(C);if(I!=null&&I!==P.key&&(delete this.autoGeneratedDataKeys[P.key],P.key=I),l.dataKey=P.key,P.dataObj!==C){var x=this.edgeDataSource,b=x.indexOf(P.dataObj);x.splice(b,1,C),P.dataObj=C}},y.prototype.deleteEdges=function(l){var P=this;this.deleteItems(this.edges,function(C){return l.findConnectorByDataKey(C)},function(C){return P.edgeDataSource},function(C,I){var x=C.dataObj&&P.edgeDataImporter.getKey(C.dataObj)||C.key,b=P.findEdge(x);b&&P.edges.splice(P.edges.indexOf(b),1),I&&(P.beginChangesNotification(),P.changesListener.notifyEdgeRemoved.call(P.changesListener,x,C.dataObj,function(S,w){P.endChangesNotification(!1)},function(S){P.endChangesNotification(!1)}))})},y.prototype.beginNodeInserting=function(){this.nodeInsertingLockCount++},y.prototype.endNodeInserting=function(){this.nodeInsertingLockCount--,this.nodeInsertingLockCount===0&&this.raiseNodeInsertingStack()},y.prototype.isInNodeInserting=function(){return this.nodeInsertingLockCount>0},y.prototype.addToUpdateNodeKeyRelatedObjectsStack=function(l,P){var C=new a(l,P);this.updateNodeKeyRelatedObjectsStack.push(C)},y.prototype.raiseNodeInsertingStack=function(){for(this.beginUpdateNodeKeyRelatedObjects();this.updateNodeKeyRelatedObjectsStack.length>0;){var l=this.updateNodeKeyRelatedObjectsStack[0];this.updateNodeKeyRelatedObjects(l.shape,l.nodeObj),this.updateNodeKeyRelatedObjectsStack.splice(0,1),l.shape.description.hasTemplate&&l.nodeObj&&this.changesListener.reloadInsertedItem(l.nodeObj.key)}this.endUpdateNodeKeyRelatedObjects()},y.prototype.beginUpdateNodeKeyRelatedObjects=function(){this.updateNodeKeyRelatedObjectsCount++},y.prototype.endUpdateNodeKeyRelatedObjects=function(){this.updateNodeKeyRelatedObjectsCount--,this.updateNodeKeyRelatedObjectsCount===0&&this.raiseUpdateNodeKeyRelatedObjectsStack()},y.prototype.isInUpdateNodeKeyRelatedObjects=function(){return this.updateNodeKeyRelatedObjectsCount>0},y.prototype.addToUpdateNodeKeyRelatedObjectsStackAction=function(l,P){for(var C=new c(l,P),I=0;I<this.updateNodeKeyRelatedObjectsStackActions.length;I++)if(this.updateNodeKeyRelatedObjectsStackActions[I].kind===l&&this.updateNodeKeyRelatedObjectsStackActions[I].nodeObj===P)return;this.updateNodeKeyRelatedObjectsStackActions.push(C)},y.prototype.raiseUpdateNodeKeyRelatedObjectsStack=function(){for(;this.updateNodeKeyRelatedObjectsStackActions.length>0;){var l=this.updateNodeKeyRelatedObjectsStackActions[0];switch(l.kind){case"shape":this.updateNodeObjectContainerOrParentKeyInternal(l.nodeObj,this.changesListener);break;case"edge":this.updateEdgeObjectFromOrToPropertyInternal(l.nodeObj,this.changesListener)}this.updateNodeKeyRelatedObjectsStackActions.splice(0,1)}},y.prototype.beginChangesNotification=function(){this.changesListener.beginChangesNotification()},y.prototype.endChangesNotification=function(l){this.changesListener.endChangesNotification(l)},y}(i.DataSource);h.DocumentDataSource=f},9463:(j,h)=>{var d;Object.defineProperty(h,"__esModule",{value:!0}),h.Diagnostics=void 0,function(g){g[g.Disabled=0]="Disabled",g[g.Console=1]="Console",g[g.Document=2]="Document"}(d||(d={}));var u=function(){function g(){}return g.beginAverage=function(v){this.enableLogsAndTimers&&(this.lastAverageGroupName=v)},g.endAverage=function(){this.enableLogsAndTimers&&(this.lastAverageGroupName=null)},g.tryLogAverage=function(v){var p=this;if(this.lastAverageGroupName!==v){var s=Object.keys(this.timers).map(function(e){return p.timers[e]}).filter(function(e){return e.groupName===v});if(!s.filter(function(e){return!e.endTime}).length){var i=s.reduce(function(e,t){return e+(t.endTime-t.startTime)},0)/s.length;this.log("average: "+i)}}},g.timer=function(v){this.enableLogsAndTimers&&(this.lastCreatedTimer={message:v,startTime:performance.now(),groupName:this.lastAverageGroupName})},g.endTimer=function(){var v=this;if(this.enableLogsAndTimers){var p=this.lastCreatedTimer,s=setTimeout(function(){p.endTime=performance.now(),v.showMessage('timer "'+p.message+'": '+(p.endTime-p.startTime)),p.groupName&&v.tryLogAverage(p.groupName)},0);this.timers[s]=p,this.lastCreatedTimer=null}},g.logPerfInfo=function(){var v=document.querySelector(".dxdi-control > svg").querySelectorAll("*").length,p=performance.memory;this.log("nodes: "+v.toLocaleString()+(p?" memory: ":"")+(p?p.usedJSHeapSize.toLocaleString():""))},g.log=function(v){this.showMessage(v)},g.showMessage=function(v){switch(g.mode){case d.Console:console.log(v);break;case d.Document:var p=this.getElement().value;if(this.lastMessage===v){var s=p.indexOf(`\r
`);s<0&&(s=p.indexOf(`
`));var i=p.substr(0,s);/( \()([0-9]+)(\))$/.test(i)?i=i.replace(/( \()([0-9]+)(\))$/,function(e,t,n,o){return t+ ++n+o}):i+=" (1)",this.getElement().value=i+p.substr(s)}else this.getElement().value=v+`\r
`+p,this.lastMessage=v}},g.getElement=function(){var v=this;if(!this.el){this.el=document.createElement("textarea"),this.el.style.top="0px",this.el.style.right="0px",this.el.style.position="fixed",this.el.style.background="transparent",this.el.style.fontSize="11px",this.el.style.fontFamily="monospace",this.el.style.overflow="auto",this.el.style.width="400px",document.body.appendChild(this.el);var p=document.createElement("button");p.innerHTML="x",p.addEventListener("click",function(){v.el.value="",v.lastMessage=""}),p.style.top="0px",p.style.right="400px",p.style.position="fixed",p.style.opacity="0.1",document.body.appendChild(p)}return this.el},g.mode=d.Document,g.optimizeUsingRAF=!0,g.optimizeLayers=!0,g.timers={},g.enableLogsAndTimers=!1,g}();h.Diagnostics=u},2106:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.DiagramControl=void 0;var u=d(8900),g=d(1118),v=d(7156),p=d(82),s=d(6613),i=d(9021),e=d(1864),t=d(2230),n=d(8098),o=d(8397),r=d(8717),a=d(240),c=d(6879),f=d(6734),m=d(4867),y=d(3298),l=d(8675),P=d(5656),C=d(7176),I=d(2883),x=d(5714),b=d(1733),S=d(7959),w=d(3503),T=d(6214),_=d(3500),M=d(3607),A=d(8679),E=function(){function U(){this.updateLockCount=0,this.shouldUpdateItemsByModel=!1,this.reloadContentNeeded=!1,this.reloadContentParameters=new T.ReloadContentParameters,this.reloadContentByExternalChangesParameters=new T.ReloadContentParameters,this.instanceId=A.MathUtils.generateGuid(),this.settings=new a.DiagramSettings,this.shapeDescriptionManager=new o.ShapeDescriptionManager,this.shapeDescriptionManager.onShapeDecriptionChanged.add(this),this.model=new s.DiagramModel,this.selection=new i.Selection(this.model),this.onNativeAction=new l.EventDispatcher,this.apiController=new P.ApiController(this.onNativeAction,this.selection,this.model),this.permissionsProvider=new I.PermissionsProvider(this.apiController),this.permissionsProvider.onRequestOperation.add(this),this.routingModel=new x.ConnectorRoutingModel,this.modelManipulator=new g.ModelManipulator(this.model,this.routingModel,this.permissionsProvider,this.shapeDescriptionManager),this.modelManipulator.onModelChanged.add(this.permissionsProvider),this.history=new e.History(this.modelManipulator,this),this.barManager=new t.BarManager(this),this.view=new f.ViewController(this.settings,this.barManager),this.commandManager=new v.CommandManager(this),this.eventManager=new p.EventManager(this),this.settings.onReadOnlyChanged.add(this.eventManager.mouseHandler),this.settings.onReadOnlyChanged.add(this.eventManager.visualizersManager),this.selection.onChanged.add(this.barManager),this.selection.onChanged.add(this.apiController),this.selection.onChanged.add(this.permissionsProvider),this.modelManipulator.commitItemsCreateChanges(),this.history.onChanged.add(this),this.toolboxManager=new y.ToolboxManager(this.shapeDescriptionManager),this.settings.onConnectorRoutingModeChanged.add(this.routingModel),C.ImageCache.instance.onReadyStateChanged.add(this)}return Object.defineProperty(U.prototype,"operationSettings",{get:function(){return this.permissionsProvider.operationSettings},enumerable:!1,configurable:!0}),U.prototype.cleanMarkup=function(R){R=R||function(O){_.RenderUtils.removeElement(O)},this.toolboxManager.clean(R),this.barManager.clean(),this.render&&(this.settings.onZoomChanged.remove(this.render.view),this.settings.onViewChanged.remove(this.render.page),this.settings.onViewChanged.remove(this.render.view),this.settings.onReadOnlyChanged.remove(this.render),this.settings.onReadOnlyChanged.remove(this.render.selection),this.eventManager.cleanToolboxes(this.settings.onReadOnlyChanged),this.eventManager.onTextInputOperation.remove(this.render.input),this.eventManager.onTextInputOperation.remove(this.render.items),this.eventManager.onTextInputOperation.remove(this.render.selection),this.eventManager.onMouseOperation.remove(this.render.items),this.eventManager.onMouseOperation.remove(this.render.selection),this.eventManager.onMouseOperation.remove(this.render.view),this.eventManager.onMouseOperation.remove(this.render),this.eventManager.onVisualizersUpdate.remove(this.render.selection),this.modelManipulator.onModelSizeChanged.remove(this.render.view),this.modelManipulator.onModelSizeChanged.remove(this.render.page),this.modelManipulator.onModelChanged.remove(this.render.items),this.modelManipulator.onModelChanged.remove(this.render.page),this.modelManipulator.onModelChanged.remove(this.render.selection),this.selection.onChanged.remove(this.render.selection),this.selection.onChanged.remove(this.render.items),this.render.clean(R),this.render=void 0),this.measurer&&this.measurer instanceof b.TextMeasurer&&this.measurer.clean()},U.prototype.dispose=function(){C.ImageCache.instance.onReadyStateChanged.remove(this)},U.prototype.createDocument=function(R,O,N){this.measurer||this.initMeasurer(R),this.render?this.render.replaceParent(R,O):(this.render=new n.RenderManager(R,this.eventManager,this.measurer,{pageColor:this.model.pageColor,modelSize:this.model.size,pageLandscape:this.model.pageLandscape,pageSize:this.model.pageSize,simpleView:this.settings.simpleView,readOnly:this.settings.readOnly,contextMenuEnabled:this.settings.contextMenuEnabled,gridSize:this.settings.gridSize,gridVisible:this.settings.showGrid,zoomLevel:this.settings.zoomLevel,autoZoom:this.settings.autoZoom,rectangle:this.model.getRectangle(!0)},this.instanceId,O,N),this.settings.onZoomChanged.add(this.render.view),this.settings.onViewChanged.add(this.render.page),this.settings.onViewChanged.add(this.render.view),this.settings.onReadOnlyChanged.add(this.render),this.settings.onReadOnlyChanged.add(this.render.selection),this.eventManager.onTextInputOperation.add(this.render.input),this.eventManager.onTextInputOperation.add(this.render.items),this.eventManager.onTextInputOperation.add(this.render.selection),this.eventManager.onTextInputOperation.add(this),this.eventManager.onMouseOperation.add(this.render.items),this.eventManager.onMouseOperation.add(this.render.selection),this.eventManager.onMouseOperation.add(this.render.view),this.eventManager.onMouseOperation.add(this.render),this.eventManager.onVisualizersUpdate.add(this.render.selection),this.modelManipulator.onModelSizeChanged.add(this.render.view),this.modelManipulator.onModelSizeChanged.add(this.render.page),this.modelManipulator.onModelChanged.add(this.render.items),this.modelManipulator.onModelChanged.add(this.render.page),this.modelManipulator.onModelChanged.add(this.render.selection),this.selection.onChanged.add(this.render.selection),this.selection.onChanged.add(this.render.items),this.render.update(!1),this.render.onNewModel(this.model.items),this.modelManipulator.commitItemsCreateChanges(),this.view.initialize(this.render.view),this.settings.zoomLevelWasChanged&&this.raiseCanvasViewActualZoomChanged(),this.selection.raiseSelectionChanged())},U.prototype.createToolbox=function(R,O,N,V){var H=this.toolboxManager.create(R,this.settings.readOnly,!0,O,N,this.getToolboxAllowedShapeTypes.bind(this),this.instanceId,V);this.settings.onReadOnlyChanged.add(H),H.onDragOperation.add(this),H.onDragOperation.add(this.apiController),this.eventManager.registerToolbox(H)},U.prototype.createContextToolbox=function(R,O,N,V,H){this.cleanContextToolbox(),this.contextToolbox=this.toolboxManager.create(R,this.settings.readOnly,!1,O,N,this.getToolboxAllowedShapeTypes.bind(this),this.instanceId,V),this.contextToolbox.onClickOperation.add(this),this.contextToolboxOnClick=H},U.prototype.getToolboxAllowedShapeTypes=function(R){var O=this,N=[];return this.permissionsProvider.beginUpdateUI(),R.forEach(function(V){O.permissionsProvider.canAddShapeFromToolbox(V)&&N.push(V)}),this.permissionsProvider.endUpdateUI(),N},U.prototype.cleanContextToolbox=function(){this.contextToolbox&&(this.toolboxManager.clean(void 0,this.contextToolbox),this.contextToolbox=void 0,this.contextToolboxOnClick=void 0)},U.prototype.refreshToolbox=function(R){this.permissionsProvider.clearCache(c.DiagramModelOperation.AddShapeFromToolbox),this.toolboxManager.refresh(R)},U.prototype.applyToolboxFilter=function(R,O){return this.toolboxManager.applyFilter(R,O)},U.prototype.notifyToolboxClick=function(R){this.contextToolboxOnClick&&this.contextToolboxOnClick(R)},U.prototype.initMeasurer=function(R){this.measurer=new b.TextMeasurer(R)},U.prototype.onDimensionChanged=function(){M.Browser.TouchUI||this.updateLayout(!0)},U.prototype.updateLayout=function(R){R===void 0&&(R=!1),this.render&&this.render.update(!R)},U.prototype.captureFocus=function(){this.render&&this.render.input.captureFocus()},U.prototype.isFocused=function(){return!this.render||this.render.input.isFocused()},U.prototype.registerBar=function(R){this.barManager.registerBar(R)},U.prototype.updateBarItemsState=function(R,O){this.barManager.updateBarItemsState(R,O)},U.prototype.getCommand=function(R){return this.commandManager.getCommand(R)},U.prototype.getNativeItemByKey=function(R){var O=this.model.findItem(R);return O&&this.apiController.createNativeItem(O)},U.prototype.getNativeItemByDataKey=function(R){var O=this.model.findItemByDataKey(R);return O&&this.apiController.createNativeItem(O)},U.prototype.getNativeItems=function(){var R=this;return this.model.items.map(function(O){return R.apiController.createNativeItem(O)})},U.prototype.getNativeSelectedItems=function(){var R=this;return this.selection.getKeys().map(function(O){return R.apiController.createNativeItem(R.model.findItem(O))})},U.prototype.setSelectedItems=function(R){this.selection.set(R)},U.prototype.scrollToItems=function(R){var O=this,N=l.GeometryUtils.getCommonRectangle(R.map(function(V){return O.model.findItem(V).rectangle}));this.view.scrollIntoView(N)},U.prototype.setInitialStyleProperties=function(R){this.selection.inputPosition.setInitialStyleProperties(R)},U.prototype.setInitialTextStyleProperties=function(R){this.selection.inputPosition.setInitialTextStyleProperties(R)},U.prototype.setInitialConnectorProperties=function(R){this.selection.inputPosition.setInitialConnectorProperties(R)},U.prototype.addCustomShapes=function(R){var O=this;R.forEach(function(N){N.apiController=O.apiController,N.defaultWidth&&(N.defaultWidth=m.ModelUtils.getTwipsValue(O.model.units,N.defaultWidth)),N.defaultHeight&&(N.defaultHeight=m.ModelUtils.getTwipsValue(O.model.units,N.defaultHeight)),N.minWidth&&(N.minWidth=m.ModelUtils.getTwipsValue(O.model.units,N.minWidth)),N.minHeight&&(N.minHeight=m.ModelUtils.getTwipsValue(O.model.units,N.minHeight)),N.maxWidth&&(N.maxWidth=m.ModelUtils.getTwipsValue(O.model.units,N.maxWidth)),N.maxHeight&&(N.maxHeight=m.ModelUtils.getTwipsValue(O.model.units,N.maxHeight)),O.shapeDescriptionManager.registerCustomShape(N)})},U.prototype.removeCustomShapes=function(R){var O=this;R.forEach(function(N){O.shapeDescriptionManager.unregisterCustomShape(N)})},U.prototype.removeAllCustomShapes=function(){this.shapeDescriptionManager.unregisterAllCustomShapes()},U.prototype.importModel=function(R){R.units=this.model.units,this.model=R,this.model.initializeKeyCounter(),this.apiController.model=R,this.onImportData()},U.prototype.importItemsData=function(){this.onImportData()},U.prototype.onImportData=function(){this.render&&(this.render.clear(),this.render.onNewModel(this.model.items)),this.permissionsProvider.clearCache(),this.selection.initialize(this.model),this.modelManipulator.initialize(this.model,this.routingModel),this.history.clear(),this.eventManager.initialize(),this.modelManipulator.commitPageChanges(),this.modelManipulator.commitItemsCreateChanges(),this.notifyViewChanged(),this.notifyHistoryChanged()},U.prototype.createDocumentDataSource=function(R,O,N,V,H){return this.documentDataSource=new r.DocumentDataSource(this,R,O,N,V,H),this.apiController.setDataSource(this.documentDataSource),this.documentDataSource},U.prototype.deleteDocumentDataSource=function(){this.apiController.setDataSource(null),delete this.documentDataSource},U.prototype.applyShapeSizeSettings=function(R){this.settings.applyShapeSizeSettings(R,this.model.units)},U.prototype.applyOperationSettings=function(R){this.permissionsProvider.operationSettings.applySettings(R)},U.prototype.beginUpdateCanvas=function(){this.render&&(this.render.items.beginUpdate(),this.render.selection.beginUpdate())},U.prototype.endUpdateCanvas=function(){this.render&&(this.render.items.endUpdate(),this.render.selection.endUpdate())},U.prototype.beginUpdate=function(){this.barManager.beginUpdate(),this.apiController.beginUpdate(),this.eventManager.beginUpdate()},U.prototype.endUpdate=function(){this.barManager.endUpdate(),this.apiController.endUpdate(),this.eventManager.endUpdate()},U.prototype.notifyEdgeInserted=function(R,O,N){this.onEdgeInserted?this.onEdgeInserted(R,O,N):O(R)},U.prototype.notifyEdgeUpdated=function(R,O,N,V){this.onEdgeUpdated?this.onEdgeUpdated(R,O,N,V):N(R,O)},U.prototype.notifyEdgeRemoved=function(R,O,N,V){this.onEdgeUpdated?this.onEdgeRemoved(R,O,N,V):N(R,O)},U.prototype.notifyNodeInserted=function(R,O,N){this.onNodeInserted?this.onNodeInserted(R,O,N):O(R)},U.prototype.notifyNodeUpdated=function(R,O,N,V){this.onNodeUpdated?this.onNodeUpdated(R,O,N,V):N(R,O)},U.prototype.notifyNodeRemoved=function(R,O,N,V){this.onNodeRemoved?this.onNodeRemoved(R,O,N,V):N(R,O)},U.prototype.reloadInsertedItem=function(R){this.settings.reloadInsertedItemRequired&&this.reloadContent(R)},U.prototype.reloadContent=function(R,O,N,V){if(this.documentDataSource){this.isChangesLocked()&&(this.reloadContentNeeded=!0);var H=V===!0||V===void 0&&!this.reloadContentNeeded,L=H?this.reloadContentByExternalChangesParameters:this.reloadContentParameters;L.add(R,O,N),this.isChangesLocked()||(this.reloadContentCore(L,H),this.barManager.updateItemsState())}},U.prototype.reloadContentCore=function(R,O){var N=this,V=R.getData&&R.getData(),H=this.documentDataSource.refetchData(V&&V.nodeDataSource,V&&V.edgeDataSource);this.beginUpdateCanvas(),this.permissionsProvider.lockPermissions(),this.documentDataSource.updateModelItems(this.history,this.model,this.shapeDescriptionManager,this.selection,new w.DataLayoutParameters(this.settings,R.layoutParameters),O,R.dataKeys,function(L){N.modelManipulator.commitItemUpdateChanges(L)},H,this.settings.snapToGrid,this.settings.gridSize,this.measurer),this.permissionsProvider.unlockPermissions(),this.endUpdateCanvas(),R.clear()},U.prototype.notifyHistoryChanged=function(){this.documentDataSource?(this.shouldUpdateItemsByModel=!0,this.settings.readOnly||this.notifyDataChanges()):this.raiseOnChanged()},U.prototype.notifyViewChanged=function(){this.settings.notifyViewChanged()},U.prototype.notifyToolboxDragStart=function(R){this.render.notifyToolboxDragStart(R),this.onToolboxDragStart&&this.onToolboxDragStart()},U.prototype.notifyToolboxDragEnd=function(R){this.render.notifyToolboxDragEnd(R),this.onToolboxDragEnd&&this.onToolboxDragEnd()},U.prototype.notifyToolboxDraggingMouseMove=function(R){this.render&&this.render.notifyToolboxDraggingMouseMove(R)},U.prototype.notifyTextInputStart=function(R,O,N,V){this.onTextInputStart&&this.onTextInputStart()},U.prototype.notifyTextInputEnd=function(R,O){this.onTextInputEnd&&this.onTextInputEnd()},U.prototype.notifyTextInputPermissionsCheck=function(R,O){},U.prototype.notifyToggleFullscreen=function(R){this.onToggleFullscreen&&this.onToggleFullscreen(R)},U.prototype.notifyShowContextMenu=function(R,O){if(this.onShowContextMenu&&this.render){var N=void 0;if(this.selection.getSelectedItems(!0).length>0){var V=m.ModelUtils.createRectangle(this.selection.getSelectedItems(!0)),H=this.render.getEventPointByModelPoint(V.createPosition()),L=this.render.view.getAbsoluteSize(V.createSize());N={x:H.x,y:H.y,width:L.width,height:L.height}}if(R)this.contextMenuPosition=new u.Point(R.x,R.y),this.onShowContextMenu(R.x,R.y,N);else if(O){var D=this.render.getEventPointByModelPoint(O);this.contextMenuPosition=D.clone(),this.onShowContextMenu(D.x,D.y,N)}}},U.prototype.notifyHideContextMenu=function(){this.onHideContextMenu&&this.render&&this.onHideContextMenu()},U.prototype.notifyShowContextToolbox=function(R,O,N,V,H){if(this.onShowContextToolbox&&this.render){var L=this.render.getEventPointByModelPoint(R);this.onShowContextToolbox(L.x,L.y,N,V,H),this.render.view.notifyShowContextToolbox()}},U.prototype.notifyHideContextToolbox=function(){this.onHideContextToolbox&&this.render&&(this.onHideContextToolbox(),this.render.view.notifyHideContextToolbox()),this.cleanContextToolbox()},U.prototype.notifyShapeDescriptionChanged=function(R){this.modelManipulator.updateShapeDescription(R)},U.prototype.notifyImageCacheReadyStateChanged=function(R){this.barManager.updateItemsState()},U.prototype.raiseCanvasViewActualZoomChanged=function(){this.render.view.raiseActualZoomChanged()},U.prototype.notifyRequestOperation=function(R,O){this.requestOperationByDataSource(R,O)||this.onRequestOperation&&this.onRequestOperation(R,O)},U.prototype.requestOperationByDataSource=function(R,O){if(!this.documentDataSource||!this.documentDataSource.IsNodeParentIdMode()&&!this.documentDataSource.IsNodeItemsMode())return!1;if(R===c.DiagramModelOperation.ChangeConnection){var N=O,V=N.shape&&this.model.findItem(N.shape.id),H=N.connector&&this.model.findItem(N.connector.id);if(!V||!H)return;if(N.position===S.ConnectorPosition.End)for(var L=0;L<V.attachedConnectors.length;L++){var D=V.attachedConnectors[L];if(D!==H&&D.endItem&&D.endItem===V){N.allowed=!1;break}}N.allowed&&H.beginItem&&H.endItem&&this.isShapeParent(H.endItem,H.beginItem)&&(N.allowed=!1)}return!O.allowed},U.prototype.isShapeParent=function(R,O){if(R===O)return!0;for(var N=0;N<R.attachedConnectors.length;N++){var V=R.attachedConnectors[N];if(V.beginItem===R&&V.endItem){var H=V.endItem;if(H===O||this.isShapeParent(H,O))return!0}}return!1},U.prototype.isChangesLocked=function(){return this.updateLockCount>0},U.prototype.beginChangesNotification=function(){this.isChangesLocked()||this.changesLockChanged&&this.changesLockChanged(!0),this.updateLockCount++},U.prototype.endChangesNotification=function(R){var O=this;this.updateLockCount--,this.isChangesLocked()||(this.changesLockChanged(!1),R||setTimeout(function(){O.notifyReloadContent(),O.notifyDataChanges()},0))},U.prototype.changesLockChanged=function(R){R?this.lockedReadOnly=this.settings.readOnly:R=this.lockedReadOnly,this.commandManager.getCommand(v.DiagramCommand.ToggleReadOnly).execute(R)},U.prototype.notifyDataChanges=function(){this.isChangesLocked()||(this.shouldUpdateItemsByModel&&(this.documentDataSource.updateItemsByModel(this.model),this.shouldUpdateItemsByModel=!1),this.raiseOnChanged())},U.prototype.notifyReloadContent=function(){this.reloadContentNeeded&&(this.reloadContentParameters.empty||this.reloadContentCore(this.reloadContentParameters,!1),this.reloadContentByExternalChangesParameters.empty||this.reloadContentCore(this.reloadContentByExternalChangesParameters,!0),this.reloadContentNeeded=!1)},U.prototype.raiseOnChanged=function(){this.onChanged&&this.onChanged()},U}();h.DiagramControl=E},5383:(j,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.PageOrientation=h.DiagramUnit=void 0,function(d){d[d.In=0]="In",d[d.Cm=1]="Cm",d[d.Px=2]="Px"}(h.DiagramUnit||(h.DiagramUnit={})),function(d){d[d.Portrait=0]="Portrait",d[d.Landscape=1]="Landscape"}(h.PageOrientation||(h.PageOrientation={}))},9946:function(j,h,d){var u,g=this&&this.__extends||(u=function(n,o){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var c in a)a.hasOwnProperty(c)&&(r[c]=a[c])},u(n,o)},function(n,o){function r(){this.constructor=n}u(n,o),n.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)});Object.defineProperty(h,"__esModule",{value:!0}),h.ContextMenuHandler=void 0;var v=d(8675),p=d(6031),s=d(2153),i=d(1772),e=d(9279),t=function(n){function o(){var r=n!==null&&n.apply(this,arguments)||this;return r.contextMenuVisible=!1,r.textInputStarted=!1,r.canHideContextMenu=!0,r.onVisibilityChanged=new v.EventDispatcher,r}return g(o,n),o.prototype.onMouseDown=function(r){r.button===p.MouseButton.Left&&r.source.type!==p.MouseEventElementType.Undefined&&this.hideContextMenu()},o.prototype.onMouseUp=function(r){(!e.Browser.MacOSPlatform||e.Browser.MacOSPlatform&&this.canHideContextMenu)&&this.hideContextMenu(),this.canHideContextMenu=!0},o.prototype.onContextMenu=function(r){e.Browser.MacOSPlatform&&(this.canHideContextMenu=!1),this.showContextMenu(r.eventPoint,r.modelPoint)},o.prototype.onFocus=function(r){},o.prototype.onBlur=function(r){},o.prototype.onTextInputFocus=function(r){},o.prototype.onTextInputBlur=function(r){},o.prototype.onLongTouch=function(r){},o.prototype.onKeyDown=function(r){r.keyCode===s.KeyCode.Esc&&this.hideContextMenu()},o.prototype.onShortcut=function(r){this.hideContextMenu()},o.prototype.showContextMenu=function(r,a){var c=this;this.textInputStarted||window.setTimeout(function(){c.onVisibilityChanged.raise1(function(f){return f.notifyShowContextMenu(r,a)}),c.contextMenuVisible=!0},0)},o.prototype.hideContextMenu=function(){var r=this;this.contextMenuVisible&&window.setTimeout(function(){r.onVisibilityChanged.raise1(function(a){return a.notifyHideContextMenu()}),r.contextMenuVisible=!1},0)},o.prototype.notifyDragStart=function(r){},o.prototype.notifyDragEnd=function(r){},o.prototype.notifyDragScrollStart=function(){},o.prototype.notifyDragScrollEnd=function(){},o.prototype.notifyShowContextToolbox=function(r,a,c,f,m){},o.prototype.notifyHideContextToolbox=function(){},o.prototype.notifyTextInputStart=function(r,a,c,f){this.textInputStarted=!0},o.prototype.notifyTextInputEnd=function(r,a){this.textInputStarted=!1},o.prototype.notifyTextInputPermissionsCheck=function(r,a){},o.prototype.onUpdateUnlocked=function(r){},o}(i.BatchUpdatableObject);h.ContextMenuHandler=t},151:function(j,h,d){var u,g=this&&this.__extends||(u=function(e,t){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var r in o)o.hasOwnProperty(r)&&(n[r]=o[r])},u(e,t)},function(e,t){function n(){this.constructor=e}u(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(h,"__esModule",{value:!0}),h.ContextMenuTouchHandler=void 0;var v=d(6031),p=d(9946),s=d(4867),i=function(e){function t(n){var o=e.call(this)||this;return o.selection=n,o.contextToolboxVisible=!1,o.selection.onChanged.add(o),o}return g(t,e),t.prototype.onMouseDown=function(n){n.source.key===void 0&&this.hideContextMenu()},t.prototype.onMouseUp=function(n){},t.prototype.onFocus=function(n){var o=this;setTimeout(function(){o.showContextMenuAtSelection()},1)},t.prototype.onBlur=function(n){var o=this;setTimeout(function(){o.hideContextMenu()},1)},t.prototype.onTextInputFocus=function(n){var o=this;setTimeout(function(){o.hideContextMenu()},1)},t.prototype.onTextInputBlur=function(n){var o=this;setTimeout(function(){o.showContextMenuAtSelection()},1)},t.prototype.onLongTouch=function(n){n.source.type===v.MouseEventElementType.Document&&this.showContextMenuAtEmptySelection(n.modelPoint)},t.prototype.onKeyDown=function(n){},t.prototype.onShortcut=function(n){},t.prototype.getSelectedItems=function(){return this.selection.getSelectedItems(!0)},t.prototype.showContextMenuAtSelection=function(){if(!this.contextToolboxVisible){var n=this.getSelectedItems();n.length!==0&&this.showContextMenu(void 0,s.ModelUtils.createRectangle(n).createPosition())}},t.prototype.showContextMenuAtEmptySelection=function(n){this.contextToolboxVisible||this.getSelectedItems().length===0&&this.showContextMenu(void 0,n)},t.prototype.notifyDragStart=function(n){this.hideContextMenu()},t.prototype.notifyDragEnd=function(n){this.showContextMenuAtSelection()},t.prototype.notifySelectionChanged=function(n){this.isUpdateLocked()?this.registerOccurredEvent(1):this.raiseSelectionChanged()},t.prototype.raiseSelectionChanged=function(){this.getSelectedItems().length!==0?this.showContextMenuAtSelection():this.hideContextMenu()},t.prototype.onUpdateUnlocked=function(n){1&n&&this.raiseSelectionChanged()},t.prototype.notifyShowContextToolbox=function(n,o,r,a,c){this.contextToolboxVisible=!0,this.hideContextMenu()},t.prototype.notifyHideContextToolbox=function(){this.contextToolboxVisible=!1,this.showContextMenuAtSelection()},t}(p.ContextMenuHandler);h.ContextMenuTouchHandler=i},4426:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.ContextToolboxHandler=void 0;var u=d(6031),g=d(8675),v=d(2153),p=d(9279),s=function(){function i(){this.contextToolboxVisible=!1,this.onVisibilityChanged=new g.EventDispatcher}return i.prototype.onMouseDown=function(e){e.source.type!==u.MouseEventElementType.Undefined&&this.hideContextToolbox()},i.prototype.onMouseUp=function(e){e.source.type===u.MouseEventElementType.Undefined&&p.Browser.TouchUI||this.hideContextToolbox()},i.prototype.onFocus=function(e){},i.prototype.onBlur=function(e){},i.prototype.onKeyDown=function(e){e.keyCode===v.KeyCode.Esc&&this.hideContextToolbox()},i.prototype.onShortcut=function(e){this.hideContextToolbox()},i.prototype.showContextToolbox=function(e,t,n,o,r,a){this.onVisibilityChanged.raise1(function(c){return c.notifyShowContextToolbox(e,t,n,o,r)}),this.contextToolboxVisible=!0,this.contextToolboxCancelCallback=a},i.prototype.hideContextToolbox=function(e){this.contextToolboxVisible&&(this.onVisibilityChanged.raise1(function(t){return t.notifyHideContextToolbox()}),this.contextToolboxCancelCallback&&(e||this.contextToolboxCancelCallback(),this.contextToolboxCancelCallback=void 0),this.contextToolboxVisible=!1)},i}();h.ContextToolboxHandler=s},6031:function(j,h,d){var u,g=this&&this.__extends||(u=function(f,m){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,l){y.__proto__=l}||function(y,l){for(var P in l)l.hasOwnProperty(P)&&(y[P]=l[P])},u(f,m)},function(f,m){function y(){this.constructor=f}u(f,m),f.prototype=m===null?Object.create(m):(y.prototype=m.prototype,new y)});Object.defineProperty(h,"__esModule",{value:!0}),h.DiagramClipboardEvent=h.DiagramKeyboardEvent=h.DiagramContextMenuEvent=h.DiagramWheelEvent=h.DiagramMouseEvent=h.DiagramMouseEventBase=h.DiagramMouseEventTouch=h.DiagramFocusEvent=h.DiagramEvent=h.ResizeEventSource=h.MouseEventSource=h.MouseEventElementType=h.MouseButton=void 0;var v=d(2153);(function(f){f[f.None=0]="None",f[f.Left=1]="Left",f[f.Right=2]="Right",f[f.Middle=4]="Middle"})(h.MouseButton||(h.MouseButton={})),function(f){f[f.Undefined=0]="Undefined",f[f.Background=1]="Background",f[f.Document=2]="Document",f[f.Connector=3]="Connector",f[f.ConnectorPoint=4]="ConnectorPoint",f[f.ConnectorSide=5]="ConnectorSide",f[f.ConnectorOrthogonalSide=6]="ConnectorOrthogonalSide",f[f.ConnectorText=7]="ConnectorText",f[f.Shape=8]="Shape",f[f.ShapeResizeBox=9]="ShapeResizeBox",f[f.ShapeParameterBox=10]="ShapeParameterBox",f[f.SelectionRect=11]="SelectionRect",f[f.ShapeConnectionPoint=12]="ShapeConnectionPoint",f[f.ShapeExpandButton=13]="ShapeExpandButton"}(h.MouseEventElementType||(h.MouseEventElementType={}));var p=function(f,m,y){this.type=f,this.key=m,this.value=y};h.MouseEventSource=p,function(f){f[f.Undefined=0]="Undefined",f[f.ResizeBox_NW=1]="ResizeBox_NW",f[f.ResizeBox_NE=2]="ResizeBox_NE",f[f.ResizeBox_SE=3]="ResizeBox_SE",f[f.ResizeBox_SW=4]="ResizeBox_SW",f[f.ResizeBox_N=5]="ResizeBox_N",f[f.ResizeBox_E=6]="ResizeBox_E",f[f.ResizeBox_S=7]="ResizeBox_S",f[f.ResizeBox_W=8]="ResizeBox_W"}(h.ResizeEventSource||(h.ResizeEventSource={}));var s=function(f){this.modifiers=f};h.DiagramEvent=s;var i=function(f){function m(y){var l=f.call(this,v.ModifierKey.None)||this;return l.inputText=y,l}return g(m,f),m}(s);h.DiagramFocusEvent=i;var e=function(f,m){this.offsetPoint=f,this.modelPoint=m};h.DiagramMouseEventTouch=e;var t=function(f){function m(y,l,P,C){var I=f.call(this,y)||this;return I.offsetPoint=l,I.modelPoint=P,I.source=C,I}return g(m,f),m}(s);h.DiagramMouseEventBase=t;var n=function(f){function m(y,l,P,C,I,x,b){x===void 0&&(x=[]);var S=f.call(this,y,P,C,I)||this;return S.button=l,S.touches=x,S.isTouchMode=b,S.scrollX=0,S.scrollY=0,S}return g(m,f),m}(t);h.DiagramMouseEvent=n;var o=function(f){function m(y,l,P,C,I,x){var b=f.call(this,y,C,I,x)||this;return b.deltaX=l,b.deltaY=P,b}return g(m,f),m}(t);h.DiagramWheelEvent=o;var r=function(f){function m(y,l,P){var C=f.call(this,y)||this;return C.eventPoint=l,C.modelPoint=P,C}return g(m,f),m}(s);h.DiagramContextMenuEvent=r;var a=function(f){function m(y,l,P){var C=f.call(this,y)||this;return C.keyCode=l,C.inputText=P,C}return g(m,f),m.prototype.getShortcutCode=function(){return this.modifiers|this.keyCode},m}(s);h.DiagramKeyboardEvent=a;var c=function(f){function m(y){var l=f.call(this,v.ModifierKey.None)||this;return l.clipboardData=y,l}return g(m,f),m}(s);h.DiagramClipboardEvent=c},82:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.EventManager=void 0;var u=d(5689),g=d(8675),v=d(8376),p=d(9946),s=d(151),i=d(7733),e=d(7459),t=d(4426),n=d(9279),o=d(2153),r=function(){function a(c){this.onMouseOperation=new g.EventDispatcher,this.onTextInputOperation=new g.EventDispatcher,this.toolboxes=[],this.control=c,this.visualizersManager=g.EventUtils.isTouchMode()?new e.VisualizerTouchManager(c.selection,c.model,this,c.settings):new i.VisualizerManager(c.selection,c.model,this,c.settings),this.onMouseOperation.add(this.visualizersManager),this.contextMenuHandler=n.Browser.TouchUI?new s.ContextMenuTouchHandler(c.selection):new p.ContextMenuHandler,this.contextMenuHandler.onVisibilityChanged.add(c),this.onMouseOperation.add(this.contextMenuHandler),this.onTextInputOperation.add(this.contextMenuHandler),this.contextToolboxHandler=new t.ContextToolboxHandler,this.contextToolboxHandler.onVisibilityChanged.add(c),this.contextToolboxHandler.onVisibilityChanged.add(this.contextMenuHandler),this.mouseHandler=new u.MouseHandler(c.history,c.selection,c.model,this,c.settings.readOnly,c.view,this.visualizersManager,this.contextToolboxHandler,c.shapeDescriptionManager,c.settings,c.permissionsProvider),this.textInputHandler=new v.TextInputHandler(c),this.visualizersManager.onVisualizersUpdate.add(this.mouseHandler)}return Object.defineProperty(a.prototype,"onVisualizersUpdate",{get:function(){return this.visualizersManager.onVisualizersUpdate},enumerable:!1,configurable:!0}),a.prototype.registerToolbox=function(c){this.toolboxes.push(c)},a.prototype.cleanToolboxes=function(c){this.toolboxes.forEach(function(f){c.remove(f)}),this.toolboxes=[]},a.prototype.initialize=function(){this.visualizersManager.initialize(this.control.model),this.mouseHandler.initialize(this.control.model)},a.prototype.beginUpdate=function(c){this.contextMenuHandler.beginUpdate(),this.visualizersManager.beginUpdate()},a.prototype.endUpdate=function(){this.contextMenuHandler.endUpdate(),this.visualizersManager.endUpdate()},a.prototype.onMouseDown=function(c){this.mouseHandler.onMouseDown(c),this.contextMenuHandler.onMouseDown(c),this.visualizersManager.onMouseDown(c),this.contextToolboxHandler.onMouseDown(c)},a.prototype.onMouseMove=function(c){this.processDragging(c),this.mouseHandler.onMouseMove(c)},a.prototype.onMouseUp=function(c){this.contextToolboxHandler.onMouseUp(c),this.mouseHandler.onMouseUp(c),this.contextMenuHandler.onMouseUp(c),this.visualizersManager.onMouseUp(c),this.processDragging(c)},a.prototype.onMouseEnter=function(c){this.visualizersManager.onMouseEnter(c)},a.prototype.onMouseLeave=function(c){this.visualizersManager.onMouseLeave(c)},a.prototype.onDblClick=function(c){this.mouseHandler.onMouseDblClick(c),this.textInputHandler.onDblClick(c),this.control.apiController.notifyDblClick(c)},a.prototype.onClick=function(c){this.mouseHandler.onMouseClick(c),this.control.apiController.notifyClick(c)},a.prototype.onContextMenu=function(c){this.contextMenuHandler.onContextMenu(c)},a.prototype.onLongTouch=function(c){this.mouseHandler.onLongTouch(c),this.contextMenuHandler.onLongTouch(c)},a.prototype.onBlur=function(c){this.contextMenuHandler.onBlur(c),this.contextToolboxHandler.onBlur(c),this.visualizersManager.onBlur(c)},a.prototype.onFocus=function(c){this.contextMenuHandler.onFocus(c),this.contextToolboxHandler.onFocus(c),this.visualizersManager.onFocus(c)},a.prototype.onKeyDown=function(c){var f=c.getShortcutCode();this.onShortcut(f)?(this.visualizersManager.updateConnectionPoints(),this.contextMenuHandler.onShortcut(c),this.contextToolboxHandler.onShortcut(c),c.preventDefault=!0):this.isShortcutForFocusInput(f)&&(c.preventDefault=!0),this.contextMenuHandler.onKeyDown(c),this.contextToolboxHandler.onKeyDown(c),this.mouseHandler.onKeyDown(c)},a.prototype.onKeyUp=function(c){this.mouseHandler.onKeyUp(c)},a.prototype.onTextInputBlur=function(c){this.textInputHandler.onBlur(c),this.contextMenuHandler.onTextInputBlur(c)},a.prototype.onTextInputFocus=function(c){this.textInputHandler.onFocus(c),this.contextMenuHandler.onTextInputFocus(c)},a.prototype.onTextInputKeyDown=function(c){this.textInputHandler.onKeyDown(c)},a.prototype.onShortcut=function(c){return!!this.control.commandManager.processShortcut(c)||!!this.mouseHandler.onShortcut(c)||void 0},a.prototype.isShortcutForFocusInput=function(c){return c===o.KeyCode.Delete||c===(o.KeyCode.Delete|o.ModifierKey.Ctrl)||c===(o.KeyCode.Delete|o.ModifierKey.Meta)||c===o.KeyCode.Backspace||c===(o.KeyCode.Backspace|o.ModifierKey.Ctrl)||c===(o.KeyCode.Backspace|o.ModifierKey.Shift)||c===(o.KeyCode.Backspace|o.ModifierKey.Meta)||c===o.KeyCode.Home||c===o.KeyCode.End||c===o.KeyCode.Up||c===(o.KeyCode.Up|o.ModifierKey.Ctrl)||c===(o.KeyCode.Up|o.ModifierKey.Meta)||c===o.KeyCode.Down||c===(o.KeyCode.Down|o.ModifierKey.Ctrl)||c===(o.KeyCode.Down|o.ModifierKey.Meta)||c===o.KeyCode.Left||c===(o.KeyCode.Left|o.ModifierKey.Ctrl)||c===(o.KeyCode.Left|o.ModifierKey.Meta)||c===o.KeyCode.Right||c===(o.KeyCode.Right|o.ModifierKey.Ctrl)||c===(o.KeyCode.Right|o.ModifierKey.Meta)},a.prototype.onPaste=function(c){!this.textInputHandler.isTextInputActive()&&this.control.commandManager.processPaste(c.clipboardData)&&(this.visualizersManager.updateConnectionPoints(),c.preventDefault=!0)},a.prototype.onMouseWheel=function(c){this.mouseHandler.onWheel(c)&&(c.preventDefault=!0)},a.prototype.isFocused=function(){return this.control.isFocused()},a.prototype.processDragging=function(c){var f=this.getDraggingEvent();f&&this.draggingEvent!==f?(this.draggingEvent=f,this.mouseHandler.onDragStart(this.draggingEvent),this.control.captureFocus()):!f&&this.draggingEvent&&(delete this.draggingEvent,this.mouseHandler.onDragEnd(c))},a.prototype.getDraggingEvent=function(){return this.toolboxes.filter(function(c){return c.draggingObject}).map(function(c){return c.draggingObject.evt})[0]},a.prototype.onDocumentDragStart=function(c){this.control.beginUpdate(),this.control.captureFocus(),this.onMouseOperation.raise("notifyDragStart",c)},a.prototype.onDocumentDragEnd=function(c){this.onMouseOperation.raise("notifyDragEnd",c),this.control.endUpdate(),this.control.barManager.updateItemsState()},a.prototype.onDocumentDragScrollStart=function(){this.onMouseOperation.raise1(function(c){return c.notifyDragScrollStart()})},a.prototype.onDocumentDragScrollEnd=function(){this.onMouseOperation.raise1(function(c){return c.notifyDragScrollEnd()})},a.prototype.onDocumentClick=function(c){this.control.beginUpdate(),this.control.endUpdate(),this.control.barManager.updateItemsState()},a.prototype.raiseTextInputStart=function(c,f,m,y){this.onTextInputOperation.raise("notifyTextInputStart",c,f,m,y)},a.prototype.raiseTextInputEnd=function(c,f){this.onTextInputOperation.raise("notifyTextInputEnd",c,f)},a.prototype.raiseTextInputPermissionsCheck=function(c,f){this.onTextInputOperation.raise("notifyTextInputPermissionsCheck",c,f)},a.prototype.canFinishTextEditing=function(){return this.textInputHandler.canFinishTextEditing()},a}();h.EventManager=r},5689:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.MouseHandler=void 0;var u=d(3250),g=d(6031),v=d(8900),p=d(4867),s=d(8032),i=d(7286),e=d(8502),t=d(2153),n=d(8675),o=function(){function r(a,c,f,m,y,l,P,C,I,x,b){this.history=a,this.selection=c,this.model=f,this.eventManager=m,this.readOnly=y,this.view=l,this.visualizerManager=P,this.contextToolboxHandler=C,this.shapeDescriptionManager=I,this.settings=x,this.permissionsProvider=b,this.finishStateLock=0,this.initialize(f),this.selection.onChanged.add(this)}return r.prototype.initialize=function(a){this.model=a,this.allowMultipleSelection=!0,this.allowCopyDiagramItems=!0,this.allowSnapToCellOnDragDiagramItem=!0,this.allowSnapToCellOnDragPoint=!0,this.allowSnapToCellOnResizeShape=!0,this.allowFixedDrag=!0,this.allowZoomOnWheel=!0,this.allowScrollPage=!0,this.shouldScrollPage=!1,this.copyDiagramItemsByCtrlAndShift=!1,this.startScrollingPageByCtrl=!1,this.initializeDefaultState()},r.prototype.initializeDefaultState=function(){this.defaultState=this.readOnly?n.EventUtils.isTouchMode()?new s.MouseHandlerDefaultReadOnlyTouchState(this,this.history,this.selection,this.model,this.view,this.visualizerManager,this.shapeDescriptionManager,this.settings):new i.MouseHandlerDefaultReadOnlyState(this,this.history,this.selection,this.model,this.view,this.visualizerManager,this.shapeDescriptionManager,this.settings):n.EventUtils.isTouchMode()?new e.MouseHandlerDefaultTouchState(this,this.history,this.selection,this.model,this.view,this.visualizerManager,this.shapeDescriptionManager,this.settings):new u.MouseHandlerDefaultState(this,this.history,this.selection,this.model,this.view,this.visualizerManager,this.shapeDescriptionManager,this.settings),this.switchToDefaultState()},r.prototype.onMouseDown=function(a){this.mouseDownEvent=a,this.state.onMouseDown(a)},r.prototype.onMouseMove=function(a){this.state.onMouseMove(a)},r.prototype.onMouseUp=function(a){this.state.onMouseUp(a)},r.prototype.onMouseDblClick=function(a){this.state.onMouseDblClick(a)},r.prototype.onMouseClick=function(a){this.state.onMouseClick(a)},r.prototype.onLongTouch=function(a){if(a.touches&&!(a.touches.length>1)){var c=a.source.key;c===void 0?this.selection.clear():this.selection.hasKey(c)?this.selection.remove(c):this.selection.add(c)}},r.prototype.onShortcut=function(a){return this.state.onShortcut(a)},r.prototype.onWheel=function(a){return this.state.onMouseWheel(a)},r.prototype.onDragStart=function(a){this.state.onDragStart(a)},r.prototype.onDragEnd=function(a){this.state.onDragEnd(a)},r.prototype.onKeyDown=function(a){this.state.onKeyDown(a)},r.prototype.onKeyUp=function(a){this.state.onKeyUp(a)},r.prototype.showContextToolbox=function(a,c,f,m,y,l){this.contextToolboxHandler.showContextToolbox(a,c,f,m,y,l)},r.prototype.hideContextToolbox=function(a){this.contextToolboxHandler.hideContextToolbox(a)},r.prototype.canScrollPage=function(a){return this.startScrollingPageByCtrl?!!this.hasCtrlModifier(a.modifiers)&&(!this.copyDiagramItemsByCtrlAndShift||a.source.type!==g.MouseEventElementType.Shape&&a.source.type!==g.MouseEventElementType.Connector):this.allowScrollPage&&this.shouldScrollPage},r.prototype.canMultipleSelection=function(a){return this.allowMultipleSelection&&this.hasCtrlOrShiftModifier(a.modifiers)},r.prototype.canCopySelectedItems=function(a){return!!this.allowCopyDiagramItems&&(this.copyDiagramItemsByCtrlAndShift?this.hasCtrlAndShiftModifier(a.modifiers):this.hasAltModifier(a.modifiers))},r.prototype.canCalculateFixedPosition=function(a){return!(!this.allowFixedDrag||!this.hasShiftModifier(a.modifiers))&&(!this.copyDiagramItemsByCtrlAndShift||!this.hasCtrlModifier(a.modifiers))},r.prototype.canStartZoomOnWheel=function(a){return this.allowZoomOnWheel&&this.hasCtrlModifier(a.modifiers)},r.prototype.canFinishZoomOnWheel=function(a){return this.allowZoomOnWheel&&!this.hasCtrlModifier(a.modifiers)},r.prototype.onStartScrollPageByKeyboard=function(a){this.canStartScrollingPageByKeyboard(a)&&(this.raiseDragScrollStart(),this.shouldScrollPage=!0)},r.prototype.onFinishScrollPageByKeyboard=function(a){this.canEndScrollingPageByKeyboard(a)&&this.finishScrollingPage()},r.prototype.onFinishScrollPageByMouse=function(a){this.canEndScrollingPage(a)&&this.finishScrollingPage()},r.prototype.finishScrollingPage=function(){this.shouldScrollPage=!1,this.raiseDragScrollEnd(),this.switchToDefaultState()},r.prototype.hasCtrlOrShiftModifier=function(a){return this.hasCtrlModifier(a)||this.hasShiftModifier(a)},r.prototype.hasCtrlAndShiftModifier=function(a){return this.hasCtrlModifier(a)&&this.hasShiftModifier(a)},r.prototype.hasCtrlModifier=function(a){return(a&t.ModifierKey.Ctrl)>0},r.prototype.hasAltModifier=function(a){return(a&t.ModifierKey.Alt)>0},r.prototype.hasShiftModifier=function(a){return(a&t.ModifierKey.Shift)>0},r.prototype.canStartScrollingPageByKeyboard=function(a){return!this.startScrollingPageByCtrl&&!this.shouldScrollPage&&a.keyCode===t.KeyCode.Space},r.prototype.canEndScrollingPageByKeyboard=function(a){return!this.startScrollingPageByCtrl&&a.keyCode===t.KeyCode.Space},r.prototype.canEndScrollingPage=function(a){return!this.startScrollingPageByCtrl||this.hasCtrlModifier(a.modifiers)},r.prototype.getSnappedPointOnDragDiagramItem=function(a,c,f,m,y){var l=this.getSnapToCellOnDragDiagramItem(a);return new v.Point(this.getSnappedPos(this.getFixedXPosition(a,c,f,y),!0,l),this.getSnappedPos(this.getFixedYPosition(a,c,m,y),!1,l))},r.prototype.getSnappedPointOnDragPoint=function(a,c,f){var m=this.getSnapToCellOnDragPoint(a),y=this.getSnappedPos(c.x,!0,m),l=this.getSnappedPos(c.y,!1,m);return f===void 0||Math.pow(c.x-y,2)+Math.pow(c.y-l,2)<Math.pow(c.x-f.x,2)+Math.pow(c.y-f.y,2)?new v.Point(y,l):f},r.prototype.getSnappedOffsetOnDragPoint=function(a,c){var f=this.getSnapToCellOnDragPoint(a);return new v.Point(this.getSnappedPos(a.modelPoint.x-c.x,!0,f),this.getSnappedPos(a.modelPoint.y-c.y,!1,f))},r.prototype.lockAspectRatioOnShapeResize=function(a){return this.hasShiftModifier(a.modifiers)},r.prototype.getSnappedPositionOnResizeShape=function(a,c,f){return this.getSnapToCellOnResizeShape(a)?p.ModelUtils.getSnappedPos(this.model,this.settings.gridSize,c,f):c},r.prototype.getSnappedPos=function(a,c,f){return f?p.ModelUtils.getSnappedPos(this.model,this.settings.gridSize,a,c):a},r.prototype.getFixedXPosition=function(a,c,f,m){return f?c.x:c.x+a.modelPoint.x-m.x},r.prototype.getFixedYPosition=function(a,c,f,m){return f?c.y:c.y+a.modelPoint.y-m.y},r.prototype.getSnapToCellOnDragDiagramItem=function(a){return this.allowSnapToCellOnDragDiagramItem&&this.settings.snapToGrid&&!this.hasCtrlModifier(a.modifiers)},r.prototype.getSnapToCellOnDragPoint=function(a){return this.allowSnapToCellOnDragPoint&&this.settings.snapToGrid&&!this.hasCtrlModifier(a.modifiers)},r.prototype.getSnapToCellOnResizeShape=function(a){return this.allowSnapToCellOnResizeShape&&this.settings.snapToGrid&&!this.hasCtrlModifier(a.modifiers)},r.prototype.tryUpdateModelSize=function(a){this.lockPermissions(),p.ModelUtils.tryUpdateModelRectangle(this.history,a),this.unlockPermissions()},r.prototype.canAddDiagramItemToSelection=function(a){return a.source.key&&(a.button===g.MouseButton.Left||a.button===g.MouseButton.Right)},r.prototype.addDiagramItemToSelection=function(a){this.pressedDiagramItemKey=a.source.key,this.pressedDiagramItemInSelection=this.selection.hasKey(this.pressedDiagramItemKey),this.canMultipleSelection(a)?this.selection.add(a.source.key):this.changeSingleSelection(a.source.key)},r.prototype.canRemoveDiagramItemToSelection=function(a){return this.pressedDiagramItemKey&&a.source.key&&this.pressedDiagramItemKey===a.source.key&&(a.button===g.MouseButton.Left||a.button===g.MouseButton.Right)},r.prototype.removeDiagramItemFromSelection=function(a,c){this.pressedDiagramItemInSelection&&this.selection.getKeys().length>1&&a===g.MouseButton.Left&&this.selection.remove(c)},r.prototype.changeSingleSelection=function(a){this.selection.hasKey(a)||this.selection.set([a])},r.prototype.notifySelectionChanged=function(a){this.pressedDiagramItemKey&&!this.selection.hasKey(this.pressedDiagramItemKey)&&(this.pressedDiagramItemKey=void 0,this.pressedDiagramItemInSelection=!1)},r.prototype.raiseDragStart=function(a){this.eventManager.onDocumentDragStart(a)},r.prototype.raiseDragEnd=function(a){this.eventManager.onDocumentDragEnd(a)},r.prototype.raiseDragScrollStart=function(){this.eventManager.onDocumentDragScrollStart()},r.prototype.raiseDragScrollEnd=function(){this.eventManager.onDocumentDragScrollEnd()},r.prototype.raiseClick=function(a){this.eventManager.onDocumentClick(a)},r.prototype.beginStorePermissions=function(){this.permissionsProvider.beginStorePermissions()},r.prototype.endStorePermissions=function(){this.permissionsProvider.endStorePermissions()},r.prototype.isStoredPermissionsGranted=function(){return this.permissionsProvider.isStoredPermissionsGranted()},r.prototype.lockPermissions=function(){this.permissionsProvider.lockPermissions()},r.prototype.unlockPermissions=function(){this.permissionsProvider.unlockPermissions()},r.prototype.canPerformChangeConnection=function(a,c){var f=!0;return a?f=this.permissionsProvider.canChangeConnection(a,c.item,c.oldItem,c.position,c.connectionPointIndex):c.item&&(f=this.permissionsProvider.canChangeConnection(void 0,c.item,c.oldItem,c.position,c.connectionPointIndex)),f},r.prototype.canPerformChangeConnectionOnUpdateUI=function(a,c){this.permissionsProvider.beginUpdateUI();var f=this.canPerformChangeConnection(a,c);return this.permissionsProvider.endUpdateUI(),f},r.prototype.canFinishTextEditing=function(){return this.eventManager.canFinishTextEditing()},r.prototype.restartState=function(){this.state&&!this.finishStateLock&&(this.finishStateLock++,this.state.finish(),this.finishStateLock--),this.state.start()},r.prototype.switchToDefaultState=function(){this.switchState(this.defaultState)},r.prototype.switchState=function(a){this.newState=a,this.state&&!this.finishStateLock&&(this.finishStateLock++,this.state.finish(),this.finishStateLock--),this.newState&&(this.state=this.newState,this.state.start(),this.newState=void 0)},r.prototype.addInteractingItem=function(a,c){this.permissionsProvider.addInteractingItem(a,c)},r.prototype.clearInteractingItems=function(){this.permissionsProvider.clearInteractingItems()},r.prototype.notifyReadOnlyChanged=function(a){this.readOnly=a,this.initializeDefaultState()},r.prototype.notifySelectionRectShow=function(a){},r.prototype.notifySelectionRectHide=function(){},r.prototype.notifyResizeInfoShow=function(a,c){},r.prototype.notifyResizeInfoHide=function(){},r.prototype.notifyConnectionPointsShow=function(a,c,f,m){this.state.onConnectionPointsShow(a,c)},r.prototype.notifyConnectionPointsHide=function(){},r.prototype.notifyConnectionTargetShow=function(a,c){this.state.onConnectionTargetShow(a,c)},r.prototype.notifyConnectionTargetHide=function(){},r.prototype.notifyContainerTargetShow=function(a,c){},r.prototype.notifyContainerTargetHide=function(){},r.prototype.notifyExtensionLinesShow=function(a){},r.prototype.notifyExtensionLinesHide=function(){},r}();h.MouseHandler=o},5627:function(j,h,d){var u,g=this&&this.__extends||(u=function(f,m){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,l){y.__proto__=l}||function(y,l){for(var P in l)l.hasOwnProperty(P)&&(y[P]=l[P])},u(f,m)},function(f,m){function y(){this.constructor=f}u(f,m),f.prototype=m===null?Object.create(m):(y.prototype=m.prototype,new y)});Object.defineProperty(h,"__esModule",{value:!0}),h.MouseHandlerCreateConnectorState=void 0;var v=d(7959),p=d(3477),s=d(9603),i=d(3742),e=d(7060),t=d(4297),n=d(4145),o=d(4867),r=d(8930),a=d(9143),c=function(f){function m(y,l,P,C,I,x,b){var S=f.call(this,y,l,P,C)||this;return S.shapeDescriptionManager=I,S.selection=x,S.connectionPointIndex=b,S}return g(m,f),m.prototype.onMouseDown=function(y){this.connectionPointIndex===void 0&&(this.connectionPointIndex=parseInt(y.source.value)),this.connectedItem=this.model.findItem(y.source.key),this.pointIndex=1,this.pointPosition=v.ConnectorPosition.End,f.prototype.onMouseDown.call(this,y)},m.prototype.onMouseUp=function(y){this.connector&&!this.connector.endItem&&this.createNewShapeAtConnectorEnd(y),f.prototype.onMouseUp.call(this,y)},m.prototype.onApplyChanges=function(y){var l=this.getSnappedPoint(y,y.modelPoint);if(this.connector)f.prototype.onApplyChanges.call(this,y);else{var P=new s.AddConnectorHistoryItem([this.connectedItem.getConnectionPointPosition(this.connectionPointIndex,l),l]);this.history.addAndRedo(P),this.connector=this.model.findConnector(P.connectorKey),this.handler.addInteractingItem(this.connector),this.history.addAndRedo(new p.AddConnectionHistoryItem(this.connector,this.connectedItem,this.connectionPointIndex,v.ConnectorPosition.Begin)),o.ModelUtils.updateNewConnectorProperties(this.history,this.selection,this.connector.key)}},m.prototype.checkStoredPermissionsOnFinish=function(){this.connector&&this.connector.endItem&&f.prototype.checkStoredPermissionsOnFinish.call(this)},m.prototype.onFinishWithChanges=function(){f.prototype.onFinishWithChanges.call(this),this.history.addAndRedo(new t.SetSelectionHistoryItem(this.selection,[this.connector.key]))},m.prototype.createNewShapeAtConnectorEnd=function(y){var l=this,P=this.connector&&this.connector.beginItem;if(P)if(!this.connector||this.handler.canPerformChangeConnection(this.connector,{position:v.ConnectorPosition.End,connectionPointIndex:-1})){var C=this.getNewShapeSide(this.connector),I=this.getSnappedPoint(y,y.modelPoint),x=this.shapeDescriptionManager.getCategoryByDescription(P.description);this.handler.showContextToolbox(I,function(b){var S=b.clone();S.position=I.clone();var w=l.getNewShapePosition(S,C);return l.handler.getSnappedPointOnDragPoint(y,w)},C,x,function(b){if(b){l.handler.beginStorePermissions(),l.history.beginTransaction();var S=new n.AddShapeHistoryItem(l.shapeDescriptionManager.get(b),I);l.history.addAndRedo(S);var w=l.model.findShape(S.shapeKey),T=l.targetItem&&l.model.findNearestContainer(l.targetItem.key);T&&o.ModelUtils.insertToContainer(l.history,l.model,w,T);var _=l.getNewShapePosition(w,C);o.ModelUtils.setShapePosition(l.history,l.model,w,l.getSnappedPoint(y,_)),o.ModelUtils.updateNewShapeProperties(l.history,l.selection,w.key),l.history.addAndRedo(new p.AddConnectionHistoryItem(l.connector,w,w.getConnectionPointIndexForSide(C),v.ConnectorPosition.End)),T&&o.ModelUtils.updateConnectorContainer(l.history,l.model,l.connector),o.ModelUtils.updateShapeAttachedConnectors(l.history,l.model,w),l.handler.isStoredPermissionsGranted()?(l.handler.tryUpdateModelSize(),l.history.addAndRedo(new t.SetSelectionHistoryItem(l.selection,[w.key]))):(l.handler.lockPermissions(),l.history.undoTransaction(),l.handler.unlockPermissions(),l.checkNewConnectorPermissions()),l.history.endTransaction(),l.handler.endStorePermissions(),l.handler.hideContextToolbox(!0)}},function(){l.checkNewConnectorPermissions()})}else this.cancelChanges()},m.prototype.checkNewConnectorPermissions=function(){this.connector&&!this.handler.canPerformChangeConnection(this.connector,{position:v.ConnectorPosition.End,connectionPointIndex:-1})&&(this.handler.lockPermissions(),this.history.beginTransaction(),this.history.addAndRedo(new t.SetSelectionHistoryItem(this.selection,[])),this.connector.beginItem&&this.history.addAndRedo(new r.DeleteConnectionHistoryItem(this.connector,v.ConnectorPosition.Begin)),this.connector.endItem&&this.history.addAndRedo(new r.DeleteConnectionHistoryItem(this.connector,v.ConnectorPosition.End)),this.history.addAndRedo(new a.DeleteConnectorHistoryItem(this.connector.key)),this.history.endTransaction(),this.handler.unlockPermissions())},m.prototype.getNewShapePosition=function(y,l){switch(l){case i.ConnectionPointSide.North:return y.position.clone().offset(-y.size.width/2,0);case i.ConnectionPointSide.South:return y.position.clone().offset(-y.size.width/2,-y.size.height);case i.ConnectionPointSide.East:return y.position.clone().offset(-y.size.width,-y.size.height/2);case i.ConnectionPointSide.West:return y.position.clone().offset(0,-y.size.height/2)}},m.prototype.getNewShapeSide=function(y){var l=y.getRenderPoints();return m.getNewShapeSideByConnectorPoints(l[l.length-1],l[l.length-2])},m.prototype.getSourceItem=function(){return this.connectedItem},m.getNewShapeSideByConnectorPoints=function(y,l){return y.x===l.x?y.y>l.y?i.ConnectionPointSide.North:i.ConnectionPointSide.South:y.x>l.x?y.y===l.y?i.ConnectionPointSide.West:y.y>l.y?Math.abs(y.x-l.x)>Math.abs(y.y-l.y)?i.ConnectionPointSide.West:i.ConnectionPointSide.North:Math.abs(y.x-l.x)>Math.abs(y.y-l.y)?i.ConnectionPointSide.West:i.ConnectionPointSide.South:y.y===l.y?i.ConnectionPointSide.East:y.y>l.y?Math.abs(y.x-l.x)>Math.abs(y.y-l.y)?i.ConnectionPointSide.East:i.ConnectionPointSide.North:Math.abs(y.x-l.x)>Math.abs(y.y-l.y)?i.ConnectionPointSide.East:i.ConnectionPointSide.South},m}(e.MouseHandlerMoveConnectorPointStateBase);h.MouseHandlerCreateConnectorState=c},7286:function(j,h,d){var u,g=this&&this.__extends||(u=function(p,s){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t])},u(p,s)},function(p,s){function i(){this.constructor=p}u(p,s),p.prototype=s===null?Object.create(s):(i.prototype=s.prototype,new i)});Object.defineProperty(h,"__esModule",{value:!0}),h.MouseHandlerDefaultReadOnlyState=void 0;var v=function(p){function s(){return p!==null&&p.apply(this,arguments)||this}return g(s,p),s.prototype.canDragObjectOnMouseDown=function(i){return!1},s.prototype.canExpandContainerOnMouseDown=function(i){return!1},s.prototype.canClearSelectionOnMouseDown=function(){return!1},s.prototype.canSelectOnMouseUp=function(i){return!0},s.prototype.canClearSelectionOnMouseUp=function(){return!0},s.prototype.updateConnectionsOnMouseMove=function(i){},s}(d(8213).MouseHandlerDefaultStateBase);h.MouseHandlerDefaultReadOnlyState=v},8032:function(j,h,d){var u,g=this&&this.__extends||(u=function(p,s){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t])},u(p,s)},function(p,s){function i(){this.constructor=p}u(p,s),p.prototype=s===null?Object.create(s):(i.prototype=s.prototype,new i)});Object.defineProperty(h,"__esModule",{value:!0}),h.MouseHandlerDefaultReadOnlyTouchState=void 0;var v=function(p){function s(){return p!==null&&p.apply(this,arguments)||this}return g(s,p),s.prototype.canDragObjectOnMouseDown=function(i){return!1},s.prototype.canExpandContainerOnMouseDown=function(i){return!1},s.prototype.canClearSelectionOnMouseDown=function(){return!0},s.prototype.canSelectOnMouseUp=function(i){return!this.inSelection(i)},s.prototype.canClearSelectionOnMouseUp=function(){return!1},s}(d(7286).MouseHandlerDefaultReadOnlyState);h.MouseHandlerDefaultReadOnlyTouchState=v},3250:function(j,h,d){var u,g=this&&this.__extends||(u=function(l,P){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,I){C.__proto__=I}||function(C,I){for(var x in I)I.hasOwnProperty(x)&&(C[x]=I[x])},u(l,P)},function(l,P){function C(){this.constructor=l}u(l,P),l.prototype=P===null?Object.create(P):(C.prototype=P.prototype,new C)});Object.defineProperty(h,"__esModule",{value:!0}),h.MouseHandlerDefaultState=void 0;var v=d(6031),p=d(4402),s=d(5609),i=d(481),e=d(4908),t=d(5627),n=d(5209),o=d(6918),r=d(5391),a=d(8213),c=d(9979),f=d(7959),m=d(5168),y=function(l){function P(){return l!==null&&l.apply(this,arguments)||this}return g(P,l),P.prototype.finish=function(){this.visualizerManager.resetConnectionPoints(),l.prototype.finish.call(this)},P.prototype.onMouseDownCore=function(C){this.handler.canScrollPage(C)?this.startScrolling(C):C.button===v.MouseButton.Left&&C.source.type===v.MouseEventElementType.ConnectorText?(this.handler.changeSingleSelection(C.source.key),this.handler.switchState(new r.MouseHandlerMoveConnectorTextState(this.handler,this.history,this.model))):C.button===v.MouseButton.Left&&C.source.type===v.MouseEventElementType.ShapeResizeBox?this.handler.switchState(new s.MouseHandlerResizeShapeState(this.handler,this.history,this.model,this.selection,this.visualizerManager,this.settings)):C.button===v.MouseButton.Left&&C.source.type===v.MouseEventElementType.ShapeParameterBox?this.handler.switchState(new e.MouseHandlerDragParameterPointState(this.handler,this.history,this.model)):C.button===v.MouseButton.Left&&C.source.type===v.MouseEventElementType.ConnectorPoint?this.handler.switchState(new p.MouseHandlerMoveConnectorPointState(this.handler,this.history,this.model,this.visualizerManager)):C.button===v.MouseButton.Left&&C.source.type===v.MouseEventElementType.ConnectorSide?this.handler.switchState(new i.MouseHandlerMoveConnectorSideState(this.handler,this.history,this.model)):C.button===v.MouseButton.Left&&C.source.type===v.MouseEventElementType.ConnectorOrthogonalSide?this.handler.switchState(new n.MouseHandlerMoveConnectorOrthogonalSideState(this.handler,this.history,this.model)):C.button===v.MouseButton.Left&&C.source.type===v.MouseEventElementType.ShapeConnectionPoint?this.handler.switchState(new t.MouseHandlerCreateConnectorState(this.handler,this.history,this.model,this.visualizerManager,this.shapeDescriptionManager,this.selection)):l.prototype.onMouseDownCore.call(this,C)},P.prototype.onDragDiagramItemOnMouseDown=function(C){this.handler.canAddDiagramItemToSelection(C)?C.source.type===v.MouseEventElementType.Shape?this.handler.switchState(new c.MouseHandlerMoveShapeState(this.handler,this.history,this.model,this.selection,this.visualizerManager)):C.source.type===v.MouseEventElementType.Connector&&this.handler.switchState(new m.MouseHandlerMoveConnectorState(this.handler,this.history,this.model,this.selection,this.visualizerManager)):l.prototype.onDragDiagramItemOnMouseDown.call(this,C)},P.prototype.onDragStart=function(C){this.handler.switchState(new o.MouseHandlerBeforeToolboxDraggingState(this.handler,this.history,this.model,this.selection,this.visualizerManager,this.shapeDescriptionManager)),this.handler.state.onDragStart(C)},P.prototype.onMouseMoveCore=function(C){this.updateConnectionsOnMouseMove(C),l.prototype.onMouseMoveCore.call(this,C)},P.prototype.onMouseUp=function(C){this.handler.canRemoveDiagramItemToSelection(C)?this.handler.removeDiagramItemFromSelection(C.button,C.source.key):l.prototype.onMouseUp.call(this,C)},P.prototype.updateConnectionsOnMouseMove=function(C){var I=this.model.findItem(C.source.key);this.visualizerManager.updateConnections(I,C.source.type,C.source.value)},P.prototype.canDragObjectOnMouseDown=function(C){return!0},P.prototype.canExpandContainerOnMouseDown=function(C){return!0},P.prototype.canClearSelectionOnMouseDown=function(){return!1},P.prototype.canSelectOnMouseUp=function(C){return!1},P.prototype.canClearSelectionOnMouseUp=function(){return!0},P.prototype.onConnectionPointsShow=function(C,I){var x=this,b=this.model.findShape(C);b&&I.forEach(function(S,w){S.allowed=x.handler.canPerformChangeConnectionOnUpdateUI(void 0,{item:b,position:f.ConnectorPosition.Begin,connectionPointIndex:w})})},P}(a.MouseHandlerDefaultStateBase);h.MouseHandlerDefaultState=y},8213:function(j,h,d){var u,g=this&&this.__extends||(u=function(a,c){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,m){f.__proto__=m}||function(f,m){for(var y in m)m.hasOwnProperty(y)&&(f[y]=m[y])},u(a,c)},function(a,c){function f(){this.constructor=a}u(a,c),a.prototype=c===null?Object.create(c):(f.prototype=c.prototype,new f)});Object.defineProperty(h,"__esModule",{value:!0}),h.MouseHandlerDefaultStateBase=void 0;var v=d(5434),p=d(6031),s=d(5752),i=d(4869),e=d(7189),t=d(9582),n=d(9291),o=d(8461),r=function(a){function c(f,m,y,l,P,C,I,x){var b=a.call(this,f)||this;return b.history=m,b.selection=y,b.model=l,b.view=P,b.visualizerManager=C,b.shapeDescriptionManager=I,b.settings=x,b}return g(c,a),c.prototype.onKeyDown=function(f){this.handler.onStartScrollPageByKeyboard(f)},c.prototype.onKeyUp=function(f){this.handler.onFinishScrollPageByKeyboard(f)},c.prototype.onMouseDown=function(f){this.handler.canFinishTextEditing()&&(this.onMouseDownCore(f),this.handler.state!==this&&this.handler.state.onMouseDown(f))},c.prototype.onMouseDownCore=function(f){this.handler.canScrollPage(f)?this.startScrolling(f):this.hasDiagramItem(f)&&this.canDragObjectOnMouseDown(f.source.key)?this.onDragDiagramItemOnMouseDown(f):f.button===p.MouseButton.Left&&f.source.type===p.MouseEventElementType.ShapeExpandButton&&this.canExpandContainerOnMouseDown(f.source.key)?this.onShapeExpandBtnMouseDown(f):(!this.hasDiagramItem(f)&&this.canClearSelectionOnMouseDown()&&this.clearSelection(),this.startPoint=f.modelPoint)},c.prototype.onDragDiagramItemOnMouseDown=function(f){this.replaceSelection(f)},c.prototype.onMouseMove=function(f){this.onMouseMoveCore(f),this.handler.state!==this&&(this.handler.state.onMouseDown(this.handler.mouseDownEvent),this.handler.state.onMouseMove(f))},c.prototype.onMouseMoveCore=function(f){this.startPoint&&(Math.abs(this.startPoint.x-f.modelPoint.x)>c.startLimit||Math.abs(this.startPoint.y-f.modelPoint.y)>c.startLimit)&&(this.processOnMouseMoveAfterLimit(f),this.startPoint=void 0)},c.prototype.processOnMouseMoveAfterLimit=function(f){f.isTouchMode?f.touches.length>1?this.startZooming(f):this.startScrolling(f):this.startSelection(f)},c.prototype.onMouseUp=function(f){this.onMouseUpCore(f),this.handler.state!==this&&this.handler.state.onMouseUp(f)},c.prototype.onMouseUpCore=function(f){f.source.type===p.MouseEventElementType.Shape&&this.canSelectOnMouseUp(f.source.key)||f.source.type===p.MouseEventElementType.Connector&&this.canSelectOnMouseUp(f.source.key)||f.source.type===p.MouseEventElementType.ShapeExpandButton&&this.canSelectOnMouseUp(f.source.key)?this.replaceSelection(f):this.startPoint&&this.canClearSelectionOnMouseUp()&&this.clearSelection(),this.startPoint=void 0},c.prototype.onMouseWheel=function(f){return!!this.handler.canStartZoomOnWheel(f)&&(this.handler.switchState(new e.MouseHandlerZoomOnWheelState(this.handler,this.settings,this.view)),this.handler.state.onMouseWheel(f),!0)},c.prototype.onLongTouch=function(f){this.replaceMultipleSelection(f.source.key)},c.prototype.finish=function(){this.startPoint=void 0},c.prototype.startSelection=function(f){f.button===p.MouseButton.Left&&this.handler.switchState(new i.MouseHandlerSelectionState(this.handler,this.selection,this.visualizerManager))},c.prototype.startScrolling=function(f){f.button===p.MouseButton.Left&&(this.handler.raiseDragScrollStart(),this.handler.switchState(new t.MouseHandlerScrollingState(this.handler,this.view,this.selection)))},c.prototype.startZooming=function(f){this.handler.switchState(new o.MouseHandlerZoomOnPinchState(this.handler,this.selection,this.settings,this.view))},c.prototype.inSelection=function(f){return this.selection.hasKey(f)},c.prototype.hasDiagramItem=function(f){return f.source.type===p.MouseEventElementType.Shape||f.source.type===p.MouseEventElementType.Connector},c.prototype.onShapeExpandBtnMouseDown=function(f){this.handler.addDiagramItemToSelection(f),this.handler.switchState(new s.MouseHandlerToggleShapeExpandedState(this.handler,this.history,this.model,this.selection))},c.prototype.replaceSelection=function(f){this.handler.canMultipleSelection(f)?this.replaceMultipleSelection(f.source.key):this.handler.changeSingleSelection(f.source.key)},c.prototype.replaceMultipleSelection=function(f){this.selection.hasKey(f)?this.selection.remove(f):this.selection.add(f)},c.prototype.clearSelection=function(){this.selection.set([])},c.startLimit=n.UnitConverter.pixelsToTwips(1),c}(v.MouseHandlerStateBase);h.MouseHandlerDefaultStateBase=r},8502:function(j,h,d){var u,g=this&&this.__extends||(u=function(p,s){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t])},u(p,s)},function(p,s){function i(){this.constructor=p}u(p,s),p.prototype=s===null?Object.create(s):(i.prototype=s.prototype,new i)});Object.defineProperty(h,"__esModule",{value:!0}),h.MouseHandlerDefaultTouchState=void 0;var v=function(p){function s(){return p!==null&&p.apply(this,arguments)||this}return g(s,p),s.prototype.updateConnectionsOnMouseMove=function(i){},s.prototype.canDragObjectOnMouseDown=function(i){return this.inSelection(i)},s.prototype.canExpandContainerOnMouseDown=function(i){return!0},s.prototype.canClearSelectionOnMouseDown=function(){return!0},s.prototype.canSelectOnMouseUp=function(i){return!this.inSelection(i)},s.prototype.canClearSelectionOnMouseUp=function(){return!1},s}(d(3250).MouseHandlerDefaultState);h.MouseHandlerDefaultTouchState=v},1717:function(j,h,d){var u,g=this&&this.__extends||(u=function(o,r){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var f in c)c.hasOwnProperty(f)&&(a[f]=c[f])},u(o,r)},function(o,r){function a(){this.constructor=o}u(o,r),o.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)});Object.defineProperty(h,"__esModule",{value:!0}),h.MouseHandlerDragDiagramItemStateBase=h.DraggingConnector=void 0;var v=d(4867),p=d(6879),s=d(6031),i=d(8816),e=d(4742),t=function(o){this.connector=o,this.startPoints=o.points.map(function(r){return r.clone()}),this.startRenderContext=o.tryCreateRenderPointsContext()};h.DraggingConnector=t;var n=function(o){function r(a,c,f,m,y){var l=o.call(this,a,c)||this;return l.model=f,l.selection=m,l.visualizerManager=y,l.startScrollLeft=0,l.startScrollTop=0,l}return g(r,o),r.prototype.finish=function(){this.visualizerManager.resetExtensionLines(),this.visualizerManager.resetContainerTarget(),this.visualizerManager.resetConnectionTarget(),this.visualizerManager.resetConnectionPoints(),o.prototype.finish.call(this)},r.prototype.onMouseDown=function(a){this.handler.addDiagramItemToSelection(a),this.shouldClone=this.handler.canCopySelectedItems(a),this.startPoint=a.modelPoint,this.initDrag(),this.lockInitDrag=!1,o.prototype.onMouseDown.call(this,a)},r.prototype.onMouseMove=function(a){if(this.mouseMoveEvent=a,a.button!==s.MouseButton.Left)return this.cancelChanges(),void this.handler.switchToDefaultState();this.canApplyChangesOnMouseMove(this.startPoint,a.modelPoint)&&(this.handler.canCopySelectedItems(a)&&(this.lockInitDrag||(this.cancelChanges(),this.shouldClone=!0,this.copySelection(),this.initDrag(),this.lockInitDrag=!0)),this.onApplyChanges(a),this.onAfterApplyChanges(),this.updateContainers(a))},r.prototype.updateContainers=function(a){this.visualizerManager.setExtensionLines(this.selection.getSelectedShapes(!1,!0));var c=v.ModelUtils.findContainerByEventKey(this.model,this.selection,a.source.key);c&&this.allowInsertToContainer(a,c)?this.visualizerManager.setContainerTarget(c,a.source.type):this.visualizerManager.resetContainerTarget()},r.prototype.onMouseUp=function(a){o.prototype.onMouseUp.call(this,a),this.handler.canRemoveDiagramItemToSelection(a)&&this.handler.canMultipleSelection(a)&&this.handler.removeDiagramItemFromSelection(a.button,a.source.key)},r.prototype.onApplyChanges=function(a){var c=this;this.calculateFixedPosition(a),this.dragHelper.move(this.shouldClone,function(m){return c.getSnappedPoint(a,m)},function(){c.visualizerManager.resetConnectionTarget(),c.visualizerManager.resetConnectionPoints()},function(m,y){c.visualizerManager.setConnectionTarget(m,s.MouseEventElementType.Shape),c.visualizerManager.setConnectionPoints(m,s.MouseEventElementType.Shape,y,!0)});var f=v.ModelUtils.findContainerByEventKey(this.model,this.selection,a.source.key);f&&this.allowInsertToContainer(a,f)?v.ModelUtils.insertSelectionToContainer(this.history,this.model,this.selection,f):v.ModelUtils.removeSelectionFromContainer(this.history,this.model,this.selection),this.handler.tryUpdateModelSize(function(m,y){return c.dragHelper.onTryUpdateModelSize(m,y)})},r.prototype.getDraggingElementKeys=function(){return this.dragHelper.draggingShapes.map(function(a){return a.shape.key}).concat(this.dragHelper.draggingConnectors.map(function(a){return a.connector.key}))},r.prototype.getSnappedPoint=function(a,c){return this.handler.getSnappedPointOnDragDiagramItem(a,c,this.fixedX,this.fixedY,this.startPoint)},r.prototype.initDrag=function(){this.dragHelper=new e.SelectionDragHelper(this.history,this.model,this.handler.permissionsProvider,this.startPoint,this.selection.getSelectedItems(!0)),this.initDraggingShapes(),this.areValidDraggingShapes?(this.initDraggingConnectors(),this.areValidDraggingConnectors||this.handler.switchToDefaultState()):this.handler.switchToDefaultState()},r.prototype.initDraggingShapes=function(){this.dragHelper.initDraggingShapes(this.selection.getSelectedShapes(!1,!0),this.shouldClone)},r.prototype.initDraggingConnectors=function(){this.dragHelper.initDraggingConnectors(this.selection.getSelectedConnectors(!1,!0),this.shouldClone)},r.prototype.copySelection=function(){var a=this;v.ModelUtils.cloneSelectionToOffset(this.history,this.model,function(c){var f=a.model.findItem(c);f&&a.handler.addInteractingItem(f,p.DiagramModelOperation.AddShape)},this.selection,0,0)},r.prototype.calculateFixedPosition=function(a){this.fixedX=!1,this.fixedY=!1,this.handler.canCalculateFixedPosition(a)&&(Math.abs(this.startPoint.x-a.modelPoint.x)<Math.abs(this.startPoint.y-a.modelPoint.y)?this.fixedX=!0:this.fixedY=!0)},r.prototype.allowInsertToContainer=function(a,c){return!this.handler.canMultipleSelection(a)&&c&&c.expanded&&v.ModelUtils.canInsertSelectionToContainer(this.model,this.selection,c)},r}(i.MouseHandlerDraggingState);h.MouseHandlerDragDiagramItemStateBase=n},4908:function(j,h,d){var u,g=this&&this.__extends||(u=function(i,e){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var o in n)n.hasOwnProperty(o)&&(t[o]=n[o])},u(i,e)},function(i,e){function t(){this.constructor=i}u(i,e),i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)});Object.defineProperty(h,"__esModule",{value:!0}),h.MouseHandlerDragParameterPointState=void 0;var v=d(8816),p=d(329),s=function(i){function e(t,n,o){var r=i.call(this,t,n)||this;return r.model=o,r.startScrollLeft=0,r.startScrollTop=0,r}return g(e,i),e.prototype.onMouseDown=function(t){this.startPoint=t.modelPoint,this.shape=this.model.findShape(t.source.key),this.parameterPointKey=t.source.value,this.startParameters=this.shape.parameters.clone(),i.prototype.onMouseDown.call(this,t)},e.prototype.onApplyChanges=function(t){var n=this.handler.getSnappedOffsetOnDragPoint(t,this.startPoint),o=this.startParameters.clone();this.shape.description.modifyParameters(this.shape,o,n.x,n.y),this.history.addAndRedo(new p.ChangeShapeParametersHistoryItem(this.shape.key,o))},e.prototype.getDraggingElementKeys=function(){return[this.shape.key]},e}(v.MouseHandlerDraggingState);h.MouseHandlerDragParameterPointState=s},8816:function(j,h,d){var u,g=this&&this.__extends||(u=function(e,t){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var r in o)o.hasOwnProperty(r)&&(n[r]=o[r])},u(e,t)},function(e,t){function n(){this.constructor=e}u(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(h,"__esModule",{value:!0}),h.MouseHandlerDraggingState=void 0;var v=d(5434),p=d(6031),s=d(9291),i=function(e){function t(n,o){var r=e.call(this,n)||this;return r.history=o,r}return g(t,e),t.prototype.canApplyChangesOnMouseMove=function(n,o){return!n||!o||Math.abs(n.x-o.x)>t.dragStartLimit||Math.abs(n.y-o.y)>t.dragStartLimit},t.prototype.onAfterApplyChanges=function(){this.modified||this.handler.raiseDragStart(this.getDraggingElementKeys()),this.modified=!0,this.mouseDownPoint=void 0},t.prototype.onMouseDown=function(n){this.mouseDownPoint=n.modelPoint.clone()},t.prototype.onMouseMove=function(n){this.mouseMoveEvent=n,n.button!==p.MouseButton.Left?(this.cancelChanges(),this.handler.switchToDefaultState()):n.button===p.MouseButton.Left&&this.canApplyChangesOnMouseMove(this.mouseDownPoint,n.modelPoint)&&(this.onApplyChanges(n),this.onAfterApplyChanges())},t.prototype.onKeyDown=function(n){!this.mouseMoveEvent||n.keyCode!==16&&n.keyCode!==17&&n.keyCode!==18||this.performMouseMoveEvent(n.modifiers)},t.prototype.onKeyUp=function(n){!this.mouseMoveEvent||n.keyCode!==16&&n.keyCode!==17&&n.keyCode!==18||this.performMouseMoveEvent(n.modifiers)},t.prototype.onMouseUp=function(n){this.mouseDownPoint=void 0,this.mouseMoveEvent=void 0,this.handler.switchToDefaultState()},t.prototype.performMouseMoveEvent=function(n){this.mouseMoveEvent.modifiers=n,this.onMouseMove(this.mouseMoveEvent)},t.prototype.start=function(){this.handler.beginStorePermissions(),this.history.beginTransaction()},t.prototype.finish=function(){this.checkStoredPermissionsOnFinish(),this.modified?(this.onFinishWithChanges(),this.modified=!1,this.history.endTransaction(),this.handler.raiseDragEnd(this.getDraggingElementKeys())):this.history.endTransaction(),this.handler.endStorePermissions(),this.handler.clearInteractingItems()},t.prototype.checkStoredPermissionsOnFinish=function(){this.handler.isStoredPermissionsGranted()||(this.cancelChanges(),this.modified=!1)},t.prototype.onFinishWithChanges=function(){},t.prototype.cancelChanges=function(){this.handler.lockPermissions(),this.history.undoTransaction(),this.handler.unlockPermissions(),this.modified&&this.handler.raiseDragEnd(this.getDraggingElementKeys()),this.modified=!1},t.prototype.getSnappedPoint=function(n,o){return this.handler.getSnappedPointOnDragPoint(n,o)},t.dragStartLimit=s.UnitConverter.pixelsToTwips(4),t}(v.MouseHandlerCancellableState);h.MouseHandlerDraggingState=i},5209:function(j,h,d){var u,g=this&&this.__extends||(u=function(o,r){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var f in c)c.hasOwnProperty(f)&&(a[f]=c[f])},u(o,r)},function(o,r){function a(){this.constructor=o}u(o,r),o.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)});Object.defineProperty(h,"__esModule",{value:!0}),h.MouseHandlerMoveConnectorOrthogonalSideState=void 0;var v=d(8900),p=d(7959),s=d(3742),i=d(4867),e=d(8816),t=d(8675),n=function(o){function r(a,c,f){var m=o.call(this,a,c)||this;return m.model=f,m.canCreatePoints=!0,m}return g(r,o),r.prototype.saveSidePoints=function(a,c){var f=this,m=this.connector.getRenderPoints(!0);this.isHorizontal=m[a].y===m[c].y,this.iterateRenderPoints(m,a,!1,function(y,l){y.pointIndex!==-1&&(f.leftPointIndex=y.pointIndex),f.leftRenderPointIndex=l},function(y){return!t.GeometryUtils.arePointsOfOrthogonalLine(m[a],y,f.isHorizontal)}),this.iterateRenderPoints(m,this.leftRenderPointIndex,!0,function(y,l){y.pointIndex!==-1&&(f.rightPointIndex=y.pointIndex),f.rightRenderPointIndex=l},function(y){return!t.GeometryUtils.arePointsOfOrthogonalLine(m[a],y,f.isHorizontal)})},r.prototype.iterateRenderPoints=function(a,c,f,m,y){for(var l=c;f?l<a.length:l>=0;f?l++:l--){var P=a[l];if(y&&y(P,l))break;m(P,l)}},r.prototype.onMouseDown=function(a){this.startPoint=a.modelPoint,this.connector=this.model.findConnector(a.source.key),this.handler.addInteractingItem(this.connector);var c=a.source.value.split("_");this.saveSidePoints(parseInt(c[0]),parseInt(c[1])),o.prototype.onMouseDown.call(this,a)},r.prototype.shouldCreatePoint=function(a){if(!this.canCreatePoints)return!1;if(a&&(this.leftPointIndex===void 0||this.leftPointIndex===0)||!a&&(this.rightPointIndex===void 0||this.rightPointIndex===this.connector.points.length-1))return!0;var c=this.connector.getRenderPoints(!0);return!(!a||this.connector.points[this.leftPointIndex].equals(c[this.leftRenderPointIndex]))||!a&&!this.connector.points[this.rightPointIndex].equals(c[this.rightRenderPointIndex])},r.prototype.onApplyChanges=function(a){var c=this;if(this.shouldCreatePoint(!0)||this.shouldCreatePoint(!1)){var f=this.connector.getRenderPoints(!0),m=f[this.leftRenderPointIndex],y=f[this.rightRenderPointIndex];if(this.shouldCreatePoint(!0)){var l=new v.Point(m.x,m.y);this.leftPointIndex===0?(this.leftPointIndex=1,this.correctEdgePoint(l,y,this.connector.beginItem,this.connector.beginConnectionPointIndex)):this.leftPointIndex===void 0&&this.iterateRenderPoints(f,this.leftRenderPointIndex,!0,function(I){I.pointIndex!==-1&&(c.leftPointIndex=I.pointIndex)},function(){return c.leftPointIndex!==void 0}),i.ModelUtils.addConnectorPoint(this.history,this.connector.key,this.leftPointIndex,l),this.rightPointIndex!==void 0&&this.rightPointIndex++}if(this.shouldCreatePoint(!1)){f=this.connector.getRenderPoints(!0);var P=new v.Point(y.x,y.y);this.rightPointIndex===this.connector.points.length-1?(this.correctEdgePoint(P,m,this.connector.endItem,this.connector.endConnectionPointIndex),this.rightPointIndex--):this.rightPointIndex===void 0&&this.iterateRenderPoints(f,this.rightRenderPointIndex,!1,function(I){I.pointIndex!==-1&&(c.rightPointIndex=I.pointIndex)},function(){return c.rightPointIndex===c.leftPointIndex}),this.rightPointIndex++,i.ModelUtils.addConnectorPoint(this.history,this.connector.key,this.rightPointIndex,P)}}this.canCreatePoints=!1;var C=this.getSnappedPoint(a,a.modelPoint);i.ModelUtils.moveConnectorRightAnglePoints(this.history,this.connector,this.leftPointIndex,this.rightPointIndex,this.isHorizontal?void 0:C.x,this.isHorizontal?C.y:void 0),this.handler.tryUpdateModelSize()},r.prototype.onFinishWithChanges=function(){i.ModelUtils.deleteConnectorUnnecessaryPoints(this.history,this.connector),i.ModelUtils.fixConnectorBeginEndConnectionIndex(this.history,this.connector),this.handler.tryUpdateModelSize()},r.prototype.correctEdgePoint=function(a,c,f,m){var y=0;if(f){var l=f.getConnectionPointSideByIndex(m),P=f.rectangle;switch(y=p.Connector.minOffset,l){case s.ConnectionPointSide.South:y+=P.bottom-a.y;break;case s.ConnectionPointSide.North:y+=a.y-P.y;break;case s.ConnectionPointSide.East:y+=P.right-a.x;break;case s.ConnectionPointSide.West:y+=a.x-P.x}}this.isHorizontal?a.x>c.x?a.x-=Math.min(y,a.x-c.x):a.x+=Math.min(y,c.x-a.x):a.y>c.y?a.y-=Math.min(y,a.y-c.y):a.y+=Math.min(y,c.y-a.y)},r.prototype.getDraggingElementKeys=function(){return[this.connector.key]},r}(e.MouseHandlerDraggingState);h.MouseHandlerMoveConnectorOrthogonalSideState=n},4402:function(j,h,d){var u,g=this&&this.__extends||(u=function(n,o){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var c in a)a.hasOwnProperty(c)&&(r[c]=a[c])},u(n,o)},function(n,o){function r(){this.constructor=n}u(n,o),n.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)});Object.defineProperty(h,"__esModule",{value:!0}),h.MouseHandlerMoveConnectorPointState=void 0;var v=d(8900),p=d(7060),s=d(7959),i=d(4867),e=d(4612),t=function(n){function o(){return n!==null&&n.apply(this,arguments)||this}return g(o,n),o.prototype.onMouseDown=function(r){this.connector=this.model.findConnector(r.source.key),this.pointIndex=parseInt(r.source.value),this.pointIndex===0?this.pointPosition=s.ConnectorPosition.Begin:this.pointIndex===this.connector.points.length-1&&(this.pointPosition=s.ConnectorPosition.End),this.handler.addInteractingItem(this.connector),n.prototype.onMouseDown.call(this,r)},o.prototype.onApplyChanges=function(r){this.connector.properties.lineOption===e.ConnectorLineOption.Orthogonal&&this.pointIndex!==0&&this.pointIndex!==this.connector.points.length-1||n.prototype.onApplyChanges.call(this,r)},o.prototype.onFinishWithChanges=function(){n.prototype.onFinishWithChanges.call(this),i.ModelUtils.deleteConnectorUnnecessaryPoints(this.history,this.connector),this.handler.tryUpdateModelSize()},o.prototype.getSnappedPoint=function(r,a){var c=this.connector.points,f=this.pointIndex;if(0<f&&f<c.length-1){var m=(c[f+1].y-c[f-1].y)/(c[f+1].x-c[f-1].x),y=a.x,l=c[f+1].y-(c[f+1].x-y)*m;return this.handler.getSnappedPointOnDragPoint(r,a,new v.Point(y,l))}return this.handler.getSnappedPointOnDragPoint(r,a)},o}(p.MouseHandlerMoveConnectorPointStateBase);h.MouseHandlerMoveConnectorPointState=t},7060:function(j,h,d){var u,g=this&&this.__extends||(u=function(o,r){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var f in c)c.hasOwnProperty(f)&&(a[f]=c[f])},u(o,r)},function(o,r){function a(){this.constructor=o}u(o,r),o.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)});Object.defineProperty(h,"__esModule",{value:!0}),h.MouseHandlerMoveConnectorPointStateBase=void 0;var v=d(7959),p=d(6031),s=d(8816),i=d(8930),e=d(3477),t=d(4867),n=function(o){function r(a,c,f,m){var y=o.call(this,a,c)||this;return y.model=f,y.visualizerManager=m,y}return g(r,o),r.prototype.finish=function(){this.visualizerManager.resetConnectionTarget(),this.visualizerManager.resetConnectionPoints(),o.prototype.finish.call(this)},r.prototype.onMouseDown=function(a){o.prototype.onMouseDown.call(this,a),this.connector&&this.handler.addInteractingItem(this.connector)},r.prototype.onMouseMove=function(a){if(o.prototype.onMouseMove.call(this,a),this.allowAttachToObjects(a,!1,!1)){if(this.connector){var c=this.connector.getExtremeItem(this.pointPosition);this.visualizerManager.setConnectionTarget(c,a.source.type);var f=this.connector.getExtremeConnectionPointIndex(this.pointPosition);(c||this.oppositeConnectionPointIndex===-1)&&this.allowAttachToObjects(a,!0,!1)||(c=this.model.findItem(a.source.key)),this.visualizerManager.setConnectionPoints(c,a.source.type,f,!0)}}else this.visualizerManager.resetConnectionTarget(),this.visualizerManager.resetConnectionPoints()},r.prototype.onApplyChanges=function(a){var c=this.getSnappedPoint(a,a.modelPoint);if(this.pointPosition!==void 0){this.oppositePointPosition===void 0&&(this.oppositePointPosition=this.getOppositePointPosition(),this.oppositeItem=this.connector.getExtremeItem(this.oppositePointPosition),this.oppositeConnectionPointIndex=this.connector.getExtremeConnectionPointIndex(this.oppositePointPosition)),this.targetItem=this.model.findItem(a.source.key);var f=this.allowAttachToObjects(a,!0,!0)?this.targetItem:void 0,m=-1;a.source.type===p.MouseEventElementType.ShapeConnectionPoint&&(m=parseInt(a.source.value)),!f||a.source.type!==p.MouseEventElementType.Shape&&a.source.type!==p.MouseEventElementType.ShapeConnectionPoint||this.connector.getExtremeItem(this.oppositePointPosition)===f&&(m===-1||this.oppositeConnectionPointIndex===-1||m===this.oppositeConnectionPointIndex)?this.connector.getExtremeItem(this.pointPosition)&&(this.history.addAndRedo(new i.DeleteConnectionHistoryItem(this.connector,this.pointPosition)),this.oppositeItem&&this.updateOppositeItemConnectionPointIndex(this.oppositeConnectionPointIndex)):(this.connector.getExtremeItem(this.pointPosition)===f&&this.connector.getExtremeConnectionPointIndex(this.pointPosition)===m||(this.connector.getExtremeItem(this.pointPosition)&&this.history.addAndRedo(new i.DeleteConnectionHistoryItem(this.connector,this.pointPosition)),this.history.addAndRedo(new e.AddConnectionHistoryItem(this.connector,f,m,this.pointPosition)),this.oppositeItem&&this.updateOppositeItemConnectionPointIndex(m)),c=f.getConnectionPointPosition(m,this.connector.points[this.pointIndex+(this.pointPosition===v.ConnectorPosition.End?-1:1)]),this.visualizerManager.setConnectionPointIndex(m))}t.ModelUtils.moveConnectorPoint(this.history,this.connector,this.pointIndex,c),t.ModelUtils.updateConnectorAttachedPoints(this.history,this.model,this.connector),this.handler.tryUpdateModelSize()},r.prototype.updateOppositeItemConnectionPointIndex=function(a){var c=a===-1?-1:this.oppositeConnectionPointIndex;c!==this.connector.getExtremeConnectionPointIndex(this.oppositePointPosition)&&(this.history.addAndRedo(new i.DeleteConnectionHistoryItem(this.connector,this.oppositePointPosition)),this.history.addAndRedo(new e.AddConnectionHistoryItem(this.connector,this.oppositeItem,c,this.oppositePointPosition)))},r.prototype.onFinishWithChanges=function(){t.ModelUtils.updateConnectorContainer(this.history,this.model,this.connector),t.ModelUtils.deleteConnectorUnnecessaryPoints(this.history,this.connector),this.handler.tryUpdateModelSize()},r.prototype.getDraggingElementKeys=function(){return this.connector?[this.connector.key]:[]},r.prototype.getOppositePointPosition=function(){return this.pointPosition===v.ConnectorPosition.Begin?v.ConnectorPosition.End:v.ConnectorPosition.Begin},r.prototype.allowAttachToObjects=function(a,c,f){if(this.handler.canMultipleSelection(a))return!1;var m=this.connector;if(m&&a.source.type===p.MouseEventElementType.Shape){var y=this.model.findItem(a.source.key);if(c&&this.model.findItemContainerCore(m,function(l){return l===y})||c&&this.oppositeItem&&this.model.findItemContainerCore(this.oppositeItem,function(l){return l===y})||f&&this.oppositeItem===y&&this.oppositeConnectionPointIndex===-1)return!1}return!0},r.prototype.onConnectionPointsShow=function(a,c){var f=this;if(this.connector&&this.pointPosition!==void 0&&(this.connector.endItem&&this.connector.endItem.key===a||this.connector.beginItem&&this.connector.beginItem.key===a)){var m=this.connector.beginItem&&this.connector.beginItem.key===a?v.ConnectorPosition.Begin:v.ConnectorPosition.End;c.forEach(function(y,l){y.allowed=f.handler.canPerformChangeConnectionOnUpdateUI(f.connector,{item:f.connector.getExtremeItem(m),position:m,connectionPointIndex:l})})}},r.prototype.onConnectionTargetShow=function(a,c){if(this.connector&&this.pointPosition!==void 0&&(this.connector.endItem&&this.connector.endItem.key===a||this.connector.beginItem&&this.connector.beginItem.key===a)){var f=this.connector.beginItem&&this.connector.beginItem.key===a?v.ConnectorPosition.Begin:v.ConnectorPosition.End;c.allowed=this.handler.canPerformChangeConnectionOnUpdateUI(this.connector,{item:this.connector.getExtremeItem(f),position:f,connectionPointIndex:-1})}},r}(s.MouseHandlerDraggingState);h.MouseHandlerMoveConnectorPointStateBase=n},481:function(j,h,d){var u,g=this&&this.__extends||(u=function(i,e){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var o in n)n.hasOwnProperty(o)&&(t[o]=n[o])},u(i,e)},function(i,e){function t(){this.constructor=i}u(i,e),i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)});Object.defineProperty(h,"__esModule",{value:!0}),h.MouseHandlerMoveConnectorSideState=void 0;var v=d(8816),p=d(4867),s=function(i){function e(t,n,o){var r=i.call(this,t,n)||this;return r.model=o,r}return g(e,i),e.prototype.onMouseDown=function(t){this.startPoint=t.modelPoint,this.connectorKey=t.source.key,this.pointIndex=parseInt(t.source.value)+1,i.prototype.onMouseDown.call(this,t)},e.prototype.onApplyChanges=function(t){var n=this.getSnappedPoint(t,t.modelPoint),o=this.model.findConnector(this.connectorKey);this.pointCreated?p.ModelUtils.moveConnectorPoint(this.history,o,this.pointIndex,n):(this.handler.addInteractingItem(o),p.ModelUtils.addConnectorPoint(this.history,this.connectorKey,this.pointIndex,n.clone()),this.pointCreated=!0),this.handler.tryUpdateModelSize()},e.prototype.onFinishWithChanges=function(){var t=this.model.findConnector(this.connectorKey);p.ModelUtils.deleteConnectorUnnecessaryPoints(this.history,t),p.ModelUtils.fixConnectorBeginEndConnectionIndex(this.history,t),this.handler.tryUpdateModelSize()},e.prototype.getDraggingElementKeys=function(){return[this.connectorKey]},e}(v.MouseHandlerDraggingState);h.MouseHandlerMoveConnectorSideState=s},5168:function(j,h,d){var u,g=this&&this.__extends||(u=function(s,i){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},u(s,i)},function(s,i){function e(){this.constructor=s}u(s,i),s.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)});Object.defineProperty(h,"__esModule",{value:!0}),h.MouseHandlerMoveConnectorState=void 0;var v=d(4867),p=function(s){function i(e,t,n,o,r){var a=s.call(this,e,t,n,o,r)||this;return a.model=n,a.selection=o,a.visualizerManager=r,a}return g(i,s),Object.defineProperty(i.prototype,"areValidDraggingShapes",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"areValidDraggingConnectors",{get:function(){var e=this;return this.shouldClone?this.dragHelper.draggingShapes.length>0||this.dragHelper.draggingConnectors.length>0:!!this.dragHelper.draggingConnectors.length&&(this.dragHelper.draggingShapes.length?v.ModelUtils.canMoveConnector(this.dragHelper.selectedItems,this.dragHelper.draggingConnectors[this.dragHelper.draggingConnectorsIndexByKey[this.handler.mouseDownEvent.source.key]].connector):!this.dragHelper.draggingConnectors.some(function(t){return!v.ModelUtils.canMoveConnector(e.dragHelper.selectedItems,t.connector)}))},enumerable:!1,configurable:!0}),i}(d(1717).MouseHandlerDragDiagramItemStateBase);h.MouseHandlerMoveConnectorState=p},5391:function(j,h,d){var u,g=this&&this.__extends||(u=function(e,t){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var r in o)o.hasOwnProperty(r)&&(n[r]=o[r])},u(e,t)},function(e,t){function n(){this.constructor=e}u(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(h,"__esModule",{value:!0}),h.MouseHandlerMoveConnectorTextState=void 0;var v=d(8816),p=d(45),s=d(5144),i=function(e){function t(n,o,r){var a=e.call(this,n,o)||this;return a.model=r,a}return g(t,e),t.prototype.onMouseDown=function(n){this.connector=this.model.findConnector(n.source.key),this.position=parseFloat(n.source.value),this.text=this.connector.getText(this.position),this.savedText="",e.prototype.onMouseDown.call(this,n)},t.prototype.onApplyChanges=function(n){var o=this.connector.getTextPositionByPoint(n.modelPoint);if(o!==this.position){var r=this.connector.getText(o);r!==""&&r!==this.text&&(this.history.addAndRedo(new s.ChangeConnectorTextHistoryItem(this.connector,o,"")),this.savedText=r),this.history.addAndRedo(new p.ChangeConnectorTextPositionHistoryItem(this.connector,this.position,o)),this.savedText!==""&&this.savedText!==r&&(this.history.addAndRedo(new s.ChangeConnectorTextHistoryItem(this.connector,this.position,this.savedText)),this.savedText=""),this.position=o}},t.prototype.getDraggingElementKeys=function(){return[this.connector.key]},t}(v.MouseHandlerDraggingState);h.MouseHandlerMoveConnectorTextState=i},9979:function(j,h,d){var u,g=this&&this.__extends||(u=function(p,s){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t])},u(p,s)},function(p,s){function i(){this.constructor=p}u(p,s),p.prototype=s===null?Object.create(s):(i.prototype=s.prototype,new i)});Object.defineProperty(h,"__esModule",{value:!0}),h.MouseHandlerMoveShapeState=void 0;var v=function(p){function s(i,e,t,n,o){var r=p.call(this,i,e,t,n,o)||this;return r.model=t,r.selection=n,r.visualizerManager=o,r}return g(s,p),Object.defineProperty(s.prototype,"areValidDraggingShapes",{get:function(){return this.shouldClone||this.dragHelper.draggingShapes.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"areValidDraggingConnectors",{get:function(){return!0},enumerable:!1,configurable:!0}),s}(d(1717).MouseHandlerDragDiagramItemStateBase);h.MouseHandlerMoveShapeState=v},5609:function(j,h,d){var u,g=this&&this.__extends||(u=function(r,a){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var m in f)f.hasOwnProperty(m)&&(c[m]=f[m])},u(r,a)},function(r,a){function c(){this.constructor=r}u(r,a),r.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)});Object.defineProperty(h,"__esModule",{value:!0}),h.MouseHandlerResizeShapeState=void 0;var v=d(6353),p=d(8900),s=d(6031),i=d(8816),e=d(4867),t=d(6794),n=d(6879),o=function(r){function a(c,f,m,y,l,P){var C=r.call(this,c,f)||this;return C.model=m,C.selection=y,C.visualizerManager=l,C.settings=P,C.startScrollLeft=0,C.startScrollTop=0,C.rotation=0,C}return g(a,r),a.prototype.finish=function(){this.visualizerManager.resetResizeInfo(),this.visualizerManager.resetExtensionLines(),r.prototype.finish.call(this)},a.prototype.onMouseDown=function(c){var f=this,m=parseInt(c.source.value);this.resizeEventSource=m,this.startPoint=c.modelPoint,this.lockH=m===s.ResizeEventSource.ResizeBox_S||m===s.ResizeEventSource.ResizeBox_N,this.lockV=m===s.ResizeEventSource.ResizeBox_E||m===s.ResizeEventSource.ResizeBox_W,this.sideH=m===s.ResizeEventSource.ResizeBox_E||m===s.ResizeEventSource.ResizeBox_NE||m===s.ResizeEventSource.ResizeBox_SE,this.sideV=m===s.ResizeEventSource.ResizeBox_SE||m===s.ResizeEventSource.ResizeBox_S||m===s.ResizeEventSource.ResizeBox_SW,this.shapes=this.selection.getSelectedShapes(),this.shapes.length!==0?(this.shapes.forEach(function(y){f.handler.addInteractingItem(y,n.DiagramModelOperation.ResizeShape),f.handler.addInteractingItem(y,n.DiagramModelOperation.MoveShape)}),this.connectors=this.selection.getSelectedConnectors(),this.startRectangle=e.ModelUtils.createRectangle(this.shapes),this.startShapeSizes=this.shapes.map(function(y){return y.size.clone()}),this.startShapePositions=this.shapes.map(function(y){return y.position.clone()}),this.startConnectorPoints=this.connectors.map(function(y){return y.points.map(function(l){return l.clone()})}),r.prototype.onMouseDown.call(this,c)):this.handler.switchToDefaultState()},a.prototype.onMouseMove=function(c){r.prototype.onMouseMove.call(this,c);var f=this.selection.getSelectedShapes();this.visualizerManager.setExtensionLines(f)},a.prototype.onApplyChanges=function(c){var f=this,m=e.ModelUtils.createRectangle(this.shapes),y=this.shapes.length===1?this.shapes[0].getMinWidth(this.settings.shapeMinWidth):t.ShapeMinDimension,l=this.shapes.length===1?this.shapes[0].getMinHeight(this.settings.shapeMinHeight):t.ShapeMinDimension,P=this.shapes.length===1?this.shapes[0].getMaxWidth(this.settings.shapeMaxWidth):void 0,C=this.shapes.length===1?this.shapes[0].getMaxHeight(this.settings.shapeMaxHeight):void 0,I=this.getSize(c,m.createPosition(),this.startRectangle.createSize(),y,l,P,C,this.handler.lockAspectRatioOnShapeResize(c)),x=this.getPosition(c,I,this.startRectangle.createSize(),this.startRectangle.createPosition()),b=I.width/this.startRectangle.width,S=I.height/this.startRectangle.height;this.shapes.forEach(function(w,T){var _=f.startShapeSizes[T].width*(w.allowResizeHorizontally?b:1);_=f.getNormalizedSize(_,w.getMinWidth(f.settings.shapeMinWidth),w.getMaxWidth(f.settings.shapeMaxWidth));var M=f.startShapeSizes[T].height*(w.allowResizeVertically?S:1);M=f.getNormalizedSize(M,w.getMinHeight(f.settings.shapeMinHeight),w.getMaxHeight(f.settings.shapeMaxHeight));var A=w.allowResizeHorizontally?x.x+(f.startShapePositions[T].x-f.startRectangle.x)*b:f.startShapePositions[T].x,E=w.allowResizeVertically?x.y+(f.startShapePositions[T].y-f.startRectangle.y)*S:f.startShapePositions[T].y;e.ModelUtils.setShapeSize(f.history,f.model,w,new p.Point(A,E),new v.Size(_,M))}),this.connectors.forEach(function(w,T){for(var _=w.beginItem?1:0,M=w.endItem?w.points.length-2:w.points.length-1,A=_;A<=M;A++){var E=new p.Point(x.x+(f.startConnectorPoints[T][A].x-f.startRectangle.x)*b,x.y+(f.startConnectorPoints[T][A].y-f.startRectangle.y)*S);e.ModelUtils.moveConnectorPoint(f.history,w,A,E)}}),this.selection.getSelectedShapes(!1,!0).forEach(function(w){e.ModelUtils.updateShapeAttachedConnectors(f.history,f.model,w)}),this.tryUpdateModelSize(),this.visualizerManager.setResizeInfo(this.shapes)},a.prototype.tryUpdateModelSize=function(){var c=this;this.handler.tryUpdateModelSize(function(f,m){c.startShapePositions.forEach(function(y){y.x+=f,y.y+=m}),c.startConnectorPoints.forEach(function(y){y.forEach(function(l){l.x+=f,l.y+=m})}),c.startRectangle.x+=f,c.startRectangle.y+=m,c.startPoint.x+=f,c.startPoint.y+=m})},a.prototype.getDraggingElementKeys=function(){return this.shapes.map(function(c){return c.key})},a.prototype.getNormalizedSize=function(c,f,m){return f!==void 0&&(c=Math.max(c,f)),m!==void 0&&(c=Math.min(c,m)),c},a.prototype.getSize=function(c,f,m,y,l,P,C,I){var x,b,S=c.modelPoint.x-(this.startScrollLeft-c.scrollX)-this.startPoint.x,w=c.modelPoint.y-(this.startScrollTop-c.scrollY)-this.startPoint.y,T=S*Math.cos(this.rotation)- -w*Math.sin(this.rotation),_=-(S*Math.sin(this.rotation)+-w*Math.cos(this.rotation));return _=!this.sideV&&_>0?Math.min(m.height+1,_):_,T=!this.sideH&&T>0?Math.min(m.width+1,T):T,this.lockH||this.lockV||!I?(T=this.lockH?0:T,_=this.lockV?0:_,x=this.getNormalizedSize(this.sideH?m.width+T:m.width-T,y,P),b=this.getNormalizedSize(this.sideV?m.height+_:m.height-_,l,C)):Math.abs(T)>Math.abs(_)?(x=this.getNormalizedSize(this.sideH?m.width+T:m.width-T,y,P),b=m.height*(x/m.width)):(b=this.getNormalizedSize(this.sideV?m.height+_:m.height-_,l,C),x=m.width*(b/m.height)),this.lockH||(x=this.getSnappedPosition(c,f.x+x,!0)-f.x),this.lockV||(b=this.getSnappedPosition(c,f.y+b,!1)-f.y),new v.Size(x,b)},a.prototype.getPosition=function(c,f,m,y){var l=y.x,P=y.y;if(this.resizeEventSource===s.ResizeEventSource.ResizeBox_N||this.resizeEventSource===s.ResizeEventSource.ResizeBox_NE||this.resizeEventSource===s.ResizeEventSource.ResizeBox_NW){P+=m.height-f.height;var C=this.getSnappedPosition(c,P,!1);f.height+=P-C,P=C}if(this.resizeEventSource===s.ResizeEventSource.ResizeBox_W||this.resizeEventSource===s.ResizeEventSource.ResizeBox_NW||this.resizeEventSource===s.ResizeEventSource.ResizeBox_SW){l+=m.width-f.width;var I=this.getSnappedPosition(c,l,!0);f.width+=l-I,l=I}return new p.Point(l,P)},a.prototype.getSnappedPosition=function(c,f,m){return this.handler.getSnappedPositionOnResizeShape(c,f,m)},a}(i.MouseHandlerDraggingState);h.MouseHandlerResizeShapeState=o},9582:function(j,h,d){var u,g=this&&this.__extends||(u=function(e,t){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var r in o)o.hasOwnProperty(r)&&(n[r]=o[r])},u(e,t)},function(e,t){function n(){this.constructor=e}u(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(h,"__esModule",{value:!0}),h.MouseHandlerScrollingState=void 0;var v=d(5434),p=d(6031),s=d(8900),i=function(e){function t(n,o,r){var a=e.call(this,n)||this;return a.view=o,a.selection=r,a.lastOffset=new s.Point(0,0),a}return g(t,e),t.prototype.onKeyUp=function(n){this.handler.onFinishScrollPageByKeyboard(n)},t.prototype.onMouseDown=function(n){n.preventDefault=!0,this.startPoint=this.getPointByEvent(n)},t.prototype.onMouseMove=function(n){if(n.button===p.MouseButton.Left){var o=this.currentPoint||this.startPoint;n.preventDefault=!0;var r=this.getPointByEvent(n),a=this.view.scrollBy(new s.Point(r.x-o.x,r.y-o.y));this.lastOffset=this.lastOffset.clone().offset(a.x,a.y),this.currentPoint=r}else this.handler.onFinishScrollPageByMouse(n)},t.prototype.onMouseUp=function(n){n.button===p.MouseButton.Left&&this.handler.onFinishScrollPageByMouse(n),this.handler.switchToDefaultState()},t.prototype.cancelChanges=function(){this.currentPoint&&this.view.scrollBy(this.lastOffset.clone().multiply(-1,-1))},t.prototype.finish=function(){this.currentPoint&&this.startPoint&&!this.currentPoint.equals(this.startPoint)||this.selection.set([]),e.prototype.finish.call(this)},t.prototype.getPointByEvent=function(n){return n.offsetPoint},t}(v.MouseHandlerCancellableState);h.MouseHandlerScrollingState=i},4869:function(j,h,d){var u,g=this&&this.__extends||(u=function(i,e){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var o in n)n.hasOwnProperty(o)&&(t[o]=n[o])},u(i,e)},function(i,e){function t(){this.constructor=i}u(i,e),i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)});Object.defineProperty(h,"__esModule",{value:!0}),h.MouseHandlerSelectionState=void 0;var v=d(6031),p=d(8011),s=function(i){function e(t,n,o){var r=i.call(this,t)||this;return r.selection=n,r.visualizerManager=o,r}return g(e,i),e.prototype.finish=function(){this.handler.raiseDragEnd([]),this.visualizerManager.resetSelectionRectangle(),i.prototype.finish.call(this)},e.prototype.cancelChanges=function(){},e.prototype.onMouseDown=function(t){this.startPoint=t.modelPoint,this.handler.raiseDragStart([])},e.prototype.onMouseMove=function(t){t.button!==v.MouseButton.Left?this.handler.switchToDefaultState():(this.rectangle=p.Rectangle.fromPoints(this.startPoint,t.modelPoint),this.visualizerManager.setSelectionRectangle(this.rectangle))},e.prototype.onMouseUp=function(t){this.rectangle!==void 0?this.selection.selectRect(this.rectangle):this.selection.set([]),this.rectangle=void 0,this.handler.switchToDefaultState()},e}(d(5434).MouseHandlerCancellableState);h.MouseHandlerSelectionState=s},5434:function(j,h,d){var u,g=this&&this.__extends||(u=function(i,e){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var o in n)n.hasOwnProperty(o)&&(t[o]=n[o])},u(i,e)},function(i,e){function t(){this.constructor=i}u(i,e),i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)});Object.defineProperty(h,"__esModule",{value:!0}),h.MouseHandlerCancellableState=h.MouseHandlerStateBase=void 0;var v=d(2153),p=function(){function i(e){this.handler=e}return i.prototype.start=function(){},i.prototype.finish=function(){},i.prototype.onMouseClick=function(e){},i.prototype.onMouseDblClick=function(e){this.handler.switchToDefaultState()},i.prototype.onMouseDown=function(e){},i.prototype.onMouseUp=function(e){},i.prototype.onMouseMove=function(e){},i.prototype.onMouseWheel=function(e){return!1},i.prototype.onDragStart=function(e){},i.prototype.onDragEnd=function(e){},i.prototype.onShortcut=function(e){return!1},i.prototype.onKeyDown=function(e){},i.prototype.onKeyUp=function(e){},i.prototype.onConnectionPointsShow=function(e,t){},i.prototype.onConnectionTargetShow=function(e,t){},i}();h.MouseHandlerStateBase=p;var s=function(i){function e(){return i!==null&&i.apply(this,arguments)||this}return g(e,i),e.prototype.onShortcut=function(t){return t===v.KeyCode.Esc&&(this.cancelChanges(),this.handler.switchToDefaultState(),!0)},e}(p);h.MouseHandlerCancellableState=s},5752:function(j,h,d){var u,g=this&&this.__extends||(u=function(e,t){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var r in o)o.hasOwnProperty(r)&&(n[r]=o[r])},u(e,t)},function(e,t){function n(){this.constructor=e}u(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(h,"__esModule",{value:!0}),h.MouseHandlerToggleShapeExpandedState=void 0;var v=d(5434),p=d(442),s=d(4867),i=function(e){function t(n,o,r,a){var c=e.call(this,n)||this;return c.history=o,c.model=r,c.selection=a,c}return g(t,e),t.prototype.onMouseUp=function(n){var o=this.model.findShape(n.source.key);o&&!o.isLocked&&(this.history.beginTransaction(),this.history.addAndRedo(new p.ToggleShapeExpandedHistoryItem(o)),s.ModelUtils.updateShapeAttachedConnectors(this.history,this.model,o),s.ModelUtils.updateContainerConnectorsAttachedPoints(this.history,this.model,o),s.ModelUtils.updateSelection(this.history,this.selection),this.handler.tryUpdateModelSize(),this.history.endTransaction(),this.handler.raiseClick([o.key])),this.handler.switchToDefaultState()},t}(v.MouseHandlerStateBase);h.MouseHandlerToggleShapeExpandedState=i},6918:function(j,h,d){var u,g=this&&this.__extends||(u=function(f,m){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,l){y.__proto__=l}||function(y,l){for(var P in l)l.hasOwnProperty(P)&&(y[P]=l[P])},u(f,m)},function(f,m){function y(){this.constructor=f}u(f,m),f.prototype=m===null?Object.create(m):(y.prototype=m.prototype,new y)});Object.defineProperty(h,"__esModule",{value:!0}),h.MouseHandlerToolboxDraggingState=h.MouseHandlerBeforeToolboxDraggingState=void 0;var v=d(6031),p=d(8900),s=d(4145),i=d(4297),e=d(8816),t=d(1704),n=d(4867),o=d(5434),r=d(6879),a=function(f){function m(y,l,P,C,I,x){var b=f.call(this,y)||this;return b.history=l,b.model=P,b.selection=C,b.visualizerManager=I,b.shapeDescriptionManager=x,b.isModelEmpty=P.items.length===0,b}return g(m,f),m.prototype.cancelChanges=function(){this.tryRemoveTimer()},m.prototype.onDragStart=function(y){this.dragging=y},m.prototype.onDragEnd=function(y){this.cancelChanges(),this.handler.switchToDefaultState()},m.prototype.onMouseMove=function(y){var l=this;y.source.type>v.MouseEventElementType.Background?(this.tryRemoveTimer(),this.switchToDraggingState(y,!1)):y.source.type!==v.MouseEventElementType.Background||this.isModelEmpty?this.nonPageAreaTimer!==void 0&&this.tryRemoveTimer():(this.savedEvt=y,this.nonPageAreaTimer===void 0&&(this.nonPageAreaTimer=setTimeout(function(){return l.switchToDraggingState(l.savedEvt,!0)},500)))},m.prototype.switchToDraggingState=function(y,l){this.handler.switchState(new c(this.handler,this.history,this.model,this.selection,this.visualizerManager,this.shapeDescriptionManager,l)),this.handler.state.onDragStart(this.dragging),this.handler.state.onMouseMove(y)},m.prototype.tryRemoveTimer=function(){this.nonPageAreaTimer!==void 0&&(clearTimeout(this.nonPageAreaTimer),delete this.nonPageAreaTimer)},m.prototype.finish=function(){this.tryRemoveTimer()},m}(o.MouseHandlerCancellableState);h.MouseHandlerBeforeToolboxDraggingState=a;var c=function(f){function m(y,l,P,C,I,x,b){var S=f.call(this,y,l)||this;return S.model=P,S.selection=C,S.visualizerManager=I,S.shapeDescriptionManager=x,b||(S.updatePageSizeTimer=setTimeout(function(){S.processAndRemoveUpdatePageSizeTimer()},300)),S}return g(m,f),m.prototype.cancelChanges=function(){this.tryRemoveUpdatePageSizeTimer(),f.prototype.cancelChanges.call(this)},m.prototype.tryRemoveUpdatePageSizeTimer=function(){this.updatePageSizeTimer!==void 0&&(clearTimeout(this.updatePageSizeTimer),delete this.updatePageSizeTimer)},m.prototype.processAndRemoveUpdatePageSizeTimer=function(){this.updatePageSizeTimer!==void 0&&(this.handler.tryUpdateModelSize(),delete this.updatePageSizeTimer)},m.prototype.onMouseMove=function(y){f.prototype.onMouseMove.call(this,y);var l=this.model.findShape(this.shapeKey);if(l){this.visualizerManager.setExtensionLines([l]);var P=n.ModelUtils.findContainerByEventKey(this.model,this.selection,y.source.key);P&&this.allowInsertToContainer(y,l,P)?this.visualizerManager.setContainerTarget(P,y.source.type):this.visualizerManager.resetContainerTarget()}},m.prototype.getDraggingElementKeys=function(){return this.shapeKey===void 0?[]:[this.shapeKey]},m.prototype.onApplyChanges=function(y){var l=this;if(y.source.type===v.MouseEventElementType.Undefined){if(this.dragging.onCaptured(!1),this.shapeKey!==void 0&&!this.deleteHistoryItem){var P=this.model.findShape(this.shapeKey);n.ModelUtils.detachConnectors(this.history,P),n.ModelUtils.removeFromContainer(this.history,this.model,P),this.deleteHistoryItem=new t.DeleteShapeHistoryItem(this.shapeKey,!0),this.history.addAndRedo(this.deleteHistoryItem)}}else{if(this.dragging.onCaptured(!0),this.shapeKey===void 0){this.startPoint=y.modelPoint,this.shapeKey=this.insertToolboxItem(y);var C=this.model.findShape(this.shapeKey);C&&this.handler.addInteractingItem(C,r.DiagramModelOperation.AddShape)}this.deleteHistoryItem&&(this.history.undoTransactionTo(this.deleteHistoryItem),delete this.deleteHistoryItem);var I=this.getPosition(y,this.startShapePosition);P=this.model.findShape(this.shapeKey),n.ModelUtils.setShapePosition(this.history,this.model,P,I),n.ModelUtils.updateMovingShapeConnections(this.history,P,this.connectorsWithoutBeginItemInfo,this.connectorsWithoutEndItemInfo,function(){l.visualizerManager.resetConnectionTarget(),l.visualizerManager.resetConnectionPoints()},function(b,S){l.visualizerManager.setConnectionTarget(b,v.MouseEventElementType.Shape),l.visualizerManager.setConnectionPoints(b,v.MouseEventElementType.Shape,S,!0)},function(b){return l.handler.addInteractingItem(b)}),n.ModelUtils.updateShapeAttachedConnectors(this.history,this.model,P);var x=n.ModelUtils.findContainerByEventKey(this.model,this.selection,y.source.key);P&&x&&this.allowInsertToContainer(y,P,x)?n.ModelUtils.insertToContainer(this.history,this.model,P,x):n.ModelUtils.removeFromContainer(this.history,this.model,P),this.updatePageSizeTimer===void 0&&this.handler.tryUpdateModelSize(function(b,S){l.connectorsWithoutBeginItemInfo.forEach(function(w){w.point.x+=b,w.point.y+=S}),l.connectorsWithoutEndItemInfo.forEach(function(w){w.point.x+=b,w.point.y+=S})})}},m.prototype.onFinishWithChanges=function(){this.deleteHistoryItem||this.history.addAndRedo(new i.SetSelectionHistoryItem(this.selection,[this.shapeKey]))},m.prototype.onDragStart=function(y){this.dragging=y,this.connectorsWithoutBeginItemInfo=n.ModelUtils.getConnectorsWithoutBeginItemInfo(this.model),this.connectorsWithoutEndItemInfo=n.ModelUtils.getConnectorsWithoutEndItemInfo(this.model)},m.prototype.onDragEnd=function(y){this.shapeKey!==void 0&&y.source.type===v.MouseEventElementType.Undefined&&this.cancelChanges(),this.handler.switchToDefaultState()},m.prototype.finish=function(){this.visualizerManager.resetExtensionLines(),this.visualizerManager.resetContainerTarget(),this.visualizerManager.resetConnectionTarget(),this.visualizerManager.resetConnectionPoints(),this.processAndRemoveUpdatePageSizeTimer(),this.dragging.onFinishDragging(),f.prototype.finish.call(this)},m.prototype.insertToolboxItem=function(y){var l=this.shapeDescriptionManager.get(this.dragging.data);this.startShapePosition=this.getSnappedPoint(y,new p.Point(y.modelPoint.x-l.defaultSize.width/2,y.modelPoint.y-l.defaultSize.height/2));var P=new s.AddShapeHistoryItem(l,this.startShapePosition);return this.history.addAndRedo(P),n.ModelUtils.updateNewShapeProperties(this.history,this.selection,P.shapeKey),P.shapeKey},m.prototype.allowInsertToContainer=function(y,l,P){return!this.handler.canMultipleSelection(y)&&P&&P.expanded&&n.ModelUtils.canInsertToContainer(this.model,l,P)},m.prototype.getPosition=function(y,l){return this.getSnappedPoint(y,new p.Point(l.x+y.modelPoint.x-this.startPoint.x,l.y+y.modelPoint.y-this.startPoint.y))},m}(e.MouseHandlerDraggingState);h.MouseHandlerToolboxDraggingState=c},8461:function(j,h,d){var u,g=this&&this.__extends||(u=function(t,n){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var a in r)r.hasOwnProperty(a)&&(o[a]=r[a])},u(t,n)},function(t,n){function o(){this.constructor=t}u(t,n),t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)});Object.defineProperty(h,"__esModule",{value:!0}),h.MouseHandlerZoomOnPinchState=void 0;var v=d(240),p=d(8900),s=d(9582),i=d(5596),e=function(t){function n(o,r,a,c){var f=t.call(this,o,c,r)||this;return f.selection=r,f.settings=a,f.view=c,f}return g(n,t),n.prototype.onMouseDown=function(o){t.prototype.onMouseDown.call(this,o),o.touches.length>1&&(this.startDistance=this.getTouchDistance(o),this.startZoomLevel=this.settings.zoomLevel,this.prevDistance=this.startDistance)},n.prototype.onMouseMove=function(o){if(o.touches.length>1){var r=this.getTouchDistance(o);Math.abs(this.prevDistance-r)>1&&(this.settings.zoomLevel=this.startZoomLevel*(r/this.startDistance),this.view.scrollTo(this.getMiddleLayoutPoint(o),this.getMiddleAbsPoint(o)),this.view.normalize(),this.prevDistance=r)}t.prototype.onMouseMove.call(this,o)},n.prototype.onMouseUp=function(o){o.touches.length===0&&setTimeout((function(){this.handler.switchToDefaultState()}).bind(this),1)},n.prototype.start=function(){t.prototype.start.call(this),this.settings.zoomLevel=this.view.getZoom(),this.settings.autoZoom=v.AutoZoomMode.Disabled},n.prototype.getTouchDistance=function(o){var r=new p.Point(o.touches[0].offsetPoint.x,o.touches[0].offsetPoint.y),a=new p.Point(o.touches[1].offsetPoint.x,o.touches[1].offsetPoint.y);return i.Metrics.euclideanDistance(r,a)},n.prototype.getPointByEvent=function(o){return this.getMiddleAbsPoint(o)},n.prototype.getMiddleAbsPoint=function(o){return o.touches.length>1?n.getMiddlePointByEvent(o,function(r){return r.offsetPoint}):o.offsetPoint},n.prototype.getMiddleLayoutPoint=function(o){return o.touches.length>1?n.getMiddlePointByEvent(o,function(r){return r.modelPoint}):o.modelPoint},n.getMiddlePointByEvent=function(o,r){if(o.touches.length>1)return new p.Point((r(o.touches[0]).x+r(o.touches[1]).x)/2,(r(o.touches[0]).y+r(o.touches[1]).y)/2)},n}(s.MouseHandlerScrollingState);h.MouseHandlerZoomOnPinchState=e},7189:function(j,h,d){var u,g=this&&this.__extends||(u=function(e,t){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var r in o)o.hasOwnProperty(r)&&(n[r]=o[r])},u(e,t)},function(e,t){function n(){this.constructor=e}u(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(h,"__esModule",{value:!0}),h.MouseHandlerZoomOnWheelState=void 0;var v=d(5434),p=d(6031),s=d(240),i=function(e){function t(n,o,r){var a=e.call(this,n)||this;return a.settings=o,a.view=r,a}return g(t,e),t.prototype.onMouseWheel=function(n){return this.trySwitchToDefault(n)?this.handler.state.onMouseWheel(n):(this.settings.zoomLevel=this.view.getNextStepZoom(n.deltaY<0),n.source.type===p.MouseEventElementType.Background?this.view.resetScroll():(this.view.scrollTo(n.modelPoint,n.offsetPoint),this.view.normalize()),n.preventDefault=!0,!0)},t.prototype.onMouseUp=function(n){this.handler.switchToDefaultState(),this.handler.state.onMouseUp(n)},t.prototype.onMouseDown=function(n){this.handler.switchToDefaultState(),this.handler.state.onMouseDown(n)},t.prototype.onMouseMove=function(n){this.trySwitchToDefault(n)&&this.handler.state.onMouseMove(n)},t.prototype.trySwitchToDefault=function(n){return!!this.handler.canFinishZoomOnWheel(n)&&(this.handler.switchToDefaultState(),!0)},t.prototype.start=function(){e.prototype.start.call(this),this.settings.zoomLevel=this.view.getZoom(),this.settings.autoZoom=s.AutoZoomMode.Disabled},t}(v.MouseHandlerStateBase);h.MouseHandlerZoomOnWheelState=i},8376:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.TextInputHandler=void 0;var u=d(6516),g=d(6031),v=d(2153),p=d(5503),s=d(7959),i=d(5144),e=function(){function t(n){this.control=n}return t.prototype.startTextInput=function(n,o){if(!n.isLocked&&n.enableText&&n.allowEditText&&!this.control.settings.readOnly&&this.canFinishTextEditing()){this.control.beginUpdate(),this.textInputItem=n;var r=!0;if(this.textInputItem instanceof p.Shape){var a=this.textInputItem.textEditRectangle;(r=this.control.permissionsProvider.canChangeShapeText(this.textInputItem))&&this.control.eventManager.raiseTextInputStart(this.textInputItem,this.textInputItem.text,a.createPosition(),a.createSize())}else this.textInputItem instanceof s.Connector&&(this.textInputPosition=o,(r=this.control.permissionsProvider.canChangeConnectorText(this.textInputItem,this.textInputPosition))&&this.control.eventManager.raiseTextInputStart(this.textInputItem,this.textInputItem.getText(this.textInputPosition),this.textInputItem.getTextPoint(this.textInputPosition)));r||(delete this.textInputItem,this.control.endUpdate())}},t.prototype.endTextInput=function(n){var o=this.textInputItem;delete this.textInputItem,this.control.eventManager.raiseTextInputEnd(o,n),this.control.endUpdate(),this.control.barManager.updateItemsState()},t.prototype.raiseTextInputPermissionsCheck=function(n){this.control.eventManager.raiseTextInputPermissionsCheck(this.textInputItem,n)},t.prototype.applyTextInput=function(n,o){if(this.canFinishTextEditing(n)){var r=this.textInputItem,a=this.textInputPosition;this.endTextInput(o),r instanceof p.Shape?r.text!==n&&this.control.history.addAndRedo(new u.ChangeShapeTextHistoryItem(r,n)):r instanceof s.Connector&&r.getText(a)!==n&&this.control.history.addAndRedo(new i.ChangeConnectorTextHistoryItem(r,a,n))}},t.prototype.canFinishTextEditing=function(n){var o=!0;if(this.isTextInputActive()){var r=n||this.getTextInputElementValue();this.textInputItem instanceof p.Shape?o=this.control.permissionsProvider.canApplyShapeTextChange(this.textInputItem,r):this.textInputItem instanceof s.Connector&&(o=this.control.permissionsProvider.canApplyConnectorTextChange(this.textInputItem,this.textInputPosition,r)),this.raiseTextInputPermissionsCheck(o)}return o},t.prototype.getTextInputElementValue=function(){return this.control.render?this.control.render.input.getTextInputElementValue():""},t.prototype.cancelTextInput=function(){this.raiseTextInputPermissionsCheck(!0),this.endTextInput(!0)},t.prototype.isTextInputActive=function(){return this.textInputItem!==void 0},t.prototype.processDblClick=function(n){if(n.source.type===g.MouseEventElementType.Shape){var o=this.control.model.findShape(n.source.key);this.startTextInput(o)}else if(n.source.type===g.MouseEventElementType.Connector){var r=(a=this.control.model.findConnector(n.source.key)).getTextPositionByPoint(n.modelPoint);this.startTextInput(a,r)}else if(n.source.type===g.MouseEventElementType.ConnectorText){var a=this.control.model.findConnector(n.source.key);r=parseFloat(n.source.value),this.startTextInput(a,r)}},t.prototype.onDblClick=function(n){var o=this;setTimeout(function(){o.processDblClick(n)},10)},t.prototype.onKeyDown=function(n){this.isTextInputActive()&&(n.keyCode===13&&this.hasCtrlModifier(n.modifiers)&&(n.preventDefault=!0,this.applyTextInput(n.inputText,!0)),n.keyCode===27&&this.cancelTextInput())},t.prototype.onBlur=function(n){this.isTextInputActive()&&this.applyTextInput(n.inputText)},t.prototype.onFocus=function(n){},t.prototype.hasCtrlModifier=function(n){return(n&v.ModifierKey.Ctrl)>0},t}();h.TextInputHandler=e},3541:(j,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.ConnectionPointsVisualizer=h.ConnectionPointInfo=void 0;var d=function(g,v){this.point=g,this.side=v,this.allowed=!0};h.ConnectionPointInfo=d;var u=function(){function g(v){this.dispatcher=v}return g.prototype.getKey=function(){return this.key},g.prototype.setPoints=function(v,p,s,i){this.key===v&&this.pointIndex===s||(this.key=v,this.points=p,this.pointIndex=s,this.outsideRectangle=i,this.raiseShow())},g.prototype.setPointIndex=function(v){0<=v&&v<this.points.length&&this.pointIndex!==v&&(this.pointIndex=v,this.raiseShow())},g.prototype.update=function(){this.raiseShow()},g.prototype.reset=function(){this.key!=="-1"&&(this.key="-1",this.points=[],this.pointIndex=-1,this.outsideRectangle=void 0,this.raiseHide())},g.prototype.raiseShow=function(){var v=this;this.dispatcher.raise1(function(p){return p.notifyConnectionPointsShow(v.key,v.points,v.pointIndex,v.outsideRectangle)})},g.prototype.raiseHide=function(){this.dispatcher.raise1(function(v){return v.notifyConnectionPointsHide()})},g}();h.ConnectionPointsVisualizer=u},3702:function(j,h,d){var u,g=this&&this.__extends||(u=function(i,e){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var o in n)n.hasOwnProperty(o)&&(t[o]=n[o])},u(i,e)},function(i,e){function t(){this.constructor=i}u(i,e),i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)});Object.defineProperty(h,"__esModule",{value:!0}),h.ConnectionTargetVisualizer=h.ConnectionTargetInfo=void 0;var v=d(3785),p=function(i,e){this.rect=i,this.strokeWidth=e,this.allowed=!0};h.ConnectionTargetInfo=p;var s=function(i){function e(t){return i.call(this,t)||this}return g(e,i),e.prototype.raiseShow=function(){var t=this,n=new p(this.targetRect,this.targetStrokeWidth);this.dispatcher.raise1(function(o){return o.notifyConnectionTargetShow(t.key,n)})},e.prototype.raiseHide=function(){this.dispatcher.raise1(function(t){return t.notifyConnectionTargetHide()})},e}(v.TargetVisualizerBase);h.ConnectionTargetVisualizer=s},9198:function(j,h,d){var u,g=this&&this.__extends||(u=function(i,e){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var o in n)n.hasOwnProperty(o)&&(t[o]=n[o])},u(i,e)},function(i,e){function t(){this.constructor=i}u(i,e),i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)});Object.defineProperty(h,"__esModule",{value:!0}),h.ContainerTargetVisualizer=h.ContainerTargetInfo=void 0;var v=d(3785),p=function(i,e){this.rect=i,this.strokeWidth=e};h.ContainerTargetInfo=p;var s=function(i){function e(t){return i.call(this,t)||this}return g(e,i),e.prototype.raiseShow=function(){var t=this,n=new p(this.targetRect,this.targetStrokeWidth);this.dispatcher.raise1(function(o){return o.notifyContainerTargetShow(t.key,n)})},e.prototype.raiseHide=function(){this.dispatcher.raise1(function(t){return t.notifyContainerTargetHide()})},e}(v.TargetVisualizerBase);h.ContainerTargetVisualizer=s},371:(j,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.ExtensionLinesVisualizer=h.ExtensionLine=h.ExtensionLineType=void 0,function(g){g[g.LeftToLeftAbove=0]="LeftToLeftAbove",g[g.LeftToLeftBelow=1]="LeftToLeftBelow",g[g.RightToRightAbove=2]="RightToRightAbove",g[g.RightToRightBelow=3]="RightToRightBelow",g[g.LeftToRightAbove=4]="LeftToRightAbove",g[g.LeftToRightBelow=5]="LeftToRightBelow",g[g.RightToLeftAbove=6]="RightToLeftAbove",g[g.RightToLeftBelow=7]="RightToLeftBelow",g[g.TopToTopBefore=8]="TopToTopBefore",g[g.TopToTopAfter=9]="TopToTopAfter",g[g.BottomToBottomBefore=10]="BottomToBottomBefore",g[g.BottomToBottomAfter=11]="BottomToBottomAfter",g[g.TopToBottomBefore=12]="TopToBottomBefore",g[g.TopToBottomAfter=13]="TopToBottomAfter",g[g.BottomToTopBefore=14]="BottomToTopBefore",g[g.BottomToTopAfter=15]="BottomToTopAfter",g[g.HorizontalCenterAbove=16]="HorizontalCenterAbove",g[g.HorizontalCenterBelow=17]="HorizontalCenterBelow",g[g.VerticalCenterBefore=18]="VerticalCenterBefore",g[g.VerticalCenterAfter=19]="VerticalCenterAfter",g[g.VerticalCenterToPageCenter=20]="VerticalCenterToPageCenter",g[g.HorizontalCenterToPageCenter=21]="HorizontalCenterToPageCenter",g[g.LeftToPageCenter=22]="LeftToPageCenter",g[g.RightToPageCenter=23]="RightToPageCenter",g[g.TopToPageCenter=24]="TopToPageCenter",g[g.BottomToPageCenter=25]="BottomToPageCenter"}(h.ExtensionLineType||(h.ExtensionLineType={}));var d=function(g,v,p){this.type=g,this.segment=v,this.text=p};h.ExtensionLine=d;var u=function(){function g(v){this.dispatcher=v,this.lines=[],this.lineIndexByType={}}return g.prototype.addSegment=function(v,p,s){var i=this.lineIndexByType[v];if(i===void 0){var e=new d(v,p,s),t=this.lines.push(e);this.lineIndexByType[e.type]=t-1,this.raiseShow()}else p.length<this.lines[i].segment.length&&(e=new d(v,p,s),this.lines.splice(i,1,e),this.raiseShow())},g.prototype.update=function(){this.raiseShow()},g.prototype.reset=function(){this.lines.length&&(this.lines=[],this.lineIndexByType={},this.raiseHide())},g.prototype.raiseShow=function(){var v=this;this.dispatcher.raise1(function(p){return p.notifyExtensionLinesShow(v.lines)})},g.prototype.raiseHide=function(){this.dispatcher.raise1(function(v){return v.notifyExtensionLinesHide()})},g}();h.ExtensionLinesVisualizer=u},6569:(j,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.ResizeInfoVisualizer=void 0;var d=function(){function u(g){this.dispatcher=g}return u.prototype.set=function(g,v){this.point=g,this.text=v,this.raiseShow()},u.prototype.reset=function(){this.point!==void 0&&(this.point=void 0,this.text=void 0,this.raiseHide())},u.prototype.raiseShow=function(){var g=this;this.dispatcher.raise1(function(v){return v.notifyResizeInfoShow(g.point,g.text)})},u.prototype.raiseHide=function(){this.dispatcher.raise1(function(g){return g.notifyResizeInfoHide()})},u}();h.ResizeInfoVisualizer=d},4753:(j,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.SelectionRectVisualizer=void 0;var d=function(){function u(g){this.dispatcher=g}return u.prototype.setRectangle=function(g){this.rect=g,this.raiseShow()},u.prototype.reset=function(){this.rect=void 0,this.raiseHide()},u.prototype.raiseShow=function(){var g=this;this.dispatcher.raise1(function(v){return v.notifySelectionRectShow(g.rect)})},u.prototype.raiseHide=function(){this.dispatcher.raise1(function(g){return g.notifySelectionRectHide()})},u}();h.SelectionRectVisualizer=d},3785:(j,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.TargetVisualizerBase=void 0;var d=function(){function u(g){this.dispatcher=g}return u.prototype.getKey=function(){return this.key},u.prototype.setTargetRect=function(g,v,p){this.key!==g&&(this.key=g,this.targetRect=v,this.targetStrokeWidth=p,this.raiseShow())},u.prototype.reset=function(){this.key!=="-1"&&(this.key="-1",this.targetRect=void 0,this.targetStrokeWidth=0,this.raiseHide())},u}();h.TargetVisualizerBase=d},7733:function(j,h,d){var u,g=this&&this.__extends||(u=function(C,I){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,b){x.__proto__=b}||function(x,b){for(var S in b)b.hasOwnProperty(S)&&(x[S]=b[S])},u(C,I)},function(C,I){function x(){this.constructor=C}u(C,I),C.prototype=I===null?Object.create(I):(x.prototype=I.prototype,new x)});Object.defineProperty(h,"__esModule",{value:!0}),h.VisualizerManager=void 0;var v=d(3702),p=d(9198),s=d(371),i=d(6031),e=d(3541),t=d(5503),n=d(8675),o=d(1335),r=d(8900),a=d(4e3),c=d(4867),f=d(6569),m=d(4753),y=d(1772),l=d(6224),P=function(C){function I(x,b,S,w,T){T===void 0&&(T=w.readOnly);var _=C.call(this)||this;return _.selection=x,_.model=b,_.eventManager=S,_.settings=w,_.readOnly=T,_.onVisualizersUpdate=new n.EventDispatcher,_.connectionPointsVisualizer=new e.ConnectionPointsVisualizer(_.onVisualizersUpdate),_.connectionPointsVisualizer=new e.ConnectionPointsVisualizer(_.onVisualizersUpdate),_.connectionTargetVisualizer=new v.ConnectionTargetVisualizer(_.onVisualizersUpdate),_.containerTargetVisualizer=new p.ContainerTargetVisualizer(_.onVisualizersUpdate),_.extensionLinesVisualizer=new s.ExtensionLinesVisualizer(_.onVisualizersUpdate),_.resizeInfoVisualizer=new f.ResizeInfoVisualizer(_.onVisualizersUpdate),_.selectionRectangleVisualizer=new m.SelectionRectVisualizer(_.onVisualizersUpdate),_}return g(I,C),I.prototype.initialize=function(x){this.model=x},I.prototype.onMouseDown=function(x){},I.prototype.onMouseUp=function(x){},I.prototype.onMouseEnter=function(x){},I.prototype.onMouseLeave=function(x){this.resetConnectionPoints(),this.resetConnectionTarget(),this.resetExtensionLines(),this.resetContainerTarget(),this.resetResizeInfo(),this.resetSelectionRectangle()},I.prototype.onBlur=function(x){},I.prototype.onFocus=function(x){},I.prototype.updateConnections=function(x,b,S){var w=-1;S&&b===i.MouseEventElementType.ShapeConnectionPoint&&(w=parseInt(S));var T=x&&(!x.allowResizeHorizontally&&!x.allowResizeVertically||x.isLocked);this.setConnectionPoints(x,b,w,T)},I.prototype.setConnectionPoints=function(x,b,S,w){if(this.eventManager.isFocused())if(!x||b!==i.MouseEventElementType.Shape&&b!==i.MouseEventElementType.ShapeResizeBox&&b!==i.MouseEventElementType.ShapeConnectionPoint||x===void 0)this.connectionPointsVisualizer.reset();else{var T=x.key,_=this.selection.hasKey(T),M=x.getConnectionPoints();this.connectionPointsVisualizer.setPoints(T,M.map(function(A){return new e.ConnectionPointInfo(A,x.getConnectionPointSide(A))}),S,_&&!w&&x.rectangle)}},I.prototype.setConnectionPointIndex=function(x){this.connectionPointsVisualizer.setPointIndex(x)},I.prototype.updateConnectionPoints=function(){this.model.findItem(this.connectionPointsVisualizer.getKey())!==void 0?this.connectionPointsVisualizer.update():this.connectionPointsVisualizer.reset()},I.prototype.resetConnectionPoints=function(){this.connectionPointsVisualizer.reset()},I.prototype.setConnectionTarget=function(x,b){!x||b!==i.MouseEventElementType.Shape&&b!==i.MouseEventElementType.ShapeConnectionPoint?this.connectionTargetVisualizer.reset():this.connectionTargetVisualizer.setTargetRect(x.key,x.rectangle,x.strokeWidth)},I.prototype.resetConnectionTarget=function(){this.connectionTargetVisualizer.reset()},I.prototype.setContainerTarget=function(x,b){x&&!x.isLocked&&b===i.MouseEventElementType.Shape&&x.enableChildren?this.containerTargetVisualizer.setTargetRect(x.key,x.rectangle,x.strokeWidth):this.containerTargetVisualizer.reset()},I.prototype.resetContainerTarget=function(){this.containerTargetVisualizer.reset()},I.prototype.setExtensionLines=function(x){var b=this;if(this.eventManager.isFocused()){this.extensionLinesVisualizer.reset();var S=c.ModelUtils.createRectangle(x.filter(function(w){return w}));this.addPageExtensionLines(S),this.model.items.forEach(function(w){x.indexOf(w)>-1||w instanceof t.Shape&&b.addShapeExtensionLines(w,S)})}},I.prototype.addPageExtensionLines=function(x){for(var b=Math.round(this.model.size.width/this.model.pageWidth),S=Math.round(this.model.size.height/this.model.pageHeight),w=0;w<b;w++)for(var T=0;T<S;T++){var _=new r.Point(w*this.model.pageWidth+this.model.pageWidth/2,T*this.model.pageHeight+this.model.pageHeight/2);if(Math.abs(x.center.x-_.x)<this.settings.gridSize/2){var M=new o.Segment(new r.Point(x.center.x,0),new r.Point(x.center.x,this.model.size.height));this.extensionLinesVisualizer.addSegment(s.ExtensionLineType.HorizontalCenterToPageCenter,M,"")}Math.abs(x.center.y-_.y)<this.settings.gridSize/2&&(M=new o.Segment(new r.Point(0,x.center.y),new r.Point(this.model.size.width,x.center.y)),this.extensionLinesVisualizer.addSegment(s.ExtensionLineType.VerticalCenterToPageCenter,M,"")),Math.abs(x.x-_.x)<this.settings.gridSize/2&&(M=new o.Segment(new r.Point(x.x,0),new r.Point(x.x,this.model.size.height)),this.extensionLinesVisualizer.addSegment(s.ExtensionLineType.LeftToPageCenter,M,"")),Math.abs(x.y-_.y)<this.settings.gridSize/2&&(M=new o.Segment(new r.Point(0,x.y),new r.Point(this.model.size.width,x.y)),this.extensionLinesVisualizer.addSegment(s.ExtensionLineType.TopToPageCenter,M,"")),Math.abs(x.right-_.x)<this.settings.gridSize/2&&(M=new o.Segment(new r.Point(x.right,0),new r.Point(x.right,this.model.size.height)),this.extensionLinesVisualizer.addSegment(s.ExtensionLineType.RightToPageCenter,M,"")),Math.abs(x.bottom-_.y)<this.settings.gridSize/2&&(M=new o.Segment(new r.Point(0,x.bottom),new r.Point(this.model.size.width,x.bottom)),this.extensionLinesVisualizer.addSegment(s.ExtensionLineType.BottomToPageCenter,M,""))}},I.prototype.addShapeExtensionLines=function(x,b){var S,w,T,_,M,A,E,U,R=x.rectangle,O=x.strokeWidth-a.CanvasSelectionManager.extensionLineWidth,N=!0;if(b.right<R.x?(S=b.right,T=R.x,M=S+O+a.CanvasSelectionManager.extensionLineOffset,E=T-a.CanvasSelectionManager.extensionLineOffset):b.x>R.right&&(S=b.x,T=R.right,M=S-a.CanvasSelectionManager.extensionLineOffset,E=T+O+a.CanvasSelectionManager.extensionLineOffset),b.bottom<R.y?(w=b.bottom,_=R.y,A=w+O+a.CanvasSelectionManager.extensionLineOffset,U=_-a.CanvasSelectionManager.extensionLineOffset):b.y>R.bottom&&(w=b.y,_=R.bottom,A=w-a.CanvasSelectionManager.extensionLineOffset,U=_+O+a.CanvasSelectionManager.extensionLineOffset),M!==void 0&&E!==void 0){var V=this.getViewUnitText(Math.abs(S-T));if(b.center.y===R.center.y){var H=new o.Segment(new r.Point(M,b.center.y),new r.Point(E,R.center.y));this.extensionLinesVisualizer.addSegment(M>E?s.ExtensionLineType.VerticalCenterAfter:s.ExtensionLineType.VerticalCenterBefore,H,N?V:""),N=!1}b.y===R.y&&(H=new o.Segment(new r.Point(M,b.y),new r.Point(E,R.y)),this.extensionLinesVisualizer.addSegment(M>E?s.ExtensionLineType.TopToTopAfter:s.ExtensionLineType.TopToTopBefore,H,N?V:"")),b.bottom===R.bottom&&(H=new o.Segment(new r.Point(M,b.bottom+O),new r.Point(E,R.bottom+O)),this.extensionLinesVisualizer.addSegment(M>E?s.ExtensionLineType.BottomToBottomAfter:s.ExtensionLineType.BottomToBottomBefore,H,N?V:"")),b.y===R.bottom&&(H=new o.Segment(new r.Point(M,b.y),new r.Point(E,R.bottom+O)),this.extensionLinesVisualizer.addSegment(M>E?s.ExtensionLineType.TopToBottomAfter:s.ExtensionLineType.TopToBottomBefore,H,N?V:"")),b.bottom===R.y&&(H=new o.Segment(new r.Point(M,b.bottom+O),new r.Point(E,R.y)),this.extensionLinesVisualizer.addSegment(M>E?s.ExtensionLineType.BottomToTopAfter:s.ExtensionLineType.BottomToTopBefore,H,N?V:""))}A!==void 0&&U!==void 0&&(V=this.getViewUnitText(Math.abs(w-_)),b.center.x===R.center.x&&(H=new o.Segment(new r.Point(b.center.x,A),new r.Point(R.center.x,U)),this.extensionLinesVisualizer.addSegment(A>U?s.ExtensionLineType.HorizontalCenterBelow:s.ExtensionLineType.HorizontalCenterAbove,H,N?V:""),N=!1),b.x===R.x&&(H=new o.Segment(new r.Point(b.x,A),new r.Point(R.x,U)),this.extensionLinesVisualizer.addSegment(A>U?s.ExtensionLineType.LeftToLeftBelow:s.ExtensionLineType.LeftToLeftAbove,H,N?V:"")),b.right===R.right&&(H=new o.Segment(new r.Point(b.right+O,A),new r.Point(R.right+O,U)),this.extensionLinesVisualizer.addSegment(A>U?s.ExtensionLineType.RightToRightBelow:s.ExtensionLineType.RightToRightAbove,H,N?V:"")),b.x===R.right&&(H=new o.Segment(new r.Point(b.x,A),new r.Point(R.right+O,U)),this.extensionLinesVisualizer.addSegment(A>U?s.ExtensionLineType.LeftToRightBelow:s.ExtensionLineType.LeftToRightAbove,H,N?V:"")),b.right===R.x&&(H=new o.Segment(new r.Point(b.right+O,A),new r.Point(R.x,U)),this.extensionLinesVisualizer.addSegment(A>U?s.ExtensionLineType.RightToLeftBelow:s.ExtensionLineType.RightToLeftAbove,H,N?V:"")))},I.prototype.resetExtensionLines=function(){this.extensionLinesVisualizer.reset()},I.prototype.setResizeInfo=function(x){var b=c.ModelUtils.createRectangle(x),S=new r.Point(b.center.x,b.bottom+a.CanvasSelectionManager.resizeInfoOffset),w=this.getViewUnitText(b.width)+" x "+this.getViewUnitText(b.height);this.resizeInfoVisualizer.set(S,w)},I.prototype.resetResizeInfo=function(){this.resizeInfoVisualizer.reset()},I.prototype.setSelectionRectangle=function(x){this.selectionRectangleVisualizer.setRectangle(x)},I.prototype.resetSelectionRectangle=function(){this.selectionRectangleVisualizer.reset()},I.prototype.getViewUnitText=function(x){return c.ModelUtils.getUnitText(this.settings.viewUnits,l.DiagramLocalizationService.unitItems,l.DiagramLocalizationService.formatUnit,x)},I.prototype.notifyReadOnlyChanged=function(x){this.readOnly=x,this.readOnly&&(this.resetConnectionPoints(),this.resetConnectionTarget(),this.resetExtensionLines(),this.resetContainerTarget(),this.resetResizeInfo(),this.resetSelectionRectangle())},I.prototype.notifyDragStart=function(x){},I.prototype.notifyDragEnd=function(x){},I.prototype.notifyDragScrollStart=function(){},I.prototype.notifyDragScrollEnd=function(){},I.prototype.onUpdateUnlocked=function(x){},I}(y.BatchUpdatableObject);h.VisualizerManager=P},7459:function(j,h,d){var u,g=this&&this.__extends||(u=function(i,e){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var o in n)n.hasOwnProperty(o)&&(t[o]=n[o])},u(i,e)},function(i,e){function t(){this.constructor=i}u(i,e),i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)});Object.defineProperty(h,"__esModule",{value:!0}),h.VisualizerTouchManager=void 0;var v=d(7733),p=d(6031),s=function(i){function e(t,n,o,r,a){a===void 0&&(a=r.readOnly);var c=i.call(this,t,n,o,r,a)||this;return t.onChanged.add(c),c}return g(e,i),e.prototype.onBlur=function(t){var n=this;setTimeout(function(){n.hideConnections()},1)},e.prototype.onFocus=function(t){var n=this;setTimeout(function(){n.showConnections()},1)},e.prototype.hideConnections=function(){this.readOnly||this.resetConnectionPoints()},e.prototype.showConnections=function(){if(!this.readOnly&&this.needShowConnections()){var t=this.selection.getSelectedShapes();t.length===1&&this.setConnectionPoints(t[0],p.MouseEventElementType.ShapeConnectionPoint,-1,!t[0].allowResizeHorizontally&&!t[0].allowResizeVertically||t[0].isLocked)}},e.prototype.needShowConnections=function(){var t=this.selection.getSelectedItems(),n=this.selection.getSelectedShapes();return t.length===1&&n.length===1},e.prototype.notifySelectionChanged=function(t){this.isUpdateLocked()?this.registerOccurredEvent(1):this.raiseSelectionChanged()},e.prototype.raiseSelectionChanged=function(){this.needShowConnections()?this.showConnections():this.hideConnections()},e.prototype.onUpdateUnlocked=function(t){1&t&&this.raiseSelectionChanged()},e.prototype.notifyDragStart=function(t){this.hideConnections()},e.prototype.notifyDragEnd=function(t){this.showConnections()},e}(v.VisualizerManager);h.VisualizerTouchManager=s},3477:function(j,h,d){var u,g=this&&this.__extends||(u=function(e,t){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var r in o)o.hasOwnProperty(r)&&(n[r]=o[r])},u(e,t)},function(e,t){function n(){this.constructor=e}u(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(h,"__esModule",{value:!0}),h.SetConnectionPointIndexHistoryItem=h.AddConnectionHistoryItem=void 0;var v=d(4412),p=d(7959),s=function(e){function t(n,o,r,a){var c=e.call(this)||this;return c.connectorKey=n.key,c.itemKey=o.key,c.connectionPointIndex=r,c.position=a,c}return g(t,e),t.prototype.redo=function(n){var o=n.model.findConnector(this.connectorKey),r=n.model.findItem(this.itemKey);n.addConnection(o,r,this.connectionPointIndex,this.position)},t.prototype.undo=function(n){var o=n.model.findConnector(this.connectorKey);n.deleteConnection(o,this.position)},t}(v.HistoryItem);h.AddConnectionHistoryItem=s;var i=function(e){function t(n,o,r){var a=e.call(this)||this;return a.connectorKey=n.key,a.connectionPointIndex=o,a.position=r,a}return g(t,e),t.prototype.redo=function(n){var o=n.model.findConnector(this.connectorKey);this.oldConnectionPointIndex=this.position===p.ConnectorPosition.Begin?o.beginConnectionPointIndex:o.endConnectionPointIndex,n.setConnectionPointIndex(o,this.connectionPointIndex,this.position)},t.prototype.undo=function(n){var o=n.model.findConnector(this.connectorKey);n.setConnectionPointIndex(o,this.oldConnectionPointIndex,this.position)},t}(v.HistoryItem);h.SetConnectionPointIndexHistoryItem=i},9603:function(j,h,d){var u,g=this&&this.__extends||(u=function(i,e){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var o in n)n.hasOwnProperty(o)&&(t[o]=n[o])},u(i,e)},function(i,e){function t(){this.constructor=i}u(i,e),i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)});Object.defineProperty(h,"__esModule",{value:!0}),h.AddConnectorHistoryItem=void 0;var v=d(4412),p=d(7959),s=function(i){function e(t,n,o){var r=i.call(this)||this;return r.points=t,r.dataKey=n,r.renderPointsContext=o,r}return g(e,i),e.prototype.redo=function(t){var n=new p.Connector(this.points);this.dataKey!==void 0&&(n.dataKey=this.dataKey),this.renderPointsContext!==void 0&&n.replaceRenderPoints(this.renderPointsContext),t.addConnector(n,this.connectorKey),this.connectorKey=n.key},e.prototype.undo=function(t){var n=t.model.findConnector(this.connectorKey);t.deleteConnector(n)},e}(v.HistoryItem);h.AddConnectorHistoryItem=s},4430:function(j,h,d){var u,g=this&&this.__extends||(u=function(p,s){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t])},u(p,s)},function(p,s){function i(){this.constructor=p}u(p,s),p.prototype=s===null?Object.create(s):(i.prototype=s.prototype,new i)});Object.defineProperty(h,"__esModule",{value:!0}),h.AddConnectorPointHistoryItem=void 0;var v=function(p){function s(i,e,t){var n=p.call(this)||this;return n.connectorKey=i,n.pointIndex=e,n.point=t,n}return g(s,p),s.prototype.redo=function(i){var e=this,t=i.model.findConnector(this.connectorKey);this.renderContext=t.tryCreateRenderPointsContext(),i.addDeleteConnectorPoint(t,function(n){n.addPoint(e.pointIndex,e.point),n.onAddPoint(e.pointIndex,e.point)})},s.prototype.undo=function(i){var e=this,t=i.model.findConnector(this.connectorKey);i.addDeleteConnectorPoint(t,function(n){n.deletePoint(e.pointIndex),n.replaceRenderPoints(e.renderContext)})},s}(d(4412).HistoryItem);h.AddConnectorPointHistoryItem=v},4145:function(j,h,d){var u,g=this&&this.__extends||(u=function(i,e){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var o in n)n.hasOwnProperty(o)&&(t[o]=n[o])},u(i,e)},function(i,e){function t(){this.constructor=i}u(i,e),i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)});Object.defineProperty(h,"__esModule",{value:!0}),h.AddShapeHistoryItem=void 0;var v=d(4412),p=d(5503),s=function(i){function e(t,n,o,r){var a=i.call(this)||this;return a.shapeDescription=t,a.position=n,a.text=o,a.dataKey=r,a}return g(e,i),e.prototype.redo=function(t){var n=new p.Shape(this.shapeDescription,this.position);typeof this.text=="string"&&(n.text=this.text),this.dataKey!==void 0&&(n.dataKey=this.dataKey),t.addShape(n,this.shapeKey),this.shapeKey=n.key},e.prototype.undo=function(t){t.deleteShape(t.model.findShape(this.shapeKey),!0)},e}(v.HistoryItem);h.AddShapeHistoryItem=s},58:function(j,h,d){var u,g=this&&this.__extends||(u=function(i,e){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var o in n)n.hasOwnProperty(o)&&(t[o]=n[o])},u(i,e)},function(i,e){function t(){this.constructor=i}u(i,e),i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)});Object.defineProperty(h,"__esModule",{value:!0}),h.ReplaceConnectorPointsHistoryItem=h.ChangeConnectorPointsHistoryItem=h.UpdateConnectorPointsHistoryItem=void 0;var v=function(i){function e(t,n){var o=i.call(this)||this;return o.connectorKey=t,o.newPoints=n,o}return g(e,i),e.prototype.redo=function(t){var n=this,o=t.model.findConnector(this.connectorKey);this.oldRenderContext=o.tryCreateRenderPointsContext(),this.oldPoints=o.points.map(function(r){return r.clone()}),t.changeConnectorPoints(o,function(r){r.points=n.newPoints,n.updateRenderPoints(r)})},e.prototype.undo=function(t){var n=this,o=t.model.findConnector(this.connectorKey);t.changeConnectorPoints(o,function(r){r.points=n.oldPoints,r.replaceRenderPoints(n.oldRenderContext)})},e}(d(4412).HistoryItem);h.UpdateConnectorPointsHistoryItem=v;var p=function(i){function e(t,n,o){var r=i.call(this,t,n)||this;return r.connectorKey=t,r.newPoints=n,r.newRenderContext=o,r}return g(e,i),e.prototype.updateRenderPoints=function(t){t.replaceRenderPoints(this.newRenderContext)},e}(v);h.ChangeConnectorPointsHistoryItem=p;var s=function(i){function e(t,n){var o=i.call(this,t,n)||this;return o.connectorKey=t,o.newPoints=n,o}return g(e,i),e.prototype.updateRenderPoints=function(t){t.clearRenderPoints()},e}(v);h.ReplaceConnectorPointsHistoryItem=s},329:function(j,h,d){var u,g=this&&this.__extends||(u=function(p,s){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t])},u(p,s)},function(p,s){function i(){this.constructor=p}u(p,s),p.prototype=s===null?Object.create(s):(i.prototype=s.prototype,new i)});Object.defineProperty(h,"__esModule",{value:!0}),h.ChangeShapeParametersHistoryItem=void 0;var v=function(p){function s(i,e){var t=p.call(this)||this;return t.shapeKey=i,t.parameters=e,t}return g(s,p),s.prototype.redo=function(i){var e=i.model.findShape(this.shapeKey);this.oldParameters=e.parameters.clone(),i.changeShapeParameters(e,this.parameters)},s.prototype.undo=function(i){var e=i.model.findShape(this.shapeKey);i.changeShapeParameters(e,this.oldParameters)},s}(d(4412).HistoryItem);h.ChangeShapeParametersHistoryItem=v},56:function(j,h,d){var u,g=this&&this.__extends||(u=function(s,i){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},u(s,i)},function(s,i){function e(){this.constructor=s}u(s,i),s.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)});Object.defineProperty(h,"__esModule",{value:!0}),h.ChangeShapeTypeHistoryItem=void 0;var v=d(6629),p=function(s){function i(e,t){var n=s.call(this)||this;return n.shapeKey=e.key,n.newType=t,n}return g(i,s),i.prototype.redo=function(e){var t=e.model.findShape(this.shapeKey);this.oldType=t.description.key,this.oldParameters=t.parameters.clone(),e.updateShapeType(t,this.newType,new v.ShapeParameters)},i.prototype.undo=function(e){var t=e.model.findShape(this.shapeKey);e.updateShapeType(t,this.oldType,this.oldParameters)},i}(d(4412).HistoryItem);h.ChangeShapeTypeHistoryItem=p},8930:function(j,h,d){var u,g=this&&this.__extends||(u=function(i,e){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var o in n)n.hasOwnProperty(o)&&(t[o]=n[o])},u(i,e)},function(i,e){function t(){this.constructor=i}u(i,e),i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)});Object.defineProperty(h,"__esModule",{value:!0}),h.DeleteConnectionHistoryItem=void 0;var v=d(4412),p=d(7959),s=function(i){function e(t,n){var o=i.call(this)||this;return o.connectorKey=t.key,o.position=n,o.itemKey=t.getExtremeItem(o.position).key,o}return g(e,i),e.prototype.redo=function(t){var n=t.model.findConnector(this.connectorKey);this.oldConnectionPointIndex=this.position===p.ConnectorPosition.Begin?n.beginConnectionPointIndex:n.endConnectionPointIndex,t.deleteConnection(n,this.position)},e.prototype.undo=function(t){var n=t.model.findConnector(this.connectorKey),o=t.model.findItem(this.itemKey);t.addConnection(n,o,this.oldConnectionPointIndex,this.position)},e}(v.HistoryItem);h.DeleteConnectionHistoryItem=s},9143:function(j,h,d){var u,g=this&&this.__extends||(u=function(p,s){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t])},u(p,s)},function(p,s){function i(){this.constructor=p}u(p,s),p.prototype=s===null?Object.create(s):(i.prototype=s.prototype,new i)});Object.defineProperty(h,"__esModule",{value:!0}),h.DeleteConnectorHistoryItem=void 0;var v=function(p){function s(i){var e=p.call(this)||this;return e.connectorKey=i,e}return g(s,p),s.prototype.redo=function(i){var e=i.model.findConnector(this.connectorKey);this.connector=e.clone(),i.deleteConnector(e)},s.prototype.undo=function(i){i.addConnector(this.connector,this.connector.key)},s}(d(4412).HistoryItem);h.DeleteConnectorHistoryItem=v},1704:function(j,h,d){var u,g=this&&this.__extends||(u=function(p,s){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t])},u(p,s)},function(p,s){function i(){this.constructor=p}u(p,s),p.prototype=s===null?Object.create(s):(i.prototype=s.prototype,new i)});Object.defineProperty(h,"__esModule",{value:!0}),h.DeleteShapeHistoryItem=void 0;var v=function(p){function s(i,e){e===void 0&&(e=!0);var t=p.call(this)||this;return t.shapeKey=i,t.allowed=e,t}return g(s,p),s.prototype.redo=function(i){var e=i.model.findShape(this.shapeKey);this.shape=e.clone(),i.deleteShape(e,this.allowed)},s.prototype.undo=function(i){i.addShape(this.shape,this.shape.key)},s}(d(4412).HistoryItem);h.DeleteShapeHistoryItem=v},3849:function(j,h,d){var u,g=this&&this.__extends||(u=function(p,s){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t])},u(p,s)},function(p,s){function i(){this.constructor=p}u(p,s),p.prototype=s===null?Object.create(s):(i.prototype=s.prototype,new i)});Object.defineProperty(h,"__esModule",{value:!0}),h.ImportConnectorHistoryItem=void 0;var v=function(p){function s(i){var e=p.call(this)||this;return e.connector=i,e}return g(s,p),s.prototype.redo=function(i){this.connectorKey=this.connector.key,i.insertConnector(this.connector)},s.prototype.undo=function(i){var e=i.model.findConnector(this.connectorKey);i.removeConnector(e)},s}(d(4412).HistoryItem);h.ImportConnectorHistoryItem=v},4383:function(j,h,d){var u,g=this&&this.__extends||(u=function(p,s){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t])},u(p,s)},function(p,s){function i(){this.constructor=p}u(p,s),p.prototype=s===null?Object.create(s):(i.prototype=s.prototype,new i)});Object.defineProperty(h,"__esModule",{value:!0}),h.ImportShapeHistoryItem=void 0;var v=function(p){function s(i){var e=p.call(this)||this;return e.shape=i,e}return g(s,p),s.prototype.redo=function(i){this.shapeKey=this.shape.key,i.insertShape(this.shape)},s.prototype.undo=function(i){i.removeShape(i.model.findShape(this.shapeKey),!0)},s}(d(4412).HistoryItem);h.ImportShapeHistoryItem=v},9310:function(j,h,d){var u,g=this&&this.__extends||(u=function(p,s){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t])},u(p,s)},function(p,s){function i(){this.constructor=p}u(p,s),p.prototype=s===null?Object.create(s):(i.prototype=s.prototype,new i)});Object.defineProperty(h,"__esModule",{value:!0}),h.InsertToContainerHistoryItem=void 0;var v=function(p){function s(i,e){var t=p.call(this)||this;return t.containerKey=e.key,t.itemKey=i.key,t}return g(s,p),s.prototype.redo=function(i){var e=i.model.findItem(this.itemKey),t=i.model.findShape(this.containerKey);i.insertToContainer(e,t)},s.prototype.undo=function(i){var e=i.model.findItem(this.itemKey);i.removeFromContainer(e)},s}(d(4412).HistoryItem);h.InsertToContainerHistoryItem=v},8338:function(j,h,d){var u,g=this&&this.__extends||(u=function(e,t){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var r in o)o.hasOwnProperty(r)&&(n[r]=o[r])},u(e,t)},function(e,t){function n(){this.constructor=e}u(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(h,"__esModule",{value:!0}),h.MoveConnectorRightAnglePointsHistoryItem=h.MoveConnectorPointHistoryItem=void 0;var v=d(8900),p=d(4412),s=function(e){function t(n,o,r){var a=e.call(this)||this;return a.connectorKey=n,a.pointIndex=o,a.newPoint=r,a}return g(t,e),t.prototype.redo=function(n){var o=this,r=n.model.findConnector(this.connectorKey);this.oldPoint=r.points[this.pointIndex].clone(),this.renderContext=r.tryCreateRenderPointsContext(),n.moveConnectorPoint(r,this.pointIndex,function(a){a.movePoint(o.pointIndex,o.newPoint),a.onMovePoint(o.pointIndex,o.newPoint)})},t.prototype.undo=function(n){var o=this,r=n.model.findConnector(this.connectorKey);n.moveConnectorPoint(r,this.pointIndex,function(a){a.movePoint(o.pointIndex,o.oldPoint),a.replaceRenderPoints(o.renderContext)})},t}(p.HistoryItem);h.MoveConnectorPointHistoryItem=s;var i=function(e){function t(n,o,r,a,c){var f=e.call(this)||this;return f.connectorKey=n,f.beginPointIndex=o,f.lastPointIndex=r,f.newX=a,f.newY=c,f.oldPoints=[],f}return g(t,e),t.prototype.redo=function(n){var o=this,r=n.model.findConnector(this.connectorKey);this.renderContext=r.tryCreateRenderPointsContext(),this.oldPoints=r.points.slice(this.beginPointIndex,this.lastPointIndex+1).map(function(c){return c.clone()});var a=[];n.changeConnectorPoints(r,function(c){for(var f=o.beginPointIndex;f<=o.lastPointIndex;f++){var m=new v.Point(o.newX===void 0?c.points[f].x:o.newX,o.newY===void 0?c.points[f].y:o.newY);a.push(m),c.movePoint(f,m)}c.onMovePoints(o.beginPointIndex,o.lastPointIndex,a)})},t.prototype.undo=function(n){var o=this,r=n.model.findConnector(this.connectorKey);n.changeConnectorPoints(r,function(a){for(var c=o.beginPointIndex;c<=o.lastPointIndex;c++)a.movePoint(c,o.oldPoints[c-o.beginPointIndex]);a.replaceRenderPoints(o.renderContext)})},t}(p.HistoryItem);h.MoveConnectorRightAnglePointsHistoryItem=i},4160:function(j,h,d){var u,g=this&&this.__extends||(u=function(p,s){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t])},u(p,s)},function(p,s){function i(){this.constructor=p}u(p,s),p.prototype=s===null?Object.create(s):(i.prototype=s.prototype,new i)});Object.defineProperty(h,"__esModule",{value:!0}),h.MoveShapeHistoryItem=void 0;var v=function(p){function s(i,e){var t=p.call(this)||this;return t.shapeKey=i,t.position=e,t}return g(s,p),s.prototype.redo=function(i){var e=i.model.findShape(this.shapeKey);this.oldPosition=e.position.clone(),i.moveShape(e,this.position)},s.prototype.undo=function(i){var e=i.model.findShape(this.shapeKey);i.moveShape(e,this.oldPosition)},s}(d(4412).HistoryItem);h.MoveShapeHistoryItem=v},9753:function(j,h,d){var u,g=this&&this.__extends||(u=function(p,s){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t])},u(p,s)},function(p,s){function i(){this.constructor=p}u(p,s),p.prototype=s===null?Object.create(s):(i.prototype=s.prototype,new i)});Object.defineProperty(h,"__esModule",{value:!0}),h.RemoveFromContainerHistoryItem=void 0;var v=function(p){function s(i){var e=p.call(this)||this;return e.itemKey=i.key,e}return g(s,p),s.prototype.redo=function(i){var e=i.model.findItem(this.itemKey);this.containerKey=e.container&&e.container.key,i.removeFromContainer(e)},s.prototype.undo=function(i){var e=i.model.findContainer(this.containerKey),t=i.model.findItem(this.itemKey);i.insertToContainer(t,e)},s}(d(4412).HistoryItem);h.RemoveFromContainerHistoryItem=v},4629:function(j,h,d){var u,g=this&&this.__extends||(u=function(p,s){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t])},u(p,s)},function(p,s){function i(){this.constructor=p}u(p,s),p.prototype=s===null?Object.create(s):(i.prototype=s.prototype,new i)});Object.defineProperty(h,"__esModule",{value:!0}),h.ResizeShapeHistoryItem=void 0;var v=function(p){function s(i,e,t){var n=p.call(this)||this;return n.shapeKey=i,n.position=e,n.size=t,n}return g(s,p),s.prototype.redo=function(i){var e=i.model.findShape(this.shapeKey);this.oldPosition=e.position.clone(),this.oldSize=e.size.clone(),i.resizeShape(e,this.position,this.size)},s.prototype.undo=function(i){var e=i.model.findShape(this.shapeKey);i.resizeShape(e,this.oldPosition,this.oldSize)},s}(d(4412).HistoryItem);h.ResizeShapeHistoryItem=v},7626:function(j,h,d){var u,g=this&&this.__extends||(u=function(i,e){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var o in n)n.hasOwnProperty(o)&&(t[o]=n[o])},u(i,e)},function(i,e){function t(){this.constructor=i}u(i,e),i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)});Object.defineProperty(h,"__esModule",{value:!0}),h.ScrollIntoViewOnUndoHistoryItem=h.ScrollIntoViewOnRedoHistoryItem=void 0;var v=d(4412),p=function(i){function e(t,n){var o=i.call(this)||this;return o.view=t,o.rectangle=n,o.view=t,o.rectangle=n.clone(),o}return g(e,i),e.prototype.redo=function(t){this.view.scrollIntoView(this.rectangle)},e.prototype.undo=function(t){},e}(v.HistoryItem);h.ScrollIntoViewOnRedoHistoryItem=p;var s=function(i){function e(t,n){var o=i.call(this)||this;return o.view=t,o.rectangle=n,o.view=t,o.rectangle=n.clone(),o}return g(e,i),e.prototype.redo=function(t){},e.prototype.undo=function(t){this.view.scrollIntoView(this.rectangle)},e}(v.HistoryItem);h.ScrollIntoViewOnUndoHistoryItem=s},4297:function(j,h,d){var u,g=this&&this.__extends||(u=function(p,s){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t])},u(p,s)},function(p,s){function i(){this.constructor=p}u(p,s),p.prototype=s===null?Object.create(s):(i.prototype=s.prototype,new i)});Object.defineProperty(h,"__esModule",{value:!0}),h.SetSelectionHistoryItem=void 0;var v=function(p){function s(i,e,t){var n=p.call(this)||this;return n.selectedKeys=e,n.selection=i,n.forceChange=t,n}return g(s,p),s.prototype.redo=function(){this.oldSelection=this.selection.getKeys().slice(0),this.selection.set(this.selectedKeys,this.forceChange)},s.prototype.undo=function(){this.selection.set(this.oldSelection,this.forceChange)},s}(d(4412).HistoryItem);h.SetSelectionHistoryItem=v},1864:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.History=void 0;var u=d(4412),g=d(8675),v=function(){function p(s,i){this.modelManipulator=s,this.diagram=i,this.historyItems=[],this.currentIndex=-1,this.incrementalId=-1,this.transactionLevel=-1,this.unmodifiedIndex=-1,this.currTransactionId=0,this.onChanged=new g.EventDispatcher}return p.prototype.isModified=function(){if(this.unmodifiedIndex===this.currentIndex)return!1;for(var s=Math.min(this.unmodifiedIndex,this.currentIndex),i=Math.max(this.unmodifiedIndex,this.currentIndex),e=s+1;e<=i;e++)if(this.historyItems[e].changeModified())return!0;return!1},p.prototype.undo=function(){this.canUndo()&&(this.historyItems[this.currentIndex].undo(this.modelManipulator),this.currentIndex--,this.raiseChanged())},p.prototype.redo=function(){this.canRedo()&&(this.startDataSyncItem&&(this.startDataSyncItem.undo(this.modelManipulator),this.startDataSyncItem=void 0),this.currentIndex++,this.historyItems[this.currentIndex].redo(this.modelManipulator),this.raiseChanged())},p.prototype.canUndo=function(){return this.currentIndex>=0},p.prototype.canRedo=function(){return this.currentIndex<this.historyItems.length-1},p.prototype.beginTransaction=function(){return this.transactionLevel++,this.transactionLevel===0&&(this.transaction=new u.CompositionHistoryItem),this.currTransactionId++},p.prototype.endTransaction=function(s){if(!(--this.transactionLevel>=0)){var i=this.transaction.historyItems.length;if(i>0){var e=i>1?this.transaction:this.transaction.historyItems.pop();s?this.addDataSyncItem(e):this.addInternal(e)}i>0&&!s&&this.raiseChanged(),delete this.transaction}},p.prototype.addAndRedo=function(s){this.add(s),s.redo(this.modelManipulator),this.raiseChanged()},p.prototype.add=function(s){this.transactionLevel>=0?this.transaction.add(s):this.addInternal(s)},p.prototype.addInternal=function(s){this.currentIndex<this.historyItems.length-1&&(this.historyItems.splice(this.currentIndex+1),this.unmodifiedIndex=Math.min(this.unmodifiedIndex,this.currentIndex)),this.historyItems.push(s),this.currentIndex++,this.deleteOldItems()},p.prototype.addDataSyncItem=function(s){var i=this.historyItems[this.currentIndex];if(i){var e=void 0;i instanceof u.CompositionHistoryItem?e=i:(this.historyItems.splice(this.currentIndex,1),e=new u.CompositionHistoryItem,this.historyItems.push(e),e.historyItems.push(i)),e.dataSyncItems.push(s)}else this.historyItems.length&&(this.startDataSyncItem=s)},p.prototype.deleteOldItems=function(){var s=this.historyItems.length-p.MAX_HISTORY_ITEM_COUNT;s>0&&this.currentIndex>s&&(this.historyItems.splice(0,s),this.currentIndex-=s)},p.prototype.getNextId=function(){return this.incrementalId++,this.incrementalId},p.prototype.clear=function(){this.currentIndex=-1,this.unmodifiedIndex=-1,this.incrementalId=-1,this.historyItems=[],delete this.transaction,this.transactionLevel=-1},p.prototype.resetModified=function(){this.unmodifiedIndex=this.currentIndex},p.prototype.getCurrentItemId=function(){if(this.currentIndex===-1)return-1;var s=this.historyItems[this.currentIndex];return s.uniqueId===-1&&(s.uniqueId=this.getNextId()),s.uniqueId},p.prototype.undoTransaction=function(){this.diagram.beginUpdateCanvas();for(var s=this.transaction.historyItems;s.length;)s.pop().undo(this.modelManipulator);this.diagram.endUpdateCanvas()},p.prototype.undoTransactionTo=function(s){this.diagram.beginUpdateCanvas();for(var i=this.transaction.historyItems;i.length;){var e=i.pop();if(e.undo(this.modelManipulator),e===s)break}this.diagram.endUpdateCanvas()},p.prototype.raiseChanged=function(){this.transactionLevel===-1&&this.onChanged.raise("notifyHistoryChanged")},p.MAX_HISTORY_ITEM_COUNT=100,p}();h.History=v},4412:function(j,h){var d,u=this&&this.__extends||(d=function(p,s){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t])},d(p,s)},function(p,s){function i(){this.constructor=p}d(p,s),p.prototype=s===null?Object.create(s):(i.prototype=s.prototype,new i)});Object.defineProperty(h,"__esModule",{value:!0}),h.CompositionHistoryItem=h.HistoryItem=void 0;var g=function(){function p(){this.uniqueId=-1}return p.prototype.changeModified=function(){return!0},p.prototype.getName=function(){return this.constructor.name},p}();h.HistoryItem=g;var v=function(p){function s(){var i=p!==null&&p.apply(this,arguments)||this;return i.historyItems=[],i.dataSyncItems=[],i}return u(s,p),s.prototype.changeModified=function(){for(var i,e=0;i=this.historyItems[e];e++)if(i.changeModified())return!0;return!1},s.prototype.redo=function(i){for(var e,t=0;e=this.historyItems[t];t++)e.redo(i)},s.prototype.undo=function(i){for(var e,t=this.dataSyncItems.length-1;e=this.dataSyncItems[t];t--)e.undo(i);for(this.dataSyncItems=[],t=this.historyItems.length-1;e=this.historyItems[t];t--)e.undo(i)},s.prototype.add=function(i){if(i==null)throw new Error("cannot be null");this.historyItems.push(i)},s}(g);h.CompositionHistoryItem=v},7195:function(j,h,d){var u,g=this&&this.__extends||(u=function(p,s){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t])},u(p,s)},function(p,s){function i(){this.constructor=p}u(p,s),p.prototype=s===null?Object.create(s):(i.prototype=s.prototype,new i)});Object.defineProperty(h,"__esModule",{value:!0}),h.ChangePageColorHistoryItem=void 0;var v=function(p){function s(i){var e=p.call(this)||this;return e.value=i,e}return g(s,p),s.prototype.redo=function(i){this.oldValue=i.model.pageColor,i.changePageColor(this.value)},s.prototype.undo=function(i){i.changePageColor(this.oldValue)},s}(d(4412).HistoryItem);h.ChangePageColorHistoryItem=v},1380:function(j,h,d){var u,g=this&&this.__extends||(u=function(p,s){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t])},u(p,s)},function(p,s){function i(){this.constructor=p}u(p,s),p.prototype=s===null?Object.create(s):(i.prototype=s.prototype,new i)});Object.defineProperty(h,"__esModule",{value:!0}),h.ChangePageLandscapeHistoryItem=void 0;var v=function(p){function s(i){var e=p.call(this)||this;return e.value=i,e}return g(s,p),s.prototype.redo=function(i){this.oldValue=i.model.pageLandscape,i.changePageLandscape(this.value)},s.prototype.undo=function(i){i.changePageLandscape(this.oldValue)},s}(d(4412).HistoryItem);h.ChangePageLandscapeHistoryItem=v},1044:function(j,h,d){var u,g=this&&this.__extends||(u=function(p,s){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t])},u(p,s)},function(p,s){function i(){this.constructor=p}u(p,s),p.prototype=s===null?Object.create(s):(i.prototype=s.prototype,new i)});Object.defineProperty(h,"__esModule",{value:!0}),h.ChangePageSizeHistoryItem=void 0;var v=function(p){function s(i){var e=p.call(this)||this;return e.size=i,e}return g(s,p),s.prototype.redo=function(i){this.oldSize=i.model.pageSize,i.changePageSize(this.size)},s.prototype.undo=function(i){i.changePageSize(this.oldSize)},s}(d(4412).HistoryItem);h.ChangePageSizeHistoryItem=v},7479:function(j,h,d){var u,g=this&&this.__extends||(u=function(p,s){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t])},u(p,s)},function(p,s){function i(){this.constructor=p}u(p,s),p.prototype=s===null?Object.create(s):(i.prototype=s.prototype,new i)});Object.defineProperty(h,"__esModule",{value:!0}),h.ChangeUnitsHistoryItem=void 0;var v=function(p){function s(i){var e=p.call(this)||this;return e.units=i,e}return g(s,p),s.prototype.redo=function(i){this.oldUnits=i.model.units,i.model.units=this.units},s.prototype.undo=function(i){i.model.units=this.oldUnits},s}(d(4412).HistoryItem);h.ChangeUnitsHistoryItem=v},1729:function(j,h,d){var u,g=this&&this.__extends||(u=function(e,t){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var r in o)o.hasOwnProperty(r)&&(n[r]=o[r])},u(e,t)},function(e,t){function n(){this.constructor=e}u(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(h,"__esModule",{value:!0}),h.ModelResizeHistoryItem=void 0;var v=d(4412),p=d(4125),s=d(6353),i=function(e){function t(n){var o=e.call(this)||this;return o.offset=n,o}return g(t,e),t.prototype.redo=function(n){this.oldSize=n.model.size.clone(),this.backOffset=new p.Offsets(-this.offset.left,-this.offset.right,-this.offset.top,-this.offset.bottom);var o=Math.max(this.oldSize.width+this.offset.left+this.offset.right,n.model.pageWidth),r=Math.max(this.oldSize.height+this.offset.top+this.offset.bottom,n.model.pageHeight);n.changeModelSize(new s.Size(o,r),this.offset)},t.prototype.undo=function(n){n.changeModelSize(this.oldSize,this.backOffset)},t}(v.HistoryItem);h.ModelResizeHistoryItem=i},4518:function(j,h,d){var u,g=this&&this.__extends||(u=function(i,e){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var o in n)n.hasOwnProperty(o)&&(t[o]=n[o])},u(i,e)},function(i,e){function t(){this.constructor=i}u(i,e),i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)});Object.defineProperty(h,"__esModule",{value:!0}),h.UpdatePositionsOnPageResizeHistoryItem=void 0;var v=d(7959),p=d(5503),s=function(i){function e(t){var n=i.call(this)||this;return n.offset=t,n}return g(e,i),e.prototype.redo=function(t){var n=this;t.model.iterateItems(function(o){o instanceof p.Shape&&t.moveShape(o,n.applyOffset(o.position,n.offset.x,n.offset.y)),o instanceof v.Connector&&t.changeConnectorPoints(o,function(r){return r.updatePointsOnPageResize(n.offset.x,n.offset.y)})})},e.prototype.undo=function(t){var n=this;t.model.iterateItems(function(o){o instanceof p.Shape&&t.moveShape(o,n.applyOffset(o.position,-n.offset.x,-n.offset.y)),o instanceof v.Connector&&t.changeConnectorPoints(o,function(r){return r.updatePointsOnPageResize(-n.offset.x,-n.offset.y)})})},e.prototype.applyOffset=function(t,n,o){return t.clone().offset(n,o)},e}(d(4412).HistoryItem);h.UpdatePositionsOnPageResizeHistoryItem=s},8236:function(j,h,d){var u,g=this&&this.__extends||(u=function(p,s){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t])},u(p,s)},function(p,s){function i(){this.constructor=p}u(p,s),p.prototype=s===null?Object.create(s):(i.prototype=s.prototype,new i)});Object.defineProperty(h,"__esModule",{value:!0}),h.ChangeConnectorPropertyHistoryItem=void 0;var v=function(p){function s(i,e,t){var n=p.call(this)||this;return n.connectorKey=i,n.propertyName=e,n.value=t,n}return g(s,p),s.prototype.redo=function(i){var e=i.model.findConnector(this.connectorKey);this.oldValue=e.properties[this.propertyName],i.changeConnectorProperty(e,this.propertyName,this.value)},s.prototype.undo=function(i){var e=i.model.findConnector(this.connectorKey);i.changeConnectorProperty(e,this.propertyName,this.oldValue)},s}(d(4412).HistoryItem);h.ChangeConnectorPropertyHistoryItem=v},5144:function(j,h,d){var u,g=this&&this.__extends||(u=function(p,s){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t])},u(p,s)},function(p,s){function i(){this.constructor=p}u(p,s),p.prototype=s===null?Object.create(s):(i.prototype=s.prototype,new i)});Object.defineProperty(h,"__esModule",{value:!0}),h.ChangeConnectorTextHistoryItem=void 0;var v=function(p){function s(i,e,t){var n=p.call(this)||this;return n.connectorKey=i.key,n.text=t,n.position=e,n}return g(s,p),s.prototype.redo=function(i){var e=i.model.findConnector(this.connectorKey);this.oldText=e.getText(this.position),i.changeConnectorText(e,this.text,this.position)},s.prototype.undo=function(i){var e=i.model.findConnector(this.connectorKey);i.changeConnectorText(e,this.oldText,this.position)},s}(d(4412).HistoryItem);h.ChangeConnectorTextHistoryItem=v},45:function(j,h,d){var u,g=this&&this.__extends||(u=function(p,s){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t])},u(p,s)},function(p,s){function i(){this.constructor=p}u(p,s),p.prototype=s===null?Object.create(s):(i.prototype=s.prototype,new i)});Object.defineProperty(h,"__esModule",{value:!0}),h.ChangeConnectorTextPositionHistoryItem=void 0;var v=function(p){function s(i,e,t){var n=p.call(this)||this;return n.connectorKey=i.key,n.position=e,n.newPosition=t,n}return g(s,p),s.prototype.redo=function(i){var e=i.model.findConnector(this.connectorKey);i.changeConnectorTextPosition(e,this.position,this.newPosition)},s.prototype.undo=function(i){var e=i.model.findConnector(this.connectorKey);i.changeConnectorTextPosition(e,this.newPosition,this.position)},s}(d(4412).HistoryItem);h.ChangeConnectorTextPositionHistoryItem=v},9559:function(j,h,d){var u,g=this&&this.__extends||(u=function(i,e){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var o in n)n.hasOwnProperty(o)&&(t[o]=n[o])},u(i,e)},function(i,e){function t(){this.constructor=i}u(i,e),i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)});Object.defineProperty(h,"__esModule",{value:!0}),h.ChangeCustomDataHistoryItem=void 0;var v=d(4412),p=d(8675),s=function(i){function e(t,n){var o=i.call(this)||this;return o.itemKey=t,o.customData=p.ObjectUtils.cloneObject(n),o}return g(e,i),e.prototype.redo=function(t){var n=t.model.findItem(this.itemKey);this.oldCustomData=p.ObjectUtils.cloneObject(n.customData),t.changeCustomData(n,this.customData)},e.prototype.undo=function(t){var n=t.model.findItem(this.itemKey);t.changeCustomData(n,this.oldCustomData)},e}(v.HistoryItem);h.ChangeCustomDataHistoryItem=s},7443:function(j,h,d){var u,g=this&&this.__extends||(u=function(p,s){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t])},u(p,s)},function(p,s){function i(){this.constructor=p}u(p,s),p.prototype=s===null?Object.create(s):(i.prototype=s.prototype,new i)});Object.defineProperty(h,"__esModule",{value:!0}),h.ChangeLockedHistoryItem=void 0;var v=function(p){function s(i,e){var t=p.call(this)||this;return t.itemKey=i.key,t.locked=e,t}return g(s,p),s.prototype.redo=function(i){var e=i.model.findItem(this.itemKey);this.oldLocked=e.locked,i.changeLocked(e,this.locked)},s.prototype.undo=function(i){var e=i.model.findItem(this.itemKey);i.changeLocked(e,this.oldLocked)},s}(d(4412).HistoryItem);h.ChangeLockedHistoryItem=v},8210:function(j,h,d){var u,g=this&&this.__extends||(u=function(i,e){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var o in n)n.hasOwnProperty(o)&&(t[o]=n[o])},u(i,e)},function(i,e){function t(){this.constructor=i}u(i,e),i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)});Object.defineProperty(h,"__esModule",{value:!0}),h.ChangeShapeImageHistoryItem=void 0;var v=d(4412),p=d(6617),s=function(i){function e(t,n){var o=i.call(this)||this;return o.shapeKey=t.key,o.imageUrl=n,o}return g(e,i),e.prototype.redo=function(t){var n=t.model.findShape(this.shapeKey);this.oldImage=n.image,t.changeShapeImage(n,new p.ImageInfo(this.imageUrl))},e.prototype.undo=function(t){var n=t.model.findShape(this.shapeKey);t.changeShapeImage(n,this.oldImage)},e}(v.HistoryItem);h.ChangeShapeImageHistoryItem=s},6516:function(j,h,d){var u,g=this&&this.__extends||(u=function(p,s){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t])},u(p,s)},function(p,s){function i(){this.constructor=p}u(p,s),p.prototype=s===null?Object.create(s):(i.prototype=s.prototype,new i)});Object.defineProperty(h,"__esModule",{value:!0}),h.ChangeShapeTextHistoryItem=void 0;var v=function(p){function s(i,e){var t=p.call(this)||this;return t.shapeKey=i.key,t.text=e,t}return g(s,p),s.prototype.redo=function(i){var e=i.model.findShape(this.shapeKey);this.oldText=e.text,i.changeShapeText(e,this.text)},s.prototype.undo=function(i){var e=i.model.findShape(this.shapeKey);i.changeShapeText(e,this.oldText)},s}(d(4412).HistoryItem);h.ChangeShapeTextHistoryItem=v},5982:function(j,h,d){var u,g=this&&this.__extends||(u=function(p,s){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t])},u(p,s)},function(p,s){function i(){this.constructor=p}u(p,s),p.prototype=s===null?Object.create(s):(i.prototype=s.prototype,new i)});Object.defineProperty(h,"__esModule",{value:!0}),h.ChangeZindexHistoryItem=void 0;var v=function(p){function s(i,e){var t=p.call(this)||this;return t.itemKey=i.key,t.zIndex=e,t}return g(s,p),s.prototype.redo=function(i){var e=i.model.findItem(this.itemKey);this.oldZIndex=e.zIndex,i.changeZIndex(e,this.zIndex)},s.prototype.undo=function(i){var e=i.model.findItem(this.itemKey);i.changeZIndex(e,this.oldZIndex)},s}(d(4412).HistoryItem);h.ChangeZindexHistoryItem=v},442:function(j,h,d){var u,g=this&&this.__extends||(u=function(p,s){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t])},u(p,s)},function(p,s){function i(){this.constructor=p}u(p,s),p.prototype=s===null?Object.create(s):(i.prototype=s.prototype,new i)});Object.defineProperty(h,"__esModule",{value:!0}),h.ToggleShapeExpandedHistoryItem=void 0;var v=function(p){function s(i){var e=p.call(this)||this;return e.shapeKey=i.key,e.expanded=i.expanded,e}return g(s,p),s.prototype.redo=function(i){var e=i.model.findShape(this.shapeKey);i.changeShapeExpanded(e,!this.expanded)},s.prototype.undo=function(i){var e=i.model.findShape(this.shapeKey);i.changeShapeExpanded(e,this.expanded)},s}(d(4412).HistoryItem);h.ToggleShapeExpandedHistoryItem=v},4634:function(j,h,d){var u,g=this&&this.__extends||(u=function(p,s){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t])},u(p,s)},function(p,s){function i(){this.constructor=p}u(p,s),p.prototype=s===null?Object.create(s):(i.prototype=s.prototype,new i)});Object.defineProperty(h,"__esModule",{value:!0}),h.ChangeStyleHistoryItem=void 0;var v=function(p){function s(i,e,t){return p.call(this,i,e,t)||this}return g(s,p),s.prototype.redo=function(i){var e=i.model.findItem(this.itemKey);this.oldStyleValue=e.style[this.styleProperty],i.changeStyle(e,this.styleProperty,this.styleValue)},s.prototype.undo=function(i){var e=i.model.findItem(this.itemKey);i.changeStyle(e,this.styleProperty,this.oldStyleValue)},s}(d(3259).ChangeStyleHistoryItemBase);h.ChangeStyleHistoryItem=v},3259:function(j,h,d){var u,g=this&&this.__extends||(u=function(p,s){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t])},u(p,s)},function(p,s){function i(){this.constructor=p}u(p,s),p.prototype=s===null?Object.create(s):(i.prototype=s.prototype,new i)});Object.defineProperty(h,"__esModule",{value:!0}),h.ChangeStyleHistoryItemBase=void 0;var v=function(p){function s(i,e,t){var n=p.call(this)||this;return n.itemKey=i,n.styleProperty=e,n.styleValue=t,n}return g(s,p),s.prototype.redo=function(i){var e=i.model.findItem(this.itemKey);this.oldStyleValue=e.style[this.styleProperty],i.changeStyle(e,this.styleProperty,this.styleValue)},s.prototype.undo=function(i){var e=i.model.findItem(this.itemKey);i.changeStyle(e,this.styleProperty,this.oldStyleValue)},s}(d(4412).HistoryItem);h.ChangeStyleHistoryItemBase=v},926:function(j,h,d){var u,g=this&&this.__extends||(u=function(p,s){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t])},u(p,s)},function(p,s){function i(){this.constructor=p}u(p,s),p.prototype=s===null?Object.create(s):(i.prototype=s.prototype,new i)});Object.defineProperty(h,"__esModule",{value:!0}),h.ChangeStyleTextHistoryItem=void 0;var v=function(p){function s(i,e,t){return p.call(this,i,e,t)||this}return g(s,p),s.prototype.redo=function(i){var e=i.model.findItem(this.itemKey);this.oldStyleValue=e.styleText[this.styleProperty],i.changeStyleText(e,this.styleProperty,this.styleValue)},s.prototype.undo=function(i){var e=i.model.findItem(this.itemKey);i.changeStyleText(e,this.styleProperty,this.oldStyleValue)},s}(d(3259).ChangeStyleHistoryItemBase);h.ChangeStyleTextHistoryItem=v},7176:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.ImageCache=h.CacheImageInfo=void 0;var u=d(6477),g=d(6617),v=d(8675),p=function(){function i(e,t,n,o,r){this._base64=e!==void 0?u.Base64Utils.normalizeToDataUrl(e,"image/png"):void 0,this.actualId=t,this._referenceInfo=o,this._isLoaded=r!==void 0&&r,this.imageUrl=n}return Object.defineProperty(i.prototype,"isLoaded",{get:function(){return this._referenceInfo?this._referenceInfo._isLoaded:this._isLoaded},set:function(e){this._isLoaded=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"base64",{get:function(){return this._base64},set:function(e){this._base64=u.Base64Utils.normalizeToDataUrl(e,"image/png")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"referenceInfo",{get:function(){return this._referenceInfo},set:function(e){this._referenceInfo=e,this._base64=void 0,this._isLoaded=void 0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isLoading",{get:function(){return this._referenceInfo?this.referenceInfo._isLoading:this._isLoading},enumerable:!1,configurable:!0}),i.prototype.startLoading=function(){this._referenceInfo?this._referenceInfo.startLoading():this._isLoading=!0},i.prototype.finalizeLoading=function(){this._referenceInfo?this._referenceInfo.finalizeLoading():this._isLoading=!1},i}();h.CacheImageInfo=p;var s=function(){function i(){this.emptyImageId=0,this.lastActualId=0,this.onReadyStateChanged=new v.EventDispatcher,this.cache=[],this.nonLoadedImages=[],this.createUnloadedInfoByBase64(g.ImageInfo.transparentOnePixelImage).isLoaded=!0}return i.prototype.reset=function(){this.cache.splice(1),this.nonLoadedImages=[],this.lastActualId=1},Object.defineProperty(i.prototype,"emptyImage",{get:function(){return this.cache[this.emptyImageId]},enumerable:!1,configurable:!0}),i.prototype.getImageData=function(e){return this.cache[e]},i.prototype.createUnloadedInfoByUrl=function(e){var t=this.findInfoByUrl(e);return t||this.registerImageData(new p(void 0,this.getNextActualId(),e))},i.prototype.createUnloadedInfoByBase64=function(e){var t=this.findInfoByBase64(e);return t||this.registerImageData(new p(e,this.getNextActualId()))},i.prototype.createUnloadedInfoByShapeImageInfo=function(e){var t=e.exportUrl;return u.Base64Utils.checkPrependDataUrl(t)?this.createUnloadedInfoByBase64(t):this.createUnloadedInfoByUrl(t)},i.prototype.registerImageData=function(e){var t=this.cache[e.actualId];return t||(t=e),e.actualId!==void 0&&(this.cache[e.actualId]=t),e.actualId!==0&&(this.nonLoadedImages.push(e),this.nonLoadedImages.length===1&&this.raiseReadyStateChanged(!1)),t},i.prototype.loadAllImages=function(e){var t=this;this.cache.forEach(function(n){t.emptyImageId===n.actualId||n.isLoaded||n.isLoading||e.load(n)})},i.prototype.finalizeLoading=function(e,t){e.finalizeLoading(),e.isLoaded=!0;var n=this.nonLoadedImages.indexOf(e);if(this.nonLoadedImages.splice(n,1),this.nonLoadedImages.length===0&&this.raiseReadyStateChanged(!0),!e.referenceInfo&&t.base64){var o=u.Base64Utils.normalizeToDataUrl(t.base64,"image/png");this.cache.forEach(function(r){var a=r.base64===o&&r!==e&&r.isLoaded;return a&&(e.referenceInfo=r.referenceInfo?r.referenceInfo:r),a}),e.base64=o}},i.prototype.hasNonLoadedImages=function(){return this.nonLoadedImages.length!==0},i.prototype.getNextActualId=function(){return this.lastActualId++},i.prototype.findInfoByBase64=function(e){return e=u.Base64Utils.normalizeToDataUrl(e,"image/png"),this.findInfoCore(function(t){return t.base64===e})},i.prototype.findInfoByUrl=function(e){return this.findInfoCore(function(t){return t.imageUrl===e})},i.prototype.findInfoCore=function(e){var t;return this.cache.forEach(function(n){e(n)&&(t=n)}),t},i.prototype.raiseReadyStateChanged=function(e){this.onReadyStateChanged.raise1(function(t){return t.notifyImageCacheReadyStateChanged(e)})},i.instance=new i,i}();h.ImageCache=s},6617:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.ImageInfo=void 0;var u=d(6477),g=function(){function v(p){this.url=void 0,this.base64=void 0,p&&(u.Base64Utils.checkPrependDataUrl(p)?this.base64=p:this.url=p),this.loadFailed=!1}return v.prototype.clone=function(){var p=new v;return p.url=this.url,p.base64=this.base64,p},Object.defineProperty(v.prototype,"isEmpty",{get:function(){return this.url===void 0&&this.base64===void 0},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"unableToLoad",{get:function(){return this.loadFailed},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"renderUrl",{get:function(){return this.base64||""},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"exportUrl",{get:function(){return this.base64?this.base64:this.url},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"actualUrl",{get:function(){return this.url?this.url:this.base64},enumerable:!1,configurable:!0}),Object.defineProperty(v,"transparentOnePixelImage",{get:function(){return this.transparentWhiteImage1_1},enumerable:!1,configurable:!0}),v.prototype.loadBase64Content=function(p){this.base64=u.Base64Utils.normalizeToDataUrl(p,"image/png")},v.prototype.setUnableToLoadFlag=function(){this.loadFailed=!0},v.transparentWhiteImage1_1="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAANSURBVBhXY/j///9/AAn7A/0FQ0XKAAAAAElFTkSuQmCC",v}();h.ImageInfo=g},590:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.ImageLoader=void 0;var u=d(7176),g=function(){function v(p){this.loadedCallback=p}return v.prototype.load=function(p){p.isLoaded?this.loadedCallback(p):p.isLoading||this.loadInner(p)},v.prototype.loadInner=function(p){var s=this;return p.imageUrl?this.loadPictureByUrl(p,function(){return s.finalizeLoading(p,p)}):p.base64&&this.loadPictureByBase64(p,function(){return s.finalizeLoading(p,p)}),p},v.prototype.finalizeLoading=function(p,s){s||(s=u.ImageCache.instance.getImageData(p.actualId)),s.isLoaded||u.ImageCache.instance.finalizeLoading(s,p),this.loadedCallback(s)},v.prototype.loadPictureByBase64=function(p,s){var i=new Image;i.onload=function(){s(p)},i.src=p.base64},v.prototype.loadPictureByUrl=function(p,s){var i=this,e=new XMLHttpRequest;try{e.onload=function(){var t=new FileReader;t.onloadend=function(){p.base64=t.result,i.loadPictureByBase64(p,function(n){return s(n)})},t.readAsDataURL(e.response)},e.onerror=function(){return s(p)},e.onloadend=function(){e.status===404&&s(p)},e.open("GET",p.imageUrl,!0),e.responseType="blob",p.startLoading(),e.send()}catch{}},v}();h.ImageLoader=g},5941:function(j,h,d){var u,g=this&&this.__extends||(u=function(o,r){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var f in c)c.hasOwnProperty(f)&&(a[f]=c[f])},u(o,r)},function(o,r){function a(){this.constructor=o}u(o,r),o.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)});Object.defineProperty(h,"__esModule",{value:!0}),h.BPMNNode=h.BPMNImporter=void 0;var v=d(213),p=d(2259),s=d(8217),i=d(6572),e=function(){function o(r){this.doc=i.ImportUtils.createDocument(r),this.graph=new v.Graph([],[])}return o.prototype.import=function(){for(var r=void 0,a=0;r=this.doc.children[a];a++)r.nodeName.toUpperCase()==="DEFINITIONS"&&this.onDefinitionsElement(r);return this.validate(),this.graph},o.prototype.validate=function(){var r={};this.graph.nodes.forEach(function(f){return r[f]=!0});for(var a=0,c=void 0;c=this.graph.edges[a];a++)r[c.from]&&r[c.to]||(this.graph.edges.splice(a,1),a--)},o.prototype.onDefinitionsElement=function(r){this.dataSourceKey=r.getAttribute("id");for(var a=void 0,c=0;a=r.children[c];c++)a.nodeName.toUpperCase()==="PROCESS"&&this.onProcessElement(a)},o.prototype.onProcessElement=function(r){for(var a=void 0,c=0;a=r.children[c];c++)switch(a.nodeName.toUpperCase()){case"STARTEVENT":this.onStartEventElement(a);break;case"SEQUENCEFLOW":this.onSequenceFlowElement(a);break;case"SCRIPTTASK":this.onScriptTaskElement(a);break;case"USERTASK":this.onUserTaskElement(a);break;case"SERVICETASK":this.onServiceTaskElement(a);break;case"SENDTASK":this.onSendTaskElement(a);break;case"EXCLUSIVEGATEWAY":this.onExclusiveGateway(a);break;case"ENDEVENT":this.onEndEventGateway(a)}},o.prototype.onStartEventElement=function(r){var a=this.createNode(r);a.type=p.ShapeTypes.Ellipse,a.text=r.getAttribute("name"),this.graph.addNode(a)},o.prototype.onSequenceFlowElement=function(r){var a=r.getAttribute("sourceRef"),c=r.getAttribute("targetRef"),f=this.createEdge(r,a,c);r.hasAttribute("name")&&(f.text=r.getAttribute("name")),this.graph.addEdge(f)},o.prototype.onScriptTaskElement=function(r){var a=this.createNode(r);a.text=r.getAttribute("name"),this.graph.addNode(a)},o.prototype.onUserTaskElement=function(r){var a=this.createNode(r);a.text=r.getAttribute("name"),this.graph.addNode(a)},o.prototype.onServiceTaskElement=function(r){var a=this.createNode(r);a.text=r.getAttribute("name"),this.graph.addNode(a)},o.prototype.onSendTaskElement=function(r){var a=this.createNode(r);a.text=r.getAttribute("name"),this.graph.addNode(a)},o.prototype.onExclusiveGateway=function(r){var a=this.createNode(r);a.text=r.getAttribute("name"),a.type=p.ShapeTypes.Decision,this.graph.addNode(a)},o.prototype.onEndEventGateway=function(r){var a=this.createNode(r);a.text=r.getAttribute("name"),a.type=p.ShapeTypes.Ellipse,this.graph.addNode(a)},o.prototype.createNode=function(r){return new t(this.dataSourceKey,r.getAttribute("id"))},o.prototype.createEdge=function(r,a,c){return new n(this.dataSourceKey,r.getAttribute("id"),a,c)},o}();h.BPMNImporter=e;var t=function(o,r){this.sourceKey=o,this.key=r,this.type=p.ShapeTypes.Rectangle};h.BPMNNode=t;var n=function(o){function r(a,c,f,m){var y=o.call(this,c,f,m)||this;return y.sourceKey=a,y}return g(r,o),r}(s.Edge)},5885:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.Exporter=void 0;var u=d(5503),g=d(7959),v=d(8675),p=function(){function s(){}return s.prototype.export=function(i){var e={page:{},connectors:[],shapes:[]};return e.page={width:i.size.width,height:i.size.height,pageColor:i.pageColor,pageWidth:i.pageSize.width,pageHeight:i.pageSize.height,pageLandscape:i.pageLandscape},this.exportItemsCore(i.items,e),JSON.stringify(e)},s.prototype.exportItems=function(i){var e={connectors:[],shapes:[]};return this.exportItemsCore(i,e),JSON.stringify(e)},s.prototype.exportItemsCore=function(i,e){var t=this;i.forEach(function(n){if(n instanceof u.Shape)e.shapes.push(t.exportShape(n));else if(n instanceof g.Connector){var o=t.exportConnector(n);n.beginItem&&(o.beginItemKey=n.beginItem.key,o.beginConnectionPointIndex=n.beginConnectionPointIndex),n.endItem&&(o.endItemKey=n.endItem.key,o.endConnectionPointIndex=n.endConnectionPointIndex),e.connectors.push(o)}})},s.prototype.exportItem=function(i){return{key:i.key,dataKey:i.dataKey,customData:v.ObjectUtils.cloneObject(i.customData),locked:i.locked,zIndex:i.zIndex}},s.prototype.exportShape=function(i){var e=this.exportItem(i);e.type=i.description.key,e.text=i.text,i.image.isEmpty||(e.imageUrl=i.image.exportUrl),e.x=i.position.x,e.y=i.position.y,e.width=i.size.width,e.height=i.size.height;var t=i.parameters.toObject();t&&(e.parameters=t);var n=i.style.toObject();n&&(e.style=n);var o=i.styleText.toObject();return o&&(e.styleText=o),i.children.length&&(e.childKeys=i.children.map(function(r){return r.key})),i.expanded||(e.expanded=!1),i.expandedSize&&(e.expandedWidth=i.expandedSize.width,e.expandedHeight=i.expandedSize.height),e},s.prototype.exportConnector=function(i){var e=this.exportItem(i);e.points=i.points.map(function(c){return{x:c.x,y:c.y}});var t=i.texts.toObject();t&&(e.texts=t);var n=i.properties.toObject();n&&(e.properties=n);var o=i.style.toObject();o&&(e.style=o);var r=i.styleText.toObject();r&&(e.styleText=r);var a=i.tryCreateRenderPointsContext();return a&&(e.context=a.toObject()),e},s.prototype.exportSvg=function(i,e,t,n){t.exportSvgImage(i,e,n)},s.prototype.exportPng=function(i,e,t,n,o){t.exportPngImage(i,e,n,o)},s.prototype.exportJpg=function(i,e,t,n,o){t.exportJpgImage(i,e,n,o)},s}();h.Exporter=p},6572:(j,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.ImportUtils=void 0;var d=function(){function u(){}return u.parseJSON=function(g){if(!g||g==="")return{};try{return JSON.parse(g)}catch{return{}}},u.createDocument=function(g){return new DOMParser().parseFromString(g,"application/xml")},u}();h.ImportUtils=d},2406:function(j,h,d){var u,g=this&&this.__extends||(u=function(m,y){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,P){l.__proto__=P}||function(l,P){for(var C in P)P.hasOwnProperty(C)&&(l[C]=P[C])},u(m,y)},function(m,y){function l(){this.constructor=m}u(m,y),m.prototype=y===null?Object.create(y):(l.prototype=y.prototype,new l)});Object.defineProperty(h,"__esModule",{value:!0}),h.Importer=void 0;var v=d(5503),p=d(8675),s=d(6353),i=d(8900),e=d(8397),t=d(7959),n=d(6617),o=d(8577),r=d(6572),a=d(13),c=d(1510),f=function(m){function y(l,P){var C=m.call(this,l)||this;return C.obj=r.ImportUtils.parseJSON(P),C}return g(y,m),y.prototype.getObject=function(){return this.obj},y.prototype.getPageObject=function(l){return l.page},y.prototype.getShapeObjects=function(l){return l.shapes},y.prototype.getConnectorObjects=function(l){return l.connectors},y.prototype.importPageSettings=function(l,P){P&&(this.assert(P.width,"number"),this.assert(P.height,"number"),typeof P.width=="number"&&(l.size.width=P.width),typeof P.height=="number"&&(l.size.height=P.height),typeof P.pageColor=="number"?l.pageColor=P.pageColor:typeof P.pageColor=="string"&&(l.pageColor=a.ColorUtils.fromString(P.pageColor)),typeof P.pageWidth=="number"&&(l.pageSize.width=P.pageWidth),typeof P.pageHeight=="number"&&(l.pageSize.height=P.pageHeight),typeof P.pageLandscape=="boolean"&&(l.pageLandscape=P.pageLandscape))},y.prototype.importShape=function(l){this.assert(l.key,"string"),this.assert(l.x,"number"),this.assert(l.y,"number"),this.assert(l.type,"string");var P=l.type,C=this.shapeDescriptionManager.get(P),I=new i.Point(l.x,l.y),x=new v.Shape(C||e.ShapeDescriptionManager.default,I);return x.key=l.key,typeof l.dataKey!="string"&&typeof l.dataKey!="number"||(x.dataKey=l.dataKey),typeof l.customData=="object"&&(x.customData=p.ObjectUtils.cloneObject(l.customData)),typeof l.locked=="boolean"&&(x.locked=l.locked),typeof l.width=="number"&&(x.size.width=l.width),typeof l.height=="number"&&(x.size.height=l.height),typeof l.text=="string"&&(x.text=l.text),typeof l.imageUrl=="string"&&(x.image=new n.ImageInfo(l.imageUrl)),l.parameters&&(x.parameters.fromObject(l.parameters),x.description.normalizeParameters(x,x.parameters)),l.style&&x.style.fromObject(l.style),l.styleText&&x.styleText.fromObject(l.styleText),typeof l.zIndex=="number"&&(x.zIndex=l.zIndex),Array.isArray(l.childKeys)&&(x.childKeys=l.childKeys.slice()),typeof l.expanded=="boolean"&&(x.expanded=l.expanded),typeof l.expandedWidth=="number"&&typeof l.expandedHeight=="number"&&(x.expandedSize=new s.Size(l.expandedWidth,l.expandedHeight)),x},y.prototype.importShapeChildren=function(l,P){return[]},y.prototype.importConnector=function(l){var P=this;if(this.assert(l.key,"string"),!Array.isArray(l.points))throw Error("Invalid Format");var C=l.points.map(function(x){return P.assert(x.x,"number"),P.assert(x.y,"number"),new i.Point(x.x,x.y)}),I=new t.Connector(C);return I.key=l.key,typeof l.dataKey!="string"&&typeof l.dataKey!="number"||(I.dataKey=l.dataKey),typeof l.customData=="object"&&(I.customData=p.ObjectUtils.cloneObject(l.customData)),typeof l.locked=="boolean"&&(I.locked=l.locked),I.endConnectionPointIndex=typeof l.endConnectionPointIndex=="number"?l.endConnectionPointIndex:-1,I.beginConnectionPointIndex=typeof l.beginConnectionPointIndex=="number"?l.beginConnectionPointIndex:-1,l.endItemKey!==void 0&&this.assert(l.endItemKey,"string"),l.beginItemKey!==void 0&&this.assert(l.beginItemKey,"string"),I.endItemKey=l.endItemKey,I.beginItemKey=l.beginItemKey,l.texts&&I.texts.fromObject(l.texts),l.properties&&I.properties.fromObject(l.properties),l.style&&I.style.fromObject(l.style),l.styleText&&I.styleText.fromObject(l.styleText),typeof l.zIndex=="number"&&(I.zIndex=l.zIndex),l.context!==void 0&&I.replaceRenderPoints(c.ConnectorRenderPointsContext.fromObject(l.context),!1),I},y}(o.ImporterBase);h.Importer=f},8577:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.ImporterBase=void 0;var u=d(6613),g=d(5503),v=function(){function p(s){this.shapeDescriptionManager=s}return p.prototype.import=function(){var s=new u.DiagramModel,i=this.getObject();this.importPageSettings(s,this.getPageObject(i));for(var e=this.importShapes(this.getShapeObjects(i)),t=0;t<e.length;t++){var n=e[t];if(s.findItem(n.key))throw Error("Item key is duplicated");s.pushItem(n)}var o=this.importConnectors(this.getConnectorObjects(i));for(t=0;t<o.length;t++){var r=o[t];if(r.endItem=s.findItem(r.endItemKey)||void 0,delete r.endItemKey,r.beginItem=s.findItem(r.beginItemKey)||void 0,delete r.beginItemKey,s.findItem(r.key))throw Error("Item key is duplicated");s.pushItem(r),this.updateConnections(r)}return this.updateChildren(s.items,function(a){return s.findItem(a)}),s},p.prototype.importItems=function(s){for(var i,e=[],t=this.getObject(),n={},o=this.importShapes(this.getShapeObjects(t)),r=0;r<o.length;r++){var a=o[r],c=a.key;i=s.getNextKey(),a.key=i,n[c]=a,a.dataKey!==void 0&&(a.dataKey=void 0),e.push(a)}var f=this.importConnectors(this.getConnectorObjects(t));for(r=0;r<f.length;r++){var m=f[r];c=m.key,i=s.getNextKey(),m.key=i,n[c]=m,m.dataKey!==void 0&&(m.dataKey=void 0);var y=m.endItemKey;m.endItem=n[y],delete m.endItemKey;var l=m.beginItemKey;m.beginItem=n[l],delete m.beginItemKey,e.push(m),this.updateConnections(m)}return this.updateChildren(e,function(P){return n[P]}),e},p.prototype.importItemsData=function(s){for(var i=this.getObject(),e=this.importShapes(this.getShapeObjects(i)),t={},n=0;n<e.length;n++){var o=e[n],r=void 0;o.dataKey!==void 0&&(r=s.findShapeByDataKey(o.dataKey)),r&&(r.dataKey=o.dataKey,t[o.key]=o.dataKey,r.locked=o.locked,r.position=o.position.clone(),r.expanded=o.expanded,o.expandedSize&&(r.expandedSize=o.expandedSize.clone()),r.size=o.size.clone(),r.parameters=o.parameters.clone(),r.style=o.style.clone(),r.styleText=o.styleText.clone(),r.zIndex=o.zIndex,r.text=o.text,r.description=o.description,r.image=o.image.clone())}var a=this.importConnectors(this.getConnectorObjects(i));for(n=0;n<a.length;n++){var c=a[n],f=void 0;c.dataKey!==void 0&&(f=s.findConnectorByDataKey(c.dataKey)),f||(f=s.findConnectorByBeginEndDataKeys(t[c.beginItemKey],t[c.endItemKey])),f&&(f.dataKey=c.dataKey,f.locked=c.locked,f.points=c.points.slice(),f.properties=c.properties.clone(),f.style=c.style.clone(),f.endConnectionPointIndex=c.endConnectionPointIndex,f.beginConnectionPointIndex=c.beginConnectionPointIndex,f.texts=c.texts.clone(),f.styleText=c.styleText.clone(),f.zIndex=c.zIndex)}},p.prototype.importShapes=function(s){var i=[];if(!s)return i;if(!Array.isArray(s))throw Error("Invalid Format");for(var e=0;e<s.length;e++){var t=s[e],n=this.importShape(t);i.push(n),i=i.concat(this.importShapeChildren(t,n))}return i},p.prototype.importConnectors=function(s){var i=[];if(!s)return i;if(!Array.isArray(s))throw Error("Invalid Format");for(var e=0;e<s.length;e++){var t=s[e];i.push(this.importConnector(t))}return i},p.prototype.updateChildren=function(s,i){s.forEach(function(e){e instanceof g.Shape&&e.childKeys&&(e.childKeys.forEach(function(t){var n=i(t);n&&(e.children.indexOf(n)===-1&&e.children.push(n),n.container=e)}),delete e.childKeys)})},p.prototype.updateConnections=function(s){s.endItem&&(s.endItem instanceof g.Shape?(s.endItem.attachedConnectors.push(s),s.points[s.points.length-1]=s.endItem.getConnectionPointPosition(s.endConnectionPointIndex,s.points[s.points.length-2])):(s.endItem=void 0,s.endConnectionPointIndex=-1)),s.beginItem&&(s.beginItem instanceof g.Shape?(s.beginItem.attachedConnectors.push(s),s.points[0]=s.beginItem.getConnectionPointPosition(s.beginConnectionPointIndex,s.points[1])):(s.beginItem=void 0,s.beginConnectionPointIndex=-1))},p.prototype.assert=function(s,i){if(s===void 0||i!==void 0&&typeof s!==i)throw Error("Invalid Format")},p}();h.ImporterBase=v},780:function(j,h,d){var u,g=this&&this.__extends||(u=function(f,m){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,l){y.__proto__=l}||function(y,l){for(var P in l)l.hasOwnProperty(P)&&(y[P]=l[P])},u(f,m)},function(f,m){function y(){this.constructor=f}u(f,m),f.prototype=m===null?Object.create(m):(y.prototype=m.prototype,new y)});Object.defineProperty(h,"__esModule",{value:!0}),h.XmlImporter=void 0;var v=d(7959),p=d(5503),s=d(8577),i=d(2259),e=d(8397),t=d(6353),n=d(8900),o=d(6572),r=d(13),a=d(9291),c=function(f){function m(y,l){var P=f.call(this,y)||this;return P.doc=o.ImportUtils.createDocument(l),P}return g(m,f),m.prototype.getObject=function(){return this.doc},m.prototype.getPageObject=function(y){var l=this.doc.querySelectorAll("[ItemKind='DiagramRoot']");return l&&l[0]},m.prototype.getShapeObjects=function(y){var l=[];return this.doc.querySelectorAll("[ItemKind='DiagramRoot'] > Children > [ItemKind='DiagramShape']").forEach(function(P){l.push(P)}),this.doc.querySelectorAll("[ItemKind='DiagramRoot'] > Children > [ItemKind='DiagramContainer']").forEach(function(P){l.push(P)}),l},m.prototype.getConnectorObjects=function(y){var l=[];return this.doc.querySelectorAll("[ItemKind='DiagramRoot'] > Children > [ItemKind='DiagramConnector']").forEach(function(P){l.push(P)}),l},m.prototype.importPageSettings=function(y,l){if(l){var P=l.getAttribute("PageSize"),C=this.getSize(P);C&&(y.size=C.clone(),y.pageSize=C.clone())}},m.prototype.importShape=function(y){var l=y.getAttribute("Position"),P=this.getPoint(l),C=y.getAttribute("Shape"),I=this.getShapeType(C),x=this.shapeDescriptionManager.get(I),b=new p.Shape(x||e.ShapeDescriptionManager.default,P);b.key=this.getItemKey(y);var S=y.getAttribute("Size"),w=this.getSize(S);w&&(b.size=w);var T=y.getAttribute("Content");if(typeof T=="string")b.text=T;else{var _=y.getAttribute("Header");typeof _=="string"&&(b.text=_)}return this.importStyle(y,b),b},m.prototype.importShapeChildren=function(y,l){var P=[];y.setAttribute("dxDiagram",""),this.doc.querySelectorAll("[dxDiagram] > Children > [ItemKind='DiagramShape']").forEach(function(w){P.push(w)}),this.doc.querySelectorAll("[dxDiagram] > Children > [ItemKind='DiagramContainer']").forEach(function(w){P.push(w)}),y.removeAttribute("dxDiagram");var C=[];if(!P)return C;for(var I=0;I<P.length;I++){var x=P[I],b=this.importShape(x);b.key=l.key+","+b.key;var S=l.clientRectangle;b.position=b.position.clone().offset(S.x,S.y),l.childKeys||(l.childKeys=[]),l.childKeys.push(b.key),C.push(b),C=C.concat(this.importShapeChildren(x,b))}return C},m.prototype.importConnector=function(y){var l=this,P=[],C=y.getAttribute("BeginPoint"),I=this.getPoint(C);I&&P.push(I),y.getAttribute("Points").split(" ").forEach(function(R){var O=l.getPoint(R);O&&P.push(O)});var x=y.getAttribute("EndPoint"),b=this.getPoint(x);b&&P.push(b);var S=new v.Connector(P);S.key=this.getItemKey(y);var w=y.getAttribute("EndItemPointIndex"),T=parseInt(w);S.endConnectionPointIndex=isNaN(T)?-1:T;var _=y.getAttribute("BeginItemPointIndex"),M=parseInt(_);S.beginConnectionPointIndex=isNaN(M)?-1:M;var A=y.getAttribute("EndItem");A!==void 0&&this.assert(A,"string");var E=y.getAttribute("BeginItem");E!==void 0&&this.assert(E,"string"),S.endItemKey=A,S.beginItemKey=E;var U=y.getAttribute("Content");return typeof U=="string"&&S.setText(U),this.importStyle(y,S),S},m.prototype.importStyle=function(y,l){var P=y.getAttribute("Background");typeof P=="string"&&(l.style.fill=this.getColor(P));var C=y.getAttribute("Stroke");typeof C=="string"&&(l.style.stroke=this.getColor(C));var I=y.getAttribute("Foreground");typeof I=="string"&&(l.styleText.fill=this.getColor(I));var x=y.getAttribute("FontFamily");typeof x=="string"&&(l.styleText["font-family"]=x);var b=y.getAttribute("FontSize");typeof b=="string"&&(l.styleText["font-size"]=b),y.getAttribute("FontWeight")==="Bold"&&(l.styleText["font-weight"]="bold"),y.getAttribute("FontStyle")==="Italic"&&(l.styleText["font-style"]="italic"),y.getAttribute("TextDecorations")==="Underline"&&(l.styleText["text-decoration"]="underline");var S=y.getAttribute("TextAlignment");S==="Left"?l.styleText["text-anchor"]="start":S==="Right"?l.styleText["text-anchor"]="end":S==="Center"&&(l.styleText["text-anchor"]="middle")},m.prototype.getShapeType=function(y){return m.shapeTypes[y]?m.shapeTypes[y]:y&&y.toLowerCase().indexOf("container")>-1?i.ShapeTypes.VerticalContainer:i.ShapeTypes.Rectangle},m.prototype.getItemKey=function(y){return(parseInt(y.tagName.replace("Item",""))-1).toString()},m.prototype.getNumbers=function(y){var l=y.split(",");return l&&l.length?l.map(function(P){return+P}):[]},m.prototype.getSize=function(y){if(y){var l=this.getNumbers(y);if(l.length>=2)return this.assert(l[0],"number"),this.assert(l[1],"number"),new t.Size(a.UnitConverter.pixelsToTwips(l[0]),a.UnitConverter.pixelsToTwips(l[1]))}},m.prototype.getPoint=function(y){if(y){var l=this.getNumbers(y);if(l.length>=2)return this.assert(l[0],"number"),this.assert(l[1],"number"),new n.Point(a.UnitConverter.pixelsToTwips(l[0]),a.UnitConverter.pixelsToTwips(l[1]))}},m.prototype.getColor=function(y){y=y.charAt(0)==="#"?y.substr(1):y;var l=parseInt(y,16);return isNaN(l)?void 0:r.ColorUtils.colorToHash(l)},m.shapeTypes={"BasicShapes.Rectangle":i.ShapeTypes.Rectangle,"BasicShapes.Ellipse":i.ShapeTypes.Ellipse,"BasicShapes.Triangle":i.ShapeTypes.Triangle,"BasicShapes.Pentagon":i.ShapeTypes.Pentagon,"BasicShapes.Hexagon":i.ShapeTypes.Hexagon,"BasicShapes.Octagon":i.ShapeTypes.Octagon,"BasicShapes.Diamond":i.ShapeTypes.Diamond,"BasicShapes.Cross":i.ShapeTypes.Cross,"BasicShapes.Star5":i.ShapeTypes.Star,"BasicFlowchartShapes.StartEnd":i.ShapeTypes.Terminator,"BasicFlowchartShapes.Data":i.ShapeTypes.Data,"BasicFlowchartShapes.Database":i.ShapeTypes.Database,"BasicFlowchartShapes.ExternalData":i.ShapeTypes.StoredData,"BasicFlowchartShapes.Process":i.ShapeTypes.Process,"BasicFlowchartShapes.Decision":i.ShapeTypes.Decision,"BasicFlowchartShapes.Subprocess":i.ShapeTypes.PredefinedProcess,"BasicFlowchartShapes.Document":i.ShapeTypes.Document,"BasicFlowchartShapes.Custom1":i.ShapeTypes.ManualInput,"BasicFlowchartShapes.Custom2":i.ShapeTypes.ManualOperation,"ArrowShapes.SimpleArrow":i.ShapeTypes.ArrowLeft,"ArrowShapes.SimpleDoubleArrow":i.ShapeTypes.ArrowLeftRight},m}(s.ImporterBase);h.XmlImporter=c},5227:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.LayoutBuilder=void 0;var u=d(8710),g=function(){function v(p,s){this.settings=p,this.graph=s}return v.prototype.getBreadthNodeSizeCore=function(p,s){var i=this.settings.orientation===u.DataLayoutOrientation.Vertical?p.size.width:p.size.height;return s||(i+=this.settings.orientation===u.DataLayoutOrientation.Vertical?p.margin.left+p.margin.right:p.margin.top+p.margin.bottom),i},v.prototype.getDepthNodeSizeCore=function(p){return this.settings.orientation===u.DataLayoutOrientation.Horizontal?p.size.width+p.margin.left+p.margin.right:p.size.height+p.margin.top+p.margin.bottom},v.prototype.chooseDirectionValue=function(p,s){return this.settings.direction===u.LogicalDirectionKind.Forward?p:s},v.prototype.getDirectionValue=function(p){return this.settings.direction===u.LogicalDirectionKind.Forward?p:-p},v.prototype.getComponentOffset=function(p){var s=p.getRectangle(!0);return(this.settings.orientation===u.DataLayoutOrientation.Vertical?s.width:s.height)+this.settings.componentSpacing},v.prototype.setComponentOffset=function(p,s){return this.settings.orientation===u.DataLayoutOrientation.Vertical?p.offsetNodes(s):p.offsetNodes(0,s)},v}();h.LayoutBuilder=g},1256:function(j,h,d){var u,g=this&&this.__extends||(u=function(x,b){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,w){S.__proto__=w}||function(S,w){for(var T in w)w.hasOwnProperty(T)&&(S[T]=w[T])},u(x,b)},function(x,b){function S(){this.constructor=x}u(x,b),x.prototype=b===null?Object.create(b):(S.prototype=b.prototype,new S)});Object.defineProperty(h,"__esModule",{value:!0}),h.EdgeOnLayer=h.NodeOnLayer=h.SugiyamaNodesOrderer=h.SugiyamaLayerDistributor=h.SugiyamaLayoutBuilder=void 0;var v=d(5227),p=d(213),s=d(617),i=d(8217),e=d(701),t=d(2400),n=d(8900),o=d(8710),r=d(8119),a=d(7959),c=d(7309),f=function(x){function b(){return x!==null&&x.apply(this,arguments)||this}return g(b,x),b.prototype.build=function(){var S=this,w=0,T=new r.GraphLayout,_=new y;return this.graph.getConnectedComponents().forEach(function(M){var A=c.CycleRemover.removeCycles(M),E=m.getLayers(A.graph),U=_.orderNodes(A.graph,E),R=Object.keys(A.removedEdges).map(function(V){return M.getEdge(V)}),O=_.assignAbsCoordinates(U),N=S.createInfoGraphLayout(O,A.reversedEdges,R);T.extend(S.setComponentOffset(N,w)),w+=S.getComponentOffset(N)}),T},b.prototype.createInfoGraphLayout=function(S,w,T){for(var _=this,M=new n.Point(0,0),A=S.items,E=new e.HashSet(A.map(function(F){return F.layer}).sort(function(F,q){return F-q})),U=this.getAbsOffsetInfo(S.items),R={},O=0,N=Number.MAX_SAFE_INTEGER||Number.MAX_VALUE,V=Number.MIN_SAFE_INTEGER||Number.MAX_VALUE,H=function(F){var q=E.item(F),ee=0;A.filter(function(Q){return Q.layer===q}).sort(function(Q,X){return Q.position-X.position}).forEach(function(Q){var X=_.getDepthNodeSize(Q),z=_.chooseDirectionValue(0,X),B=_.getAbsPosition(Q.position,_.getBreadthNodeSize(Q),U);M=_.setBreadth(M,B);var k=_.setDepthOffset(M,-z);if(R[Q.key]=k,!Q.isDummy){var W=_.settings.orientation===o.DataLayoutOrientation.Horizontal?k.y:k.x;N=Math.min(N,W),V=Math.max(V,W+_.getBreadthNodeSize(Q)),ee=Math.max(ee,_.getDepthNodeSize(Q))}}),O+=ee,M=L.setBreadth(M,0),M=L.setDepthOffset(M,L.getDirectionValue(ee+L.settings.layerSpacing))},L=this,D=0;D<E.length;D++)H(D);O+=(E.length-1)*this.settings.layerSpacing;var K=new r.GraphLayout;return this.createNodesLayout(S,K,N,O,R),this.createEdgesLayout(S,K,w,T),K},b.prototype.createNodesLayout=function(S,w,T,_,M){var A=this,E=this.settings.orientation===o.DataLayoutOrientation.Vertical?new n.Point(-T,this.chooseDirectionValue(0,_)):new n.Point(this.chooseDirectionValue(0,_),-T);S.items.forEach(function(U){if(!U.isDummy){var R=A.graph.getNode(U.key);w.addNode(new s.NodeLayout(R,M[U.key].clone().offset(E.x,E.y)))}})},b.prototype.createEdgesLayout=function(S,w,T,_){var M=this.getDirectEdgeLayout(),A=this.getDiffLevelEdgeLayout(!0),E=this.getDiffLevelEdgeLayout(!1),U=this.getSameLevelEdgeLayout(!0),R=this.getSameLevelEdgeLayout(!1),O={};S.edges.filter(function(N){return!N.isDummy}).concat(_.map(function(N){return new C(N.key,!1,N.from,N.to)})).sort(function(N,V){return S.getNode(N.originFrom).layer-S.getNode(V.originFrom).layer||S.getNode(N.to).layer-S.getNode(V.to).layer}).forEach(function(N){var V=T[N.key],H=S.getNode(V?N.to:N.originFrom),L=S.getNode(V?N.originFrom:N.to);if(L.layer-H.layer==1)w.addEdge(new s.EdgeLayout(N.key,M.from,M.to));else{var D=[];if(L.position-H.position>=1)D.push(A),D.push({from:M.from,to:A.to}),D.push({from:A.from,to:M.to});else if(L.position-H.position<=-1)D.push(E),D.push({from:M.from,to:E.to}),D.push({from:E.from,to:M.to});else{var K=H.position===L.position&&L.position===0?[U,R]:[R,U];K.forEach(function(X){return D.push(X)}),K.forEach(function(X){D.push({from:X.from,to:M.to}),D.push({from:M.from,to:X.to})})}D.push(M);for(var F=0,q=void 0;q=D[F];F++){var ee=H.key+"_"+q.from,Q=L.key+"_"+q.to;if(O[ee]!==a.ConnectorPosition.End&&O[Q]!==a.ConnectorPosition.Begin){w.addEdge(new s.EdgeLayout(N.key,q.from,q.to)),O[ee]=a.ConnectorPosition.Begin,O[Q]=a.ConnectorPosition.End;break}}}})},b.prototype.getDirectEdgeLayout=function(){return this.settings.orientation===o.DataLayoutOrientation.Horizontal?this.settings.direction===o.LogicalDirectionKind.Forward?{from:1,to:3}:{from:3,to:1}:this.settings.direction===o.LogicalDirectionKind.Forward?{from:2,to:0}:{from:0,to:2}},b.prototype.getDiffLevelEdgeLayout=function(S){return this.settings.orientation===o.DataLayoutOrientation.Horizontal?S?{from:2,to:0}:{from:0,to:2}:S?{from:3,to:1}:{from:1,to:3}},b.prototype.getSameLevelEdgeLayout=function(S){return this.settings.orientation===o.DataLayoutOrientation.Horizontal?S?{from:0,to:0}:{from:2,to:2}:S?{from:3,to:3}:{from:1,to:1}},b.prototype.getAbsOffsetInfo=function(S){var w=this,T={},_=function(E,U){T[U]===void 0&&(T[U]=w.getBreadthNodeSize(E)),T[U]=Math.max(T[U],w.getBreadthNodeSize(E))};S.forEach(function(E){var U=I(E.position);_(E,U),T[U]%1!=0&&_(E,U+1)});var M={},A=0;return Object.keys(T).sort(function(E,U){return parseFloat(E)-parseFloat(U)}).forEach(function(E){M[E]={leftOffset:A,width:T[E]},A+=T[E]+w.settings.columnSpacing}),M},b.prototype.setBreadth=function(S,w){return this.settings.orientation===o.DataLayoutOrientation.Vertical?new n.Point(w,S.y):new n.Point(S.x,w)},b.prototype.setDepthOffset=function(S,w){return this.settings.orientation===o.DataLayoutOrientation.Horizontal?new n.Point(S.x+w,S.y):new n.Point(S.x,S.y+w)},b.prototype.getAbsPosition=function(S,w,T){var _=I(S),M=T[_].leftOffset,A=T[_].width;return S%1==0?M+(A-w)/2:M+A-(w-this.settings.columnSpacing)/2},b.prototype.getBreadthNodeSize=function(S){return S.isDummy?0:this.getBreadthNodeSizeCore(this.graph.getNode(S.key))},b.prototype.getDepthNodeSize=function(S){return S.isDummy?0:this.getDepthNodeSizeCore(this.graph.getNode(S.key))},b}(v.LayoutBuilder);h.SugiyamaLayoutBuilder=f;var m=function(){function x(){}return x.getLayers=function(b){var S=this.getFeasibleTree(b);return this.calcNodesLayers(S)},x.getFeasibleTree=function(b){var S=this.initLayerAssignment(b);return b.getSpanningGraph(b.nodes[0],i.ConnectionMode.OutgoingAndIncoming,function(w){return S[w.to]-S[w.from]})},x.initLayerAssignment=function(b){for(var S={},w=0,T={},_=b.nodes.filter(function(A){return!b.getAdjacentEdges(A,i.ConnectionMode.Incoming).length}),M=function(){_.forEach(function(E){S[E]=w,T[E]=!0}),Object.keys(T).forEach(function(E){b.getAdjacentEdges(E,i.ConnectionMode.Outgoing).filter(function(U){return S[U.to]===void 0}).length===0&&delete T[E]});var A={};Object.keys(T).forEach(function(E){b.getAdjacentEdges(E,i.ConnectionMode.Outgoing).map(function(U){return U.to}).filter(function(U){return S[U]===void 0&&b.getAdjacentEdges(U,i.ConnectionMode.Incoming).reduce(function(R,O){return R&&S[O.from]!==void 0},!0)}).forEach(function(U){return A[U]=!0})}),_=Object.keys(A),w++};_.length;)M();return S},x.calcNodesLayers=function(b){var S={},w=Number.MAX_SAFE_INTEGER||Number.MAX_VALUE,T=0,_=b.createIterator(i.ConnectionMode.OutgoingAndIncoming);for(var M in _.visitEachEdgeOnce=!1,_.onNode=function(A){S[A.key]=T,w=Math.min(w,T)},_.skipNode=function(A){return S[A.key]!==void 0},_.skipEdge=function(A){return S[A.from]!==void 0&&S[A.to]!==void 0},_.onEdge=function(A,E){T=E?S[A.from]+1:S[A.to]-1},_.iterate(b.nodes[0]),S)Object.prototype.hasOwnProperty.call(S,M)&&(S[M]-=w);return S},x}();h.SugiyamaLayerDistributor=m;var y=function(){function x(){this.idCounter=-1e4}return x.prototype.orderNodes=function(b,S){for(var w=1,T=this.initGraphInfo(b,S),_=T.items,M=this.initOrder(_),A=this.getNodeToPositionMap(_),E=this.getCrossCount(M,T),U=!0;w<14&&E!==0;){M=this.getNodesOrder(M,T,U);var R=this.getCrossCount(M,T);R<E&&(A=this.getNodeToPositionMap(T.items),E=R),U=!U,w++}return T.items.forEach(function(O){return O.position=A[O.key]}),T},x.prototype.getNodesOrder=function(b,S,w){var T=this,_={},M=function(U){if(!Object.prototype.hasOwnProperty.call(b,U))return"continue";var R={},O=[];b[U].forEach(function(N){var V=(w?S.getChildren(N.key):S.getParents(N.key)).map(function(H){return S.getNode(H).position});O.push(N.key),R[N.key]=T.getNodePosition(V)}),_[U]=A.sortNodes(O,R,S)},A=this;for(var E in b)M(E);return _},x.prototype.sortNodes=function(b,S,w){return b.sort(function(T,_){return S[T]-S[_]}).map(function(T,_){var M=w.getNode(T);return M.position=_,M})},x.prototype.getNodePosition=function(b){if(!(b=b.sort(function(_,M){return _-M})).length)return 0;var S=Math.floor(b.length/2);if(b.length===2||b.length%2==1)return b[S];var w=b[S-1]-b[0],T=b[b.length-1]-b[S];return Math.floor((b[S-1]*T+b[S]*w)/(w+T))},x.prototype.initOrder=function(b){var S={};return b.forEach(function(w){return(S[w.layer]||(S[w.layer]=[])).push(w)}),S},x.prototype.getCrossCount=function(b,S){var w=0,T=function(M){if(!Object.prototype.hasOwnProperty.call(b,M))return"continue";var A=[];b[M].forEach(function(E){var U=S.getChildren(E.key).map(function(R){return S.getNode(R).position});U.forEach(function(R){w+=A.filter(function(O){return R<O}).length}),A=A.concat(U)})};for(var _ in b)T(_);return w},x.prototype.initGraphInfo=function(b,S){var w=this,T={},_={},M=[],A=[];return b.nodes.forEach(function(E){var U=S[E];T[U]===void 0&&(T[U]=0);var R=new l(E,!1,U,T[U]++);_[E]=R,M.push(R)}),b.edges.forEach(function(E){var U=S[E.to]-S[E.from];if(U>1){for(var R=_[E.from],O=1;O<U;O++){var N=new l(w.createDummyID(),!0,S[E.from]+O,T[S[E.from]+O]++);A.push(new C(w.createDummyID(),!0,R.key,N.key)),M.push(N),R=N}A.push(new C(E.key,!1,R.key,_[E.to].key,_[E.from].key))}else A.push(new C(E.key,!1,_[E.from].key,_[E.to].key))}),new p.FastGraph(M,A)},x.prototype.createDummyID=function(){return"dummy_"+--this.idCounter},x.prototype.getNodeToPositionMap=function(b){return b.reduce(function(S,w){return S[w.key]=w.position,S},{})},x.prototype.assignAbsCoordinates=function(b){var S=this.getAbsCoodinate(b);return new p.FastGraph(b.items.map(function(w){return new l(w.key,w.isDummy,w.layer,S[w.key])}),b.edges.slice(0))},x.prototype.getAbsCoodinate=function(b){var S=this,w=b.items.reduce(function(M,A){M[A.layer]=M[A.layer]||[];var E=t.SearchUtils.binaryIndexOf(M[A.layer],function(U){return U.position-A.position});return M[A.layer].splice(E<0?~E:E,0,A),M},{}),T=[P.TopLeft,P.TopRight,P.BottomLeft,P.BottomRight].map(function(M){return S.getPositionByMedian(b,M,w)}),_={};return b.items.forEach(function(M){var A=T.map(function(E){return E[M.key]}).sort(function(E,U){return E-U});_[M.key]=(A[1]+A[2])/2}),_},x.prototype.getPositionByMedian=function(b,S,w){var T=b.items,_=this.getNodeToPositionMap(T),M=this.getMedians(b,T,S);return M=this.resolveMedianConflicts(b,w,M,S),this.getSortedBlocks(b,T,M,S).forEach(function(A){var E=A.reduce(function(U,R){return _[R.key]>U?_[R.key]:U},-2);A.forEach(function(U){var R=E-_[U.key];R>0&&w[U.layer].filter(function(O){return O.position>U.position}).forEach(function(O){return _[O.key]+=R}),_[U.key]=E})}),_},x.prototype.getSortedBlocks=function(b,S,w,T){for(var _=[],M=T===P.BottomLeft||T===P.BottomRight,A=new e.HashSet(S.slice(0).sort(function(R,O){return M?R.layer-O.layer:O.layer-R.layer}),function(R){return R.key});A.length;){var E=A.item(0),U=this.getBlock(b,E,w,T);_.push(U),U.forEach(function(R){return A.remove(R)})}return _.sort(function(R,O){var N=R.reduce(function(D,K){return K.position<D.position?K:D},R[0]),V=O.filter(function(D){return D.layer===N.layer})[0];if(V)return N.position>V.position?1:-1;var H=O.reduce(function(D,K){return K.position<D.position?K:D},O[0]),L=R.filter(function(D){return D.layer===H.layer})[0];return L?L.position>H.position?1:-1:N.layer>H.layer?1:-1}),_},x.prototype.getBlock=function(b,S,w,T){var _=[],M=null;do M&&(S=T===P.TopLeft||T===P.TopRight?b.getNode(M.from):b.getNode(M.to)),_.push(S),M=w[S.key];while(M);return _},x.prototype.resolveMedianConflicts=function(b,S,w,T){var _=this,M={},A=function(U){if(!Object.prototype.hasOwnProperty.call(S,U))return"continue";var R,O,N=S[U];T!==P.TopRight&&T!==P.BottomRight||(N=N.slice(0).sort(function(V,H){return H.position-V.position})),N.forEach(function(V){var H=w[V.key];if(H){var L=T===P.TopLeft||T===P.TopRight?H.from:H.to,D=b.getNode(L).position;_.checkMedianConfict(R,O,D,T)?M[V.key]=null:(R=R===void 0?D:Math.min(R,D),O=O===void 0?D:Math.max(O,D),M[V.key]=H)}else M[V.key]=null})};for(var E in S)A(E);return M},x.prototype.checkMedianConfict=function(b,S,w,T){return b!==void 0&&S!==void 0&&(T===P.TopLeft||T===P.BottomLeft?S>=w:b<=w)},x.prototype.getMedians=function(b,S,w){var T=this,_={};return S.forEach(function(M){var A=T.getActualAdjacentEdges(b,M,w),E=T.getMedianPosition(A.length,w);_[M.key]=A[E]}),_},x.prototype.getMedianPosition=function(b,S){if(b===0)return-1;if(b%2!=0)return Math.floor(b/2);if(S===P.TopLeft||S===P.BottomLeft)return Math.floor(b/2)-1;if(S===P.TopRight||S===P.BottomRight)return Math.floor(b/2);throw new Error("Invalid Operation")},x.prototype.getActualAdjacentEdges=function(b,S,w){return w===P.TopLeft||w===P.TopRight?b.getAdjacentEdges(S.key,i.ConnectionMode.Incoming).sort(function(T,_){return b.getNode(T.from).position-b.getNode(_.from).position}):b.getAdjacentEdges(S.key,i.ConnectionMode.Outgoing).sort(function(T,_){return b.getNode(T.to).position-b.getNode(_.to).position})},x}();h.SugiyamaNodesOrderer=y;var l=function(){function x(b,S,w,T){this.key=b,this.isDummy=S,this.layer=w,this.position=T}return x.prototype.getHashCode=function(){return this.key.toString()},x}();h.NodeOnLayer=l;var P,C=function(){function x(b,S,w,T,_){this.key=b,this.isDummy=S,this.from=w,this.to=T,this._originFrom=_}return x.prototype.getHashCode=function(){return this.from+"-"+this.to},Object.defineProperty(x.prototype,"originFrom",{get:function(){return this._originFrom!==void 0?this._originFrom:this.from},enumerable:!1,configurable:!0}),x}();function I(x){return Math.trunc?Math.trunc(x):isFinite(x)?x-x%1||(x<0?-0:x===0?x:0):x}h.EdgeOnLayer=C,function(x){x[x.TopLeft=0]="TopLeft",x[x.TopRight=1]="TopRight",x[x.BottomLeft=2]="BottomLeft",x[x.BottomRight=3]="BottomRight"}(P||(P={}))},9533:function(j,h,d){var u,g=this&&this.__extends||(u=function(f,m){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,l){y.__proto__=l}||function(y,l){for(var P in l)l.hasOwnProperty(P)&&(y[P]=l[P])},u(f,m)},function(f,m){function y(){this.constructor=f}u(f,m),f.prototype=m===null?Object.create(m):(y.prototype=m.prototype,new y)});Object.defineProperty(h,"__esModule",{value:!0}),h.TreeLayoutBuilder=void 0;var v=d(8119),p=d(5148),s=d(617),i=d(8675),e=d(8900),t=d(5227),n=d(8217),o=d(3742),r=d(8710),a=d(213),c=function(f){function m(){var y=f!==null&&f.apply(this,arguments)||this;return y.nodeToLevel={},y.levelDepthSize={},y}return g(m,f),m.prototype.build=function(){var y=this,l=new v.GraphLayout,P=0;return this.graph.getConnectedComponents().forEach(function(C){for(var I=p.Tree.createSpanningTree(C),x=y.processTree(I),b=y.getComponentOffset(x);x.nodeKeys.length<C.nodes.length;){var S=new a.Graph(C.nodes.filter(function(_){return!x.nodeToLayout[_]}).map(function(_){return C.getNode(_)}),C.edges.filter(function(_){return!x.edgeToPosition[_.key]})),w=p.Tree.createSpanningTree(S),T=y.processTree(w);x.extend(y.setComponentOffset(T,b)),b+=y.getComponentOffset(T)}l.extend(y.setComponentOffset(x,P)),P+=y.getComponentOffset(x)}),l},m.prototype.preProcessTree=function(y,l,P){var C=this;if((l=l.filter(function(x){return(C.nodeToLevel[x.key]===void 0?C.nodeToLevel[x.key]=P:-1)>=0})).length){var I=this.getMaxDepthSize(l);this.levelDepthSize[P]=I,this.preProcessTree(y,[].concat.apply([],l.map(function(x){return y.getChildren(x)})),P+1)}},m.prototype.loadNodes=function(y,l,P){return P?y.getChildren(P.info).map(function(C){return l.hasNode(C.key)?void 0:l.addNode(new s.NodeLayout(C,e.Point.zero()))}).filter(function(C){return C}):[l.addNode(new s.NodeLayout(y.root,e.Point.zero()))]},m.prototype.processTree=function(y){var l=this,P=new v.GraphLayout;if(this.preProcessTree(y,[y.root],0),this.processLevel(y,P,0,new i.Range(0),0),this.settings.direction===r.LogicalDirectionKind.Backward){var C=Object.keys(this.levelDepthSize).map(function(x){return l.levelDepthSize[x]}),I=C.reduce(function(x,b){return x+b},0)+(C.length-1)*this.settings.layerSpacing;P.forEachNode(function(x){return l.setDepthPos(x,l.getDepthPos(x)+I)})}return P},m.prototype.processLevel=function(y,l,P,C,I,x){var b,S=this,w=this.addNodes(y,l,I,x),T=x?this.graph.getAdjacentEdges(x.key,n.ConnectionMode.Outgoing):[],_=this.getDirectionValue(this.levelDepthSize[I]),M=this.getDirectionValue(this.settings.layerSpacing);if(w.forEach(function(U){var R=i.Range.fromLength(b?b.to+S.settings.columnSpacing:C.from,S.getBreadthNodeSizeCore(U.info));U.position=S.getNodePosition(R.from,P,_).clone().offset(U.info.margin.left,U.info.margin.top),S.processLevel(y,l,P+_+M,R,I+1,U),S.updateEdgeConnections(l,T,U),C.extend(R),b=R}),x&&w.length){var A=w[w.length-1],E=new i.Range(this.getBreadthPos(w[0]),this.getBreadthPos(A)+this.getBreadthNodeSizeCore(A.info,!0));this.alignParent(x,E,C)}},m.prototype.addNodes=function(y,l,P,C){var I=this;return P===0?[l.addNode(new s.NodeLayout(y.root,e.Point.zero()))]:y.getChildren(C.info).reduce(function(x,b){return I.nodeToLevel[b.key]!==P||l.hasNode(b.key)||x.push(l.addNode(new s.NodeLayout(b,e.Point.zero()))),x},[])},m.prototype.getMaxDepthSize=function(y){var l=this;return y.reduce(function(P,C){return Math.max(P,l.getDepthNodeSizeCore(C))},0)},m.prototype.getNodePosition=function(y,l,P){return this.settings.direction===r.LogicalDirectionKind.Forward?this.settings.orientation===r.DataLayoutOrientation.Vertical?new e.Point(y,l):new e.Point(l,y):this.settings.orientation===r.DataLayoutOrientation.Vertical?new e.Point(y,l+P):new e.Point(l+P,y)},m.prototype.updateEdgeConnections=function(y,l,P){var C=this;l.filter(function(I){return I.to===P.key}).forEach(function(I){var x=C.getBeginEdgeIndex(),b=C.getEndEdgeIndex();y.addEdge(new s.EdgeLayout(I.key,x,b))})},m.prototype.getBeginEdgeIndex=function(){return this.settings.direction===r.LogicalDirectionKind.Forward?this.isVertical()?o.ConnectionPointSide.South:o.ConnectionPointSide.East:this.isVertical()?o.ConnectionPointSide.North:o.ConnectionPointSide.West},m.prototype.getEndEdgeIndex=function(){return this.settings.direction===r.LogicalDirectionKind.Forward?this.isVertical()?o.ConnectionPointSide.North:o.ConnectionPointSide.West:this.isVertical()?o.ConnectionPointSide.South:o.ConnectionPointSide.East},m.prototype.alignParent=function(y,l,P){if(this.settings.alignment===r.Alignment.Center){var C=l.from+l.length/2-this.getBreadthNodeSizeCore(y.info,!0)/2;this.settings.orientation===r.DataLayoutOrientation.Vertical?(y.position.x=Math.max(P.from+y.info.margin.left,C),y.position.x=Math.min(P.to-y.info.size.width-y.info.margin.right,y.position.x)):(y.position.y=Math.max(P.from+y.info.margin.top,C),y.position.y=Math.min(P.to-y.info.size.height-y.info.margin.bottom,y.position.y))}},m.prototype.getDepthPos=function(y){return this.settings.orientation===r.DataLayoutOrientation.Vertical?y.position.y:y.position.x},m.prototype.getBreadthPos=function(y){return this.settings.orientation===r.DataLayoutOrientation.Vertical?y.position.x:y.position.y},m.prototype.setDepthPos=function(y,l){this.settings.orientation===r.DataLayoutOrientation.Vertical?y.position.y=l:y.position.x=l},m.prototype.isVertical=function(){return this.settings.orientation===r.DataLayoutOrientation.Vertical},m}(t.LayoutBuilder);h.TreeLayoutBuilder=c},213:function(j,h,d){var u,g=this&&this.__extends||(u=function(r,a){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var m in f)f.hasOwnProperty(m)&&(c[m]=f[m])},u(r,a)},function(r,a){function c(){this.constructor=r}u(r,a),r.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)});Object.defineProperty(h,"__esModule",{value:!0}),h.GraphIterator=h.FastGraph=h.Graph=void 0;var v=d(8217),p=d(5503),s=d(2400),i=d(701),e=function(){function r(a,c){this.nodeMap={},this.edgeMap={},this.nodes=[],this.edges=[],this.onInit(),a.forEach(this.addNode.bind(this)),c.forEach(this.addEdge.bind(this))}return Object.defineProperty(r.prototype,"items",{get:function(){return this.nodes.map(this.getNode.bind(this))},enumerable:!1,configurable:!0}),r.prototype.onInit=function(){},r.prototype.addEdge=function(a){this.edgeMap[a.key]=a,this.edges.push(a)},r.prototype.addNode=function(a){this.nodeMap[a.key]=a,this.nodes.push(a.key)},r.prototype.getNode=function(a){return this.nodeMap[a]},r.prototype.getEdge=function(a){return this.edgeMap[a]},r.prototype.isEmpty=function(){return!this.nodes.length&&!this.edges.length},r.prototype.getAdjacentEdges=function(a,c){return c===void 0&&(c=v.ConnectionMode.OutgoingAndIncoming),this.edges.filter(function(f){return c&v.ConnectionMode.Incoming&&f.to===a||c&v.ConnectionMode.Outgoing&&f.from===a})},r}(),t=function(r){function a(){return r!==null&&r.apply(this,arguments)||this}return g(a,r),a.prototype.cast=function(c,f){var m=this;return new a(this.nodes.map(function(y){return c(m.getNode(y))}),this.edges.map(function(y){return f?f(y):y}))},a.prototype.getConnectedComponents=function(){var c=this.createIterator(v.ConnectionMode.OutgoingAndIncoming);c.visitEachEdgeOnce=!0;for(var f=[],m=function(P){var C=[],I=[];c.onNode=function(x){return C.push(x)},c.onEdge=function(x){return I.push(x)},c.iterate(y.nodes[P]),C.length&&f.push(new a(C,I))},y=this,l=0;l<this.nodes.length;l++)m(l);return f},a.prototype.createIterator=function(c){var f=new o(this,c);return f.comparer=function(m,y){return m.weight-y.weight},f},a.prototype.getSpanningGraph=function(c,f,m){var y=this;if(m===void 0&&(m=void 0),!this.nodes.length)return new a([],[]);m||(m=function(b){return b.weight});var l=[],P=new i.HashSet,C=new i.HashSet([],function(b){return b.getHashKey()});for(this.addNodeToSpanningGraph(c,f,l,P,C,m);l.length&&P.length!==this.nodes.length;){var I=l.shift();C.tryPush(I);var x=P.contains(I.from)?I.to:I.from;this.addNodeToSpanningGraph(x,f,l,P,C,m),l=l.filter(function(b){return!P.contains(b.from)||!P.contains(b.to)})}return new a(P.list().map(function(b){return y.getNode(b)}),C.list())},a.prototype.addNodeToSpanningGraph=function(c,f,m,y,l,P){y.tryPush(c),this.getAdjacentEdges(c,f).filter(function(C){return!l.contains(C)}).forEach(function(C){var I=P(C),x=s.SearchUtils.binaryIndexOf(m,function(b){return b.weight-I});for(x=x<0?~x:x;x<m.length&&P(m[x])===I;)x++;m.splice(x,0,new v.Edge(C.key,C.from,C.to,I))})},a.create=function(c,f){return new a(c,f.filter(function(m){return m.beginItem&&m.endItem instanceof p.Shape&&m.endItem&&m.endItem instanceof p.Shape&&m.beginItem!==m.endItem}).map(function(m){return new v.Edge(m.key,m.beginItem&&m.beginItem.key,m.endItem&&m.endItem.key)}))},a}(e);h.Graph=t;var n=function(r){function a(){return r!==null&&r.apply(this,arguments)||this}return g(a,r),a.prototype.onInit=function(){this.parentToChildren={},this.childToParents={}},a.prototype.addEdge=function(c){r.prototype.addEdge.call(this,c),(this.parentToChildren[c.from]||(this.parentToChildren[c.from]=[])).push(c.to),(this.childToParents[c.to]||(this.childToParents[c.to]=[])).push(c.from)},a.prototype.getChildren=function(c){return this.parentToChildren[c]||[]},a.prototype.getParents=function(c){return this.childToParents[c]||[]},a.prototype.createIterator=function(c){return new o(this,c)},a}(e);h.FastGraph=n;var o=function(){function r(a,c){c===void 0&&(c=v.ConnectionMode.OutgoingAndIncoming),this.graph=a,this.connectionMode=c,this.visitEachEdgeOnce=!0,this.visitEachNodeOnce=!0,this.visitedNodes={},this.visitedEdges={}}return r.prototype.iterate=function(a){if(!this.visitEachNodeOnce&&!this.visitEachEdgeOnce&&!this.skipNode)throw"skipNode or visitEachNodeOnce or visitEachEdgeOnce must be set to avoid SOF";this.iterateCore(a)},r.prototype.iterateCore=function(a){var c=this,f=this.graph.getNode(a);if(!(!f||this.skipNode&&this.skipNode(f)||this.visitEachNodeOnce&&this.isNodeVisited(a))){this.visitedNodes[a]=!0,this.onNode&&this.onNode(f);var m=this.graph.getAdjacentEdges(a,this.connectionMode);if(this.skipEdge&&(m=m.filter(function(P){return!c.skipEdge(P)})),this.connectionMode&v.ConnectionMode.Outgoing){var y=m.filter(function(P){return P.from===a});this.comparer&&y.sort(this.comparer),y.forEach(function(P){c.visitEachEdgeOnce&&c.visitedEdges[P.key]||(c.visitedEdges[P.key]=!0,c.onEdge&&c.onEdge(P,!0),c.iterateCore(P.to),c.onAfterEdge&&c.onAfterEdge(P,!0))})}if(this.onAllEdges&&this.onAllEdges(f,!0),this.connectionMode&v.ConnectionMode.Incoming){var l=m.filter(function(P){return P.to===a});this.comparer&&l.sort(this.comparer),l.forEach(function(P){c.visitEachEdgeOnce&&c.visitedEdges[P.key]||(c.visitedEdges[P.key]=!0,c.onEdge&&c.onEdge(P,!1),c.iterateCore(P.from),c.onAfterEdge&&c.onAfterEdge(P,!1))})}this.onAllEdges&&this.onAllEdges(f,!1)}},r.prototype.isNodeVisited=function(a){return!!this.visitedNodes[a]},r.prototype.isEdgeVisited=function(a){return!!this.visitedEdges[a]},r}();h.GraphIterator=o},7819:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.GraphInfo=void 0;var u=d(1755),g=function(){function v(p,s){this.container=p,this.sourceGraph=s}return Object.defineProperty(v.prototype,"graph",{get:function(){return this._graph||(this._graph=this.getNodeInfoGraph())},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"level",{get:function(){return this._level!==void 0?this._level:this._level=this.getLevel()},enumerable:!1,configurable:!0}),v.prototype.getNodeInfoGraph=function(){return this.sourceGraph.cast(u.LayoutUtils.shapeToLayout)},v.prototype.getLevel=function(){var p=0;return this.container&&(p=this.getContainerLevel(this.container)),p},v.prototype.getContainerLevel=function(p){var s=1,i=p.container;return i&&(s+=this.getContainerLevel(i)),s},v}();h.GraphInfo=g},8119:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.GraphLayout=void 0;var u=d(8675),g=d(617),v=function(){function p(){this.nodeKeys=[],this.nodeToLayout={},this.edgeToPosition={}}return p.prototype.forEachNode=function(s){var i=this;this.nodeKeys.forEach(function(e){return s(i.nodeToLayout[e],e)})},p.prototype.reduce=function(s,i){var e=this;return this.nodeKeys.reduce(function(t,n,o){return s(t,e.nodeToLayout[n],o)},i)},p.prototype.addNode=function(s){if(this.nodeToLayout[s.key])throw Error("Node layout is already registered");return this.nodeKeys.push(s.key),this.nodeToLayout[s.key]=s,s},p.prototype.hasNode=function(s){return!!this.nodeToLayout[s]},p.prototype.addEdge=function(s){if(this.edgeToPosition[s.key])throw Error("Edge layout is already registered");this.edgeToPosition[s.key]=s},p.prototype.getRectangle=function(s){var i=this;return u.GeometryUtils.getCommonRectangle(this.nodeKeys.map(function(e){return i.nodeToLayout[e].rectangle}))},p.prototype.offsetNodes=function(s,i){var e=this;s===void 0&&(s=0),i===void 0&&(i=0);var t=new p;return this.nodeKeys.forEach(function(n){var o=e.nodeToLayout[n];t.addNode(new g.NodeLayout(o.info,o.position.clone().offset(s,i)))}),t.copyEdges(this),t},p.prototype.extend=function(s){var i=this;s.forEachNode(function(e){return i.addNode(e)}),this.copyEdges(s)},p.prototype.copyEdges=function(s){var i=this;Object.keys(s.edgeToPosition).forEach(function(e){var t=s.edgeToPosition[e];i.addEdge(new g.EdgeLayout(t.key,t.beginIndex,t.endIndex))})},p}();h.GraphLayout=v},8710:function(j,h,d){var u,g=this&&this.__extends||(u=function(n,o){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var c in a)a.hasOwnProperty(c)&&(r[c]=a[c])},u(n,o)},function(n,o){function r(){this.constructor=n}u(n,o),n.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)});Object.defineProperty(h,"__esModule",{value:!0}),h.Alignment=h.DataLayoutOrientation=h.LogicalDirectionKind=h.TreeLayoutSettings=h.LayoutSettings=void 0;var v=d(7959),p=function(n){this.orientation=i.Vertical,this.direction=s.Forward;var o=n&&2*n>v.Connector.minOffset?2*n:v.Connector.minOffset;this.columnSpacing=o,this.layerSpacing=2*o,this.containerPadding=2*o,this.componentSpacing=2*o};h.LayoutSettings=p;var s,i,e,t=function(n){function o(r){var a=n.call(this,r)||this;return a.alignment=e.Center,a.subTreeColumnSpacing=a.componentSpacing/2,a}return g(o,n),o}(p);h.TreeLayoutSettings=t,function(n){n[n.Backward=0]="Backward",n[n.Forward=1]="Forward"}(s=h.LogicalDirectionKind||(h.LogicalDirectionKind={})),function(n){n[n.Horizontal=0]="Horizontal",n[n.Vertical=1]="Vertical"}(i=h.DataLayoutOrientation||(h.DataLayoutOrientation={})),function(n){n[n.Left=0]="Left",n[n.Center=1]="Center"}(e=h.Alignment||(h.Alignment={}))},1755:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.LayoutUtils=void 0;var u=d(617),g=function(){function v(){}return v.shapeToLayout=function(p){var s=new u.Margin(0),i=p.rectangle;p.attachedConnectors.filter(function(t){return!t.beginItem||!t.endItem}).forEach(function(t){var n=t.rectangle;s.left=Math.max(s.left,i.x-n.x),s.right=Math.max(s.right,n.right-i.right),s.top=Math.max(s.top,i.y-n.y),s.bottom=Math.max(s.bottom,n.bottom-i.bottom)});var e=new u.NodeInfo(p.key,s,p.size.clone());return e.connectionPoints=p.description.getConnectionPoints(),e},v}();h.LayoutUtils=g},617:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.Margin=h.EdgeLayout=h.NodeLayout=h.NodeInfo=void 0;var u=d(8011),g=function(i,e,t,n){n===void 0&&(n=[]),this.key=i,this.margin=e,this.size=t,this.connectionPoints=n};h.NodeInfo=g;var v=function(){function i(e,t){this.info=e,this.position=t}return Object.defineProperty(i.prototype,"key",{get:function(){return this.info.key},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rectangle",{get:function(){return u.Rectangle.fromGeometry(this.position,this.info.size)},enumerable:!1,configurable:!0}),i}();h.NodeLayout=v;var p=function(i,e,t){this.key=i,this.beginIndex=e,this.endIndex=t};h.EdgeLayout=p;var s=function(){function i(e,t,n,o){t===void 0&&(t=e),n===void 0&&(n=e),o===void 0&&(o=e),this.top=e,this.right=t,this.bottom=n,this.left=o}return i.empty=function(){return new i(0)},i}();h.Margin=s},8217:(j,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.ConnectionMode=h.PositionInfo=h.Edge=void 0;var d=function(){function g(v,p,s,i){i===void 0&&(i=1),this.weight=i,this.key=v,this.from=p,this.to=s}return g.prototype.getHashKey=function(){return this.from+"_"+this.to},g.prototype.reverse=function(){return new g(this.key,this.to,this.from,this.weight)},g}();h.Edge=d;var u=function(g,v){this.item=g,this.position=v};h.PositionInfo=u,function(g){g[g.Outgoing=1]="Outgoing",g[g.Incoming=2]="Incoming",g[g.OutgoingAndIncoming=3]="OutgoingAndIncoming"}(h.ConnectionMode||(h.ConnectionMode={}))},5148:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.Tree=void 0;var u=d(8217),g=function(){function v(p,s){var i=this;this.childToParent={},this.root=p,this.parentToChildren=s;var e=function(n){if(!Object.prototype.hasOwnProperty.call(s,n))return"continue";s[n].forEach(function(o){return i.childToParent[o.key]=n})};for(var t in s)e(t)}return v.prototype.getChildren=function(p){return p&&this.parentToChildren[p.key]?this.parentToChildren[p.key]:[]},v.prototype.hasChildren=function(p){return this.parentToChildren[p.key]&&this.parentToChildren[p.key].length>0},v.prototype.iterate=function(p){this.iterateCore(this.root,0,p)},v.createSpanningTree=function(p){var s=v.findRoot(p),i=p.createIterator(u.ConnectionMode.Outgoing),e={};return i.skipEdge=function(t){return t.to===void 0||i.isNodeVisited(t.to)},i.onNode=function(t){return e[t.key]=[]},i.onEdge=function(t){var n=p.getNode(t.to);n&&e[t.from].push(n)},i.iterate(s),new v(p.getNode(s),e)},v.prototype.iterateCore=function(p,s,i){var e=this;i(p,s),this.getChildren(p).forEach(function(t){return e.iterateCore(t,s+1,i)})},v.findRoot=function(p){return p.nodes.reduce(function(s,i){var e=p.getAdjacentEdges(i),t=e.filter(function(o){return o.to===i}).length,n=e.filter(function(o){return o.from===i}).length;return(s.candidate===void 0||t===0&&s.inc>0||s.inc!==0&&s.out-s.inc<n-t)&&(s.candidate=i,s.inc=t,s.out=n),s},{inc:-1,out:-1,candidate:void 0}).candidate},v}();h.Tree=g},7309:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.CycleRemover=void 0;var u=d(213),g=d(8217),v=d(701),p=function(){function s(){}return s.removeCycles=function(i){var e=this.getFeedbackSet(i);return this.reverseEdges(i,e)},s.getFeedbackSet=function(i){for(var e=this,t={},n=this.getNonTrivialStronglyConnectedComponents(i);n.length;)n.forEach(function(o){var r=e.getMaxCyclicEdges(o);r.forEach(function(a){return delete t[a.reverse().getHashKey()]}),r.forEach(function(a){return t[a.getHashKey()]=!0})}),n=this.getNonTrivialStronglyConnectedComponents(this.reverseEdges(i,t).graph);return t},s.getMaxCyclicEdges=function(i){var e={},t={},n={},o=[],r=[],a=i.createIterator(g.ConnectionMode.Outgoing);a.visitEachEdgeOnce=!1,a.onNode=function(f){t[f.key]=!0},a.skipNode=function(f){if(t[f.key]){for(var m=[],y=0;y<o.length;y++){var l=o[y];if(n[l.key]===void 0&&(n[l.key]=0),n[l.key]++,m.push(l),l.from===f.key)break}r.push(m)}return t[f.key]||e[f.key]},a.skipEdge=function(f){return!1},a.onEdge=function(f){o.splice(0,0,f)},a.onAfterEdge=function(f){o.splice(0,1)},a.onAllEdges=function(f){e[f.key]=!0,t[f.key]=!1},a.iterate(i.nodes[0]);var c=new v.HashSet([],function(f){return f.key});return r.forEach(function(f){c.tryPush(f.reduce(function(m,y){return n[y.key]>n[m.key]?y:m},f[0]))}),c.list()},s.reverseEdges=function(i,e){var t=new v.HashSet([],function(r){return r.getHashKey()}),n={},o={};return i.edges.forEach(function(r){e[r.getHashKey()]&&(r=r.reverse(),n[r.key]=!0),t.tryPush(r)||(o[r.key]=!0,delete n[r.key])}),{graph:new u.Graph(i.nodes.map(function(r){return i.getNode(r)}),t.list()),reversedEdges:n,removedEdges:o}},s.getNonTrivialStronglyConnectedComponents=function(i){return this.getStronglyConnectedComponents(i).filter(function(e){return e.edges.length})},s.getStronglyConnectedComponents=function(i){for(var e=this,t=[],n=0,o={},r={},a={},c=[],f={},m=0;m<i.nodes.length;m++){var y=i.nodes[m],l=i.createIterator(g.ConnectionMode.Outgoing);l.visitEachEdgeOnce=!1,l.visitEachNodeOnce=!1,l.onNode=function(P){f[P.key]=!0,t.push(P),a[P.key]=!0,r[P.key]=n,o[P.key]=n,n++},l.skipNode=function(P){return f[P.key]},l.skipEdge=function(P){var C=f[P.to];return C&&a[P.to]&&(r[P.from]=Math.min(r[P.from],o[P.to])),C},l.onAfterEdge=function(P){r[P.from]=Math.min(r[P.from],r[P.to])},l.onAllEdges=function(P,C){C&&r[P.key]===o[P.key]&&c.push(e.getStronglyConnectedComponent(i,P,t,a))},l.iterate(y)}return c},s.getStronglyConnectedComponent=function(i,e,t,n){var o,r={},a=[],c=[];do o=t.pop(),r[o.key]||a.push(o),r[o.key]=!0,n[o.key]=!1;while(o!==e);return a.forEach(function(f){var m=i.getAdjacentEdges(f.key,g.ConnectionMode.Outgoing);c=c.concat(m.filter(function(y){return!r[y.key]&&r[y.to]})),m.forEach(function(y){return r[y.key]=!0})}),new u.Graph(a,c)},s}();h.CycleRemover=p},701:(j,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.HashSet=void 0;var d=function(){function u(g,v){var p=this;g===void 0&&(g=[]),v===void 0&&(v=function(s){return s.toString()}),this.items=[],this.map={},this.getHashCode=v,g.forEach(function(s){return p.tryPush(s)})}return u.prototype.tryPush=function(g){var v=this.getHashCode(g);return this.map[v]===void 0&&(this.map[v]=this.items.push(g)-1,!0)},u.prototype.contains=function(g){return this.map[this.getHashCode(g)]!==void 0},u.prototype.forEach=function(g){this.items.forEach(g)},u.prototype.filter=function(g){return this.items.filter(g)},u.prototype.list=function(){return this.items.slice(0)},u.prototype.item=function(g){return this.items[g]},u.prototype.first=function(){return this.items[0]},u.prototype.remove=function(g){var v=this.getHashCode(g),p=this.map[v];if(typeof p!="number")throw"Item not found";delete this.map[v],this.items.splice(p,1);for(var s=p;s<this.items.length;s++)this.map[this.getHashCode(this.items[s])]--},Object.defineProperty(u.prototype,"length",{get:function(){return this.items.length},enumerable:!1,configurable:!0}),u}();h.HashSet=d},6224:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.DiagramLocalizationService=void 0;var u=d(2259),g=d(5383),v=function(){function p(){}return p.unitItems={},p.formatUnit=function(s){return s.toString()},p.shapeTexts={},p}();h.DiagramLocalizationService=v,v.unitItems[g.DiagramUnit.In]="in",v.unitItems[g.DiagramUnit.Cm]="cm",v.unitItems[g.DiagramUnit.Px]="px",v.shapeTexts[u.ShapeTypes.Text]="Text",v.shapeTexts[u.ShapeTypes.Rectangle]="Rectangle",v.shapeTexts[u.ShapeTypes.Ellipse]="Ellipse",v.shapeTexts[u.ShapeTypes.Cross]="Cross",v.shapeTexts[u.ShapeTypes.Triangle]="Triangle",v.shapeTexts[u.ShapeTypes.Diamond]="Diamond",v.shapeTexts[u.ShapeTypes.Heart]="Heart",v.shapeTexts[u.ShapeTypes.Pentagon]="Pentagon",v.shapeTexts[u.ShapeTypes.Hexagon]="Hexagon",v.shapeTexts[u.ShapeTypes.Octagon]="Octagon",v.shapeTexts[u.ShapeTypes.Star]="Star",v.shapeTexts[u.ShapeTypes.ArrowLeft]="Left Arrow",v.shapeTexts[u.ShapeTypes.ArrowUp]="Up Arrow",v.shapeTexts[u.ShapeTypes.ArrowRight]="Right Arrow",v.shapeTexts[u.ShapeTypes.ArrowDown]="Down Arrow",v.shapeTexts[u.ShapeTypes.ArrowUpDown]="Up Down Arrow",v.shapeTexts[u.ShapeTypes.ArrowLeftRight]="Left Right Arrow",v.shapeTexts[u.ShapeTypes.Process]="Process",v.shapeTexts[u.ShapeTypes.Decision]="Decision",v.shapeTexts[u.ShapeTypes.Terminator]="Terminator",v.shapeTexts[u.ShapeTypes.PredefinedProcess]="Predefined Process",v.shapeTexts[u.ShapeTypes.Document]="Document",v.shapeTexts[u.ShapeTypes.MultipleDocuments]="Multiple Documents",v.shapeTexts[u.ShapeTypes.ManualInput]="Manual Input",v.shapeTexts[u.ShapeTypes.Preparation]="Preparation",v.shapeTexts[u.ShapeTypes.Data]="Data",v.shapeTexts[u.ShapeTypes.Database]="Database",v.shapeTexts[u.ShapeTypes.HardDisk]="Hard Disk",v.shapeTexts[u.ShapeTypes.InternalStorage]="Internal Storage",v.shapeTexts[u.ShapeTypes.PaperTape]="Paper Tape",v.shapeTexts[u.ShapeTypes.ManualOperation]="Manual Operation",v.shapeTexts[u.ShapeTypes.Delay]="Delay",v.shapeTexts[u.ShapeTypes.StoredData]="Stored Data",v.shapeTexts[u.ShapeTypes.Display]="Display",v.shapeTexts[u.ShapeTypes.Merge]="Merge",v.shapeTexts[u.ShapeTypes.Connector]="Connector",v.shapeTexts[u.ShapeTypes.Or]="Or",v.shapeTexts[u.ShapeTypes.SummingJunction]="Summing Junction",v.shapeTexts[u.ShapeTypes.Container]="Container",v.shapeTexts[u.ShapeTypes.VerticalContainer]="Vertical Container",v.shapeTexts[u.ShapeTypes.HorizontalContainer]="Horizontal Container",v.shapeTexts[u.ShapeTypes.Card]="Person's Name",v.shapeTexts[u.ShapeTypes.CardWithImageOnLeft]="Card with Image on the Left",v.shapeTexts[u.ShapeTypes.CardWithImageOnTop]="Card with Image on the Top",v.shapeTexts[u.ShapeTypes.CardWithImageOnRight]="Card with Image on the Right"},6879:(j,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.DiagramModelOperation=h.ModelOperationSettings=void 0;var d=function(){function u(){this._addShape=!0,this._addShapeFromToolbox=!0,this._deleteShape=!0,this._deleteConnector=!0,this._changeConnection=!0,this._changeConnectorPoints=!0,this._changeShapeText=!0,this._changeConnectorText=!0,this._resizeShape=!0,this._moveShape=!0}return Object.defineProperty(u.prototype,"addShape",{get:function(){return this._addShape},set:function(g){g!==this._addShape&&(this._addShape=g)},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"addShapeFromToolbox",{get:function(){return this._addShapeFromToolbox},set:function(g){g!==this._addShapeFromToolbox&&(this._addShapeFromToolbox=g)},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"deleteShape",{get:function(){return this._deleteShape},set:function(g){g!==this._deleteShape&&(this._deleteShape=g)},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"deleteConnector",{get:function(){return this._deleteConnector},set:function(g){g!==this._deleteConnector&&(this._deleteConnector=g)},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"changeConnection",{get:function(){return this._changeConnection},set:function(g){g!==this._changeConnection&&(this._changeConnection=g)},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"changeConnectorPoints",{get:function(){return this._changeConnectorPoints},set:function(g){g!==this._changeConnectorPoints&&(this._changeConnectorPoints=g)},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"changeShapeText",{get:function(){return this._changeShapeText},set:function(g){g!==this._changeShapeText&&(this._changeShapeText=g)},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"changeConnectorText",{get:function(){return this._changeConnectorText},set:function(g){g!==this._changeConnectorText&&(this._changeConnectorText=g)},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"resizeShape",{get:function(){return this._resizeShape},set:function(g){g!==this._resizeShape&&(this._resizeShape=g)},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"moveShape",{get:function(){return this._moveShape},set:function(g){g!==this._moveShape&&(this._moveShape=g)},enumerable:!1,configurable:!0}),u.prototype.applySettings=function(g){g&&(typeof g.addShape=="boolean"&&(this.addShape=g.addShape),typeof g.addShapeFromToolbox=="boolean"&&(this.addShapeFromToolbox=g.addShapeFromToolbox),typeof g.deleteShape=="boolean"&&(this.deleteShape=g.deleteShape),typeof g.deleteConnector=="boolean"&&(this.deleteConnector=g.deleteConnector),typeof g.changeConnection=="boolean"&&(this.changeConnection=g.changeConnection),typeof g.changeConnectorPoints=="boolean"&&(this.changeConnectorPoints=g.changeConnectorPoints),typeof g.changeShapeText=="boolean"&&(this.changeShapeText=g.changeShapeText),typeof g.changeConnectorText=="boolean"&&(this.changeConnectorText=g.changeConnectorText),typeof g.resizeShape=="boolean"&&(this.resizeShape=g.resizeShape),typeof g.moveShape=="boolean"&&(this.moveShape=g.moveShape))},u}();h.ModelOperationSettings=d,function(u){u[u.AddShape=0]="AddShape",u[u.AddShapeFromToolbox=1]="AddShapeFromToolbox",u[u.DeleteShape=2]="DeleteShape",u[u.DeleteConnector=3]="DeleteConnector",u[u.ChangeConnection=4]="ChangeConnection",u[u.ChangeConnectorPoints=5]="ChangeConnectorPoints",u[u.BeforeChangeShapeText=6]="BeforeChangeShapeText",u[u.ChangeShapeText=7]="ChangeShapeText",u[u.BeforeChangeConnectorText=8]="BeforeChangeConnectorText",u[u.ChangeConnectorText=9]="ChangeConnectorText",u[u.ResizeShape=10]="ResizeShape",u[u.MoveShape=11]="MoveShape"}(h.DiagramModelOperation||(h.DiagramModelOperation={}))},7228:function(j,h,d){var u,g=this&&this.__extends||(u=function(i,e){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var o in n)n.hasOwnProperty(o)&&(t[o]=n[o])},u(i,e)},function(i,e){function t(){this.constructor=i}u(i,e),i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)});Object.defineProperty(h,"__esModule",{value:!0}),h.ConnectionPoint=void 0;var v=d(8900),p=d(3742),s=function(i){function e(t,n,o){o===void 0&&(o=p.ConnectionPointSide.Undefined);var r=i.call(this,t,n)||this;return r.side=o,r}return g(e,i),e.prototype.offset=function(t,n){return i.prototype.offset.call(this,t,n),this.side=p.ConnectionPointSide.Undefined,this},e.prototype.multiply=function(t,n){return i.prototype.multiply.call(this,t,n),this.side=p.ConnectionPointSide.Undefined,this},e.prototype.clone=function(){return new e(this.x,this.y,this.side)},e.prototype.toPoint=function(){return new v.Point(this.x,this.y)},e}(v.Point);h.ConnectionPoint=s},5800:function(j,h,d){var u,g=this&&this.__extends||(u=function(i,e){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var o in n)n.hasOwnProperty(o)&&(t[o]=n[o])},u(i,e)},function(i,e){function t(){this.constructor=i}u(i,e),i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)});Object.defineProperty(h,"__esModule",{value:!0}),h.ConnectorPointsCalculator=void 0;var v=d(7595),p=d(4717),s=function(i){function e(){return i!==null&&i.apply(this,arguments)||this}return g(e,i),e.prototype.getPoints=function(){return this.connector.points.map(function(t,n){return new p.ConnectorRenderPoint(t.x,t.y,n)})},e}(v.ConnectorPointsCalculatorBase);h.ConnectorPointsCalculator=s},7595:(j,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.ConnectorPointsCalculatorBase=void 0;var d=function(u){this.connector=u};h.ConnectorPointsCalculatorBase=d},2342:function(j,h,d){var u,g=this&&this.__extends||(u=function(f,m){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,l){y.__proto__=l}||function(y,l){for(var P in l)l.hasOwnProperty(P)&&(y[P]=l[P])},u(f,m)},function(f,m){function y(){this.constructor=f}u(f,m),f.prototype=m===null?Object.create(m):(y.prototype=m.prototype,new y)});Object.defineProperty(h,"__esModule",{value:!0}),h.ConnectorPointsOrthogonalCalculator=void 0;var v=d(8011),p=d(3742),s=d(7595),i=d(1686),e=d(1774),t=d(993),n=d(2290),o=d(7369),r=d(4717),a=d(4867),c=function(f){function m(y){var l=f.call(this,y)||this;return l.sideCalculators={},l.sideCalculators[p.ConnectionPointSide.Undefined]=new i.ConnectorPointsOrthogonalUndefinedSideCalculator(l),l.sideCalculators[p.ConnectionPointSide.South]=new e.ConnectorPointsOrthogonalSouthSideCalculator(l),l.sideCalculators[p.ConnectionPointSide.North]=new t.ConnectorPointsOrthogonalNorthSideCalculator(l),l.sideCalculators[p.ConnectionPointSide.East]=new n.ConnectorPointsOrthogonalEastSideCalculator(l),l.sideCalculators[p.ConnectionPointSide.West]=new o.ConnectorPointsOrthogonalWestSideCalculator(l),l}return g(m,f),Object.defineProperty(m.prototype,"beginRect",{get:function(){return this.connector.beginItem?this.connector.beginItem.rectangle:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"endRect",{get:function(){return this.connector.endItem?this.connector.endItem.rectangle:void 0},enumerable:!1,configurable:!0}),m.prototype.getPoints=function(){var y=this.connector.points.map(function(E,U){return new r.ConnectorRenderPoint(E.x,E.y,U)});a.ModelUtils.skipUnnecessaryRenderPoints(y,!0);var l=0,P=y.length-1,C=this.getPointSide(y,0),I=this.getPointSide(y,1),x=this.getPointSide(y,y.length-1),b=this.getPointSide(y,y.length-1-1),S=this.getSideCalculator(C),w=this.getSideCalculator(x),T=this.beginRect,_=S.getCorrectOriginPoint(y[l],T),M=y[l+1];if(y.length===2&&S.isOnSidePoint(_,M)&&S.isDirectConnectionAllowed(I,_,M))S.getDirectConnectionPoints(_,M).forEach(function(E){y.splice(l+1,0,E),l++,P++});else{var A=S.getBeginOffsetPoints(I,y[l],y[l+1],this.beginRect);A.forEach(function(E){y.splice(l+1,0,E)}),l+=A.length,P+=A.length,w.getEndOffsetPoints(b,y[P],y[P-1],this.endRect).forEach(function(E,U){y.splice(P+U,0,E)}),this.addMiddlePoints(y,l,P)}return a.ModelUtils.skipUnnecessaryRenderPoints(y,!0),y},m.prototype.getSideCalculator=function(y){return this.sideCalculators[y]},m.prototype.getPointSide=function(y,l){if(l===0&&this.connector.beginItem){var P=this.connector.beginConnectionPointIndex;return this.connector.beginItem.getConnectionPointSideByIndex(P,y[1])}return l===y.length-1&&this.connector.endItem?(P=this.connector.endConnectionPointIndex,this.connector.endItem.getConnectionPointSideByIndex(P,y[y.length-2])):p.ConnectionPointSide.Undefined},m.prototype.addMiddlePoints=function(y,l,P){for(var C=l;C<P;C++){var I=C+1,x=this.getMiddlePoint(y[C],y[C-1],C-1==0,y[I],y[I+1],I+1===y.length-1);x!==void 0&&(y.splice(C+1,0,x),C++,P++)}},m.prototype.getMiddlePoints=function(y,l){return y.x===l.x||y.y===l.y?[]:[new r.ConnectorRenderPoint(y.x,l.y),new r.ConnectorRenderPoint(l.x,y.y)]},m.prototype.getMiddlePoint=function(y,l,P,C,I,x){var b,S=this,w=this.getMiddlePoints(y,C);return w.forEach(function(T){var _=S.createPointsRect(y,T),M=S.createPointsRect(T,C),A=S.connector.beginItem?S.connector.beginItem.rectangle:void 0,E=S.connector.endItem?S.connector.endItem.rectangle:void 0;A&&(v.Rectangle.areIntersected(A,_)||v.Rectangle.areIntersected(A,M))||E&&(v.Rectangle.areIntersected(E,_)||v.Rectangle.areIntersected(E,M))||S.isReturnPoint(T,y,l)&&!S.isIntermediatePoints(y,l)||S.isReturnPoint(T,C,I)&&!S.isIntermediatePoints(C,I)||(b===void 0||S.isPriorMiddlePoint(T,y,l,C,I))&&(b=T)}),b===void 0&&w.length>0&&(b=w[0]),b},m.prototype.createPointsRect=function(y,l){var P=v.Rectangle.fromPoints(y,l);return P.width>0&&(P=P.clone().inflate(-1,0)),P.height>0&&(P=P.clone().inflate(0,-1)),P},m.prototype.isPriorMiddlePoint=function(y,l,P,C,I){return!(!P||y.x!==P.x&&y.y!==P.y)||!(!I||y.x!==I.x&&y.y!==I.y)},m.prototype.isReturnPoint=function(y,l,P){return l!==void 0&&P!==void 0&&(y.x===P.x&&(l.y<y.y&&y.y<P.y||l.y>y.y&&y.y>P.y)||y.y===P.y&&(l.x<y.x&&y.x<P.x||l.x>y.x&&y.x>P.x))},m.prototype.isIntermediatePoints=function(y,l){return 0<y.pointIndex&&y.pointIndex<this.connector.points.length-1&&0<l.pointIndex&&l.pointIndex<this.connector.points.length-1},m}(s.ConnectorPointsCalculatorBase);h.ConnectorPointsOrthogonalCalculator=c},2290:function(j,h,d){var u,g=this&&this.__extends||(u=function(e,t){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var r in o)o.hasOwnProperty(r)&&(n[r]=o[r])},u(e,t)},function(e,t){function n(){this.constructor=e}u(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(h,"__esModule",{value:!0}),h.ConnectorPointsOrthogonalEastSideCalculator=void 0;var v=d(3742),p=d(1816),s=d(4717),i=function(e){function t(n){return e.call(this,n)||this}return g(t,e),t.prototype.getCorrectOriginPoint=function(n,o){return n.x<o.right&&(n=n.clone().offset(o.right-n.x,0)),n},t.prototype.getSameShapeOffsetPoints=function(n,o,r,a){switch(n){case v.ConnectionPointSide.North:case v.ConnectionPointSide.South:case v.ConnectionPointSide.East:return[o.clone().offset(this.getMinOffset(),0)];case v.ConnectionPointSide.West:return this.getAsideOffsetPoints(o,r,a,this.getMinOffset(),this.getMinOffset())}},t.prototype.getOverlappedPointsOffsetPoints=function(n,o,r,a){switch(n){case v.ConnectionPointSide.East:return[o.clone().offset(this.getMinOffset(),0)];case v.ConnectionPointSide.West:return[o.clone().offset(-this.getMinOffset(),0)]}return[]},t.prototype.getBeginOverlappedShapeOffsetPoints=function(n,o,r,a){switch(n){case v.ConnectionPointSide.North:return o.x<r.x?o.y<r.y?[]:[o.clone().offset(this.getMinOffset(),0)]:o.x>this.endRect.right?this.getAsideOffsetPoints(o,r,a,this.getMinOffset(),this.getMinOffset(),!0):[o.clone().offset(this.getMinOffset(),0)];case v.ConnectionPointSide.South:return o.x<r.x?o.y>r.y?[]:[o.clone().offset(this.getMinOffset(),0)]:o.x>this.endRect.right?this.getAsideOffsetPoints(o,r,a,this.getMinOffset(),this.getMinOffset(),!1):[o.clone().offset(this.getMinOffset(),0)];case v.ConnectionPointSide.East:return[o.clone().offset(this.getMinOffset(),0)];case v.ConnectionPointSide.West:return this.getAsideOffsetPoints(o,r,a,this.getMinOffset(),this.getMinOffset(),o.y<r.y)}},t.prototype.getEndOverlappedShapeOffsetPoints=function(n,o,r,a){switch(n){case v.ConnectionPointSide.East:return[o.clone().offset(this.getMinOffset(),0)];case v.ConnectionPointSide.West:var c=this.getMinOffset();return this.beginRect.right>o.x&&(c+=this.beginRect.right-o.x),[o.clone().offset(c,0)];case v.ConnectionPointSide.North:return r.x<o.x?this.getAsideOffsetPoints(o,r,a,this.getMinOffset(),this.getMinOffset(),!0):o.y>r.y?[o.clone().offset(this.getMinOffset(),0)]:[];case v.ConnectionPointSide.South:return r.x<o.x?this.getAsideOffsetPoints(o,r,a,this.getMinOffset(),this.getMinOffset(),!1):o.y<r.y?[o.clone().offset(this.getMinOffset(),0)]:[]}},t.prototype.getBeginOnSideOffsetPoints=function(n,o,r,a){return[o.clone().offset(this.getScaleableOffsetX(o,r,!1),0)]},t.prototype.getEndOnSideOffsetPoints=function(n,o,r,a){return[o.clone().offset(this.getScaleableOffsetX(o,r,!0),0)]},t.prototype.getBeginOffSideOffsetPoints=function(n,o,r,a){switch(n){case v.ConnectionPointSide.South:if(this.isBeginEndOverlappedY())return this.getScaleableAsideOffsetPoints(o,r,a,!1,!1);break;case v.ConnectionPointSide.North:if(this.isBeginEndOverlappedY())return this.getScaleableAsideOffsetPoints(o,r,a,!1,!0);break;case v.ConnectionPointSide.East:if(this.isBeginEndOverlappedY())return this.getScaleableAsideOffsetPoints(o,r,a,!1);break;case v.ConnectionPointSide.Undefined:case v.ConnectionPointSide.West:return this.getScaleableAsideOffsetPoints(o,r,a,!1)}return[o.clone().offset(this.getScaleableOffsetX(o,r,!1),0)]},t.prototype.getEndOffSideOffsetPoints=function(n,o,r,a){if(n===v.ConnectionPointSide.Undefined)return this.getScaleableAsideOffsetPoints(o,r,a,!0);if(this.isBeginEndOverlappedY()){var c=this.beginRect.center.y>this.endRect.center.y;return this.getScaleableAsideOffsetPoints(o,r,a,!0,c)}return[o.clone().offset(this.getScaleableOffsetX(o,r,!0),0)]},t.prototype.getAsideOffsetPoints=function(n,o,r,a,c,f){var m=[];return r!==void 0&&(f===void 0&&(f=o.y<n.y),f?m.push(n.clone().offset(a,-(n.y-r.y+c))):m.push(n.clone().offset(a,r.bottom-n.y+c))),m.push(n.clone().offset(a,0)),m},t.prototype.getScaleableAsideOffsetPoints=function(n,o,r,a,c){var f=this.getScaleableOffsetX(n,o,a),m=this.getScaleableOffsetY(n,o,a);return this.getAsideOffsetPoints(n,o,r,f,m,c)},t.prototype.getScaleableOffsetX=function(n,o,r){if(this.beginRect&&this.endRect){var a=r?this.beginRect.x-n.x:this.endRect.x-n.x;if(a>0&&a<2*this.getMinOffset())return a/2}return this.getMinOffset()},t.prototype.getScaleableOffsetY=function(n,o,r){if(this.beginRect&&this.endRect&&!r&&!this.isBeginEndOverlappedY()){var a=void 0;if((a=o.y<n.y?this.beginRect.y-this.endRect.bottom:this.endRect.y-this.beginRect.bottom)<2*this.getMinOffset())return a/2}return this.getMinOffset()},t.prototype.isOnSidePoint=function(n,o){return o.x>n.x},t.prototype.isDirectConnectionAllowed=function(n,o,r){return n===v.ConnectionPointSide.West||n===v.ConnectionPointSide.Undefined},t.prototype.getDirectConnectionPoints=function(n,o){var r=n.x+(o.x-n.x)/2;return[new s.ConnectorRenderPoint(r,n.y),new s.ConnectorRenderPoint(r,o.y)]},t}(p.ConnectorPointsOrthogonalSideCalculatorBase);h.ConnectorPointsOrthogonalEastSideCalculator=i},993:function(j,h,d){var u,g=this&&this.__extends||(u=function(e,t){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var r in o)o.hasOwnProperty(r)&&(n[r]=o[r])},u(e,t)},function(e,t){function n(){this.constructor=e}u(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(h,"__esModule",{value:!0}),h.ConnectorPointsOrthogonalNorthSideCalculator=void 0;var v=d(3742),p=d(1816),s=d(4717),i=function(e){function t(n){return e.call(this,n)||this}return g(t,e),t.prototype.getCorrectOriginPoint=function(n,o){return n.y>o.y&&(n=n.clone().offset(0,o.y-n.y)),n},t.prototype.getSameShapeOffsetPoints=function(n,o,r,a){switch(n){case v.ConnectionPointSide.East:case v.ConnectionPointSide.West:case v.ConnectionPointSide.North:return[o.clone().offset(0,-this.getMinOffset())];case v.ConnectionPointSide.South:return this.getAsideOffsetPoints(o,r,a,this.getMinOffset(),this.getMinOffset())}},t.prototype.getOverlappedPointsOffsetPoints=function(n,o,r,a){switch(n){case v.ConnectionPointSide.South:return[o.clone().offset(0,this.getMinOffset())];case v.ConnectionPointSide.North:return[o.clone().offset(0,-this.getMinOffset())]}return[]},t.prototype.getBeginOverlappedShapeOffsetPoints=function(n,o,r,a){switch(n){case v.ConnectionPointSide.East:return o.y>r.y?o.x>r.x?[]:[o.clone().offset(0,-this.getMinOffset())]:o.y<this.endRect.y?this.getAsideOffsetPoints(o,r,a,this.getMinOffset(),this.getMinOffset(),!1):[o.clone().offset(0,-this.getMinOffset())];case v.ConnectionPointSide.West:return o.y>r.y?o.x<r.x?[]:[o.clone().offset(0,-this.getMinOffset())]:o.y<this.endRect.y?this.getAsideOffsetPoints(o,r,a,this.getMinOffset(),this.getMinOffset(),!0):[o.clone().offset(0,-this.getMinOffset())];case v.ConnectionPointSide.North:return[o.clone().offset(0,-this.getMinOffset())];case v.ConnectionPointSide.South:return this.getAsideOffsetPoints(o,r,a,this.getMinOffset(),this.getMinOffset(),o.x<r.x)}},t.prototype.getEndOverlappedShapeOffsetPoints=function(n,o,r,a){switch(n){case v.ConnectionPointSide.East:return r.y>o.y?this.getAsideOffsetPoints(o,r,a,this.getMinOffset(),this.getMinOffset(),!1):o.x<r.x?[o.clone().offset(0,-this.getMinOffset())]:[];case v.ConnectionPointSide.West:return r.y>o.y?this.getAsideOffsetPoints(o,r,a,this.getMinOffset(),this.getMinOffset(),!0):o.x>r.x?[o.clone().offset(0,-this.getMinOffset())]:[];case v.ConnectionPointSide.North:return[o.clone().offset(0,-this.getMinOffset())];case v.ConnectionPointSide.South:var c=-this.getMinOffset();return this.beginRect.y<o.y&&(c-=o.y-this.beginRect.y),[o.clone().offset(0,c)]}},t.prototype.getBeginOnSideOffsetPoints=function(n,o,r,a){return[o.clone().offset(0,-this.getScaleableOffsetY(o,r,!1))]},t.prototype.getEndOnSideOffsetPoints=function(n,o,r,a){return[o.clone().offset(0,-this.getScaleableOffsetY(o,r,!0))]},t.prototype.getBeginOffSideOffsetPoints=function(n,o,r,a){switch(n){case v.ConnectionPointSide.East:if(this.isBeginEndOverlappedX())return this.getScaleableAsideOffsetPoints(o,r,a,!1,!1);break;case v.ConnectionPointSide.West:if(this.isBeginEndOverlappedX())return this.getScaleableAsideOffsetPoints(o,r,a,!1,!0);break;case v.ConnectionPointSide.North:if(this.isBeginEndOverlappedX())return this.getScaleableAsideOffsetPoints(o,r,a,!1);break;case v.ConnectionPointSide.Undefined:case v.ConnectionPointSide.South:return this.getScaleableAsideOffsetPoints(o,r,a,!1)}return[o.clone().offset(0,-this.getScaleableOffsetY(o,r,!1))]},t.prototype.getEndOffSideOffsetPoints=function(n,o,r,a){if(n===v.ConnectionPointSide.Undefined)return this.getScaleableAsideOffsetPoints(o,r,a,!0);if(this.isBeginEndOverlappedX()){var c=this.beginRect.center.x>this.endRect.center.x;return this.getScaleableAsideOffsetPoints(o,r,a,!0,c)}return[o.clone().offset(0,-this.getScaleableOffsetY(o,r,!0))]},t.prototype.getAsideOffsetPoints=function(n,o,r,a,c,f){var m=[];return r!==void 0&&(f===void 0&&(f=o.x<n.x),f?m.push(n.clone().offset(-(n.x-r.x+c),-a)):m.push(n.clone().offset(r.right-n.x+c,-a))),m.push(n.clone().offset(0,-a)),m},t.prototype.getScaleableAsideOffsetPoints=function(n,o,r,a,c){var f=this.getScaleableOffsetY(n,o,a),m=this.getScaleableOffsetX(n,o,a);return this.getAsideOffsetPoints(n,o,r,f,m,c)},t.prototype.getScaleableOffsetX=function(n,o,r){if(this.beginRect&&this.endRect&&!r&&!this.isBeginEndOverlappedX()){var a=void 0;if((a=o.x<n.x?this.beginRect.x-this.endRect.right:this.endRect.x-this.beginRect.right)<2*this.getMinOffset())return a/2}return this.getMinOffset()},t.prototype.getScaleableOffsetY=function(n,o,r){if(this.beginRect&&this.endRect){var a=r?n.y-this.beginRect.bottom:n.y-this.endRect.bottom;if(a>0&&a<2*this.getMinOffset())return a/2}return this.getMinOffset()},t.prototype.isOnSidePoint=function(n,o){return o.y<n.y},t.prototype.isDirectConnectionAllowed=function(n,o,r){return n===v.ConnectionPointSide.South||n===v.ConnectionPointSide.Undefined},t.prototype.getDirectConnectionPoints=function(n,o){var r=o.y+(n.y-o.y)/2;return[new s.ConnectorRenderPoint(n.x,r),new s.ConnectorRenderPoint(o.x,r)]},t}(p.ConnectorPointsOrthogonalSideCalculatorBase);h.ConnectorPointsOrthogonalNorthSideCalculator=i},1816:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.ConnectorPointsOrthogonalSideCalculatorBase=void 0;var u=d(8011),g=d(3742),v=d(7959),p=function(){function s(i){this.parent=i}return Object.defineProperty(s.prototype,"connector",{get:function(){return this.parent.connector},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"beginRect",{get:function(){return this.parent.beginRect},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"endRect",{get:function(){return this.parent.endRect},enumerable:!1,configurable:!0}),s.prototype.getBeginOffsetPoints=function(i,e,t,n){if(e=this.getCorrectOriginPoint(e,n),i!==g.ConnectionPointSide.Undefined){if(this.isBeginEndSame())return this.getSameShapeOffsetPoints(i,e,t,n);if(this.isBeginEndOverlappedPoints(e,t))return this.getOverlappedPointsOffsetPoints(i,e,t,n);if(this.isBeginEndOverlapped())return this.getBeginOverlappedShapeOffsetPoints(i,e,t,n)}else if(this.isOriginRectContainsTargetPoint(n,t))return this.getOverlappedPointsOffsetPoints(i,e,t,n);return this.isOnSidePoint(e,t)?this.getBeginOnSideOffsetPoints(i,e,t,n):this.getBeginOffSideOffsetPoints(i,e,t,n)},s.prototype.getEndOffsetPoints=function(i,e,t,n){if(e=this.getCorrectOriginPoint(e,n),i!==g.ConnectionPointSide.Undefined){if(this.isBeginEndSame())return this.getSameShapeOffsetPoints(i,e,t,n);if(this.isBeginEndOverlappedPoints(t,e))return this.getOverlappedPointsOffsetPoints(i,e,t,n);if(this.isBeginEndOverlapped())return this.getEndOverlappedShapeOffsetPoints(i,e,t,n)}else if(this.isOriginRectContainsTargetPoint(n,t))return this.getOverlappedPointsOffsetPoints(i,e,t,n);return this.isOnSidePoint(e,t)?this.getEndOnSideOffsetPoints(i,e,t,n):this.getEndOffSideOffsetPoints(i,e,t,n)},s.prototype.getSide=function(i,e){return Math.abs(e.x-i.x)>Math.abs(e.y-i.y)?e.x>i.x?g.ConnectionPointSide.East:g.ConnectionPointSide.West:e.y>i.y?g.ConnectionPointSide.South:g.ConnectionPointSide.North},s.prototype.getSideCalculator=function(i,e){return this.parent.getSideCalculator(this.getSide(i,e))},s.prototype.getMinOffset=function(){return v.Connector.minOffset},s.prototype.isBeginEndSame=function(){return this.connector.beginItem===this.connector.endItem},s.prototype.isBeginEndOverlapped=function(){return this.beginRect&&this.endRect&&u.Rectangle.areIntersected(this.beginRect,this.endRect)},s.prototype.isBeginEndOverlappedX=function(){return this.beginRect&&this.endRect&&!!u.Rectangle.getHorizIntersection(this.beginRect,this.endRect)},s.prototype.isBeginEndOverlappedY=function(){return this.beginRect&&this.endRect&&!!u.Rectangle.getVertIntersection(this.beginRect,this.endRect)},s.prototype.isBeginEndOverlappedPoints=function(i,e){return this.beginRect&&this.endRect&&(this.beginRect.containsPoint(e)||this.endRect.containsPoint(i))},s.prototype.isOriginRectContainsTargetPoint=function(i,e){return i&&e&&i.containsPoint(e)},s}();h.ConnectorPointsOrthogonalSideCalculatorBase=p},1774:function(j,h,d){var u,g=this&&this.__extends||(u=function(e,t){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var r in o)o.hasOwnProperty(r)&&(n[r]=o[r])},u(e,t)},function(e,t){function n(){this.constructor=e}u(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(h,"__esModule",{value:!0}),h.ConnectorPointsOrthogonalSouthSideCalculator=void 0;var v=d(3742),p=d(1816),s=d(4717),i=function(e){function t(n){return e.call(this,n)||this}return g(t,e),t.prototype.getCorrectOriginPoint=function(n,o){return n.y<o.bottom&&(n=n.clone().offset(0,o.bottom-n.y)),n},t.prototype.getSameShapeOffsetPoints=function(n,o,r,a){switch(n){case v.ConnectionPointSide.East:case v.ConnectionPointSide.West:case v.ConnectionPointSide.South:return[o.clone().offset(0,this.getMinOffset())];case v.ConnectionPointSide.North:return this.getAsideOffsetPoints(o,r,a,this.getMinOffset(),this.getMinOffset())}},t.prototype.getOverlappedPointsOffsetPoints=function(n,o,r,a){switch(n){case v.ConnectionPointSide.South:return[o.clone().offset(0,this.getMinOffset())];case v.ConnectionPointSide.North:return[o.clone().offset(0,-this.getMinOffset())]}return[]},t.prototype.getBeginOverlappedShapeOffsetPoints=function(n,o,r,a){switch(n){case v.ConnectionPointSide.East:return o.y<r.y?o.x>r.x?[]:[o.clone().offset(0,this.getMinOffset())]:o.y>this.endRect.bottom?this.getAsideOffsetPoints(o,r,a,this.getMinOffset(),this.getMinOffset(),!1):[o.clone().offset(0,this.getMinOffset())];case v.ConnectionPointSide.West:return o.y<r.y?o.x<r.x?[]:[o.clone().offset(0,this.getMinOffset())]:o.y>this.endRect.bottom?this.getAsideOffsetPoints(o,r,a,this.getMinOffset(),this.getMinOffset(),!0):[o.clone().offset(0,this.getMinOffset())];case v.ConnectionPointSide.South:return[o.clone().offset(0,this.getMinOffset())];case v.ConnectionPointSide.North:return this.getAsideOffsetPoints(o,r,a,this.getMinOffset(),this.getMinOffset(),o.x<r.x)}},t.prototype.getEndOverlappedShapeOffsetPoints=function(n,o,r,a){switch(n){case v.ConnectionPointSide.East:return r.y<o.y?this.getAsideOffsetPoints(o,r,a,this.getMinOffset(),this.getMinOffset(),!1):o.x<r.x?[o.clone().offset(0,this.getMinOffset())]:[];case v.ConnectionPointSide.West:return r.y<o.y?this.getAsideOffsetPoints(o,r,a,this.getMinOffset(),this.getMinOffset(),!0):o.x>r.x?[o.clone().offset(0,this.getMinOffset())]:[];case v.ConnectionPointSide.South:return[o.clone().offset(0,this.getMinOffset())];case v.ConnectionPointSide.North:var c=this.getMinOffset();return this.beginRect.bottom>o.y&&(c+=this.beginRect.bottom-o.y),[o.clone().offset(0,c)]}},t.prototype.getBeginOnSideOffsetPoints=function(n,o,r,a){return[o.clone().offset(0,this.getScaleableOffsetY(o,r,!1))]},t.prototype.getEndOnSideOffsetPoints=function(n,o,r,a){return[o.clone().offset(0,this.getScaleableOffsetY(o,r,!0))]},t.prototype.getBeginOffSideOffsetPoints=function(n,o,r,a){switch(n){case v.ConnectionPointSide.East:if(this.isBeginEndOverlappedX())return this.getScaleableAsideOffsetPoints(o,r,a,!1,!1);break;case v.ConnectionPointSide.West:if(this.isBeginEndOverlappedX())return this.getScaleableAsideOffsetPoints(o,r,a,!1,!0);break;case v.ConnectionPointSide.South:if(this.isBeginEndOverlappedX())return this.getScaleableAsideOffsetPoints(o,r,a,!1);break;case v.ConnectionPointSide.Undefined:case v.ConnectionPointSide.North:return this.getScaleableAsideOffsetPoints(o,r,a,!1)}return[o.clone().offset(0,this.getScaleableOffsetY(o,r,!1))]},t.prototype.getEndOffSideOffsetPoints=function(n,o,r,a){if(n===v.ConnectionPointSide.Undefined)return this.getScaleableAsideOffsetPoints(o,r,a,!0);if(this.isBeginEndOverlappedX()){var c=this.beginRect.center.x>this.endRect.center.x;return this.getScaleableAsideOffsetPoints(o,r,a,!0,c)}return[o.clone().offset(0,this.getScaleableOffsetY(o,r,!0))]},t.prototype.getAsideOffsetPoints=function(n,o,r,a,c,f){var m=[];return r!==void 0&&(f===void 0&&(f=o.x<n.x),f?m.push(n.clone().offset(-(n.x-r.x+c),a)):m.push(n.clone().offset(r.right-n.x+c,a))),m.push(n.clone().offset(0,a)),m},t.prototype.getScaleableAsideOffsetPoints=function(n,o,r,a,c){var f=this.getScaleableOffsetY(n,o,a),m=this.getScaleableOffsetX(n,o,a);return this.getAsideOffsetPoints(n,o,r,f,m,c)},t.prototype.getScaleableOffsetX=function(n,o,r){if(this.beginRect&&this.endRect&&!r&&!this.isBeginEndOverlappedX()){var a=void 0;if((a=o.x<n.x?this.beginRect.x-this.endRect.right:this.endRect.x-this.beginRect.right)<2*this.getMinOffset())return a/2}return this.getMinOffset()},t.prototype.getScaleableOffsetY=function(n,o,r){if(this.beginRect&&this.endRect){var a=r?this.beginRect.y-n.y:this.endRect.y-n.y;if(a>0&&a<2*this.getMinOffset())return a/2}return this.getMinOffset()},t.prototype.isOnSidePoint=function(n,o){return o.y>n.y},t.prototype.isDirectConnectionAllowed=function(n,o,r){return n===v.ConnectionPointSide.North||n===v.ConnectionPointSide.Undefined},t.prototype.getDirectConnectionPoints=function(n,o){var r=n.y+(o.y-n.y)/2;return[new s.ConnectorRenderPoint(n.x,r),new s.ConnectorRenderPoint(o.x,r)]},t}(p.ConnectorPointsOrthogonalSideCalculatorBase);h.ConnectorPointsOrthogonalSouthSideCalculator=i},1686:function(j,h,d){var u,g=this&&this.__extends||(u=function(i,e){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var o in n)n.hasOwnProperty(o)&&(t[o]=n[o])},u(i,e)},function(i,e){function t(){this.constructor=i}u(i,e),i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)});Object.defineProperty(h,"__esModule",{value:!0}),h.ConnectorPointsOrthogonalUndefinedSideCalculator=void 0;var v=d(1816),p=d(4717),s=function(i){function e(t){return i.call(this,t)||this}return g(e,i),e.prototype.getCorrectOriginPoint=function(t,n){return t},e.prototype.getSameShapeOffsetPoints=function(t,n,o,r){return[]},e.prototype.getOverlappedPointsOffsetPoints=function(t,n,o,r){return[]},e.prototype.getBeginOverlappedShapeOffsetPoints=function(t,n,o,r){return[]},e.prototype.getEndOverlappedShapeOffsetPoints=function(t,n,o,r){return[]},e.prototype.getBeginOnSideOffsetPoints=function(t,n,o,r){return[]},e.prototype.getEndOnSideOffsetPoints=function(t,n,o,r){return[]},e.prototype.getBeginOffSideOffsetPoints=function(t,n,o,r){return[]},e.prototype.getEndOffSideOffsetPoints=function(t,n,o,r){return[]},e.prototype.isOnSidePoint=function(t,n){return!0},e.prototype.isDirectConnectionAllowed=function(t,n,o){var r=this.getSideCalculator(n,o);return r===void 0||r.isDirectConnectionAllowed(t,n,o)},e.prototype.getDirectConnectionPoints=function(t,n){var o=Math.abs(n.x-t.x),r=Math.abs(n.y-t.y);if(o>r){var a=Math.min(t.x,n.x)+o/2;return[new p.ConnectorRenderPoint(a,t.y),new p.ConnectorRenderPoint(a,n.y)]}var c=Math.min(t.y,n.y)+r/2;return[new p.ConnectorRenderPoint(t.x,c),new p.ConnectorRenderPoint(n.x,c)]},e}(v.ConnectorPointsOrthogonalSideCalculatorBase);h.ConnectorPointsOrthogonalUndefinedSideCalculator=s},7369:function(j,h,d){var u,g=this&&this.__extends||(u=function(e,t){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var r in o)o.hasOwnProperty(r)&&(n[r]=o[r])},u(e,t)},function(e,t){function n(){this.constructor=e}u(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(h,"__esModule",{value:!0}),h.ConnectorPointsOrthogonalWestSideCalculator=void 0;var v=d(3742),p=d(1816),s=d(4717),i=function(e){function t(n){return e.call(this,n)||this}return g(t,e),t.prototype.getCorrectOriginPoint=function(n,o){return n.x>o.x&&(n=n.clone().offset(o.x-n.x,0)),n},t.prototype.getSameShapeOffsetPoints=function(n,o,r,a){switch(n){case v.ConnectionPointSide.North:case v.ConnectionPointSide.South:case v.ConnectionPointSide.West:return[o.clone().offset(-this.getMinOffset(),0)];case v.ConnectionPointSide.East:return this.getAsideOffsetPoints(o,r,a,this.getMinOffset(),this.getMinOffset())}},t.prototype.getOverlappedPointsOffsetPoints=function(n,o,r,a){switch(n){case v.ConnectionPointSide.East:return[o.clone().offset(this.getMinOffset(),0)];case v.ConnectionPointSide.West:return[o.clone().offset(-this.getMinOffset(),0)]}return[]},t.prototype.getBeginOverlappedShapeOffsetPoints=function(n,o,r,a){switch(n){case v.ConnectionPointSide.North:return o.x>r.x?o.y<r.y?[]:[o.clone().offset(-this.getMinOffset(),0)]:o.x<this.endRect.x?this.getAsideOffsetPoints(o,r,a,this.getMinOffset(),this.getMinOffset(),!0):[o.clone().offset(-this.getMinOffset(),0)];case v.ConnectionPointSide.South:return o.x>r.x?o.y>r.y?[]:[o.clone().offset(-this.getMinOffset(),0)]:o.x<this.endRect.x?this.getAsideOffsetPoints(o,r,a,this.getMinOffset(),this.getMinOffset(),!1):[o.clone().offset(-this.getMinOffset(),0)];case v.ConnectionPointSide.West:return[o.clone().offset(-this.getMinOffset(),0)];case v.ConnectionPointSide.East:return this.getAsideOffsetPoints(o,r,a,this.getMinOffset(),this.getMinOffset(),o.y<r.y)}},t.prototype.getEndOverlappedShapeOffsetPoints=function(n,o,r,a){switch(n){case v.ConnectionPointSide.East:var c=-this.getMinOffset();return this.beginRect.x<o.x&&(c-=o.x-this.beginRect.x),[o.clone().offset(c,0)];case v.ConnectionPointSide.West:return[o.clone().offset(-this.getMinOffset(),0)];case v.ConnectionPointSide.North:return r.x>o.x?this.getAsideOffsetPoints(o,r,a,this.getMinOffset(),this.getMinOffset(),!0):o.y>r.y?[o.clone().offset(-this.getMinOffset(),0)]:[];case v.ConnectionPointSide.South:return r.x>o.x?this.getAsideOffsetPoints(o,r,a,this.getMinOffset(),this.getMinOffset(),!1):o.y<r.y?[o.clone().offset(-this.getMinOffset(),0)]:[]}},t.prototype.getBeginOnSideOffsetPoints=function(n,o,r,a){return[o.clone().offset(-this.getScaleableOffsetX(o,!1),0)]},t.prototype.getEndOnSideOffsetPoints=function(n,o,r,a){return[o.clone().offset(-this.getScaleableOffsetX(o,!0),0)]},t.prototype.getBeginOffSideOffsetPoints=function(n,o,r,a){switch(n){case v.ConnectionPointSide.South:if(this.isBeginEndOverlappedY())return this.getScaleableAsideOffsetPoints(o,r,a,!1,!1);break;case v.ConnectionPointSide.North:if(this.isBeginEndOverlappedY())return this.getScaleableAsideOffsetPoints(o,r,a,!1,!0);break;case v.ConnectionPointSide.West:if(this.isBeginEndOverlappedY())return this.getScaleableAsideOffsetPoints(o,r,a,!1);break;case v.ConnectionPointSide.Undefined:case v.ConnectionPointSide.East:return this.getScaleableAsideOffsetPoints(o,r,a,!1)}return[o.clone().offset(-this.getScaleableOffsetX(o,!1),0)]},t.prototype.getEndOffSideOffsetPoints=function(n,o,r,a){if(n===v.ConnectionPointSide.Undefined)return this.getScaleableAsideOffsetPoints(o,r,a,!0);if(this.isBeginEndOverlappedY()){var c=this.beginRect.center.y>this.endRect.center.y;return this.getScaleableAsideOffsetPoints(o,r,a,!0,c)}return[o.clone().offset(-this.getScaleableOffsetX(o,!0),0)]},t.prototype.getAsideOffsetPoints=function(n,o,r,a,c,f){var m=[];return r!==void 0&&(f===void 0&&(f=o.y<n.y),f?m.push(n.clone().offset(-a,-(n.y-r.y+c))):m.push(n.clone().offset(-a,r.bottom-n.y+c))),m.push(n.clone().offset(-a,0)),m},t.prototype.getScaleableAsideOffsetPoints=function(n,o,r,a,c){var f=this.getScaleableOffsetX(n,a),m=this.getScaleableOffsetY(n,o,a);return this.getAsideOffsetPoints(n,o,r,f,m,c)},t.prototype.getScaleableOffsetX=function(n,o){if(this.beginRect&&this.endRect){var r=o?n.x-this.beginRect.right:n.x-this.endRect.right;if(r>0&&r<2*this.getMinOffset())return r/2}return this.getMinOffset()},t.prototype.getScaleableOffsetY=function(n,o,r){if(this.beginRect&&this.endRect&&!r&&!this.isBeginEndOverlappedY()){var a=void 0;if((a=o.y<n.y?this.beginRect.y-this.endRect.bottom:this.endRect.y-this.beginRect.bottom)<2*this.getMinOffset())return a/2}return this.getMinOffset()},t.prototype.isOnSidePoint=function(n,o){return o.x<n.x},t.prototype.isDirectConnectionAllowed=function(n,o,r){return n===v.ConnectionPointSide.East||n===v.ConnectionPointSide.Undefined},t.prototype.getDirectConnectionPoints=function(n,o){var r=o.x+(n.x-o.x)/2;return[new s.ConnectorRenderPoint(r,n.y),new s.ConnectorRenderPoint(r,o.y)]},t}(p.ConnectorPointsOrthogonalSideCalculatorBase);h.ConnectorPointsOrthogonalWestSideCalculator=i},7959:function(j,h,d){var u,g=this&&this.__extends||(u=function(_,M){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,E){A.__proto__=E}||function(A,E){for(var U in E)E.hasOwnProperty(U)&&(A[U]=E[U])},u(_,M)},function(_,M){function A(){this.constructor=_}u(_,M),_.prototype=M===null?Object.create(M):(A.prototype=M.prototype,new A)});Object.defineProperty(h,"__esModule",{value:!0}),h.Connector=h.CONNECTOR_DEFAULT_TEXT_POSITION=h.ConnectorPosition=void 0;var v,p=d(9291),s=d(8011),i=d(1335),e=d(6353),t=d(7716),n=d(7185),o=d(6031),r=d(4246),a=d(7724),c=d(9416),f=d(3500),m=d(240),y=d(8675),l=d(3742),P=d(4867),C=d(5800),I=d(2342),x=d(5454),b=d(4612),S=d(4351),w=d(1510);(function(_){_[_.Begin=0]="Begin",_[_.End=1]="End"})(v=h.ConnectorPosition||(h.ConnectorPosition={})),h.CONNECTOR_DEFAULT_TEXT_POSITION=.5;var T=function(_){function M(A){var E=_.call(this)||this;if(E.beginConnectionPointIndex=-1,E.endConnectionPointIndex=-1,E.properties=new b.ConnectorProperties,E.points=A.map(function(U){return U.clone()}),A.length<2)throw Error("Points count should be greater than 1");return E.texts=new S.ConnectorTexts,E}return g(M,_),Object.defineProperty(M.prototype,"rectangle",{get:function(){return y.GeometryUtils.createRectagle(this.getRenderPoints(!0))},enumerable:!1,configurable:!0}),Object.defineProperty(M.prototype,"skippedRenderPoints",{get:function(){return this.renderPoints?this.renderPoints.filter(function(A){return A.skipped}):void 0},enumerable:!1,configurable:!0}),Object.defineProperty(M.prototype,"shouldChangeRenderPoints",{get:function(){return this.renderPoints!==void 0&&this.routingStrategy!==void 0},enumerable:!1,configurable:!0}),M.prototype.assign=function(A){_.prototype.assign.call(this,A),A.beginItem=this.beginItem,A.beginConnectionPointIndex=this.beginConnectionPointIndex,A.endItem=this.endItem,A.endConnectionPointIndex=this.endConnectionPointIndex,A.properties=this.properties.clone(),A.texts=this.texts.clone(),this.routingStrategy!==void 0&&(A.routingStrategy=this.routingStrategy.clone()),this.renderPoints!==void 0&&(A.renderPoints=this.renderPoints.map(function(E){return E.clone()})),this.renderPointsWithoutSkipped!==void 0&&(A.renderPointsWithoutSkipped=this.renderPointsWithoutSkipped.map(function(E){return E.clone()})),this.actualRoutingMode!==void 0&&(A.actualRoutingMode=this.actualRoutingMode),this.lockCreateRenderPoints!==void 0&&(A.lockCreateRenderPoints=this.lockCreateRenderPoints),this.shouldInvalidateRenderPoints!==void 0&&(A.shouldInvalidateRenderPoints=this.shouldInvalidateRenderPoints)},M.prototype.clone=function(){var A=new M(this.points);return this.assign(A),A},M.prototype.getTextCount=function(){return this.texts.count()},M.prototype.getText=function(A){A===void 0&&(A=h.CONNECTOR_DEFAULT_TEXT_POSITION);var E=this.texts.get(A);return E?E.value:""},M.prototype.setText=function(A,E){E===void 0&&(E=h.CONNECTOR_DEFAULT_TEXT_POSITION),A&&A!==""?this.texts.set(E,new S.ConnectorText(E,A)):this.texts.remove(E)},M.prototype.getTextPoint=function(A){var E=this.getRenderPoints();return y.GeometryUtils.getPathPointByPosition(E,A)[0]},M.prototype.getTextPositionByPoint=function(A){var E=this.getRenderPoints(),U=y.GeometryUtils.getPathLength(E),R=y.GeometryUtils.getPathPositionByPoint(E,A),O=p.UnitConverter.pointsToTwips(parseInt(this.styleText["font-size"]));return O>R*U?O/U:O>U-R*U?(U-O)/U:R},M.prototype.getTextRectangle=function(A){return s.Rectangle.fromGeometry(this.getTextPoint(A),new e.Size(0,0))},M.prototype.changeRoutingStrategy=function(A){this.routingStrategy=A,this.invalidateRenderPoints()},M.prototype.clearRoutingStrategy=function(){delete this.routingStrategy,delete this.renderPoints,delete this.renderPointsWithoutSkipped,delete this.lockCreateRenderPoints,delete this.actualRoutingMode,delete this.shouldInvalidateRenderPoints,this.invalidateRenderPoints()},M.prototype.getCustomRenderPoints=function(A){A===void 0&&(A=!1);var E=this.getRenderPoints(A),U=[];return E.forEach(function(R,O){O>0&&O<E.length-1&&U.push(R)}),U},M.prototype.getRenderPoints=function(A){if(A===void 0&&(A=!1),(this.shouldInvalidateRenderPoints===void 0||this.shouldInvalidateRenderPoints)&&(this.shouldInvalidateRenderPoints=!1,this.routingStrategy&&this.lockCreateRenderPoints||this.changeRenderPoints(this.getCalculator().getPoints()),this.routingStrategy&&!this.lockCreateRenderPoints&&this.actualRoutingMode!==m.ConnectorRoutingMode.None&&this.points&&this.renderPoints)){var E=this.points[0],U=this.points[this.points.length-1];if(!E.equals(U)){var R=this.routingStrategy.createRenderPoints(this.points,this.renderPoints,this.beginItem,this.endItem,this.beginConnectionPointIndex,this.endConnectionPointIndex,P.ModelUtils.getConnectorContainer(this));R?(this.changeRenderPoints(R),this.actualRoutingMode=m.ConnectorRoutingMode.AllShapesOnly):this.actualRoutingMode=m.ConnectorRoutingMode.None}}return A?this.renderPoints:this.renderPointsWithoutSkipped},M.prototype.tryCreateRenderPointsContext=function(A){return A||this.shouldChangeRenderPoints?new w.ConnectorRenderPointsContext(this.renderPoints.map(function(E){return E.clone()}),this.lockCreateRenderPoints,this.actualRoutingMode):void 0},M.prototype.updatePointsOnPageResize=function(A,E){this.points=this.points.map(function(U){return U.clone().offset(A,E)}),this.renderPoints&&this.changeRenderPoints(this.renderPoints.map(function(U){var R=U.clone().offset(A,E);return R.pointIndex=U.pointIndex,R.skipped=U.skipped,R}))},M.prototype.addPoint=function(A,E){this.points.splice(A,0,E)},M.prototype.deletePoint=function(A){this.points.splice(A,1)},M.prototype.movePoint=function(A,E){this.points[A]=E},M.prototype.onAddPoint=function(A,E){this.shouldChangeRenderPoints?this.replaceRenderPointsCore(this.routingStrategy.onAddPoint(this.points,A,E,this.renderPoints),!0,m.ConnectorRoutingMode.AllShapesOnly):this.invalidateRenderPoints()},M.prototype.onDeletePoint=function(A){this.shouldChangeRenderPoints?this.replaceRenderPointsCore(this.routingStrategy.onDeletePoint(this.points,A,this.renderPoints),this.points.length>2,m.ConnectorRoutingMode.AllShapesOnly):this.invalidateRenderPoints()},M.prototype.onMovePoint=function(A,E){this.shouldChangeRenderPoints?(A!==0&&A!==this.points.length-1||(this.lockCreateRenderPoints=!1),this.replaceRenderPointsCore(this.routingStrategy.onMovePoint(this.points,A,E,this.renderPoints),this.lockCreateRenderPoints,m.ConnectorRoutingMode.AllShapesOnly)):this.invalidateRenderPoints()},M.prototype.onMovePoints=function(A,E,U){this.shouldChangeRenderPoints?(A!==0&&E!==this.points.length-1||(this.lockCreateRenderPoints=!1),this.replaceRenderPointsCore(this.routingStrategy.onMovePoints(this.points,A,E,U,this.renderPoints),this.lockCreateRenderPoints,m.ConnectorRoutingMode.AllShapesOnly)):this.invalidateRenderPoints()},M.prototype.replaceRenderPoints=function(A,E){A!==void 0?(this.replaceRenderPointsCore(A.renderPoints,A.lockCreateRenderPoints,A.actualRoutingMode),E!==void 0&&(this.shouldInvalidateRenderPoints=E)):this.invalidateRenderPoints()},M.prototype.clearRenderPoints=function(){this.changeRenderPoints(void 0),this.lockCreateRenderPoints=!1,this.actualRoutingMode=void 0,this.invalidateRenderPoints()},M.prototype.replaceRenderPointsCore=function(A,E,U){this.changeRenderPoints(A),this.lockCreateRenderPoints=E,this.actualRoutingMode=U,this.invalidateRenderPoints()},M.prototype.changeRenderPoints=function(A){this.renderPoints=A,this.renderPointsWithoutSkipped=A?this.renderPoints.filter(function(E){return!E.skipped}):void 0},M.prototype.getCalculator=function(){return this.properties.lineOption===b.ConnectorLineOption.Straight?new C.ConnectorPointsCalculator(this):new I.ConnectorPointsOrthogonalCalculator(this)},M.prototype.invalidateRenderPoints=function(){this.shouldInvalidateRenderPoints=!0},M.prototype.createPrimitives=function(A){var E=[],U=this.getRenderPoints(),R=new a.PathPrimitive(U.map(function(O,N){return N===0?new a.PathPrimitiveMoveToCommand(O.x,O.y):new a.PathPrimitiveLineToCommand(O.x,O.y)}),this.style);return E.push(R),E=(E=E.concat(this.createLineEndingPrimitives(U,R))).concat(this.createTextPrimitives(A))},M.prototype.createLineEndingPrimitives=function(A,E){var U=[];return A.length>1&&[{strategy:this.createLineEndingStrategy(this.properties.startLineEnding),point1:A[0],point2:A[1]},{strategy:this.createLineEndingStrategy(this.properties.endLineEnding),point1:A[A.length-1],point2:A[A.length-2]}].forEach(function(R){var O=R.strategy;if(O.hasCommands()){var N=E;O.needCreateSeparatePrimitive()&&U.push(N=O.createPrimitive()),N.commands=N.commands.concat(O.createCommands(R.point1,R.point2))}}),U},M.prototype.createLineEndingStrategy=function(A){switch(A){case b.ConnectorLineEnding.None:return new x.ConnectorLineEndingNoneStrategy(this.style);case b.ConnectorLineEnding.Arrow:return new x.ConnectorLineEndingArrowStrategy(this.style);case b.ConnectorLineEnding.OutlinedTriangle:return new x.ConnectorLineEndingOutlinedTriangleStrategy(this.style);case b.ConnectorLineEnding.FilledTriangle:return new x.ConnectorLineEndingFilledTriangleStrategy(this.style);default:return new x.ConnectorLineEndingStrategy(this.style)}},M.prototype.createSelectorPrimitives=function(){var A=[],E=this.getRenderPoints();return A.push(new a.PathPrimitive(E.map(function(U,R){return R===0?new a.PathPrimitiveMoveToCommand(U.x,U.y):new a.PathPrimitiveLineToCommand(U.x,U.y)}),null,"selector")),A},M.prototype.createTextPrimitives=function(A){var E=this;if(!this.enableText)return[];var U=[];return this.texts.forEach(function(R){var O=E.getText(R.position);if(O&&O!==""){var N=E.getTextPoint(R.position);U=U.concat([new c.TextPrimitive(N.x,N.y,O,r.TextOwner.Connector,void 0,void 0,void 0,E.styleText,!0,null,t.PAGE_BG_TEXTFLOOR_FILTER_IDPREFIX+A,void 0,function(V){f.RenderUtils.setElementEventData(V,o.MouseEventElementType.ConnectorText,E.key,R.position)})])}}),U},M.prototype.getExtremeItem=function(A){return A===v.Begin?this.beginItem:A===v.End?this.endItem:null},M.prototype.getExtremeConnectionPointIndex=function(A){return A===v.Begin?this.beginConnectionPointIndex:A===v.End?this.endConnectionPointIndex:-1},M.prototype.getMinX=function(){return this.getRenderPoints().map(function(A){return A.x}).reduce(function(A,E){return Math.min(A,E)},Number.MAX_VALUE)},M.prototype.getMinY=function(){return this.getRenderPoints().map(function(A){return A.y}).reduce(function(A,E){return Math.min(A,E)},Number.MAX_VALUE)},M.prototype.getConnectionPoints=function(){return[]},M.prototype.getConnectionPointSide=function(A,E){return l.ConnectionPointSide.Undefined},M.prototype.getSegments=function(){var A=[],E=this.getRenderPoints();return E.forEach(function(U,R){R>0&&A.push(new i.Segment(E[R-1],U))}),A},M.prototype.intersectedByRect=function(A){return this.getSegments().some(function(E){return E.isIntersectedByRect(A)})},M.prototype.toNative=function(A){var E=new n.NativeConnector(this.key,this.dataKey);return E.fromKey=this.beginItem&&this.beginItem.dataKey,E.toKey=this.endItem&&this.endItem.dataKey,E.texts=this.texts.map(function(U){return U}).sort(function(U,R){return U.position-R.position}).map(function(U){return U.value}),E.fromId=this.beginItem&&this.beginItem.key,E.fromPointIndex=this.beginConnectionPointIndex,E.toId=this.endItem&&this.endItem.key,E.toPointIndex=this.endConnectionPointIndex,E.points=this.points.map(function(U){return U.clone()}),E.applyUnits(A),E},M.minOffset=p.UnitConverter.pixelsToTwips(24),M.minTextHeight=p.UnitConverter.pixelsToTwips(12),M}(l.DiagramItem);h.Connector=T},5454:function(j,h,d){var u,g=this&&this.__extends||(u=function(o,r){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var f in c)c.hasOwnProperty(f)&&(a[f]=c[f])},u(o,r)},function(o,r){function a(){this.constructor=o}u(o,r),o.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)});Object.defineProperty(h,"__esModule",{value:!0}),h.ConnectorLineEndingFilledTriangleStrategy=h.ConnectorLineEndingOutlinedTriangleStrategy=h.ConnectorLineEndingArrowStrategy=h.ConnectorLineEndingNoneStrategy=h.ConnectorLineEndingStrategy=void 0;var v=d(8675),p=d(7724),s=function(){function o(r){this.style=r}return o.prototype.hasCommands=function(){return!0},o.prototype.needCreateSeparatePrimitive=function(){return!1},o.prototype.createPrimitive=function(){return new p.PathPrimitive([],this.getStyle(),this.getCssClass())},o.prototype.createCommands=function(r,a){return[]},o.prototype.getStyle=function(){var r=this.style.clone();return r.resetStrokeDashArray(),r},o.prototype.getCssClass=function(){},o}();h.ConnectorLineEndingStrategy=s;var i=function(o){function r(){return o!==null&&o.apply(this,arguments)||this}return g(r,o),r.prototype.hasCommands=function(){return!1},r}(s);h.ConnectorLineEndingNoneStrategy=i;var e=function(o){function r(){return o!==null&&o.apply(this,arguments)||this}return g(r,o),Object.defineProperty(r.prototype,"arrowHeight",{get:function(){return 6*this.style.strokeWidth},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"arrowWidth",{get:function(){return 2*this.style.strokeWidth},enumerable:!1,configurable:!0}),r.prototype.needCreateSeparatePrimitive=function(){return!this.style.isDefaultStrokeDashArray()},r.prototype.createCommands=function(a,c){var f=this.getArrowPoints(a,c),m=[new p.PathPrimitiveMoveToCommand(f.point1.x,f.point1.y),new p.PathPrimitiveLineToCommand(a.x,a.y),new p.PathPrimitiveLineToCommand(f.point2.x,f.point2.y)];return this.style.isDefaultStrokeDashArray()||(m=m.concat([new p.PathPrimitiveMoveToCommand(a.x,a.y),new p.PathPrimitiveLineToCommand(f.point3.x,f.point3.y)])),m},r.prototype.getArrowPoints=function(a,c){var f,m=this.arrowHeight;return a.x===c.x&&(f=Math.abs(a.y-c.y))<m&&(m=f),a.y===c.y&&(f=Math.abs(a.x-c.x))<m&&(m=f),v.GeometryUtils.getArrowPoints(a,c,m,this.arrowWidth)},r}(s);h.ConnectorLineEndingArrowStrategy=e;var t=function(o){function r(){return o!==null&&o.apply(this,arguments)||this}return g(r,o),r.prototype.needCreateSeparatePrimitive=function(){return!0},r.prototype.createCommands=function(a,c){var f=this.getArrowPoints(a,c);return[new p.PathPrimitiveMoveToCommand(f.point1.x,f.point1.y),new p.PathPrimitiveLineToCommand(a.x,a.y),new p.PathPrimitiveLineToCommand(f.point2.x,f.point2.y),new p.PathPrimitiveClosePathCommand]},r.prototype.getCssClass=function(){return"outlined-line-ending"},r}(e);h.ConnectorLineEndingOutlinedTriangleStrategy=t;var n=function(o){function r(){return o!==null&&o.apply(this,arguments)||this}return g(r,o),r.prototype.getStyle=function(){var a=o.prototype.getStyle.call(this);return a.fill=a.stroke,a},r.prototype.getCssClass=function(){return"filled-line-ending"},r}(t);h.ConnectorLineEndingFilledTriangleStrategy=n},4612:(j,h)=>{var d,u;Object.defineProperty(h,"__esModule",{value:!0}),h.ConnectorProperties=h.DEFAULT_CONNECTOR_ENDLINEENDING=h.DEFAULT_CONNECTOR_STARTLINEENDING=h.DEFAULT_CONNECTOR_LINEOPTION=h.ConnectorLineEnding=h.ConnectorLineOption=void 0,function(v){v[v.Straight=0]="Straight",v[v.Orthogonal=1]="Orthogonal"}(d=h.ConnectorLineOption||(h.ConnectorLineOption={})),function(v){v[v.None=0]="None",v[v.Arrow=1]="Arrow",v[v.OutlinedTriangle=2]="OutlinedTriangle",v[v.FilledTriangle=3]="FilledTriangle"}(u=h.ConnectorLineEnding||(h.ConnectorLineEnding={})),h.DEFAULT_CONNECTOR_LINEOPTION=d.Orthogonal,h.DEFAULT_CONNECTOR_STARTLINEENDING=u.None,h.DEFAULT_CONNECTOR_ENDLINEENDING=u.Arrow;var g=function(){function v(){this.lineOption=h.DEFAULT_CONNECTOR_LINEOPTION,this.startLineEnding=h.DEFAULT_CONNECTOR_STARTLINEENDING,this.endLineEnding=h.DEFAULT_CONNECTOR_ENDLINEENDING}return v.prototype.clone=function(){var p=new v;return p.lineOption=this.lineOption,p.startLineEnding=this.startLineEnding,p.endLineEnding=this.endLineEnding,p},v.prototype.forEach=function(p){for(var s in this)Object.prototype.hasOwnProperty.call(this,s)&&p(s)},v.prototype.toObject=function(){var p={},s=!1;return this.lineOption!==h.DEFAULT_CONNECTOR_LINEOPTION&&(p.lineOption=this.lineOption,s=!0),this.startLineEnding!==h.DEFAULT_CONNECTOR_STARTLINEENDING&&(p.startLineEnding=this.startLineEnding,s=!0),this.endLineEnding!==h.DEFAULT_CONNECTOR_ENDLINEENDING&&(p.endLineEnding=this.endLineEnding,s=!0),s?p:null},v.prototype.fromObject=function(p){typeof p.lineOption=="number"&&(this.lineOption=p.lineOption),typeof p.startLineEnding=="number"&&(this.startLineEnding=p.startLineEnding),typeof p.endLineEnding=="number"&&(this.endLineEnding=p.endLineEnding)},v}();h.ConnectorProperties=g},4717:function(j,h,d){var u,g=this&&this.__extends||(u=function(p,s){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t])},u(p,s)},function(p,s){function i(){this.constructor=p}u(p,s),p.prototype=s===null?Object.create(s):(i.prototype=s.prototype,new i)});Object.defineProperty(h,"__esModule",{value:!0}),h.ConnectorRenderPoint=void 0;var v=function(p){function s(i,e,t,n){t===void 0&&(t=-1),n===void 0&&(n=!1);var o=p.call(this,i,e)||this;return o.pointIndex=t,o.skipped=n,o}return g(s,p),s.prototype.offset=function(i,e){return p.prototype.offset.call(this,i,e),this.pointIndex=-1,this.skipped=!1,this},s.prototype.multiply=function(i,e){return p.prototype.multiply.call(this,i,e),this.pointIndex=-1,this.skipped=!1,this},s.prototype.clone=function(){return new s(this.x,this.y,this.pointIndex,this.skipped)},s.equal=function(i,e){return i.equals(e)&&i.pointIndex===e.pointIndex&&i.skipped===e.skipped},s.prototype.toObject=function(){return{x:this.x,y:this.y,pointIndex:this.pointIndex,skipped:this.skipped}},s.fromObject=function(i){return new s(i.x,i.y,i.pointIndex,i.skipped)},s}(d(8900).Point);h.ConnectorRenderPoint=v},4351:(j,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.ConnectorTexts=h.ConnectorText=void 0;var d=function(g,v){this.position=g,this.value=v};h.ConnectorText=d;var u=function(){function g(){this.items={}}return g.prototype.get=function(v){return this.items[v]},g.prototype.set=function(v,p){this.items[v]=p},g.prototype.remove=function(v){delete this.items[v]},g.prototype.map=function(v){var p=[];return this.forEach(function(s){return p.push(v(s))}),p},g.prototype.forEach=function(v){for(var p in this.items)Object.prototype.hasOwnProperty.call(this.items,p)&&v(this.items[p])},g.prototype.count=function(){return Object.keys(this.items).length},g.prototype.clone=function(){var v=new g;return this.forEach(function(p){v.set(p.position,new d(p.position,p.value))}),v},g.prototype.toObject=function(){var v={},p=!1;return this.forEach(function(s){v[s.position]=s.value,p=!0}),p?v:null},g.prototype.fromObject=function(v){for(var p in v)if(Object.prototype.hasOwnProperty.call(v,p)){var s=parseFloat(p);isNaN(s)||typeof v[p]!="string"||this.set(s,new d(s,v[p]))}},g}();h.ConnectorTexts=u},3975:(j,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.AStarCalculator=void 0;var d=function(){function u(){}return u.calculate=function(g){if(g)for(var v=this.start(g);v;)v=v(g)},u.start=function(g){return g.start(),g.shouldStartContinue?u.startContinue:u.finishWithPath},u.startContinue=function(g){return g.startContinue(),g.shouldFinish?u.finishWithPath:u.endContinue},u.endContinue=function(g){return g.endContinue(),g.shouldStartContinue?u.startContinue:u.finishWithoutPath},u.finishWithPath=function(g){g.finishWithPath()},u.finishWithoutPath=function(g){g.finishWithoutPath()},u}();h.AStarCalculator=d},2180:function(j,h,d){var u,g=this&&this.__extends||(u=function(r,a){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var m in f)f.hasOwnProperty(m)&&(c[m]=f[m])},u(r,a)},function(r,a){function c(){this.constructor=r}u(r,a),r.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)});Object.defineProperty(h,"__esModule",{value:!0}),h.AStarContext=h.AStarContextBase=void 0;var v=d(3225),p=d(1039),s=d(684),i=d(1335),e=d(5074),t=d(8675),n=function(){function r(a,c,f){this.startPosition=a,this.targetPosition=c,this.maxStepsCount=f,this.prohibitedPoints={}}return Object.defineProperty(r.prototype,"shouldStartContinue",{get:function(){return this.updatableSet.count>0&&this.stepsCount<this.maxStepsCount},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"shouldFinish",{get:function(){return this.currentNode.position.equals(this.targetPosition)},enumerable:!1,configurable:!0}),r.prototype.start=function(){this.generalSet=new v.SortedQueues(function(c){return c.key}),this.updatableSet=new p.UniqueAStarNodePositions;var a=new s.AStarNode(this.startPosition,this.getDistance(this.startPosition,this.targetPosition));this.currentNode=a,this.generalSet.enqueue(a),this.updatableSet.add(a.position,a),this.stepsCount=0,this.openNode=void 0},r.prototype.startContinue=function(){this.currentNode=this.generalSet.dequeueMin()},r.prototype.endContinue=function(){var a=this,c=this.currentNode.position;this.updatableSet.remove(c),this.addProhibitedPoint(c),this.getNeighborPoints(c).forEach(function(f){var m=a.getPenalty(a.currentNode,f),y=a.updatableSet.getNode(f);if(y===void 0)(y=new s.AStarNode(f,a.getDistance(f,a.targetPosition))).parent=a.currentNode,y.penalty=m,a.generalSet.enqueue(y),a.updatableSet.add(f,y);else if(y.penalty>m){var l=a.generalSet;l.remove(y),y.parent=a.currentNode,y.penalty=m,l.enqueue(y)}a.openNode=y}),this.stepsCount++},r.prototype.finishWithPath=function(){this.path=this.currentNode.getPath()},r.prototype.finishWithoutPath=function(){this.path=[]},r}();h.AStarContextBase=n;var o=function(r){function a(c,f,m,y,l,P){var C=r.call(this,f,m,1e4)||this;return C.routingContext=c,C.startPosition=f,C.targetPosition=m,C.prohibitedSegments=y,C.grid=l,C.metrics=P,C}return g(a,r),a.prototype.addProhibitedPoint=function(c){this.prohibitedPoints[c.toString()]=c},a.prototype.getNeighborPoints=function(c){var f=this;return this.grid.getNeighborPoints(c).filter(function(m){return f.allowPoint(m)})},a.prototype.getDistance=function(c,f){return this.metrics.distance(c,f)},a.prototype.getPenalty=function(c,f){var m=c.parent,y=c.position,l=this.getTurnDirection(m?t.GeometryUtils.createAngle(m.position,y,f):0),P=this.getDistance(y,f),C=new i.Segment(y,f).center;return c.penalty+this.metrics.penalty(P,C,l,this.getIntersectedItems(C))},a.prototype.allowPoint=function(c){return this.prohibitedPoints[c.toString()]===void 0&&(!this.prohibitedSegments||this.prohibitedSegments.allowPoint(c))},a.prototype.getTurnDirection=function(c){return e.RightAngleConnectorRoutingMathOperations.getTurnDirection(c)},a.prototype.getIntersectedItems=function(c){var f=this,m=this.routingContext.shapeMargins;return this.routingContext.getIntersectedItems(c,function(y,l){return f.hasIntersectedItem(y,l,m)})},a.prototype.hasIntersectedItem=function(c,f,m){return!!this.isIntersectedWithExtendedRectangle(c,f,m)&&(!!this.hasOneShapeConnection(f)||!this.itemContainsConnectionPoints(f))},a.prototype.isIntersectedWithExtendedRectangle=function(c,f,m){return f.rectangle.clone().inflate(m).containsPoint(c)},a.prototype.itemContainsConnectionPoints=function(c){var f=c.rectangle;return f.containsPoint(this.routingContext.beginPoint)&&f.containsPoint(this.routingContext.endPoint)},a.prototype.hasOneShapeConnection=function(c){var f=c.getConnectionPoints();return this.isConnectionPoint(f,this.routingContext.beginPoint)&&this.isConnectionPoint(f,this.routingContext.endPoint)},a.prototype.isConnectionPoint=function(c,f){return c.filter(function(m){return m.equals(f)}).length>0},a}(n);h.AStarContext=o},9927:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.IntersectedShapeZone=h.AStarMetrics=h.IntersectedShapesMetrics=h.TurnDirectionMetrics=h.IntersectedShapeMetrics=h.RightAngleTurnDirection=void 0;var u,g=d(8900),v=d(5596);(function(t){t[t.Straight=0]="Straight",t[t.Left=1]="Left",t[t.Right=2]="Right",t[t.Backwards=3]="Backwards"})(u=h.RightAngleTurnDirection||(h.RightAngleTurnDirection={}));var p=function(){function t(n,o){this.description=n,this.shapeMargin=o}return t.prototype.penalty=function(n,o,r,a){var c=a.rectangle;if(c.containsPoint(r))return n+this.description.shape*o;var f=this.createRelativeMarginPenalty(r,c,this.shapeMargin);return f>0?n+this.description.margin*f*o:n},t.prototype.createRelativeMarginPenalty=function(n,o,r){var a=this.isTopPosition(n,o,r),c=this.isLeftPosition(n,o,r),f=this.isBottomPosition(n,o,r),m=this.isRightPosition(n,o,r);if(a){if(c){var y=(C=o.clone().inflate(r)).createPosition(),l=o.createPosition(),P=v.Metrics.euclideanDistance(l,y);return 1-v.Metrics.euclideanDistance(l,n)/P}if(m){var C=o.clone().inflate(r),I=new g.Point(C.right,C.y),x=new g.Point(o.right,o.y),b=v.Metrics.euclideanDistance(x,I);return 1-v.Metrics.euclideanDistance(x,n)/b}return 1-(o.y-n.y)/r}if(f){if(c){C=o.clone().inflate(r);var S=new g.Point(C.x,C.bottom),w=new g.Point(o.x,o.bottom),T=v.Metrics.euclideanDistance(w,S);return 1-v.Metrics.euclideanDistance(w,n)/T}if(m){C=o.clone().inflate(r);var _=new g.Point(C.right,C.bottom),M=new g.Point(o.right,o.bottom),A=v.Metrics.euclideanDistance(M,_);return 1-v.Metrics.euclideanDistance(M,n)/A}return 1-(n.y-o.bottom)/r}return c?1-(o.x-n.x)/r:m?1-(n.x-o.right)/r:0},t.prototype.isTopPosition=function(n,o,r){return n.x>o.x-r&&n.x<o.right+r&&n.y>o.y-r&&n.y<o.y},t.prototype.isBottomPosition=function(n,o,r){return n.x>o.x-r&&n.x<o.right+r&&n.y>o.bottom&&n.y<o.bottom+r},t.prototype.isLeftPosition=function(n,o,r){return n.x>o.x-r&&n.x<o.x&&n.y>o.y-r&&n.y<o.bottom+r},t.prototype.isRightPosition=function(n,o,r){return n.x>o.right&&n.x<o.right+r&&n.y>o.y-r&&n.y<o.bottom+r},t}();h.IntersectedShapeMetrics=p;var s=function(){function t(n){this.description=n}return t.prototype.penalty=function(n,o){switch(o){case u.Backwards:return n*this.description.turnBack;case u.Left:return n*this.description.turnLeft;case u.Right:return n*this.description.turnRight}return n},t}();h.TurnDirectionMetrics=s;var i=function(){function t(n){this.shapeMetrics=n}return t.prototype.penalty=function(n,o,r,a){var c=this;if(!a||!a.length)return n;var f=n;return a.forEach(function(m){return f=c.shapeMetrics.penalty(f,o,r,m)}),f},t}();h.IntersectedShapesMetrics=i;var e=function(){function t(n,o){this.turnDirectionMetrics=n,this.shapesMetrics=o}return t.prototype.distance=function(n,o){return v.Metrics.manhattanDistance(n,o)},t.prototype.penalty=function(n,o,r,a){var c=n;return c=this.shapesMetrics.penalty(c,n,o,a),c=this.turnDirectionMetrics.penalty(c,r)},t}();h.AStarMetrics=e,function(t){t[t.None=0]="None",t[t.Shape=1]="Shape",t[t.Margin=2]="Margin"}(h.IntersectedShapeZone||(h.IntersectedShapeZone={}))},684:(j,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.AStarNode=void 0;var d=function(){function u(g,v){this.position=g,this.distance=v,this.penalty=0}return Object.defineProperty(u.prototype,"key",{get:function(){return this.distance+this.penalty},enumerable:!1,configurable:!0}),u.prototype.getPath=function(){for(var g=[],v=this;v!==void 0;)g.splice(0,0,v.position),v=v.parent;return g},u}();h.AStarNode=d},3225:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.SortedQueues=void 0;var u=d(2400),g=function(){function v(p){this.getKey=p,this._itemsArrays={},this._sortedKeys=[]}return Object.defineProperty(v.prototype,"sortedKeys",{get:function(){return this._sortedKeys},enumerable:!1,configurable:!0}),v.prototype.getQueue=function(p){return this._itemsArrays[p]},v.prototype.enqueue=function(p){var s=this.getKey(p);this._itemsArrays[s]===void 0?(this._itemsArrays[s]=[p],this.addSortedKey(s)):this._itemsArrays[s].push(p)},v.prototype.remove=function(p){var s=this.getKey(p),i=this._itemsArrays[s];i!==void 0&&(i.length?i[0]===p?(i.shift(),i.length||this.removeCore(s)):this._itemsArrays[s]=i.filter(function(e){return e!==p}):this.removeCore(s))},v.prototype.dequeueMin=function(){if(this._sortedKeys.length){var p=this._sortedKeys[0],s=this._itemsArrays[p],i=s.shift();return s.length||this.removeCore(p),i}},v.prototype.removeCore=function(p){delete this._itemsArrays[p],this.removeSortedKey(p)},v.prototype.removeSortedKey=function(p){var s=u.SearchUtils.binaryIndexOf(this._sortedKeys,function(i){return i-p});s>=0&&this.sortedKeys.splice(s,1)},v.prototype.addSortedKey=function(p){var s=u.SearchUtils.binaryIndexOf(this._sortedKeys,function(i){return i-p});s<0&&this._sortedKeys.splice(-(s+1),0,p)},v}();h.SortedQueues=g},1039:(j,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.UniqueAStarNodePositions=void 0;var d=function(){function u(g){g===void 0&&(g=function(v){return v.toString()}),this.getKey=g,this.items={}}return Object.defineProperty(u.prototype,"count",{get:function(){return Object.keys(this.items).length},enumerable:!1,configurable:!0}),u.prototype.getNode=function(g){var v=this.items[this.getKey(g)];return v!==void 0?v.node:void 0},u.prototype.add=function(g,v){var p=this.getKey(g);this.items[p]===void 0&&(this.items[p]={position:g,node:v})},u.prototype.remove=function(g){var v=this.getKey(g);this.items[v]!==void 0&&delete this.items[v]},u}();h.UniqueAStarNodePositions=d},1768:(j,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.ConnectorProhibitedSegments=void 0;var d=function(){function u(){this.segments=[],this.exludedPoints={}}return u.prototype.addSegment=function(g){this.segments.push(g)},u.prototype.addExludedPoint=function(g){this.exludedPoints[g.toString()]=g},u.prototype.allowPoint=function(g){if(this.exludedPoints[g.toString()]===void 0){for(var v=0;v<this.segments.length;v++)if(this.segments[v].containsPoint(g))return!1}return!0},u}();h.ConnectorProhibitedSegments=d},1510:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.ConnectorRenderPointsContext=void 0;var u=d(4717),g=function(){function v(p,s,i){this.renderPoints=p,this.lockCreateRenderPoints=s,this.actualRoutingMode=i}return v.prototype.toObject=function(){return{actualRoutingMode:this.actualRoutingMode,lockCreateRenderPoints:this.lockCreateRenderPoints,renderPoints:this.renderPoints.map(function(p){return p.toObject()})}},v.fromObject=function(p){return new v(p.renderPoints.map(function(s){return u.ConnectorRenderPoint.fromObject(s)}),p.lockCreateRenderPoints,p.actualRoutingMode)},v}();h.ConnectorRenderPointsContext=g},2868:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.ConnectorRenderSegment=void 0;var u=d(1335),g=d(1768),v=function(){function p(s,i,e,t){this.startInfo=s,this.endInfo=i,this.startPointIndex=e,this.previousCustomSegment=t}return Object.defineProperty(p.prototype,"startPathPoint",{get:function(){return this.startInfo instanceof u.Segment?this.startInfo.endPoint:this.startInfo},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"endPathPoint",{get:function(){return this.endInfo instanceof u.Segment?this.endInfo.startPoint:this.endInfo},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"startPoint",{get:function(){return this.startInfo instanceof u.Segment?this.startInfo.startPoint:this.startInfo},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"endPoint",{get:function(){return this.endInfo instanceof u.Segment?this.endInfo.endPoint:this.endInfo},enumerable:!1,configurable:!0}),p.prototype.createGridPoints=function(){var s=[];return this.endInfo instanceof u.Segment?(s.push(this.endInfo.startPoint),s.push(this.endInfo.endPoint)):s.push(this.endInfo),s},p.prototype.createProhibitedSegments=function(){if(this.startInfo instanceof u.Segment){var s=this.createProhibitedSegmentsCore(this.startInfo);return this.endInfo instanceof u.Segment&&(s.addSegment(this.endInfo),s.addExludedPoint(this.endInfo.startPoint)),this.previousCustomSegment&&s.addSegment(this.previousCustomSegment),s}return this.endInfo instanceof u.Segment?((s=this.createProhibitedSegmentsCore(this.endInfo)).addExludedPoint(this.endInfo.startPoint),this.previousCustomSegment&&s.addSegment(this.previousCustomSegment),s):this.previousCustomSegment?this.createProhibitedSegmentsCore(this.previousCustomSegment):void 0},p.prototype.createProhibitedSegmentsCore=function(s){var i=new g.ConnectorProhibitedSegments;return i.addSegment(s),i},p}();h.ConnectorRenderSegment=v},5714:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.ConnectorRoutingModel=h.ConnectorRoutingPenaltyDescription=void 0;var u=d(240),g=d(5503),v=d(7959),p=d(4612),s=d(3597),i=function(){this.shape=20,this.margin=2,this.turnBack=20,this.turnLeft=3.1,this.turnRight=3};h.ConnectorRoutingPenaltyDescription=i;var e=function(){function t(){this.connectorRoutingMode=u.ConnectorRoutingMode.AllShapesOnly,this.shapeMargins=v.Connector.minOffset,this.shouldReverseConnections=!0,this.shouldResizeConnections=!0,this.penaltyDescription=new i}return t.prototype.initialize=function(n){this.model=n},t.prototype.createStrategy=function(n){if(this.model!==void 0&&this.connectorRoutingMode!==u.ConnectorRoutingMode.None&&n===p.ConnectorLineOption.Orthogonal)return new s.RightAngleConnectorRoutingStrategy(this)},t.prototype.getItems=function(n,o){return this.getShapes(n,o)},t.prototype.notifyConnectorRoutingModeChanged=function(n){this.connectorRoutingMode=n},t.prototype.getShapes=function(n,o){return this.model===void 0||this.connectorRoutingMode===void 0||this.connectorRoutingMode===u.ConnectorRoutingMode.None?[]:this.connectorRoutingMode===u.ConnectorRoutingMode.AllShapesOnly?this.model.items.filter(function(r){return r instanceof g.Shape}):this.getConnectorShapes(n,o)},t.prototype.getConnectorShapes=function(n,o){var r=[];return n&&r.push(n),o&&n!==o&&r.push(o),r},t}();h.ConnectorRoutingModel=e},1254:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.RoutingGrid=void 0;var u=d(2400),g=function(){function v(p,s,i){this.verticalGridLines=p,this.horizontalGridLines=s,this.createPoint=i}return v.create=function(p,s,i){var e=this,t=[],n=[],o={},r={};return s.forEach(function(a){e.addLine(a.x,t,o),e.addLine(a.right,t,o),e.addLine(a.y,n,r),e.addLine(a.bottom,n,r)}),p.forEach(function(a){e.addLine(a.x,t,o),e.addLine(a.y,n,r)}),t.sort(function(a,c){return a-c}),n.sort(function(a,c){return a-c}),new v(t,n,i)},v.addLine=function(p,s,i){i[p]||(s.push(p),i[p]=!0)},v.prototype.getNeighborPoints=function(p){var s=[];if(!(this.horizontalGridLines&&this.horizontalGridLines.length&&this.verticalGridLines&&this.verticalGridLines.length))return s;var i=u.SearchUtils.binaryIndexOf(this.verticalGridLines,function(t){return t-p.x});i<0?(i=~i,this.isValidArrayIndex(this.verticalGridLines,i)&&s.push(this.createPoint(this.verticalGridLines[i],p.y))):this.isValidArrayIndex(this.verticalGridLines,i+1)&&s.push(this.createPoint(this.verticalGridLines[i+1],p.y)),this.isValidArrayIndex(this.verticalGridLines,i-1)&&s.push(this.createPoint(this.verticalGridLines[i-1],p.y));var e=u.SearchUtils.binaryIndexOf(this.horizontalGridLines,function(t){return t-p.y});return e<0?(e=~e,this.isValidArrayIndex(this.horizontalGridLines,e)&&s.push(this.createPoint(p.x,this.horizontalGridLines[e]))):this.isValidArrayIndex(this.horizontalGridLines,e+1)&&s.push(this.createPoint(p.x,this.horizontalGridLines[e+1])),this.isValidArrayIndex(this.horizontalGridLines,e-1)&&s.push(this.createPoint(p.x,this.horizontalGridLines[e-1])),s},v.prototype.isValidArrayIndex=function(p,s){return p&&s>=0&&s<p.length},v}();h.RoutingGrid=g},1794:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.RightAngleConnectorRoutingContext=h.IntersectingItemsByPointsContext=h.CuttingItemsContext=void 0;var u=d(8900),g=d(1335),v=d(9716),p=d(3742),s=d(5074),i=d(2868),e=d(1254),t=d(4867),n=d(9927),o=d(2180),r=d(3975),a=d(8675),c=function(){function y(){this.cuttingItemKeys=[]}return Object.defineProperty(y.prototype,"isEmpty",{get:function(){return this.cuttingItemKeys.length===0},enumerable:!1,configurable:!0}),y.prototype.registerShape=function(l,P,C){return!!a.GeometryUtils.areSegmentsCutRectangle(C,P)&&(this.cuttingItemKeys.push(l),!0)},y}();h.CuttingItemsContext=c;var f=function(){function y(){this.items={}}return y.prototype.getOrAddItems=function(l,P){if(l){var C=l.toString(),I=this.items[C];if(I!==void 0)return I.items;if(P){var x=P(l);return this.items[C]={point:l,items:x},x}}},y}();h.IntersectingItemsByPointsContext=f;var m=function(){function y(l,P,C,I,x,b,S){this.routingModel=l,this.points=P,this.supportRenderPoints=C,this.beginConnectionShape=I,this.endConnectionShape=x,this.beginConnectionSide=this.getConnectionSide(this.beginConnectionShape,b,this.beginPoint),this.endConnectionSide=this.getConnectionSide(this.endConnectionShape,S,this.endPoint),this.ignorableItemKeys={},this.cuttingShapesContext=new c,this.intersectedItemsByPointsContext=new f,this.isInvalidRenderSegments=!0}return Object.defineProperty(y.prototype,"shapeMargins",{get:function(){return this.routingModel.shapeMargins},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"beginPoint",{get:function(){return this.points[0]},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"endPoint",{get:function(){return this.points[this.points.length-1]},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"hasIntersecting",{get:function(){return!this.cuttingShapesContext.isEmpty},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"shouldCreateRenderPoints",{get:function(){return this.isInvalidRenderSegments||!this.isSmallPath&&(this.hasIntersecting||this.isReversedStartConnection||this.isReversedEndConnection)},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"beginPathPoint",{get:function(){return this.beginConnectionSegment instanceof g.Segment?this.beginConnectionSegment.startPoint:this.beginConnectionSegment},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"endPathPoint",{get:function(){return this.endConnectionSegment instanceof g.Segment?this.endConnectionSegment.endPoint:this.endConnectionSegment},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"isReversedStartConnection",{get:function(){if(!this.beginConnectionShape||this.beginConnectionSide===p.ConnectionPointSide.Undefined)return!1;var l=this.beginConnectionSegment;return!(l instanceof u.Point)&&this.isReversedConnectionSegment(this.supportSegments[0],l)},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"isReversedEndConnection",{get:function(){if(!this.endConnectionShape||this.endConnectionSide===p.ConnectionPointSide.Undefined)return!1;var l=this.endConnectionSegment;return!(l instanceof u.Point)&&this.isReversedConnectionSegment(this.supportSegments[this.supportSegments.length-1],l)},enumerable:!1,configurable:!0}),y.prototype.isReversedConnectionSegment=function(l,P){return v.Vector.scalarProduct(v.Vector.fromSegment(l),v.Vector.fromPoints(P.startPoint,P.endPoint))<=0},Object.defineProperty(y.prototype,"isSmallPath",{get:function(){var l=2*this.routingModel.shapeMargins;return Math.abs(this.beginPathPoint.x-this.endPathPoint.x)<l&&Math.abs(this.beginPathPoint.y-this.endPathPoint.y)<l},enumerable:!1,configurable:!0}),y.prototype.initialize=function(l){this.processContainers(l),this.processSupportSegments(),this.processIntersection(),this.processConnections(),this.processRenderSegments()},y.prototype.setup=function(){this.processRoutingGrid(),this.processRoutingMetrics()},y.prototype.createRoutedPoints=function(l,P,C){var I=l instanceof u.Point?l:l.endPoint,x=P instanceof u.Point?P:P.startPoint,b=this.createAStarContext(I,x,C);r.AStarCalculator.calculate(b);var S=b.path;return this.addConnectionRoutedPoints(S,l,P),s.RightAngleConnectorRoutingMathOperations.unionPoints(S),S},y.prototype.getIntersectedItems=function(l,P){var C=this;return this.intersectedItemsByPointsContext.getOrAddItems(l,function(I){return C.routingModel.getItems(C.beginConnectionShape,C.endConnectionShape).filter(function(x){return!C.isIgnorableItem(x)&&P(I,x)})})},y.prototype.validateRenderPoints=function(l){this.isInvalidRenderSegments&&(s.RightAngleConnectorRoutingMathOperations.unionPoints(l),t.ModelUtils.validateRenderPointIndexes(this.points,l,0)),t.ModelUtils.skipUnnecessaryRightAngleRenderPoints(l)},y.prototype.processContainers=function(l){if(l&&this.registerIgnorableShape(l),this.beginConnectionShape){var P=this.beginConnectionShape.container;P&&this.registerIgnorableShape(P)}if(this.endConnectionShape){var C=this.endConnectionShape.container;C&&this.registerIgnorableShape(C)}},y.prototype.processSupportSegments=function(){this.supportSegments=this.createSupportSegments()},y.prototype.processIntersection=function(){var l=this,P=this.routingModel.getItems(this.beginConnectionShape,this.endConnectionShape);P&&P.forEach(function(C){var I=C.key,x=C.rectangle;l.cuttingShapesContext.registerShape(I,x,l.supportSegments)?l.ignorableItemKeys[I]!==void 0&&delete l.ignorableItemKeys[I]:(!l.isConnectedByStart(C)&&x.containsPoint(l.beginPoint)||!l.isConnectedByEnd(C)&&x.containsPoint(l.endPoint))&&l.registerIgnorableShape(C)})},y.prototype.processConnections=function(){var l=!1,P=!1;this.beginConnectionShape!==this.endConnectionShape&&(l=this.shapeContainsOtherConnection(this.beginConnectionShape,this.endConnectionShape,this.endPoint),P=this.shapeContainsOtherConnection(this.endConnectionShape,this.beginConnectionShape,this.beginPoint),l&&this.registerIgnorableShape(this.beginConnectionShape),P&&this.registerIgnorableShape(this.endConnectionShape));var C=this.routingModel.shapeMargins;this.beginConnectionSegment=this.createBeginConnectionSegment(C,l),this.endConnectionSegment=this.createEndConnectionSegment(C,P)},y.prototype.processRenderSegments=function(){this.isInvalidRenderSegments=!1,this.renderSegments=this.createRenderSegments();for(var l=0;l<this.renderSegments.length-1;l++){var P=this.renderSegments[l],C=this.renderSegments[l+1];if(P.endPoint.equals(C.startPoint))return void(this.isInvalidRenderSegments=!0)}},y.prototype.createGridPoints=function(){var l=[];return this.renderSegments.forEach(function(P){return P.createGridPoints().forEach(function(C){return l.push(C)})}),l},y.prototype.processRoutingGrid=function(){this.routingGrid=this.createGrid()},y.prototype.processRoutingMetrics=function(){this.metrics=this.createAStarMetrics()},y.prototype.createAStarMetrics=function(){return new n.AStarMetrics(new n.TurnDirectionMetrics(this.routingModel.penaltyDescription),new n.IntersectedShapesMetrics(new n.IntersectedShapeMetrics(this.routingModel.penaltyDescription,this.routingModel.shapeMargins)))},y.prototype.createAStarContext=function(l,P,C){return new o.AStarContext(this,l,P,C,this.routingGrid,this.metrics)},y.prototype.addConnectionRoutedPoints=function(l,P,C){P instanceof g.Segment&&l.splice(0,0,P.startPoint),C instanceof g.Segment&&l.push(C.endPoint)},y.prototype.createSupportSegments=function(){var l=this;return this.supportRenderPoints.length<=1?[]:a.GeometryUtils.createSegments(this.supportRenderPoints).filter(function(P){return!l.isCustomSegment(P,l.supportRenderPoints[0],l.supportRenderPoints[l.supportRenderPoints.length-1])})},y.prototype.isCustomSegment=function(l,P,C){var I=l.startPoint;if(I.equals(P))return!1;var x=l.endPoint;return!x.equals(C)&&x.pointIndex-I.pointIndex==1},y.prototype.createRenderSegments=function(){var l=this,P=s.RightAngleConnectorRoutingMathOperations.createUnionSegments(this.supportSegments,function(I,x){return l.shouldCreateSegment(I,x)}),C=P.length-1;return P.map(function(I,x){return new i.ConnectorRenderSegment(x>0?new u.Point(I.startPoint.x,I.startPoint.y):l.beginConnectionSegment,x<C?new u.Point(I.endPoint.x,I.endPoint.y):l.endConnectionSegment,I.startPoint.pointIndex,l.createPreviousCustomSegment(I.startPoint))})},y.prototype.createPreviousCustomSegment=function(l){var P=l.pointIndex-1;return P>=0?new g.Segment(this.points[P].clone(),new u.Point(l.x,l.y)):void 0},y.prototype.shouldCreateSegment=function(l,P){return!l.equals(P)||P.pointIndex>0},y.prototype.isPathNormal=function(l){return l===p.ConnectionPointSide.Undefined||s.RightAngleConnectorRoutingMathOperations.isSegmentNormal(new g.Segment(this.beginPoint,this.endPoint),l===p.ConnectionPointSide.East||l===p.ConnectionPointSide.West)},y.prototype.registerIgnorableShape=function(l){this.ignorableItemKeys[l.key]=!0},y.prototype.isConnectedByStart=function(l){return this.beginConnectionShape&&this.beginConnectionShape.key===l.key&&this.beginConnectionSide!==p.ConnectionPointSide.Undefined},y.prototype.isConnectedByEnd=function(l){return this.endConnectionShape&&this.endConnectionShape.key===l.key&&this.endConnectionSide!==p.ConnectionPointSide.Undefined},y.prototype.getConnectionSide=function(l,P,C){return l?l.getConnectionPointSideByIndex(P,C):p.ConnectionPointSide.Undefined},y.prototype.shapeContainsOtherConnection=function(l,P,C){if(!l)return!1;var I=l.rectangle;return I.containsPoint(C)&&(!P||!P.rectangle.equals(I))},y.prototype.createBeginConnectionSegment=function(l,P){if(this.beginConnectionSide===p.ConnectionPointSide.Undefined)return this.createBeginConnectionSegmentCore(l);if(!P||!this.routingModel.shouldReverseConnections){var C=this.createBeginConnectionSegmentCore(l);if(C instanceof u.Point||!this.routingModel.shouldResizeConnections)return C;for(var I=C.startPoint,x=C.endPoint,b=l;this.hasIntersectedItemsByPoint(x,I,this.beginConnectionShape);)b/=2,x=(C=this.createBeginConnectionSegmentCore(b)).endPoint;return C}if(!this.endConnectionShape)return this.createBeginConnectionSegmentCore(-l);if(this.isPathNormal(this.endConnectionSide))return this.createBeginConnectionSegmentCore(-l);var S=this.createBeginConnectionSegmentCore(-2*l);return this.isEndConnectionRectanleLineIntersected(S,!1,!0)?this.createBeginConnectionSegmentCore(l):this.createBeginConnectionSegmentCore(-l)},y.prototype.hasIntersectedItemsByPoint=function(l,P,C){var I=this.getIntersectedItems(l,function(x,b){return b.rectangle.containsPoint(x)&&!b.rectangle.containsPoint(P)&&b.key!==C.key});return I!==void 0&&I.length>0},y.prototype.createEndConnectionSegment=function(l,P){if(this.endConnectionSide===p.ConnectionPointSide.Undefined)return this.createEndConnectionSegmentCore(l);if(!P||!this.routingModel.shouldReverseConnections){var C=this.createEndConnectionSegmentCore(l);if(C instanceof u.Point||!this.routingModel.shouldResizeConnections)return C;for(var I=C.endPoint,x=C.startPoint,b=l;this.hasIntersectedItemsByPoint(x,I,this.endConnectionShape);)b/=2,x=(C=this.createEndConnectionSegmentCore(b)).startPoint;return C}if(!this.beginConnectionShape)return this.createEndConnectionSegmentCore(-l);if(this.isPathNormal(this.beginConnectionSide))return this.createEndConnectionSegmentCore(-l);var S=this.createEndConnectionSegmentCore(-2*l);return this.isBeginConnectionRectanleLineIntersected(S,!0,!1)?this.createEndConnectionSegmentCore(l):this.createEndConnectionSegmentCore(-l)},y.prototype.createBeginConnectionSegmentCore=function(l){return s.RightAngleConnectorRoutingMathOperations.createBeginConnectionSegment(this.beginConnectionSide,this.beginPoint,l,function(P,C){return new u.Point(P,C)})},y.prototype.createEndConnectionSegmentCore=function(l){return s.RightAngleConnectorRoutingMathOperations.createEndConnectionSegment(this.endConnectionSide,this.endPoint,l,function(P,C){return new u.Point(P,C)})},y.prototype.isBeginConnectionRectanleLineIntersected=function(l,P,C){return s.RightAngleConnectorRoutingMathOperations.isConnectionRectanleLineIntersected(this.beginConnectionShape.rectangle,l,this.beginConnectionSide,P,C,function(I,x){return new u.Point(I,x)})},y.prototype.isEndConnectionRectanleLineIntersected=function(l,P,C){return s.RightAngleConnectorRoutingMathOperations.isConnectionRectanleLineIntersected(this.endConnectionShape.rectangle,l,this.endConnectionSide,P,C,function(I,x){return new u.Point(I,x)})},y.prototype.isIgnorableItem=function(l){return this.ignorableItemKeys[l.key]!==void 0},y.prototype.createExtendedShapesBounds=function(){var l=this;return this.routingModel.getItems(this.beginConnectionShape,this.endConnectionShape).map(function(P){return P.rectangle.clone().inflate(l.routingModel.shapeMargins)})},y.prototype.createGrid=function(){return e.RoutingGrid.create(this.createGridPoints(),this.createExtendedShapesBounds(),function(l,P){return new u.Point(l,P)})},y}();h.RightAngleConnectorRoutingContext=m},5074:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.RightAngleConnectorRoutingMathOperations=void 0;var u=d(1335),g=d(8679),v=d(9927),p=d(8675),s=d(3742),i=function(){function e(){}return e.createUnionSegments=function(t,n){for(var o=[],r=t[0].startPoint,a=t[0].endPoint,c=1;c<t.length;c++){var f=t[c];n(a,f.startPoint)&&(o.push(new u.Segment(r.clone(),a.clone())),r=f.startPoint),a=f.endPoint}return o.push(new u.Segment(r,a)),o},e.unionPoints=function(t){for(var n=0;n<t.length-2;)p.GeometryUtils.isCorner(t[n],t[n+1],t[n+2])?n++:(t.splice(n+1,1),n=Math.max(0,n-1))},e.getTurnDirection=function(t){return g.MathUtils.numberCloseTo(t,0)?v.RightAngleTurnDirection.Straight:g.MathUtils.numberCloseTo(t,Math.PI)?v.RightAngleTurnDirection.Backwards:t<Math.PI?v.RightAngleTurnDirection.Left:v.RightAngleTurnDirection.Right},e.isSegmentNormal=function(t,n){return n?g.MathUtils.numberCloseTo(t.startPoint.y,t.endPoint.y):g.MathUtils.numberCloseTo(t.startPoint.x,t.endPoint.x)},e.isConnectionRectanleLineIntersected=function(t,n,o,r,a,c){switch(o){case s.ConnectionPointSide.North:return p.GeometryUtils.isLineIntersected(c(t.x,t.y),c(t.right,t.y),n,r,a);case s.ConnectionPointSide.South:return p.GeometryUtils.isLineIntersected(c(t.right,t.bottom),c(t.x,t.bottom),n,r,a);case s.ConnectionPointSide.West:return p.GeometryUtils.isLineIntersected(c(t.x,t.y),c(t.x,t.bottom),n,r,a);case s.ConnectionPointSide.East:return p.GeometryUtils.isLineIntersected(c(t.right,t.y),c(t.right,t.bottom),n,r,a);default:return!1}},e.createBeginConnectionSegment=function(t,n,o,r){switch(t){case s.ConnectionPointSide.North:return new u.Segment(n,r(n.x,n.y-o));case s.ConnectionPointSide.South:return new u.Segment(n,r(n.x,n.y+o));case s.ConnectionPointSide.West:return new u.Segment(n,r(n.x-o,n.y));case s.ConnectionPointSide.East:return new u.Segment(n,r(n.x+o,n.y));default:return n}},e.createEndConnectionSegment=function(t,n,o,r){switch(t){case s.ConnectionPointSide.North:return new u.Segment(r(n.x,n.y-o),n);case s.ConnectionPointSide.South:return new u.Segment(r(n.x,n.y+o),n);case s.ConnectionPointSide.West:return new u.Segment(r(n.x-o,n.y),n);case s.ConnectionPointSide.East:return new u.Segment(r(n.x+o,n.y),n);default:return n}},e}();h.RightAngleConnectorRoutingMathOperations=i},3597:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.RightAngleConnectorRoutingStrategy=void 0;var u=d(1335),g=d(4717),v=d(1794),p=d(4867),s=function(){function i(e){this.model=e}return i.prototype.createRenderPoints=function(e,t,n,o,r,a,c){if(t.length>1){var f=new v.RightAngleConnectorRoutingContext(this.model,e,t,n,o,r,a);if(f.initialize(c),f.shouldCreateRenderPoints)return this.createRenderPointsCore(f)}},i.prototype.clone=function(){return new i(this.model)},i.prototype.onAddPoint=function(e,t,n,o){var r=o.map(function(l){return new g.ConnectorRenderPoint(l.x,l.y,l.pointIndex)}),a=p.ModelUtils.findFirstPointIndex(r,function(l){return l.equals(n)});if(a===0)return r.splice(1,0,new g.ConnectorRenderPoint(n.x,n.y,t)),p.ModelUtils.validateRenderPointIndexes(e,r,2);var c=r.length-1;if(a===c)return r.splice(c,0,new g.ConnectorRenderPoint(n.x,n.y,t)),r[c+1].pointIndex=t+1,r;if(a>0){var f=r[a];return r[a]=new g.ConnectorRenderPoint(f.x,f.y,t,f.skipped),p.ModelUtils.validateRenderPointIndexes(e,r,a+1)}var m=new u.Segment(r[0],r[1]),y=new g.ConnectorRenderPoint(n.x,n.y);return m.containsPoint(y)?(r.splice(1,0,new g.ConnectorRenderPoint(y.x,y.y,-1)),r.splice(2,0,new g.ConnectorRenderPoint(y.x,y.y,t)),p.ModelUtils.validateRenderPointIndexes(e,r,3)):new u.Segment(r[c-1],r[c]).containsPoint(y)?(r.splice(c,0,new g.ConnectorRenderPoint(y.x,y.y,t)),r.splice(c+1,0,new g.ConnectorRenderPoint(y.x,y.y,-1)),r[c+2].pointIndex=t+1,r):o},i.prototype.onDeletePoint=function(e,t,n){var o=n.map(function(I){return new g.ConnectorRenderPoint(I.x,I.y,I.pointIndex)}),r=this.getRenderPointIndexByPointIndex(o,t);if(r===1){var a=o[0],c=o[1];return a.equals(c)?(o.splice(1,1),p.ModelUtils.validateRenderPointIndexes(e,o,1)):(o[1]=new g.ConnectorRenderPoint(c.x,c.y,-1,c.skipped),p.ModelUtils.validateRenderPointIndexes(e,o,2))}if(r===2){a=o[1];var f=o[2];return a.equals(f)?(o.splice(1,2),p.ModelUtils.validateRenderPointIndexes(e,o,1)):(o[2]=new g.ConnectorRenderPoint(f.x,f.y,-1,f.skipped),p.ModelUtils.validateRenderPointIndexes(e,o,3))}var m=o.length-1;if(r===m-1){var y=o[m-1],l=o[m];return y.equals(l)?(o.splice(m-1,1),p.ModelUtils.validateRenderPointIndexes(e,o,m-1)):(o[m-1]=new g.ConnectorRenderPoint(y.x,y.y,-1,y.skipped),p.ModelUtils.validateRenderPointIndexes(e,o,m))}if(r===m-2){var P=o[m-2];return l=o[m-1],P.equals(l)?(o.splice(m-2,2),p.ModelUtils.validateRenderPointIndexes(e,o,m-2)):(o[m-2]=new g.ConnectorRenderPoint(P.x,P.y,-1,P.skipped),p.ModelUtils.validateRenderPointIndexes(e,o,m-1))}var C=o[r];return o[r]=new g.ConnectorRenderPoint(C.x,C.y,-1,C.skipped),p.ModelUtils.validateRenderPointIndexes(e,o,r+1)},i.prototype.onMovePoint=function(e,t,n,o){if(t===0||t===e.length-1)return o;var r=o.map(function(a){return new g.ConnectorRenderPoint(a.x,a.y,a.pointIndex)});return this.onMovePointCore(r,t,n),p.ModelUtils.skipUnnecessaryRightAngleRenderPoints(r),r},i.prototype.onMovePoints=function(e,t,n,o,r){if(t===0||n===e.length-1)return r;for(var a=r.map(function(f){return new g.ConnectorRenderPoint(f.x,f.y,f.pointIndex)}),c=t;c<=n;c++)this.onMovePointCore(a,c,o[c-t]);return p.ModelUtils.skipUnnecessaryRightAngleRenderPoints(a),a},i.prototype.onMovePointCore=function(e,t,n){var o=this.getRenderPointIndexByPointIndex(e,t);if(o>=0){var r=e[o];e[o]=new g.ConnectorRenderPoint(n.x,n.y,t,r.skipped)}},i.prototype.createRenderPointsCore=function(e){var t,n=[],o=-1,r=-1;e.setup();var a=e.renderSegments,c=a[a.length-1].endPoint,f=e.points;do this.registerCustomPoints(n,f,r+2,a[o+1].startPointIndex-1),r=(t=a[++o]).startPointIndex,this.registerRenderPoints(n,e.createRoutedPoints(t.startInfo,t.endInfo,t.createProhibitedSegments()),r);while(!t.endPoint.equals(c));return e.validateRenderPoints(n),n},i.prototype.getRenderPointIndexByPointIndex=function(e,t){return p.ModelUtils.findFirstPointIndex(e,function(n){return n.pointIndex===t})},i.prototype.registerRenderPoints=function(e,t,n){var o=this;t.forEach(function(r,a){var c=a===0?n:a===t.length-1?n+1:-1;o.registerPoint(e,r,c)})},i.prototype.registerCustomPoints=function(e,t,n,o){for(var r=n;r<=o;r++)this.registerPoint(e,t[r],r)},i.prototype.registerPoint=function(e,t,n){e.push(new g.ConnectorRenderPoint(t.x,t.y,n))},i}();h.RightAngleConnectorRoutingStrategy=s},3742:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.DiagramItem=h.DEFAULT_ZINDEX=h.ConnectionPointSide=void 0;var u,g=d(8011),v=d(5596),p=d(8675),s=d(1552);(function(e){e[e.Undefined=-1]="Undefined",e[e.North=0]="North",e[e.East=1]="East",e[e.South=2]="South",e[e.West=3]="West"})(u=h.ConnectionPointSide||(h.ConnectionPointSide={})),h.DEFAULT_ZINDEX=0;var i=function(){function e(){this.key=void 0,this.dataKey=void 0,this.customData=void 0,this.attachedConnectors=[],this.zIndex=h.DEFAULT_ZINDEX,this.locked=!1,this.container=void 0,this.style=new s.Style,this.styleText=new s.TextStyle}return e.prototype.assign=function(t){t.key=this.key,t.dataKey=this.dataKey,t.customData=p.ObjectUtils.cloneObject(this.customData),t.locked=this.locked,t.attachedConnectors=this.attachedConnectors.slice(),t.style=this.style.clone(),t.styleText=this.styleText.clone(),t.zIndex=this.zIndex,t.container=this.container},e.prototype.getConnectionPointPosition=function(t,n){return this.getConnectionPoint(t,n).toPoint()},e.prototype.getConnectionPoint=function(t,n){t<0&&n&&(t=this.getNearestConnectionPoint(n));var o=this.getConnectionPoints();return o[t]||o[0]},e.prototype.getNearestConnectionPoint=function(t){var n,o=Number.MAX_VALUE;return this.getConnectionPoints().forEach(function(r,a){var c=v.Metrics.euclideanDistance(r,t);c<o&&(o=c,n=a)}),n},e.prototype.getConnectionPointIndex=function(t){var n=this.getConnectionPoints();return n.reduce(function(o,r,a){return t===u.North&&r.y<n[o].y||t===u.South&&r.y>n[o].y||t===u.West&&r.x<n[o].x||t===u.East&&r.x>n[o].x?a:o},0)},e.prototype.getConnectionPointSideByIndex=function(t,n){var o=this.getConnectionPoint(t,n);return this.getConnectionPointSide(o,n)},e.prototype.getConnectionPointIndexForSide=function(t){return t},Object.defineProperty(e.prototype,"enableText",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"allowEditText",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasTemplate",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enableChildren",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isLocked",{get:function(){return this.locked||this.container&&this.container.isLocked},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"allowResizeHorizontally",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"allowResizeVertically",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"strokeWidth",{get:function(){return this.style.strokeWidth},enumerable:!1,configurable:!0}),e.prototype.intersectedByRect=function(t){return g.Rectangle.areIntersected(this.rectangle,t)},e}();h.DiagramItem=i},4742:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.DraggingConnector=h.SelectionDragHelper=void 0;var u=d(9716),g=d(58),v=d(1510),p=d(4867),s=d(4717),i=d(6879),e=function(){function o(r,a,c,f,m){var y=this;this.history=r,this.model=a,this.permissionsProvider=c,this.startPoint=f,this.draggingShapes=[],this.draggingConnectors=[],this.selectedItems={},this.draggingConnectorsIndexByKey={},m.forEach(function(l){return y.selectedItems[l.key]=l})}return o.prototype.initDraggingShapes=function(r,a){var c=this;this.draggingShapes=r.map(function(f){return new n(f)}),a||this.draggingShapes.forEach(function(f){return c.permissionsProvider.addInteractingItem(f.shape,i.DiagramModelOperation.MoveShape)})},o.prototype.initDraggingConnectors=function(r,a){var c=this;this.draggingConnectors=[],this.draggingConnectorsIndexByKey={},r.forEach(function(f){return c.registerConnector(f)}),a||this.draggingShapes.forEach(function(f){var m=f.shape.attachedConnectors;m&&m.forEach(function(y){c.containsDraggingConnectorByKey(y.key)||c.registerConnector(y)})}),this.modelConnectorsWithoutBeginItemInfo=this.createModelConnectorsWithoutBeginItemInfo(),this.modelConnectorsWithoutEndItemInfo=this.createModelConnectorsWithoutEndItemInfo()},o.prototype.move=function(r,a,c,f){var m=this;if(this.draggingShapes.length){var y=this.draggingShapes.map(function(C){return C.shape});this.draggingShapes.forEach(function(C){for(var I=C.shape;I.container;){if(y.indexOf(I.container)!==-1)return!1;I=I.container}m.moveShape(C,a,c,f)});var l=this.draggingShapes[0],P=u.Vector.fromPoints(l.startPosition.clone(),l.shape.position.clone());(P.x||P.y)&&this.draggingConnectors.forEach(function(C){return m.moveConnectorCore(C.connector,C.startPoints,C.startRenderContext,P,r)})}else this.draggingConnectors.forEach(function(C){return m.moveConnector(C,r,a)})},o.prototype.containsDraggingConnectorByKey=function(r){return this.draggingConnectorsIndexByKey[r]!==void 0},o.prototype.onTryUpdateModelSize=function(r,a){this.modelConnectorsWithoutBeginItemInfo.forEach(function(c){c.point.x+=r,c.point.y+=a}),this.modelConnectorsWithoutEndItemInfo.forEach(function(c){c.point.x+=r,c.point.y+=a})},o.prototype.moveConnector=function(r,a,c){var f=r.startPoints,m=u.Vector.fromPoints(f[0].clone(),c(f[0]).clone());(m.x||m.y)&&this.moveConnectorCore(r.connector,f,r.startRenderContext,m,a)},o.prototype.moveConnectorCore=function(r,a,c,f,m){m||p.ModelUtils.canMoveConnector(this.selectedItems,r)?this.offsetConnector(r,a,c,f):this.changeConnector(r)},o.prototype.moveShape=function(r,a,c,f){var m=this,y=r.shape,l=a(r.startPosition);p.ModelUtils.setShapePosition(this.history,this.model,y,l),p.ModelUtils.updateMovingShapeConnections(this.history,y,this.modelConnectorsWithoutBeginItemInfo,this.modelConnectorsWithoutEndItemInfo,c,f,function(P){return m.permissionsProvider.addInteractingItem(P)}),this.draggingConnectors.filter(function(P){return!!m.selectedItems[P.connector.key]}).length||p.ModelUtils.updateShapeAttachedConnectors(this.history,this.model,y)},o.prototype.offsetConnector=function(r,a,c,f){var m=this,y=a.map(function(l){return m.offsetPoint(l,f)});y[0].equals(r.points[0])||this.history.addAndRedo(new g.ChangeConnectorPointsHistoryItem(r.key,y,this.offsetRenderContext(c,f)))},o.prototype.offsetRenderContext=function(r,a){var c=this;if(r!==void 0)return new v.ConnectorRenderPointsContext(r.renderPoints.map(function(f){var m=c.offsetPoint(f,a);return new s.ConnectorRenderPoint(m.x,m.y,f.pointIndex,f.skipped)}),!0,r.actualRoutingMode)},o.prototype.offsetPoint=function(r,a){var c=u.Vector.fromPoints(r,this.startPoint);return this.startPoint.clone().offset(a.x-c.x,a.y-c.y)},o.prototype.changeConnector=function(r){p.ModelUtils.tryRemoveConnectorIntermediatePoints(this.history,r),p.ModelUtils.updateConnectorAttachedPoints(this.history,this.model,r)},o.prototype.registerConnector=function(r){this.draggingConnectorsIndexByKey[r.key]=this.draggingConnectors.push(new t(r))-1},o.prototype.createModelConnectorsWithoutBeginItemInfo=function(){var r=this;return this.model.findConnectorsCore(function(a){return!a.beginItem&&!r.containsDraggingConnectorByKey(a.key)}).map(function(a){return{connector:a,point:a.points[0].clone()}})},o.prototype.createModelConnectorsWithoutEndItemInfo=function(){var r=this;return this.model.findConnectorsCore(function(a){return!a.endItem&&!r.containsDraggingConnectorByKey(a.key)}).map(function(a){return{connector:a,point:a.points[a.points.length-1].clone()}})},o}();h.SelectionDragHelper=e;var t=function(o){this.connector=o,this.startPoints=o.points.map(function(r){return r.clone()}),this.startRenderContext=o.tryCreateRenderPointsContext()};h.DraggingConnector=t;var n=function(o){this.shape=o,this.startPosition=o.position.clone()}},6613:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.DiagramModel=void 0;var u=d(5503),g=d(7959),v=d(8675),p=d(8011),s=d(6353),i=d(8900),e=d(7176),t=d(13),n=d(5383),o=d(4867),r=function(){function a(c){c===void 0&&(c=new s.Size(8391,11906)),this.items=[],this.itemIndexByKey={},this.keyCounter=0,this.pageSize=new s.Size(8391,11906),this.pageLandscape=!1,this.pageColor=a.defaultPageColor,this.units=n.DiagramUnit.In,this.snapStartPoint=new i.Point(0,0),this.pageSize=c,this.size=this.pageSize.clone(),this.rectangle=p.Rectangle.fromGeometry(new i.Point(0,0),new s.Size(0,0)),this.initializeKeyCounter()}return Object.defineProperty(a.prototype,"pageWidth",{get:function(){return this.pageLandscape?this.pageSize.height:this.pageSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"pageHeight",{get:function(){return this.pageLandscape?this.pageSize.width:this.pageSize.height},enumerable:!1,configurable:!0}),a.prototype.getRectangle=function(c){return c&&(this.rectangle=o.ModelUtils.createRectangle(this.items)),this.rectangle},a.prototype.pushItem=function(c){var f=this.items.push(c);this.itemIndexByKey[c.key]=f-1,c instanceof u.Shape&&!c.image.isEmpty&&this.cacheShapeImage(c)},a.prototype.removeItem=function(c){var f=this.getItemIndex(c);delete this.itemIndexByKey[c.key],this.items.splice(f,1),this.updateIndicesHash(f)},a.prototype.updateIndicesHash=function(c){for(var f=c;f<this.items.length;f++)this.itemIndexByKey[this.items[f].key]=f},a.prototype.getItemIndex=function(c){return this.itemIndexByKey[c.key]},a.prototype.findShape=function(c){var f=this.findItem(c);return f instanceof u.Shape?f:void 0},a.prototype.findShapesCore=function(c){var f=[];return this.items.forEach(function(m){m instanceof u.Shape&&c(m)&&f.push(m)}),f},a.prototype.findShapeCore=function(c){for(var f=0;f<this.items.length;f++){var m=this.items[f];if(m instanceof u.Shape&&c(m))return m}},a.prototype.findShapeAtPosition=function(c){return this.findShapeCore(function(f){return f.position.equals(c)})},a.prototype.findShapeByDataKey=function(c){return this.findShapeCore(function(f){return f.dataKey===c})},a.prototype.findShapesByImageUrl=function(c){return this.findShapesCore(function(f){return f.image.url===c})},a.prototype.findShapesByDescription=function(c){return this.findShapesCore(function(f){return f.description.key===c.key})},a.prototype.cacheShapeImage=function(c){var f=e.ImageCache.instance.createUnloadedInfoByShapeImageInfo(c.image);f.isLoaded&&c.image.loadBase64Content(f.base64)},a.prototype.loadAllImages=function(c){e.ImageCache.instance.loadAllImages(c)},a.prototype.findContainer=function(c){var f=this.findShape(c);return f&&f.enableChildren?f:void 0},a.prototype.findNearestContainer=function(c){var f=this.findShape(c);return f?f.enableChildren?f:f.container:void 0},a.prototype.getChildren=function(c){var f=this;return c.children.map(function(m){return f.findItem(m.key)}).filter(function(m){return m})},a.prototype.findChild=function(c,f,m){var y,l=this;return m===void 0&&(m=!0),c.children.forEach(function(P){y||(P.key!==f?m&&P instanceof u.Shape&&(y=l.findChild(P,f,m)):y=P)}),y},a.prototype.findItemContainerCore=function(c,f){for(var m=c.container;m&&f&&!f(m);)m=m.container;return m},a.prototype.findItemContainer=function(c){return this.findItemContainerCore(c)},a.prototype.findItemCollapsedContainer=function(c){return this.findItemContainerCore(c,function(f){return!f.expanded})},a.prototype.findItemTopCollapsedContainer=function(c){for(var f,m=c.container;m;)m.expanded||(f=m),m=m.container;return f},a.prototype.isContainerItem=function(c,f){return this.findItemContainerCore(f,function(m){return m.key===c.key})!==void 0},a.prototype.findConnector=function(c){var f=this.findItem(c);return f instanceof g.Connector?f:void 0},a.prototype.findConnectorCore=function(c){for(var f=0;f<this.items.length;f++){var m=this.items[f];if(m instanceof g.Connector&&c(m))return m}},a.prototype.findConnectorAtPoints=function(c){return this.findConnectorCore(function(f){return v.GeometryUtils.arePointsEqual(f.points,c)})},a.prototype.findConnectorByDataKey=function(c){return this.findConnectorCore(function(f){return f.dataKey===c})},a.prototype.findConnectorByBeginEndDataKeys=function(c,f){return this.findConnectorCore(function(m){return m.beginItem&&m.beginItem.dataKey===c&&m.endItem&&m.endItem.dataKey===f})},a.prototype.findConnectorsCore=function(c){var f=[];return this.items.forEach(function(m){m instanceof g.Connector&&c(m)&&f.push(m)}),f},a.prototype.findConnectorsWithoutBeginItem=function(){return this.findConnectorsCore(function(c){return!c.beginItem})},a.prototype.findConnectorsWithoutEndItem=function(){return this.findConnectorsCore(function(c){return!c.endItem})},a.prototype.findItem=function(c){return this.items[this.itemIndexByKey[c]]},a.prototype.findItemByDataKey=function(c){return this.findItemCore(function(f){return f.dataKey===c})},a.prototype.findItemCore=function(c){for(var f=0;f<this.items.length;f++)if(c(this.items[f]))return this.items[f]},a.isIntersectedItems=function(c,f){var m=!1;return c instanceof u.Shape?m=f.intersectedByRect(c.rectangle):c instanceof g.Connector&&c.getSegments().forEach(function(y){f instanceof u.Shape?m=m||y.isIntersectedByRect(f.rectangle):f instanceof g.Connector&&f.getSegments().forEach(function(l){m=m||y.isIntersected(l)})}),m},a.prototype.getIntersectItems=function(c){var f=[];return this.items.forEach(function(m){m.container===c.container&&(c===m||m instanceof g.Connector&&c.attachedConnectors.indexOf(m)!==-1||!a.isIntersectedItems(m,c)||f.push(m))}),f},a.prototype.getIntersectItemsMinZIndex=function(c){return this.getIntersectItems(c).map(function(f){return f.zIndex}).reduce(function(f,m){return Math.min(f,m)},Number.MAX_VALUE)},a.prototype.getIntersectItemsMaxZIndex=function(c){return this.getIntersectItems(c).map(function(f){return f.zIndex}).reduce(function(f,m){return Math.max(f,m)},-Number.MAX_VALUE)},a.prototype.iterateItems=function(c){this.items.forEach(c)},a.prototype.getNextKey=function(){return(this.keyCounter++).toString()},a.prototype.initializeKeyCounter=function(){this.keyCounter=this.items.reduce(function(c,f){var m=parseInt(f.key);return Math.max(c,isNaN(m)?0:m+1)},this.items.length)},a.defaultPageColor=t.ColorUtils.LIGHT_COLOR,a}();h.DiagramModel=r},2004:(j,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.ItemChange=h.ItemChangeType=void 0,function(u){u[u.Create=0]="Create",u[u.UpdateProperties=1]="UpdateProperties",u[u.UpdateStructure=2]="UpdateStructure",u[u.Update=3]="Update",u[u.Remove=4]="Remove",u[u.UpdateClassName=5]="UpdateClassName"}(h.ItemChangeType||(h.ItemChangeType={}));var d=function(){function u(g,v,p){p===void 0&&(p=!0),this.item=g,this.type=v,this.isValid=p}return Object.defineProperty(u.prototype,"key",{get:function(){return this.item.key},enumerable:!1,configurable:!0}),u}();h.ItemChange=d},1118:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.ModelManipulator=void 0;var u=d(4125),g=d(6353),v=d(9463),p=d(7176),s=d(590),i=d(6879),e=d(8675),t=d(7959),n=d(2004),o=d(4867),r=function(){function a(c,f,m,y){this.onModelChanged=new e.EventDispatcher,this.onModelSizeChanged=new e.EventDispatcher,this.initializeCore(c,f),this.permissionsProvider=m,this.descriptionManager=y,this.imageLoader=new s.ImageLoader(this.updateShapeImage.bind(this))}return a.prototype.initialize=function(c,f){this.initializeCore(c,f),this.model.loadAllImages(this.imageLoader),this.updateModelSize()},a.prototype.initializeCore=function(c,f){var m=this;this.model=c,this.routingModel=f,this.routingModel&&(this.routingModel.initialize(c),c.iterateItems(function(y){if(y instanceof t.Connector){var l=m.routingModel.createStrategy(y.properties.lineOption);l?y.changeRoutingStrategy(l):y.invalidateRenderPoints()}}))},a.prototype.commitPageChanges=function(){this.raisePageSizeChanged(this.model.pageSize.clone(),this.model.pageLandscape),this.raiseModelSizeChanged(this.model.size.clone()),this.raisePageColorChanged(this.model.pageColor),this.raiseModelRectangleChanged(o.ModelUtils.createRectangle(this.model.items))},a.prototype.commitItemsCreateChanges=function(){v.Diagnostics.timer("new model: model changes"),this.commitItemsChangesCore(n.ItemChangeType.Create,this.model.items),v.Diagnostics.endTimer()},a.prototype.commitItemUpdateChanges=function(c){this.commitItemsChangesCore(n.ItemChangeType.UpdateStructure,[c])},a.prototype.commitItemsChangesCore=function(c,f){var m=[];f.forEach(function(y){m.push(new n.ItemChange(y,c))}),m.length&&this.raiseModelChanged(m)},a.prototype.insertToContainer=function(c,f){if(c.container&&f&&c.container.key!==f.key)throw Error("To insert an item to a container it's necessary to remove it from the current container.");f&&(f.children.indexOf(c)===-1&&f.children.push(c),c.container=f,this.raiseModelChanged([new n.ItemChange(c,n.ItemChangeType.Update)]))},a.prototype.removeFromContainer=function(c){if(c.container){var f=c.container.children.indexOf(c);c.container.children.splice(f,1),c.container=void 0,this.raiseModelChanged([new n.ItemChange(c,n.ItemChangeType.Update)])}},a.prototype.changeStyle=function(c,f,m){this.changeStyleCore(c,c.style,f,m)},a.prototype.changeStyleText=function(c,f,m){this.changeStyleCore(c,c.styleText,f,m)},a.prototype.changeStyleCore=function(c,f,m,y){y!==void 0?f[m]=y:delete f[m],this.raiseModelChanged([new n.ItemChange(c,n.ItemChangeType.UpdateProperties)])},a.prototype.changeZIndex=function(c,f){c.zIndex=f,this.raiseModelChanged([new n.ItemChange(c,n.ItemChangeType.Update)])},a.prototype.changeLocked=function(c,f){c.locked=f,this.raiseModelChanged([new n.ItemChange(c,n.ItemChangeType.UpdateClassName)])},a.prototype.changeCustomData=function(c,f){c.customData=e.ObjectUtils.cloneObject(f),this.raiseModelChanged([new n.ItemChange(c,n.ItemChangeType.UpdateStructure)])},a.prototype.addShape=function(c,f){if(c.attachedConnectors.length)throw Error("A creating shape should not contain existing connectors.");return c.key=f!==void 0?f:this.model.getNextKey(),this.insertShape(c)},a.prototype.insertShape=function(c){this.model.pushItem(c);var f=this.permissionsProvider.canAddItems([c]);return this.raiseModelChanged([new n.ItemChange(c,n.ItemChangeType.Create,f)]),this.model.loadAllImages(this.imageLoader),c},a.prototype.resizeShape=function(c,f,m){c.position=f,c.size=m;var y=this.permissionsProvider.isStoredPermissionsGranted(),l=this.getInteractingItem(c,i.DiagramModelOperation.ResizeShape);if(l){var P=l.size.clone(),C=c.size.clone();C.equals(P)||(y=this.permissionsProvider.canResizeShapes([{shape:c,size:C,oldSize:P}]))}var I=this.getInteractingItem(c,i.DiagramModelOperation.MoveShape);if(I){var x=I.position.clone(),b=c.position.clone();b.equals(x)||(y=this.permissionsProvider.canMoveShapes([{shape:c,position:b,oldPosition:x}]))}this.raiseModelChanged([new n.ItemChange(c,n.ItemChangeType.UpdateProperties,y)])},a.prototype.moveShape=function(c,f){c.position=f;var m=this.permissionsProvider.isStoredPermissionsGranted();this.getInteractingItem(c,i.DiagramModelOperation.AddShape)&&(m=this.permissionsProvider.canAddItems([c]));var y=this.getInteractingItem(c,i.DiagramModelOperation.MoveShape);if(y){var l=y.position.clone(),P=c.position.clone();P.equals(l)||(m=this.permissionsProvider.canMoveShapes([{shape:c,position:P,oldPosition:l}]))}this.raiseModelChanged([new n.ItemChange(c,n.ItemChangeType.UpdateProperties,m)])},a.prototype.changeShapeParameters=function(c,f){c.parameters.forEach(function(m){var y=f.get(m.key);y&&(m.value=y.value)}),this.raiseModelChanged([new n.ItemChange(c,n.ItemChangeType.UpdateProperties)])},a.prototype.changeShapeText=function(c,f){c.text=f,this.raiseModelChanged([new n.ItemChange(c,n.ItemChangeType.UpdateStructure)])},a.prototype.changeShapeImage=function(c,f){c.image=f;var m=p.ImageCache.instance.createUnloadedInfoByShapeImageInfo(f);this.imageLoader.load(m),this.raiseModelChanged([new n.ItemChange(c,n.ItemChangeType.UpdateStructure)])},a.prototype.changeShapeExpanded=function(c,f){c.expanded=f,c.toggleExpandedSize(),this.raiseModelChanged([new n.ItemChange(c,n.ItemChangeType.UpdateStructure)])},a.prototype.deleteShape=function(c,f){if(c.attachedConnectors.length)throw Error("A removing shape should not contain existing connectors.");this.removeShape(c,f)},a.prototype.removeShape=function(c,f){this.model.removeItem(c),this.raiseModelChanged([new n.ItemChange(c,n.ItemChangeType.Remove,f)])},a.prototype.updateShapeImage=function(c){if(c.imageUrl){var f=this.model.findShapesByImageUrl(c.imageUrl);f.forEach(function(m){c.base64?m.image.loadBase64Content(c.base64):m.image.setUnableToLoadFlag()}),this.commitItemsChangesCore(n.ItemChangeType.UpdateStructure,f)}},a.prototype.updateShapeDescription=function(c){var f=this.model.findShapesByDescription(c);this.commitItemsChangesCore(n.ItemChangeType.UpdateProperties,f)},a.prototype.updateShapeType=function(c,f,m){var y=this.descriptionManager.get(f);c.description=y,c.parameters=m,y.createParameters(m),this.raiseModelChanged([new n.ItemChange(c,n.ItemChangeType.UpdateStructure)])},a.prototype.addConnector=function(c,f){if(c.beginItem||c.endItem)throw Error("Creating connector should not contain begin/end items");return c.key=f!==void 0?f:this.model.getNextKey(),this.insertConnector(c)},a.prototype.insertConnector=function(c){this.model.pushItem(c);var f=this.routingModel.createStrategy(c.properties.lineOption);f?c.changeRoutingStrategy(f):c.clearRoutingStrategy();var m=this.permissionsProvider.canAddItems([c]);return this.raiseModelChanged([new n.ItemChange(c,n.ItemChangeType.Create,m)]),c},a.prototype.deleteConnector=function(c){if(c.beginItem||c.endItem)throw Error("Creating connector should not contain begin/end items");this.removeConnector(c)},a.prototype.removeConnector=function(c){this.model.removeItem(c);var f=this.permissionsProvider.canDeleteItems([c]);this.raiseModelChanged([new n.ItemChange(c,n.ItemChangeType.Remove,f)])},a.prototype.addDeleteConnectorPoint=function(c,f){var m=this.getConnectorInteractingPoints(c);f(c),this.addDeleteConnectorPointCore(c,m)},a.prototype.moveConnectorPoint=function(c,f,m){m(c),this.moveConnectorPointCore(c,f)},a.prototype.changeConnectorPoints=function(c,f){var m=this;f(c),c.points.forEach(function(y,l){return m.moveConnectorPointCore(c,l)})},a.prototype.moveConnectorPointCore=function(c,f){var m=this.getInteractingItem(c),y=this.permissionsProvider.isStoredPermissionsGranted();if(m){var l=0<f&&f<c.points.length-1;if(l=(l=l||f===0&&!c.beginItem)||f===c.points.length-1&&!c.endItem){var P=m.points.map(function(I){return I.clone()}),C=c.points.map(function(I){return I.clone()});e.GeometryUtils.arePointsEqual(P,C)||(y=this.permissionsProvider.canChangeConnectorPoints(c,P,C))}}this.raiseModelChanged([new n.ItemChange(c,n.ItemChangeType.UpdateProperties,y)])},a.prototype.getConnectorInteractingPoints=function(c){var f=this.getInteractingItem(c);return f?f.points.map(function(m){return m.clone()}):c.points.map(function(m){return m.clone()})},a.prototype.addDeleteConnectorPointCore=function(c,f){var m=this.permissionsProvider.isStoredPermissionsGranted(),y=c.points.map(function(l){return l.clone()});e.GeometryUtils.arePointsEqual(f,y)||(m=this.permissionsProvider.canChangeConnectorPoints(c,f,y)),this.raiseModelChanged([new n.ItemChange(c,n.ItemChangeType.UpdateProperties,m)])},a.prototype.addConnection=function(c,f,m,y){var l=c.getExtremeItem(y),P=c.getExtremeConnectionPointIndex(y);if(l!==f||P!==m){if(l)throw Error("Connector is already connected");f.attachedConnectors.push(c),y===t.ConnectorPosition.Begin?(c.beginItem=f,c.beginConnectionPointIndex=m):(c.endItem=f,c.endConnectionPointIndex=m),c.invalidateRenderPoints();var C=this.permissionsProvider.canChangeConnection(c,f,void 0,y,m);this.raiseModelChanged([new n.ItemChange(c,n.ItemChangeType.UpdateProperties,C)])}},a.prototype.setConnectionPointIndex=function(c,f,m){if(!c.getExtremeItem(m))throw Error("Connection should be connected");m===t.ConnectorPosition.Begin?c.beginConnectionPointIndex=f:c.endConnectionPointIndex=f,c.invalidateRenderPoints();var y=c.getExtremeItem(m),l=this.permissionsProvider.canChangeConnection(c,y,y,m,f);this.raiseModelChanged([new n.ItemChange(c,n.ItemChangeType.UpdateProperties,l)])},a.prototype.deleteConnection=function(c,f){var m=c.getExtremeItem(f);if(m){m.attachedConnectors.splice(m.attachedConnectors.indexOf(c),1),f===t.ConnectorPosition.Begin?(c.beginItem=null,c.beginConnectionPointIndex=-1):(c.endItem=null,c.endConnectionPointIndex=-1),c.invalidateRenderPoints();var y=this.permissionsProvider.canChangeConnection(c,void 0,m,f,-1);this.raiseModelChanged([new n.ItemChange(c,n.ItemChangeType.UpdateProperties,y)])}},a.prototype.changeConnectorProperty=function(c,f,m){if(c.properties[f]=m,f==="lineOption"){var y=this.routingModel?this.routingModel.createStrategy(c.properties.lineOption):void 0;y?c.changeRoutingStrategy(y):c.clearRoutingStrategy()}else c.invalidateRenderPoints();this.raiseModelChanged([new n.ItemChange(c,n.ItemChangeType.UpdateProperties)])},a.prototype.changeConnectorText=function(c,f,m){c.setText(f,m),this.raiseModelChanged([new n.ItemChange(c,n.ItemChangeType.UpdateStructure)])},a.prototype.changeConnectorTextPosition=function(c,f,m){var y=c.getText(f);c.setText(null,f),c.setText(y,m),this.raiseModelChanged([new n.ItemChange(c,n.ItemChangeType.UpdateProperties)])},a.prototype.changeModelSize=function(c,f){this.model.size.width=c.width,this.model.size.height=c.height,this.raiseModelSizeChanged(this.model.size.clone(),f),(f.left||f.top)&&(this.model.snapStartPoint=this.model.snapStartPoint.clone().offset(f.left,f.top),this.raiseSnapPointChange(this.model.snapStartPoint))},a.prototype.changePageSize=function(c){this.model.pageSize.equals(c)||(this.model.pageSize=c,this.model.size=new g.Size(this.model.pageWidth,this.model.pageHeight),this.raiseModelSizeChanged(this.model.size.clone()),this.raisePageSizeChanged(this.model.pageSize,this.model.pageLandscape))},a.prototype.changePageLandscape=function(c){this.model.pageLandscape!==c&&(this.model.pageLandscape=c,this.model.pageSize.width!==this.model.pageSize.height&&(this.model.size=new g.Size(this.model.pageWidth,this.model.pageHeight),this.raiseModelSizeChanged(this.model.size.clone()),this.raisePageSizeChanged(this.model.pageSize,this.model.pageLandscape)))},a.prototype.changePageColor=function(c){this.model.pageColor!==c&&(this.model.pageColor=c,this.raisePageColorChanged(c))},a.prototype.updateModelSize=function(){var c=this.getModelSizeUpdateOffset();if(!c.isEmpty()){var f=Math.max(this.model.size.width+c.left+c.right,this.model.pageWidth),m=Math.max(this.model.size.height+c.top+c.bottom,this.model.pageHeight);this.model.size=new g.Size(f,m)}},a.prototype.getModelSizeUpdateOffset=function(){var c=this.model.getRectangle(!1),f=this.model.getRectangle(!0);return f.equals(c)||this.raiseModelRectangleChanged(f),this.createModelRectangleOffset(f)},a.prototype.createModelRectangleOffset=function(c){var f=this.model.pageWidth,m=this.model.pageHeight,y=this.model.size;return new u.Offsets(-Math.floor(c.x/f)*f,-Math.floor((y.width-c.right)/f)*f,-Math.floor(c.y/m)*this.model.pageHeight,-Math.floor((y.height-c.bottom)/m)*m)},a.prototype.raiseModelChanged=function(c){this.onModelChanged.raise1(function(f){return f.notifyModelChanged(c)})},a.prototype.raisePageColorChanged=function(c){this.onModelChanged.raise1(function(f){return f.notifyPageColorChanged(c)})},a.prototype.raisePageSizeChanged=function(c,f){this.onModelChanged.raise1(function(m){return m.notifyPageSizeChanged(c,f)})},a.prototype.raiseModelSizeChanged=function(c,f){this.onModelSizeChanged.raise1(function(m){return m.notifyModelSizeChanged(c,f)})},a.prototype.raiseModelRectangleChanged=function(c){this.onModelSizeChanged.raise1(function(f){return f.notifyModelRectangleChanged(c)})},a.prototype.raiseSnapPointChange=function(c){this.onModelSizeChanged.raise1(function(f){return f.notifySnapPointPositionChanged(c)})},a.prototype.getInteractingItem=function(c,f){return this.permissionsProvider.getInteractingItem(c,f)},a}();h.ModelManipulator=r},4867:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.ModelUtils=void 0;var u=d(9291),g=d(5596),v=d(8900),p=d(8011),s=d(6353),i=d(9716),e=d(8679),t=d(5383),n=d(3477),o=d(9603),r=d(4430),a=d(4145),c=d(58),f=d(329),m=d(8930),y=d(9143),l=d(1704),P=d(9310),C=d(8338),I=d(4160),x=d(9753),b=d(4629),S=d(4297),w=d(1729),T=d(4518),_=d(8236),M=d(5144),A=d(9559),E=d(7443),U=d(4634),R=d(926),O=d(213),N=d(7819),V=d(8217),H=d(8675),L=d(7959),D=d(4612),K=d(4717),F=d(1510),q=d(5503),ee=d(56),Q=function(){function X(){}return X.setShapePosition=function(z,B,k,W,G){if(G===void 0&&(G=!0),!k.position.equals(W)){var Y=W.clone().offset(-k.position.x,-k.position.y);z.addAndRedo(new I.MoveShapeHistoryItem(k.key,W)),G&&k.children.forEach(function(J){if(J instanceof q.Shape){var $=J.position.clone().offset(Y.x,Y.y);X.setShapePosition(z,B,J,$)}})}},X.setShapeSize=function(z,B,k,W,G){k.size.equals(G)&&k.position.equals(W)||z.addAndRedo(new b.ResizeShapeHistoryItem(k.key,W,G))},X.addConnectorPoint=function(z,B,k,W){z.addAndRedo(new r.AddConnectorPointHistoryItem(B,k,W))},X.deleteConnectorCustomPoints=function(z,B){if(B.points.length>2){var k=B.tryCreateRenderPointsContext();if(B.properties.lineOption!==D.ConnectorLineOption.Straight&&k){var W=B.points[0].clone(),G=B.points[B.points.length-1].clone();z.addAndRedo(new c.ChangeConnectorPointsHistoryItem(B.key,[W,G],new F.ConnectorRenderPointsContext([new K.ConnectorRenderPoint(W.x,W.y,0),new K.ConnectorRenderPoint(G.x,G.y,1)],!1,k.actualRoutingMode)))}else z.addAndRedo(new c.ReplaceConnectorPointsHistoryItem(B.key,[B.points[0].clone(),B.points[B.points.length-1].clone()]))}},X.deleteConnectorUnnecessaryPoints=function(z,B){var k=B.getRenderPoints(!0).map(function(te){return te.clone()});if(B.properties.lineOption===D.ConnectorLineOption.Straight){var W=X.createUnnecessaryRenderPoints(k.filter(function(te){return!te.skipped}).map(function(te){return te.clone()}),B.skippedRenderPoints,function(te){return X.findFirstPointIndex(k,function(oe){return K.ConnectorRenderPoint.equal(oe,te)})});Object.keys(W).length&&z.addAndRedo(new c.ReplaceConnectorPointsHistoryItem(B.key,X.createNecessaryPoints(B.points.map(function(te){return te.clone()}),W)))}else{var G=B.tryCreateRenderPointsContext(!0),Y=k.filter(function(te){return!te.skipped}).map(function(te){return te.clone()});if(W=X.createUnnecessaryRightAngleRenderPoints(Y,B.skippedRenderPoints,function(te){return X.findFirstPointIndex(k,function(oe){return K.ConnectorRenderPoint.equal(oe,te)})}),Object.keys(W).length){var J=X.createNecessaryPoints(B.points.map(function(te){return te.clone()}),W),$=new F.ConnectorRenderPointsContext(X.validateRenderPointIndexes(J,Y,0),G.lockCreateRenderPoints,G.actualRoutingMode);z.addAndRedo(new c.ChangeConnectorPointsHistoryItem(B.key,J,$))}}},X.fixConnectorBeginEndConnectionIndex=function(z,B){if(B.beginItem&&B.beginConnectionPointIndex===-1){var k=B.beginItem.getNearestConnectionPoint(B.points[0]);z.addAndRedo(new n.SetConnectionPointIndexHistoryItem(B,k,L.ConnectorPosition.Begin))}if(B.endItem&&B.endConnectionPointIndex===-1){var W=B.endItem.getNearestConnectionPoint(B.points[B.points.length-1]);z.addAndRedo(new n.SetConnectionPointIndexHistoryItem(B,W,L.ConnectorPosition.End))}},X.skipUnnecessaryRenderPoints=function(z,B){H.GeometryUtils.removeUnnecessaryPoints(z,function(k,W){return X.removeUnnecessaryPoint(z,k,W,B)},function(k){return k!==void 0&&!k.skipped}),z[0].skipped=!1,z[z.length-1].skipped=!1},X.skipUnnecessaryRightAngleRenderPoints=function(z,B){H.GeometryUtils.removeUnnecessaryRightAnglePoints(z,function(k,W){return X.removeUnnecessaryPoint(z,k,W,B)},function(k){return k!==void 0&&!k.skipped}),z[0].skipped=!1,z[z.length-1].skipped=!1},X.createUnnecessaryRenderPoints=function(z,B,k,W){W===void 0&&(W=function(Y){return!0});var G={};return H.GeometryUtils.removeUnnecessaryPoints(z,function(Y,J){return X.collectNotSkippedRenderPoints(G,z,Y,J,k,W)}),X.collectSkippedRenderPoints(G,B,k,W),G},X.createUnnecessaryRightAngleRenderPoints=function(z,B,k,W){W===void 0&&(W=function(Y){return!0});var G={};return H.GeometryUtils.removeUnnecessaryRightAnglePoints(z,function(Y,J){return X.collectNotSkippedRenderPoints(G,z,Y,J,k,W)}),X.collectSkippedRenderPoints(G,B,k,W),G},X.createNecessaryPoints=function(z,B){var k=this,W=[],G=z.length-1;return z.forEach(function(Y,J){(J===0||J===G||k.isNecessaryPoint(Y,J,B))&&W.push(Y.clone())}),W},X.isNecessaryPoint=function(z,B,k){return!Object.keys(k).some(function(W){var G=k[W];return G.pointIndex===B&&H.GeometryUtils.areDuplicatedPoints(z,G)})},X.collectSkippedRenderPoints=function(z,B,k,W){W===void 0&&(W=function(G){return!0}),B&&B.forEach(function(G){if(W(G)){var Y=k(G);z[Y]===void 0&&(z[Y]=G)}})},X.collectNotSkippedRenderPoints=function(z,B,k,W,G,Y){if(Y===void 0&&(Y=function($){return!0}),Y(k)){var J=G(k);if(z[J]===void 0)return z[J]=k,k.skipped=!0,B.splice(W,1),!0}return!1},X.removeUnnecessaryPoint=function(z,B,k,W){return W&&B.pointIndex===-1?(z.splice(k,1),!0):(B.skipped=!0,!1)},X.validateRenderPointIndexes=function(z,B,k){var W=this,G=B.map(function(Y,J){return new K.ConnectorRenderPoint(Y.x,Y.y,J>=k&&Y.pointIndex>=0?W.findFirstPointIndex(z,function($){return $.equals(Y)}):Y.pointIndex,Y.skipped)});return G[0].skipped=!1,G[G.length-1].skipped=!1,G},X.findFirstPointIndex=function(z,B){if(!z||!B)return-1;for(var k=0;k<z.length;k++)if(B(z[k]))return k;return-1},X.moveConnectorRightAnglePoints=function(z,B,k,W,G,Y){B.points.slice(k,W+1).some(function(J){return!H.GeometryUtils.areDuplicatedPoints(J,new v.Point(G===void 0?J.x:G,Y===void 0?J.y:Y))})&&z.addAndRedo(new C.MoveConnectorRightAnglePointsHistoryItem(B.key,k,W,G,Y))},X.moveConnectorPoint=function(z,B,k,W){return!B.points[k].equals(W)&&(z.addAndRedo(new C.MoveConnectorPointHistoryItem(B.key,k,W)),!0)},X.updateConnectorAttachedPoints=function(z,B,k){z.beginTransaction();var W=k.beginItem&&B.findItemCollapsedContainer(k.beginItem),G=W&&(!k.endItem||!B.isContainerItem(W,k.endItem)),Y=k.endItem&&B.findItemCollapsedContainer(k.endItem),J=Y&&(!k.beginItem||!B.isContainerItem(Y,k.beginItem)),$=!1;return $=G?this.updateConnectorBeginPoint(z,k,W,J&&Y||k.endItem,function(te){return W.getConnectionPointIndexForItem(k.beginItem,te)})||$:this.updateConnectorBeginPoint(z,k,k.beginItem,J&&Y||k.endItem)||$,$=J?this.updateConnectorEndPoint(z,k,Y,function(te){return Y.getConnectionPointIndexForItem(k.beginItem,te)})||$:this.updateConnectorEndPoint(z,k,k.endItem)||$,z.endTransaction(),$},X.updateConnectorBeginPoint=function(z,B,k,W,G){if(k){var Y=G!==void 0?G(B.beginConnectionPointIndex):B.beginConnectionPointIndex,J=B.points[1];W&&B.points.length===2&&(J=B.endConnectionPointIndex!==-1?W.getConnectionPointPosition(B.endConnectionPointIndex,v.Point.zero()):W.rectangle.center);var $=k.getConnectionPointPosition(Y,J);return this.moveConnectorPoint(z,B,0,$.clone())}},X.updateConnectorEndPoint=function(z,B,k,W){if(k){var G=W!==void 0?W(B.endConnectionPointIndex):B.endConnectionPointIndex,Y=k.getConnectionPointPosition(G,B.points[B.points.length-2]);return this.moveConnectorPoint(z,B,B.points.length-1,Y)}},X.updateContainerConnectorsAttachedPoints=function(z,B,k,W){var G=this;W===void 0&&(W=k),z.beginTransaction(),B.getChildren(W).forEach(function(Y){Y instanceof q.Shape&&(Y.attachedConnectors.forEach(function(J){var $=J.beginItem&&B.isContainerItem(W,J.beginItem),te=J.endItem&&B.isContainerItem(W,J.endItem);if($&&!te){var oe=B.findItemTopCollapsedContainer(J.beginItem),re=J.endItem&&B.findItemTopCollapsedContainer(J.endItem);oe?G.updateConnectorBeginPoint(z,J,oe,re||J.endItem,function(ie){return k.getConnectionPointIndexForItem(J.beginItem,ie)}):G.updateConnectorBeginPoint(z,J,J.beginItem,re||J.endItem)}te&&!$&&((oe=B.findItemTopCollapsedContainer(J.endItem))?G.updateConnectorEndPoint(z,J,oe,function(ie){return k.getConnectionPointIndexForItem(J.endItem,ie)}):G.updateConnectorEndPoint(z,J,J.endItem))}),G.updateContainerConnectorsAttachedPoints(z,B,k,Y))}),z.endTransaction()},X.getConnectorsWithoutBeginItemInfo=function(z){return z.findConnectorsWithoutBeginItem().map(function(B){return{connector:B,point:B.points[0].clone()}})},X.getConnectorsWithoutEndItemInfo=function(z){return z.findConnectorsWithoutEndItem().map(function(B){return{connector:B,point:B.points[B.points.length-1].clone()}})},X.updateShapeAttachedConnectors=function(z,B,k){var W=this;k.attachedConnectors.forEach(function(G){W.tryRemoveConnectorIntermediatePoints(z,G),W.updateConnectorAttachedPoints(z,B,G)})},X.updateMovingShapeConnections=function(z,B,k,W,G,Y,J){var $=this;G(),k.forEach(function(te){var oe=$.getMovingShapeConnectionPointIndex(B,te.point);B.rectangle.containsPoint(te.point)||oe>-1?(Y(B,oe),oe!==te.connector.beginConnectionPointIndex&&te.connector.beginItem&&z.addAndRedo(new m.DeleteConnectionHistoryItem(te.connector,L.ConnectorPosition.Begin)),J(te.connector),z.addAndRedo(new n.AddConnectionHistoryItem(te.connector,B,oe,L.ConnectorPosition.Begin))):te.connector.beginItem&&(z.addAndRedo(new m.DeleteConnectionHistoryItem(te.connector,L.ConnectorPosition.Begin)),z.addAndRedo(new C.MoveConnectorPointHistoryItem(te.connector.key,0,te.point)))}),W.forEach(function(te){var oe=$.getMovingShapeConnectionPointIndex(B,te.point);B.rectangle.containsPoint(te.point)||oe>-1?(Y(B,oe),oe!==te.connector.endConnectionPointIndex&&te.connector.endItem&&z.addAndRedo(new m.DeleteConnectionHistoryItem(te.connector,L.ConnectorPosition.End)),J(te.connector),z.addAndRedo(new n.AddConnectionHistoryItem(te.connector,B,oe,L.ConnectorPosition.End))):te.connector.endItem&&(z.addAndRedo(new m.DeleteConnectionHistoryItem(te.connector,L.ConnectorPosition.End)),z.addAndRedo(new C.MoveConnectorPointHistoryItem(te.connector.key,te.connector.points.length-1,te.point)))})},X.getMovingShapeConnectionPointIndex=function(z,B){var k=this,W=-1;return z.getConnectionPoints().forEach(function(G,Y){g.Metrics.euclideanDistance(B,G)<k.connectionPointActionSize&&(W=Y)}),W},X.shouldRemoveConnectorIntermediatePoints=function(z,B){if(z.properties.lineOption!==D.ConnectorLineOption.Orthogonal||z.points.length===2||!B||!B.length)return!1;for(var k,W=0;k=B[W];){if(this.isShapeIntersectConnectorCustomPoints(k,z))return!0;W++}return!1},X.tryRemoveConnectorIntermediatePoints=function(z,B){this.shouldRemoveConnectorIntermediatePoints(B,[B.beginItem,B.endItem])&&this.deleteConnectorCustomPoints(z,B)},X.isShapeIntersectConnectorCustomPoints=function(z,B){if(!z)return!1;var k=B.getCustomRenderPoints(!0);if(!k.length)return!1;var W=L.Connector.minOffset-u.UnitConverter.pixelsToTwips(1);return H.GeometryUtils.areIntersectedSegments(H.GeometryUtils.createSegments(k),H.GeometryUtils.createSegmentsFromRectangle(z.rectangle.clone().inflate(W,W)))},X.getSnappedPos=function(z,B,k,W){var G=W?z.snapStartPoint.x:z.snapStartPoint.y;return Math.round((k-G)/B)*B+G},X.tryUpdateModelRectangle=function(z,B){var k=z.modelManipulator.getModelSizeUpdateOffset();k.isEmpty()||(z.addAndRedo(new w.ModelResizeHistoryItem(k)),(k.left||k.top)&&(z.addAndRedo(new T.UpdatePositionsOnPageResizeHistoryItem(new i.Vector(k.left,k.top))),B!==void 0&&B(k.left,k.top)),z.modelManipulator.raiseModelRectangleChanged(z.modelManipulator.model.getRectangle(!0)))},X.deleteItems=function(z,B,k,W,G){z.beginTransaction();var Y={};W.forEach(function($){return Y[$.key]=$});var J=k.getKeys().filter(function($){return!Y[$]});z.addAndRedo(new S.SetSelectionHistoryItem(k,J)),this.deleteItemsCore(z,B,W,G),this.tryUpdateModelRectangle(z),z.endTransaction()},X.deleteItemsCore=function(z,B,k,W){var G=this;k.sort(function(Y,J){return(Y instanceof L.Connector?0:1)-(J instanceof L.Connector?0:1)}),k.forEach(function(Y){if(Y.container&&G.removeFromContainer(z,B,Y),Y instanceof q.Shape){var J=B.getChildren(Y);J.length&&(J.forEach(function($){z.addAndRedo(new x.RemoveFromContainerHistoryItem($)),G.updateAttachedConnectorsContainer(z,B,$)}),G.deleteItemsCore(z,B,J.filter(function($){return!$.locked||W}),W)),B.findItem(Y.key)&&G.deleteShape(z,Y)}Y instanceof L.Connector&&B.findItem(Y.key)&&G.deleteConnector(z,Y)})},X.detachConnectors=function(z,B){for(z.beginTransaction();B.attachedConnectors.length>0;){var k=B.attachedConnectors[0];z.addAndRedo(new m.DeleteConnectionHistoryItem(k,k.beginItem===B?L.ConnectorPosition.Begin:L.ConnectorPosition.End))}z.endTransaction()},X.deleteShape=function(z,B){var k=z.modelManipulator.permissionsProvider.canDeleteItems([B]);z.beginTransaction(),this.detachConnectors(z,B),z.addAndRedo(new l.DeleteShapeHistoryItem(B.key,k)),z.endTransaction()},X.deleteConnector=function(z,B){z.beginTransaction(),B.beginItem&&z.addAndRedo(new m.DeleteConnectionHistoryItem(B,L.ConnectorPosition.Begin)),B.endItem&&z.addAndRedo(new m.DeleteConnectionHistoryItem(B,L.ConnectorPosition.End)),z.addAndRedo(new y.DeleteConnectorHistoryItem(B.key)),z.endTransaction()},X.deleteAllItems=function(z,B,k){this.deleteItems(z,B,k,B.items.slice(),!0)},X.deleteSelection=function(z,B,k){this.deleteItems(z,B,k,k.getSelectedItems())},X.changeSelectionLocked=function(z,B,k,W){z.beginTransaction(),k.getSelectedItems(!0).forEach(function(G){z.addAndRedo(new E.ChangeLockedHistoryItem(G,W))}),X.updateSelection(z,k),z.endTransaction()},X.copyStylesToItem=function(z,B,k,W){var G=B.findItem(W);k.styleText.forEach(function(Y){k.styleText[Y]!==G.styleText[Y]&&z.addAndRedo(new R.ChangeStyleTextHistoryItem(W,Y,k.styleText[Y]))}),k.style.forEach(function(Y){k.style[Y]!==G.style[Y]&&z.addAndRedo(new U.ChangeStyleHistoryItem(W,Y,k.style[Y]))})},X.updateSelection=function(z,B){z.addAndRedo(new S.SetSelectionHistoryItem(B,B.getKeys(),!0))},X.cloneShapeToOffset=function(z,B,k,W,G){z.beginTransaction();var Y=k.position.clone().offset(W,G),J=new a.AddShapeHistoryItem(k.description,Y,k.text);z.addAndRedo(J);var $=J.shapeKey;return z.addAndRedo(new b.ResizeShapeHistoryItem($,Y,k.size.clone())),z.addAndRedo(new A.ChangeCustomDataHistoryItem($,H.ObjectUtils.cloneObject(k.customData))),z.addAndRedo(new f.ChangeShapeParametersHistoryItem($,k.parameters.clone())),this.copyStylesToItem(z,B,k,$),z.endTransaction(),$},X.applyOffsetToConnectorRenderPointsContext=function(z,B,k){return z&&z.renderPoints?new F.ConnectorRenderPointsContext(z.renderPoints.map(function(W){return W.clone().offset(B,k)}),!0,z.actualRoutingMode):void 0},X.cloneConnectorToOffset=function(z,B,k,W,G,Y,J){z.beginTransaction();var $=k.points.map(function(ae){return ae.clone().offset(Y,J)}),te=new o.AddConnectorHistoryItem($,void 0,this.applyOffsetToConnectorRenderPointsContext(k.tryCreateRenderPointsContext(),Y,J));z.addAndRedo(te);var oe=te.connectorKey,re=B.findConnector(oe);if(k.properties.forEach(function(ae){k.properties[ae]!==re.properties[ae]&&z.addAndRedo(new _.ChangeConnectorPropertyHistoryItem(oe,ae,k.properties[ae]))}),W){var ie=B.findShape(W);z.addAndRedo(new n.AddConnectionHistoryItem(re,ie,k.beginConnectionPointIndex,L.ConnectorPosition.Begin))}if(G){var se=B.findShape(G);z.addAndRedo(new n.AddConnectionHistoryItem(re,se,k.endConnectionPointIndex,L.ConnectorPosition.End))}return k.texts.clone().forEach(function(ae){z.addAndRedo(new M.ChangeConnectorTextHistoryItem(re,ae.position,ae.value))}),this.copyStylesToItem(z,B,k,oe),z.endTransaction(),oe},X.cloneSelectionToOffset=function(z,B,k,W,G,Y){var J=this;z.beginTransaction();var $={},te=[];W.getSelectedShapes().forEach(function(oe){var re=J.cloneShapeToOffset(z,B,oe,G,Y);$[oe.key]=re,te.push(re),k&&k(re)}),W.getSelectedConnectors().forEach(function(oe){var re=oe.beginItem?$[oe.beginItem.key]:null,ie=oe.endItem?$[oe.endItem.key]:null,se=J.cloneConnectorToOffset(z,B,oe,re,ie,G,Y);te.push(se),k&&k(se)}),z.addAndRedo(new S.SetSelectionHistoryItem(W,te)),X.tryUpdateModelRectangle(z),z.endTransaction()},X.findContainerByEventKey=function(z,B,k){var W=z.findContainer(k);if(W&&!W.isLocked)return W;var G=z.findShape(k);return G&&G.container&&!B.hasKey(G.key)?X.findContainerByEventKey(z,B,G.container.key):void 0},X.canInsertToContainer=function(z,B,k){return B!==k&&!(B instanceof q.Shape&&z.findChild(B,k.key))},X.canInsertSelectionToContainer=function(z,B,k){var W=!0;return B.getSelectedItems().forEach(function(G){G!==k?G instanceof q.Shape&&z.findChild(G,k.key)&&(W=!1):W=!1}),W},X.insertToContainer=function(z,B,k,W){if(!W.enableChildren)throw Error("Inpossible to add children to non-container shape.");if(this.canInsertToContainer(B,k,W)){var G=k.container;G!==W&&(z.beginTransaction(),G&&(z.addAndRedo(new x.RemoveFromContainerHistoryItem(k)),k.attachedConnectors.forEach(function(Y){Y.container&&z.addAndRedo(new x.RemoveFromContainerHistoryItem(Y))})),z.addAndRedo(new P.InsertToContainerHistoryItem(k,W)),this.updateAttachedConnectorsContainer(z,B,k),z.endTransaction())}},X.removeFromContainer=function(z,B,k){k.container&&(z.beginTransaction(),z.addAndRedo(new x.RemoveFromContainerHistoryItem(k)),this.updateAttachedConnectorsContainer(z,B,k),z.endTransaction())},X.insertSelectionToContainer=function(z,B,k,W){var G=this;z.beginTransaction();var Y=k.getSelectedItems();Y.filter(function(J){return!J.container||Y.indexOf(J.container)===-1}).forEach(function(J){G.insertToContainer(z,B,J,W)}),z.endTransaction()},X.removeSelectionFromContainer=function(z,B,k){var W=this;z.beginTransaction(),k.getSelectedItems().forEach(function(G){G.container&&!k.hasKey(G.container.key)&&(z.addAndRedo(new x.RemoveFromContainerHistoryItem(G)),W.updateAttachedConnectorsContainer(z,B,G))}),z.endTransaction()},X.getConnectorContainer=function(z){if(z.beginItem&&z.endItem){for(var B={},k=z.beginItem.container;k;)B[k.key]=!0,k=k.container;for(var W=z.endItem.container;W;){if(B[W.key]!==void 0)return W;W=W.container}}},X.updateAttachedConnectorsContainer=function(z,B,k){var W=this;z.beginTransaction(),k.attachedConnectors.forEach(function(G){W.updateConnectorContainer(z,B,G)}),z.endTransaction()},X.updateConnectorContainer=function(z,B,k){var W=this.getConnectorContainer(k);W?z.addAndRedo(new P.InsertToContainerHistoryItem(k,W)):k.container&&z.addAndRedo(new x.RemoveFromContainerHistoryItem(k))},X.updateNewShapeProperties=function(z,B,k){B.inputPosition.getDefaultStyle().forEach(function(W){z.addAndRedo(new U.ChangeStyleHistoryItem(k,W,B.inputPosition.getDefaultStylePropertyValue(W)))}),B.inputPosition.getDefaultTextStyle().forEach(function(W){z.addAndRedo(new R.ChangeStyleTextHistoryItem(k,W,B.inputPosition.getDefaultTextStylePropertyValue(W)))})},X.updateNewConnectorProperties=function(z,B,k){B.inputPosition.getDefaultConnectorProperties().forEach(function(W){z.addAndRedo(new _.ChangeConnectorPropertyHistoryItem(k,W,B.inputPosition.getDefaultConnectorPropertyValue(W)))}),B.inputPosition.getDefaultStyle().forEach(function(W){z.addAndRedo(new U.ChangeStyleHistoryItem(k,W,B.inputPosition.getDefaultStylePropertyValue(W)))}),B.inputPosition.getDefaultTextStyle().forEach(function(W){z.addAndRedo(new R.ChangeStyleTextHistoryItem(k,W,B.inputPosition.getDefaultTextStylePropertyValue(W)))})},X.applyLayout=function(z,B,k,W,G,Y,J,$,te,oe){z.beginTransaction();var re=this.getOccupiedRectangles(Y,k);return G=this.offsetLayoutToFreeSpace(G,k&&k.clientRectangle,re,J.containerPadding),$&&this.adjustLayoutToSnapGrid(B,G,te),k&&this.resizeContainerOnLayout(z,B,G,k,J.containerPadding),this.applyLayoutToNodes(z,B,G,W.edges.map(function(ie){return B.findConnector(ie.key)})),this.applyLayoutToConnectors(z,B,G,W.edges.map(function(ie){return B.findConnector(ie.key)}),oe),z.endTransaction(),G.getRectangle(!0)},X.getNonGraphItems=function(z,B,k,W,G){return(B?z.getChildren(B):z.items.filter(function(Y){return!Y.container})).filter(function(Y){return Y instanceof L.Connector?!(Y.beginItem&&k[Y.beginItem.key]||Y.endItem&&k[Y.endItem.key]||G.indexOf(Y)!==-1):Y instanceof q.Shape?!k[Y.key]&&W.indexOf(Y)===-1:void 0})},X.getOccupiedRectangles=function(z,B){var k=z.map(function(G){return G.rectangle});if(B&&k.length){var W=B.clientRectangle;k.push(new p.Rectangle(W.right,W.y,1,1)),k.push(new p.Rectangle(W.right,W.bottom,1,1))}return k},X.offsetLayoutToFreeSpace=function(z,B,k,W){var G=z.getRectangle(!0),Y=H.GeometryUtils.findFreeSpace(k,G.createSize().offset(W,W).nonNegativeSize(),!1,B);if(Y){var J=Y.x+W,$=Y.y+W;return z.offsetNodes(J,$)}var te=k&&k.length?k.reduce(function(re,ie){return ie.right>re?ie.right:re},0):B?B.x:0,oe=B?B.y:Math.max(0,G.y);return z.offsetNodes(te+W,oe+W)},X.resizeContainerOnLayout=function(z,B,k,W,G){var Y=k.getRectangle(!0),J=W.children.filter(function(ie){return ie instanceof q.Shape?k.nodeKeys.indexOf(ie.key)===-1:!!(ie instanceof L.Connector&&ie.beginItem&&ie.endItem)&&k.nodeKeys.indexOf(ie.beginItem.key)===-1&&k.nodeKeys.indexOf(ie.endItem.key)===-1}).map(function(ie){return ie.rectangle}),$=J.map(function(ie){return ie.right}).reduce(function(ie,se){return Math.max(ie,se)},Y.right),te=J.map(function(ie){return ie.bottom}).reduce(function(ie,se){return Math.max(ie,se)},Y.bottom),oe=W.rectangle.width+$+G-W.rectangle.right,re=W.rectangle.height+te+G-W.rectangle.bottom;X.setShapeSize(z,B,W,W.position,new s.Size(oe,re)),X.updateShapeAttachedConnectors(z,B,W)},X.applyLayoutToNodes=function(z,B,k,W){var G=this,Y=W.reduce(function(J,$){return J[$.key]=J},{});k.forEachNode(function(J,$){var te=B.findShape($);G.applyLayoutToNode(z,B,te,J.position,Y)})},X.applyLayoutToNode=function(z,B,k,W,G){var Y=this,J=W.clone().offset(-k.position.x,-k.position.y);X.setShapePosition(z,B,k,W,!1),J.x===0&&J.y===0||(k.attachedConnectors.filter(function($){return!G[$.key]}).forEach(function($){Y.updateConnectorAttachedPoints(z,B,$);for(var te=$.beginItem?1:0,oe=$.endItem?$.points.length-2:$.points.length-1,re=te;re<=oe;re++)Y.moveConnectorPoint(z,$,re,$.points[re].offset(J.x,J.y))}),B.getChildren(k).forEach(function($){if($ instanceof q.Shape){var te=$.position.clone().offset(J.x,J.y);Y.applyLayoutToNode(z,B,$,te,G)}}))},X.applyLayoutToConnectors=function(z,B,k,W,G){var Y=this;W.filter(function(J){return J.beginItem||J.endItem}).forEach(function(J){var $=k.edgeToPosition[J.key];if(J.beginItem&&J.endItem&&!G&&$){var te=J.beginItem.getConnectionPointIndexForSide($.beginIndex);te!==J.beginConnectionPointIndex&&z.addAndRedo(new n.SetConnectionPointIndexHistoryItem(J,te,L.ConnectorPosition.Begin));var oe=J.endItem.getConnectionPointIndexForSide($.endIndex);oe!==J.endConnectionPointIndex&&z.addAndRedo(new n.SetConnectionPointIndexHistoryItem(J,oe,L.ConnectorPosition.End))}Y.updateConnectorAttachedPoints(z,B,J),$&&Y.deleteConnectorCustomPoints(z,J)})},X.adjustLayoutToSnapGrid=function(z,B,k){var W=this;B.nodeKeys.forEach(function(G){B.nodeToLayout[G].position.x=W.getSnappedPos(z,k,B.nodeToLayout[G].position.x,!0),B.nodeToLayout[G].position.y=W.getSnappedPos(z,k,B.nodeToLayout[G].position.y,!1)})},X.getGraphInfoByItems=function(z,B,k,W){W===void 0&&(W=!0);var G={};[].concat(B).concat(k).forEach(function(ie){var se=ie.container&&ie.container.key;G[se]||(G[se]=[]),G[se].push(ie)});var Y=[];for(var J in G)if(Object.prototype.hasOwnProperty.call(G,J)){var $=J&&z.findContainer(J);if(!$||$.expanded&&!z.findItemCollapsedContainer($)){var te=$&&$.key,oe=this.getGraphByItems(z,G[J],te,!W),re=!1;(oe.nodes.length>1||oe.nodes.length&&(W||$&&G[$.container&&$.container.key]))&&(re=!0),re&&Y.push(new N.GraphInfo($,oe))}}return Y.sort(function(ie,se){return se.level-ie.level})},X.getGraphByItems=function(z,B,k,W){var G=this,Y=new O.Graph([],[]),J={};return B.forEach(function($){G.extendByConnectedComponents($,Y,k,J,W)}),Y.nodes.sort(function($,te){return z.getItemIndex(z.findItem($))-z.getItemIndex(z.findItem(te))}),Y.edges.sort(function($,te){return z.getItemIndex(z.findItem($.key))-z.getItemIndex(z.findItem(te.key))}),Y.edges=Y.edges.filter(function($){return Y.getNode($.from)&&Y.getNode($.to)}),Y},X.extendByConnectedComponents=function(z,B,k,W,G){var Y=this;!z||G&&z.locked||W[z.key]||(W[z.key]=!0,!(z instanceof L.Connector&&(z.container&&z.container.key)===k&&z.beginItem)||z.beginItem.locked&&G||!z.endItem||z.endItem.locked&&G||z.beginItem===z.endItem?z instanceof q.Shape&&(z.container&&z.container.key)===k&&(B.addNode(z),z.attachedConnectors.forEach(function(J){return Y.extendByConnectedComponents(J,B,k,W,G)})):(B.addEdge(new V.Edge(z.key,z.beginItem&&z.beginItem.key,z.endItem&&z.endItem.key)),this.extendByConnectedComponents(z.beginItem,B,k,W,G),this.extendByConnectedComponents(z.endItem,B,k,W,G)))},X.getlUnitValue=function(z,B){switch(z){case t.DiagramUnit.Cm:return u.UnitConverter.twipsToCentimeters(B);case t.DiagramUnit.In:return u.UnitConverter.twipsToInches(B);case t.DiagramUnit.Px:return u.UnitConverter.twipsToPixels(B)}},X.getUnitText=function(z,B,k,W,G){G===void 0&&(G=2);var Y=B[z]?" "+B[z]:"",J=this.getlUnitValue(z,W);switch(z){case t.DiagramUnit.Cm:case t.DiagramUnit.In:return k(+J.toFixed(G))+Y;case t.DiagramUnit.Px:return k(+J.toFixed(0))+Y}},X.getTwipsValue=function(z,B){switch(z){case t.DiagramUnit.Cm:return u.UnitConverter.centimetersToTwips(B);case t.DiagramUnit.In:return u.UnitConverter.inchesToTwips(B);case t.DiagramUnit.Px:return u.UnitConverter.pixelsToTwips(B)}},X.getGuidItemKey=function(){return e.MathUtils.generateGuid()},X.createSelectedItems=function(z){var B={};return z.getSelectedItems(!0).forEach(function(k){return B[k.key]=k}),B},X.canMoveConnector=function(z,B){var k=B.beginItem,W=B.endItem;return k||W?!!z[B.key]&&(k===W?!!z[k.key]:k?W?!!z[k.key]&&!!z[W.key]:!!z[k.key]:!!z[W.key]):!B.isLocked},X.createRectangle=function(z){return H.GeometryUtils.getCommonRectangle(z.map(function(B){return B.rectangle}))},X.changeShapeType=function(z,B,k,W){if(k.description.key!==W){z.beginTransaction();var G=k.getConnectionPoints(),Y=G.map(function(re){return k.getConnectionPointSide(re)});z.addAndRedo(new ee.ChangeShapeTypeHistoryItem(k,W));for(var J=k.getConnectionPoints(),$=J.map(function(re){return k.getConnectionPointSide(re)}),te=0,oe=void 0;oe=k.attachedConnectors[te];te++)oe.beginItem===k&&this.updateConnectionIndexByNewShapeType(z,oe,L.ConnectorPosition.Begin,oe.beginConnectionPointIndex,G,Y,J,$),oe.endItem===k&&this.updateConnectionIndexByNewShapeType(z,oe,L.ConnectorPosition.End,oe.endConnectionPointIndex,G,Y,J,$),this.updateConnectorAttachedPoints(z,B,oe);z.endTransaction()}},X.updateConnectionIndexByNewShapeType=function(z,B,k,W,G,Y,J,$){if(!(W<0)){var te=Y[W],oe=G[W];if(!(W<J.length&&te===$[W])){var re=this.findNearestPointIndex(J,oe,function(ie){return $[ie]===te});re===-1&&(re=this.findNearestPointIndex(J,oe,function(){return!0})),re!==W&&z.addAndRedo(new n.SetConnectionPointIndexHistoryItem(B,re,k))}}},X.findNearestPointIndex=function(z,B,k){return z.reduce(function(W,G,Y){if(k(Y)){var J=g.Metrics.euclideanDistance(B,z[Y]);(W.index===-1||W.distance>J)&&(W.index=Y,W.distance=J)}return W},{distance:Number.MAX_SAFE_INTEGER,index:-1}).index},X.connectionPointActionSize=u.UnitConverter.pixelsToTwips(8),X}();h.ModelUtils=Q},6469:function(j,h,d){var u,g=this&&this.__extends||(u=function(e,t){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var r in o)o.hasOwnProperty(r)&&(n[r]=o[r])},u(e,t)},function(e,t){function n(){this.constructor=e}u(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(h,"__esModule",{value:!0}),h.AddShapeEventArgs=h.AddShapeRequestedEntity=void 0;var v=d(6879),p=d(8532),s=function(e){function t(n,o){var r=e.call(this,n)||this;return r.shape=o,r}return g(t,e),Object.defineProperty(t.prototype,"operation",{get:function(){return v.DiagramModelOperation.AddShape},enumerable:!1,configurable:!0}),t.prototype.createEventArgs=function(){return new i(this.apiController.createNativeShape(this.shape),this.apiController.convertPoint(this.shape.position))},Object.defineProperty(t.prototype,"settingsKey",{get:function(){return"addShape"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storageKey",{get:function(){return this.settingsKey+"_"+(this.shape&&this.shape.key)},enumerable:!1,configurable:!0}),t.prototype.equals=function(n){return n instanceof t&&this.shape===n.shape&&this.shape.position.equals(n.shape.position)},t}(p.RequestedEntity);h.AddShapeRequestedEntity=s;var i=function(e){function t(n,o){var r=e.call(this)||this;return r.shape=n,r.position=o,r}return g(t,e),t}(p.PermissionRequestEventArgs);h.AddShapeEventArgs=i},1110:function(j,h,d){var u,g=this&&this.__extends||(u=function(e,t){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var r in o)o.hasOwnProperty(r)&&(n[r]=o[r])},u(e,t)},function(e,t){function n(){this.constructor=e}u(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(h,"__esModule",{value:!0}),h.AddShapeFromToolboxEventArgs=h.AddShapeFromToolboxRequestedEntity=void 0;var v=d(6879),p=d(8532),s=function(e){function t(n,o){var r=e.call(this,n)||this;return r.shapeType=o,r}return g(t,e),Object.defineProperty(t.prototype,"operation",{get:function(){return v.DiagramModelOperation.AddShapeFromToolbox},enumerable:!1,configurable:!0}),t.prototype.createEventArgs=function(){return new i(this.shapeType)},Object.defineProperty(t.prototype,"settingsKey",{get:function(){return"addShapeFromToolbox"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storageKey",{get:function(){return this.settingsKey+"_"+this.shapeType},enumerable:!1,configurable:!0}),t.prototype.equals=function(n){return n instanceof t&&this.shapeType===n.shapeType},t}(p.RequestedEntity);h.AddShapeFromToolboxRequestedEntity=s;var i=function(e){function t(n){var o=e.call(this)||this;return o.shapeType=n,o}return g(t,e),t}(p.PermissionRequestEventArgs);h.AddShapeFromToolboxEventArgs=i},4829:function(j,h,d){var u,g=this&&this.__extends||(u=function(e,t){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var r in o)o.hasOwnProperty(r)&&(n[r]=o[r])},u(e,t)},function(e,t){function n(){this.constructor=e}u(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(h,"__esModule",{value:!0}),h.BeforeChangeConnectorTextEventArgs=h.BeforeChangeConnectorTextRequestedEntity=void 0;var v=d(6879),p=d(8532),s=function(e){function t(n,o,r){var a=e.call(this,n)||this;return a.connector=o,a.position=r,a}return g(t,e),Object.defineProperty(t.prototype,"operation",{get:function(){return v.DiagramModelOperation.BeforeChangeConnectorText},enumerable:!1,configurable:!0}),t.prototype.createEventArgs=function(){return new i(this.apiController.createNativeConnector(this.connector),this.position,this.connector.texts.map(function(n){return n}).sort(function(n,o){return n.position-o.position}).indexOf(this.connector.texts.get(this.position)))},Object.defineProperty(t.prototype,"settingsKey",{get:function(){return"changeConnectorText"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storageKey",{get:function(){return"before"+this.settingsKey+"_"+(this.connector&&this.connector.key)},enumerable:!1,configurable:!0}),t.prototype.equals=function(n){return n instanceof t&&this.connector===n.connector&&this.position===n.position&&this.connector.texts.get(this.position)===n.connector.texts.get(n.position)},t}(p.RequestedEntity);h.BeforeChangeConnectorTextRequestedEntity=s;var i=function(e){function t(n,o,r){var a=e.call(this)||this;return a.connector=n,a.position=o,a.index=r,a}return g(t,e),t}(p.PermissionRequestEventArgs);h.BeforeChangeConnectorTextEventArgs=i},2345:function(j,h,d){var u,g=this&&this.__extends||(u=function(e,t){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var r in o)o.hasOwnProperty(r)&&(n[r]=o[r])},u(e,t)},function(e,t){function n(){this.constructor=e}u(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(h,"__esModule",{value:!0}),h.BeforeChangeShapeTextEventArgs=h.BeforeChangeShapeTextRequestedEntity=void 0;var v=d(6879),p=d(8532),s=function(e){function t(n,o){var r=e.call(this,n)||this;return r.shape=o,r}return g(t,e),Object.defineProperty(t.prototype,"operation",{get:function(){return v.DiagramModelOperation.BeforeChangeShapeText},enumerable:!1,configurable:!0}),t.prototype.createEventArgs=function(){return new i(this.apiController.createNativeShape(this.shape))},Object.defineProperty(t.prototype,"settingsKey",{get:function(){return"changeShapeText"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storageKey",{get:function(){return"before"+this.settingsKey+"_"+(this.shape&&this.shape.key)},enumerable:!1,configurable:!0}),t.prototype.equals=function(n){return n instanceof t&&this.shape===n.shape&&this.shape.text===n.shape.text},t}(p.RequestedEntity);h.BeforeChangeShapeTextRequestedEntity=s;var i=function(e){function t(n){var o=e.call(this)||this;return o.shape=n,o}return g(t,e),t}(p.PermissionRequestEventArgs);h.BeforeChangeShapeTextEventArgs=i},6466:function(j,h,d){var u,g=this&&this.__extends||(u=function(e,t){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var r in o)o.hasOwnProperty(r)&&(n[r]=o[r])},u(e,t)},function(e,t){function n(){this.constructor=e}u(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(h,"__esModule",{value:!0}),h.ChangeConnectionEventArgs=h.ChangeConnectionRequestedEntity=void 0;var v=d(6879),p=d(8532),s=function(e){function t(n,o,r,a,c,f){var m=e.call(this,n)||this;return m.connector=o,m.shape=r,m.oldShape=a,m.position=c,m.connectionPointIndex=f,m}return g(t,e),Object.defineProperty(t.prototype,"operation",{get:function(){return v.DiagramModelOperation.ChangeConnection},enumerable:!1,configurable:!0}),t.prototype.createEventArgs=function(){return new i(this.apiController.createNativeConnector(this.connector),this.apiController.createNativeShape(this.shape),this.apiController.createNativeShape(this.oldShape),this.position,this.connectionPointIndex)},Object.defineProperty(t.prototype,"settingsKey",{get:function(){return"changeConnection"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storageKey",{get:function(){return this.settingsKey+"_"+(this.connector&&this.connector.key)+"_"+this.position},enumerable:!1,configurable:!0}),t.prototype.equals=function(n){if(n instanceof t){var o=!this.connector&&!n.connector||this.connector&&n.connector&&this.connector===n.connector,r=!this.shape&&!n.shape||this.shape&&n.shape&&this.shape===n.shape,a=!this.oldShape&&!n.oldShape||this.oldShape&&n.oldShape&&this.oldShape===n.oldShape;return r&&a&&o&&this.position===n.position&&this.connectionPointIndex===n.connectionPointIndex}return!1},t}(p.RequestedEntity);h.ChangeConnectionRequestedEntity=s;var i=function(e){function t(n,o,r,a,c){var f=e.call(this)||this;return f.connector=n,f.shape=o,f.oldShape=r,f.position=a,f.connectionPointIndex=c,f}return g(t,e),t}(p.PermissionRequestEventArgs);h.ChangeConnectionEventArgs=i},6354:function(j,h,d){var u,g=this&&this.__extends||(u=function(t,n){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var a in r)r.hasOwnProperty(a)&&(o[a]=r[a])},u(t,n)},function(t,n){function o(){this.constructor=t}u(t,n),t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)});Object.defineProperty(h,"__esModule",{value:!0}),h.ChangeConnectorPointsEventArgs=h.ChangeConnectorPointsRequestedEntity=void 0;var v=d(6879),p=d(8532),s=d(8675),i=function(t){function n(o,r,a,c){var f=t.call(this,o)||this;return f.connector=r,f.oldPoints=a,f.points=c,f}return g(n,t),Object.defineProperty(n.prototype,"operation",{get:function(){return v.DiagramModelOperation.ChangeConnectorPoints},enumerable:!1,configurable:!0}),n.prototype.createEventArgs=function(){var o=this;return new e(this.apiController.createNativeConnector(this.connector),this.oldPoints.map(function(r){return o.apiController.convertPoint(r)}),this.points.map(function(r){return o.apiController.convertPoint(r)}))},Object.defineProperty(n.prototype,"settingsKey",{get:function(){return"changeConnectorPoints"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"storageKey",{get:function(){return this.settingsKey+"_"+(this.connector&&this.connector.key)},enumerable:!1,configurable:!0}),n.prototype.equals=function(o){return o instanceof n&&this.connector===o.connector&&s.GeometryUtils.arePointsEqual(this.oldPoints,o.oldPoints)&&s.GeometryUtils.arePointsEqual(this.points,o.points)},n}(p.RequestedEntity);h.ChangeConnectorPointsRequestedEntity=i;var e=function(t){function n(o,r,a){var c=t.call(this)||this;return c.connector=o,c.oldPoints=r,c.points=a,c}return g(n,t),n}(p.PermissionRequestEventArgs);h.ChangeConnectorPointsEventArgs=e},2249:function(j,h,d){var u,g=this&&this.__extends||(u=function(e,t){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var r in o)o.hasOwnProperty(r)&&(n[r]=o[r])},u(e,t)},function(e,t){function n(){this.constructor=e}u(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(h,"__esModule",{value:!0}),h.ChangeConnectorTextEventArgs=h.ChangeConnectorTextRequestedEntity=void 0;var v=d(6879),p=d(8532),s=function(e){function t(n,o,r,a){var c=e.call(this,n)||this;return c.connector=o,c.position=r,c.text=a,c}return g(t,e),Object.defineProperty(t.prototype,"operation",{get:function(){return v.DiagramModelOperation.ChangeConnectorText},enumerable:!1,configurable:!0}),t.prototype.createEventArgs=function(){return new i(this.apiController.createNativeConnector(this.connector),this.position,this.connector.texts.map(function(n){return n}).sort(function(n,o){return n.position-o.position}).indexOf(this.connector.texts.get(this.position)),this.text)},Object.defineProperty(t.prototype,"settingsKey",{get:function(){return"changeConnectorText"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storageKey",{get:function(){return this.settingsKey+"_"+(this.connector&&this.connector.key)},enumerable:!1,configurable:!0}),t.prototype.equals=function(n){return n instanceof t&&this.connector===n.connector&&this.position===n.position&&this.text===n.text},t}(p.RequestedEntity);h.ChangeConnectorTextRequestedEntity=s;var i=function(e){function t(n,o,r,a){var c=e.call(this)||this;return c.connector=n,c.position=o,c.index=r,c.text=a,c}return g(t,e),t}(p.PermissionRequestEventArgs);h.ChangeConnectorTextEventArgs=i},5560:function(j,h,d){var u,g=this&&this.__extends||(u=function(e,t){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var r in o)o.hasOwnProperty(r)&&(n[r]=o[r])},u(e,t)},function(e,t){function n(){this.constructor=e}u(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(h,"__esModule",{value:!0}),h.ChangeShapeTextEventArgs=h.ChangeShapeTextRequestedEntity=void 0;var v=d(6879),p=d(8532),s=function(e){function t(n,o,r){var a=e.call(this,n)||this;return a.shape=o,a.text=r,a}return g(t,e),Object.defineProperty(t.prototype,"operation",{get:function(){return v.DiagramModelOperation.ChangeShapeText},enumerable:!1,configurable:!0}),t.prototype.createEventArgs=function(){return new i(this.apiController.createNativeShape(this.shape),this.text)},Object.defineProperty(t.prototype,"settingsKey",{get:function(){return"changeShapeText"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storageKey",{get:function(){return this.settingsKey+"_"+(this.shape&&this.shape.key)},enumerable:!1,configurable:!0}),t.prototype.equals=function(n){return n instanceof t&&this.shape===n.shape&&this.text===n.text},t}(p.RequestedEntity);h.ChangeShapeTextRequestedEntity=s;var i=function(e){function t(n,o){var r=e.call(this)||this;return r.shape=n,r.text=o,r}return g(t,e),t}(p.PermissionRequestEventArgs);h.ChangeShapeTextEventArgs=i},6580:function(j,h,d){var u,g=this&&this.__extends||(u=function(e,t){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var r in o)o.hasOwnProperty(r)&&(n[r]=o[r])},u(e,t)},function(e,t){function n(){this.constructor=e}u(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(h,"__esModule",{value:!0}),h.DeleteConnectorEventArgs=h.DeleteConnectorRequestedEntity=void 0;var v=d(6879),p=d(8532),s=function(e){function t(n,o){var r=e.call(this,n)||this;return r.connector=o,r}return g(t,e),Object.defineProperty(t.prototype,"operation",{get:function(){return v.DiagramModelOperation.DeleteConnector},enumerable:!1,configurable:!0}),t.prototype.createEventArgs=function(){return new i(this.apiController.createNativeConnector(this.connector))},Object.defineProperty(t.prototype,"settingsKey",{get:function(){return"deleteConnector"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storageKey",{get:function(){return this.settingsKey+"_"+(this.connector&&this.connector.key)},enumerable:!1,configurable:!0}),t.prototype.equals=function(n){return n instanceof t&&this.connector===n.connector},t}(p.RequestedEntity);h.DeleteConnectorRequestedEntity=s;var i=function(e){function t(n){var o=e.call(this)||this;return o.connector=n,o}return g(t,e),t}(p.PermissionRequestEventArgs);h.DeleteConnectorEventArgs=i},8825:function(j,h,d){var u,g=this&&this.__extends||(u=function(e,t){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var r in o)o.hasOwnProperty(r)&&(n[r]=o[r])},u(e,t)},function(e,t){function n(){this.constructor=e}u(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(h,"__esModule",{value:!0}),h.DeleteShapeEventArgs=h.DeleteShapeRequestedEntity=void 0;var v=d(6879),p=d(8532),s=function(e){function t(n,o){var r=e.call(this,n)||this;return r.shape=o,r}return g(t,e),Object.defineProperty(t.prototype,"operation",{get:function(){return v.DiagramModelOperation.DeleteShape},enumerable:!1,configurable:!0}),t.prototype.createEventArgs=function(){return new i(this.apiController.createNativeShape(this.shape))},Object.defineProperty(t.prototype,"settingsKey",{get:function(){return"deleteShape"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storageKey",{get:function(){return this.settingsKey+"_"+(this.shape&&this.shape.key)},enumerable:!1,configurable:!0}),t.prototype.equals=function(n){return n instanceof t&&this.shape===n.shape},t}(p.RequestedEntity);h.DeleteShapeRequestedEntity=s;var i=function(e){function t(n){var o=e.call(this)||this;return o.shape=n,o}return g(t,e),t}(p.PermissionRequestEventArgs);h.DeleteShapeEventArgs=i},4864:function(j,h,d){var u,g=this&&this.__extends||(u=function(e,t){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var r in o)o.hasOwnProperty(r)&&(n[r]=o[r])},u(e,t)},function(e,t){function n(){this.constructor=e}u(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(h,"__esModule",{value:!0}),h.MoveShapeEventArgs=h.MoveShapeRequestedEntity=void 0;var v=d(6879),p=d(8532),s=function(e){function t(n,o,r,a){var c=e.call(this,n)||this;return c.shape=o,c.oldPosition=r,c.position=a,c}return g(t,e),Object.defineProperty(t.prototype,"operation",{get:function(){return v.DiagramModelOperation.MoveShape},enumerable:!1,configurable:!0}),t.prototype.createEventArgs=function(){return new i(this.apiController.createNativeShape(this.shape),this.apiController.convertPoint(this.oldPosition),this.apiController.convertPoint(this.position))},Object.defineProperty(t.prototype,"settingsKey",{get:function(){return"moveShape"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storageKey",{get:function(){return this.settingsKey+"_"+(this.shape&&this.shape.key)},enumerable:!1,configurable:!0}),t.prototype.equals=function(n){return n instanceof t&&this.shape===n.shape&&this.oldPosition.equals(n.oldPosition)&&this.position.equals(n.position)},t}(p.RequestedEntity);h.MoveShapeRequestedEntity=s;var i=function(e){function t(n,o,r){var a=e.call(this)||this;return a.shape=n,a.oldPosition=o,a.position=r,a}return g(t,e),t}(p.PermissionRequestEventArgs);h.MoveShapeEventArgs=i},8532:(j,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.PermissionRequestEventArgs=h.RequestedEntity=void 0;var d=function(){function g(v){this.apiController=v}return Object.defineProperty(g.prototype,"allowed",{get:function(){return this.eventArgs.allowed},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"updateUI",{get:function(){return this.eventArgs.updateUI},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"eventArgs",{get:function(){return this._eventArgs||(this._eventArgs=this.createEventArgs()),this._eventArgs},enumerable:!1,configurable:!0}),g}();h.RequestedEntity=d;var u=function(){this.allowed=!0,this.updateUI=!1};h.PermissionRequestEventArgs=u},3214:function(j,h,d){var u,g=this&&this.__extends||(u=function(e,t){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var r in o)o.hasOwnProperty(r)&&(n[r]=o[r])},u(e,t)},function(e,t){function n(){this.constructor=e}u(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(h,"__esModule",{value:!0}),h.ResizeShapeEventArgs=h.ResizeShapeRequestedEntity=void 0;var v=d(6879),p=d(8532),s=function(e){function t(n,o,r,a){var c=e.call(this,n)||this;return c.shape=o,c.oldSize=r,c.size=a,c}return g(t,e),Object.defineProperty(t.prototype,"operation",{get:function(){return v.DiagramModelOperation.ResizeShape},enumerable:!1,configurable:!0}),t.prototype.createEventArgs=function(){return new i(this.apiController.createNativeShape(this.shape),this.apiController.convertSize(this.oldSize),this.apiController.convertSize(this.size))},Object.defineProperty(t.prototype,"settingsKey",{get:function(){return"resizeShape"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storageKey",{get:function(){return this.settingsKey+"_"+(this.shape&&this.shape.key)},enumerable:!1,configurable:!0}),t.prototype.equals=function(n){return n instanceof t&&this.shape===n.shape&&this.oldSize.equals(n.oldSize)&&this.size.equals(n.size)},t}(p.RequestedEntity);h.ResizeShapeRequestedEntity=s;var i=function(e){function t(n,o,r){var a=e.call(this)||this;return a.shape=n,a.oldSize=o,a.size=r,a}return g(t,e),t}(p.PermissionRequestEventArgs);h.ResizeShapeEventArgs=i},2883:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.PermissionsProvider=void 0;var u=d(5503),g=d(8675),v=d(6879),p=d(7959),s=d(6469),i=d(8825),e=d(6580),t=d(1110),n=d(6466),o=d(6354),r=d(2345),a=d(4829),c=d(5560),f=d(2249),m=d(9187),y=d(3214),l=d(4864),P=function(){function C(I){this.onRequestOperation=new g.EventDispatcher,this.cache=[],this.permissionsLockCount=0,this.requestDeleteItems={},this.updateUICount=0,this.apiController=I,this.operationSettings=new v.ModelOperationSettings,this.storage=new m.PermissionsProviderStorage}return C.prototype.notifySelectionChanged=function(I){this.clearCache()},C.prototype.notifyModelChanged=function(I){this.clearCache()},C.prototype.notifyPageColorChanged=function(I){},C.prototype.notifyPageSizeChanged=function(I,x){},C.prototype.clearCache=function(I){this.cache=I!==void 0?this.cache.filter(function(x){return x.operation!==I}):[]},C.prototype.canDeleteItems=function(I){var x=this,b=!0;return I.forEach(function(S){var w;S instanceof u.Shape&&(w=new i.DeleteShapeRequestedEntity(x.apiController,S)),S instanceof p.Connector&&(w=new e.DeleteConnectorRequestedEntity(x.apiController,S)),b=b&&x.requestOperation(w)}),b},C.prototype.canAddItems=function(I){var x=this,b=!0;return I.forEach(function(S){S instanceof u.Shape&&(b=b&&x.requestOperation(new s.AddShapeRequestedEntity(x.apiController,S))),S instanceof p.Connector&&(b=(b=b&&x.canChangeConnection(S,S.beginItem,void 0,p.ConnectorPosition.Begin,S.beginConnectionPointIndex))&&x.canChangeConnection(S,S.endItem,void 0,p.ConnectorPosition.End,S.endConnectionPointIndex))}),b},C.prototype.canAddShapeFromToolbox=function(I){return this.requestOperation(new t.AddShapeFromToolboxRequestedEntity(this.apiController,I))},C.prototype.canChangeConnection=function(I,x,b,S,w){return!(!I||!this.requestDeleteItems[I.key])||!(x==null||x instanceof u.Shape)||this.requestOperation(new n.ChangeConnectionRequestedEntity(this.apiController,I,x,b,S,w))},C.prototype.canChangeConnectorPoints=function(I,x,b){return!(!I||!this.requestDeleteItems[I.key])||this.requestOperation(new o.ChangeConnectorPointsRequestedEntity(this.apiController,I,x,b))},C.prototype.canChangeShapeText=function(I){return this.requestOperation(new r.BeforeChangeShapeTextRequestedEntity(this.apiController,I))},C.prototype.canChangeConnectorText=function(I,x){return this.requestOperation(new a.BeforeChangeConnectorTextRequestedEntity(this.apiController,I,x))},C.prototype.canApplyShapeTextChange=function(I,x){return this.requestOperation(new c.ChangeShapeTextRequestedEntity(this.apiController,I,x))},C.prototype.canApplyConnectorTextChange=function(I,x,b){return this.requestOperation(new f.ChangeConnectorTextRequestedEntity(this.apiController,I,x,b))},C.prototype.canResizeShapes=function(I){var x=this,b=!0;return I.forEach(function(S){b=b&&x.requestOperation(new y.ResizeShapeRequestedEntity(x.apiController,S.shape,S.oldSize,S.size))}),b},C.prototype.canMoveShapes=function(I){var x=this,b=!0;return I.forEach(function(S){b=b&&x.requestOperation(new l.MoveShapeRequestedEntity(x.apiController,S.shape,S.oldPosition,S.position))}),b},C.prototype.requestOperation=function(I){var x,b=!0;return!this.permissionsLockCount&&(this.updateUICount>0&&this.cache.forEach(function(S){S.equals(I)&&(x=S)}),x?b=x.allowed:(this.requestOperationCore(I),this.updateUICount>0&&this.cache.push(I),b=I.allowed),this.updateUICount===0&&this.storage.needStorePermissions())?(this.storage.storePermission(I.storageKey,b),this.storage.isStoredPermissionsGranted()):b},C.prototype.requestOperationCore=function(I){I.eventArgs.allowed=this.operationSettings[I.settingsKey],I.eventArgs.updateUI=this.updateUICount>0,I.allowed&&this.onRequestOperation.raise("notifyRequestOperation",I.operation,I.eventArgs)},C.prototype.lockPermissions=function(){this.permissionsLockCount++},C.prototype.unlockPermissions=function(){this.permissionsLockCount--},C.prototype.beginDeleteItems=function(I){var x=this;I.forEach(function(b){return x.requestDeleteItems[b.key]=b})},C.prototype.endDeleteItems=function(){this.requestDeleteItems={}},C.prototype.beginUpdateUI=function(){this.updateUICount++},C.prototype.endUpdateUI=function(){this.updateUICount--},C.prototype.addInteractingItem=function(I,x){this.storage.addInteractingItem(I,x)},C.prototype.getInteractingItem=function(I,x){return this.storage.getInteractingItem(I,x)},C.prototype.getInteractingItemCount=function(){return this.storage.getInteractingItemCount()},C.prototype.clearInteractingItems=function(){this.storage.clearInteractingItems()},C.prototype.beginStorePermissions=function(){this.storage.beginStorePermissions()},C.prototype.endStorePermissions=function(){this.storage.endStorePermissions()},C.prototype.isStoredPermissionsGranted=function(){return this.permissionsLockCount>0||this.storage.isStoredPermissionsGranted()},C}();h.PermissionsProvider=P},9187:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.PermissionsProviderStorage=void 0;var u=d(5503),g=d(7959),v=function(){function p(){this.interactingItems={},this.storedPermissions={}}return p.prototype.addInteractingItem=function(s,i){var e=this.getInteractingItemKey(s,i);this.interactingItems[e]===void 0&&(s instanceof u.Shape||s instanceof g.Connector)&&(this.interactingItems[e]=s.clone())},p.prototype.getInteractingItem=function(s,i){var e=this.getInteractingItemKey(s,i);return this.interactingItems[e]},p.prototype.getInteractingItemCount=function(){return Object.keys(this.interactingItems).length},p.prototype.clearInteractingItems=function(){this.interactingItems={}},p.prototype.getInteractingItemKey=function(s,i){return s.key+(i!==void 0?"_"+i.toString():"")},p.prototype.needStorePermissions=function(){return this.storePermissions},p.prototype.beginStorePermissions=function(){this.storePermissions=!0},p.prototype.endStorePermissions=function(){this.storePermissions=!1,this.storedPermissions={}},p.prototype.isStoredPermissionsGranted=function(){for(var s=Object.keys(this.storedPermissions),i=!0,e=0;e<s.length;e++)i=i&&this.storedPermissions[s[e]];return i},p.prototype.storePermission=function(s,i){this.storedPermissions[s]=i},p}();h.PermissionsProviderStorage=v},7255:function(j,h,d){var u,g=this&&this.__extends||(u=function(m,y){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,P){l.__proto__=P}||function(l,P){for(var C in P)P.hasOwnProperty(C)&&(l[C]=P[C])},u(m,y)},function(m,y){function l(){this.constructor=m}u(m,y),m.prototype=y===null?Object.create(y):(l.prototype=y.prototype,new l)});Object.defineProperty(h,"__esModule",{value:!0}),h.ContainerDescription=h.CONTAINER_EXPAND_BUTTON_SIGN_RATIO=h.CONTAINER_EXPAND_BUTTON_RECT_RATIO=h.CONTAINER_HEADER_TOOLBOX_SIZE_RATIO=h.CONTAINER_HEADER_SIZE=void 0;var v=d(6794),p=d(6353),s=d(2259),i=d(4716),e=d(7724),t=d(3500),n=d(6031),o=d(5329),r=d(7228),a=d(3742),c=d(6224);h.CONTAINER_HEADER_SIZE=360,h.CONTAINER_HEADER_TOOLBOX_SIZE_RATIO=.2,h.CONTAINER_EXPAND_BUTTON_RECT_RATIO=.5,h.CONTAINER_EXPAND_BUTTON_SIGN_RATIO=.3;var f=function(m){function y(l){return l===void 0&&(l=new p.Size(2*v.ShapeDefaultDimension,1.5*v.ShapeDefaultDimension)),m.call(this,l,!0)||this}return g(y,m),Object.defineProperty(y.prototype,"enableChildren",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"keepRatioOnAutoSize",{get:function(){return!1},enumerable:!1,configurable:!0}),y.prototype.getDefaultText=function(){return c.DiagramLocalizationService.shapeTexts[s.ShapeTypes.Container]},y.prototype.createConnectionPoints=function(){return[new r.ConnectionPoint(.25,0,a.ConnectionPointSide.North),new r.ConnectionPoint(.5,0,a.ConnectionPointSide.North),new r.ConnectionPoint(.75,0,a.ConnectionPointSide.North),new r.ConnectionPoint(1,.25,a.ConnectionPointSide.East),new r.ConnectionPoint(1,.5,a.ConnectionPointSide.East),new r.ConnectionPoint(1,.75,a.ConnectionPointSide.East),new r.ConnectionPoint(.75,1,a.ConnectionPointSide.South),new r.ConnectionPoint(.5,1,a.ConnectionPointSide.South),new r.ConnectionPoint(.25,1,a.ConnectionPointSide.South),new r.ConnectionPoint(0,.75,a.ConnectionPointSide.West),new r.ConnectionPoint(0,.5,a.ConnectionPointSide.West),new r.ConnectionPoint(0,.25,a.ConnectionPointSide.West)]},y.prototype.getConnectionPointIndexForItem=function(l,P){return(l&&l.getConnectionPoints()).length===4?3*P+1:P},y.prototype.getConnectionPointIndexForSide=function(l){return 3*l+1},y.prototype.createShapePrimitives=function(l,P){var C=l.rectangle,I=C.x,x=C.y,b=C.width,S=C.height,w=[];return l.expanded&&(w=w.concat([new i.RectanglePrimitive(I,x,b,S,l.style)])),w.concat(this.createHeaderPrimitives(l,P))},y.prototype.createExpandButtonPrimitives=function(l,P){var C=[new e.PathPrimitiveMoveToCommand(P.x+P.width*((1-h.CONTAINER_EXPAND_BUTTON_SIGN_RATIO)/2),P.center.y),new e.PathPrimitiveLineToCommand(P.x+P.width*((1-h.CONTAINER_EXPAND_BUTTON_SIGN_RATIO)/2+h.CONTAINER_EXPAND_BUTTON_SIGN_RATIO),P.center.y)];l.expanded||(C=C.concat([new e.PathPrimitiveMoveToCommand(P.center.x,P.y+P.height*((1-h.CONTAINER_EXPAND_BUTTON_SIGN_RATIO)/2)),new e.PathPrimitiveLineToCommand(P.center.x,P.y+P.height*((1-h.CONTAINER_EXPAND_BUTTON_SIGN_RATIO)/2+h.CONTAINER_EXPAND_BUTTON_SIGN_RATIO))]));var I=P.clone().inflate(-P.width*(1-h.CONTAINER_EXPAND_BUTTON_RECT_RATIO)/2,-P.height*(1-h.CONTAINER_EXPAND_BUTTON_RECT_RATIO)/2);return[new o.GroupPrimitive([new i.RectanglePrimitive(I.x,I.y,I.width,I.height,l.style),new e.PathPrimitive(C,l.style)],"shape-expand-btn",null,null,function(x){t.RenderUtils.setElementEventData(x,n.MouseEventElementType.ShapeExpandButton,l.key)})]},y}(v.ShapeDescription);h.ContainerDescription=f},944:function(j,h,d){var u,g=this&&this.__extends||(u=function(a,c){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,m){f.__proto__=m}||function(f,m){for(var y in m)m.hasOwnProperty(y)&&(f[y]=m[y])},u(a,c)},function(a,c){function f(){this.constructor=a}u(a,c),a.prototype=c===null?Object.create(c):(f.prototype=c.prototype,new f)});Object.defineProperty(h,"__esModule",{value:!0}),h.HorizontalContainerDescription=void 0;var v=d(6794),p=d(8011),s=d(6353),i=d(8900),e=d(2259),t=d(7255),n=d(4716),o=d(9416),r=function(a){function c(){return a.call(this,new s.Size(2*v.ShapeDefaultDimension,1.5*v.ShapeDefaultDimension))||this}return g(c,a),Object.defineProperty(c.prototype,"key",{get:function(){return e.ShapeTypes.HorizontalContainer},enumerable:!1,configurable:!0}),c.prototype.getExpandedSize=function(f){return new s.Size(f.expandedSize.width,f.size.height)},c.prototype.getCollapsedSize=function(f){return new s.Size(t.CONTAINER_HEADER_SIZE+2*f.strokeWidth,f.size.height)},c.prototype.allowResizeHorizontally=function(f){return f.expanded},c.prototype.createHeaderPrimitives=function(f,m){var y=f.rectangle,l=y.x,P=y.y,C=y.height,I=this.getHeaderSize(f,m),x=[];return x=x.concat([new n.RectanglePrimitive(l,P,I,C,f.style)]),m||(x=x.concat(this.createExpandButtonPrimitives(f,new p.Rectangle(l,P,I,I)))),x},c.prototype.getClientRectangle=function(f){var m=f.rectangle,y=this.getHeaderSize(f);return p.Rectangle.fromGeometry(new i.Point(m.x+y,m.y),new s.Size(m.width-y,m.height))},c.prototype.getTextRectangle=function(f){var m=f.rectangle,y=this.getHeaderSize(f);return p.Rectangle.fromGeometry(new i.Point(m.x,m.y+y),new s.Size(y,m.height-y)).nonNegativeSize()},c.prototype.getSizeByText=function(f,m){var y=this.getHeaderSize(m);return new s.Size(m.size.width,Math.max(m.size.height,Math.max(f.width+y,m.size.height)))},c.prototype.getTextEditRectangle=function(f){var m=this.getTextRectangle(f);return p.Rectangle.fromGeometry(new i.Point(m.x,m.y+m.height),new s.Size(m.height,m.width))},c.prototype.getTextAngle=function(){return o.TextAngle.Angle270deg},c.prototype.getHeaderSize=function(f,m){var y=f.rectangle;return m?y.height*t.CONTAINER_HEADER_TOOLBOX_SIZE_RATIO:t.CONTAINER_HEADER_SIZE+2*f.strokeWidth},c}(t.ContainerDescription);h.HorizontalContainerDescription=r},5759:function(j,h,d){var u,g=this&&this.__extends||(u=function(r,a){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var m in f)f.hasOwnProperty(m)&&(c[m]=f[m])},u(r,a)},function(r,a){function c(){this.constructor=r}u(r,a),r.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)});Object.defineProperty(h,"__esModule",{value:!0}),h.VerticalContainerDescription=void 0;var v=d(8900),p=d(6353),s=d(4716),i=d(8011),e=d(2259),t=d(6794),n=d(7255),o=function(r){function a(){return r.call(this,new p.Size(2*t.ShapeDefaultDimension,1.5*t.ShapeDefaultDimension))||this}return g(a,r),Object.defineProperty(a.prototype,"key",{get:function(){return e.ShapeTypes.VerticalContainer},enumerable:!1,configurable:!0}),a.prototype.getExpandedSize=function(c){return new p.Size(c.size.width,c.expandedSize.height)},a.prototype.getCollapsedSize=function(c){return new p.Size(c.size.width,n.CONTAINER_HEADER_SIZE+2*c.strokeWidth)},a.prototype.allowResizeVertically=function(c){return c.expanded},a.prototype.createHeaderPrimitives=function(c,f){var m=c.rectangle,y=m.x,l=m.y,P=m.width,C=this.getHeaderSize(c,f),I=[];return I=I.concat([new s.RectanglePrimitive(y,l,P,C,c.style)]),f||(I=I.concat(this.createExpandButtonPrimitives(c,new i.Rectangle(y,l,C,C)))),I},a.prototype.getClientRectangle=function(c){var f=c.rectangle,m=this.getHeaderSize(c);return i.Rectangle.fromGeometry(new v.Point(f.x,f.y+m),new p.Size(f.width,f.height-m))},a.prototype.getTextRectangle=function(c){var f=c.rectangle,m=this.getHeaderSize(c);return i.Rectangle.fromGeometry(new v.Point(f.x+m,f.y),new p.Size(f.width-m,m))},a.prototype.getSizeByText=function(c,f){var m=this.getHeaderSize(f);return new p.Size(Math.max(f.size.width,c.width+m),f.size.height)},a.prototype.getHeaderSize=function(c,f){var m=c.rectangle;return f?m.height*n.CONTAINER_HEADER_TOOLBOX_SIZE_RATIO:n.CONTAINER_HEADER_SIZE+2*c.strokeWidth},a}(n.ContainerDescription);h.VerticalContainerDescription=o},6688:function(j,h,d){var u,g=this&&this.__extends||(u=function(y,l){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,C){P.__proto__=C}||function(P,C){for(var I in C)C.hasOwnProperty(I)&&(P[I]=C[I])},u(y,l)},function(y,l){function P(){this.constructor=y}u(y,l),y.prototype=l===null?Object.create(l):(P.prototype=l.prototype,new P)});Object.defineProperty(h,"__esModule",{value:!0}),h.CustomShapeDescription=void 0;var v=d(1995),p=d(8011),s=d(6353),i=d(8900),e=d(7228),t=d(3742),n=d(4083),o=d(6794),r=d(6617),a=d(7176),c=d(590),f=d(1248),m=function(y){function l(P,C){var I=y.call(this,new s.Size(P.defaultWidth||C&&C.defaultSize.width||o.ShapeDefaultDimension,P.defaultHeight||C&&C.defaultSize.height||o.ShapeDefaultDimension))||this;if(I.properties=P,I.baseDescription=C,I.imageLoader=new c.ImageLoader(I.updateSvgImage.bind(I)),I.defaultText=P.defaultText!==void 0?P.defaultText:C&&C.getDefaultText(),I.defaultImageUrl=P.defaultImageUrl||C&&C.getDefaultImageUrl(),I.title=P.title||C&&C.getTitle()||I.defaultText||"",I.connectionPoints=I.createConnectionPoints(),P.svgUrl){I.svgImage=new r.ImageInfo(P.svgUrl);var x=a.ImageCache.instance.createUnloadedInfoByShapeImageInfo(I.svgImage);I.imageLoader.load(x)}return P.svgToolboxUrl&&(I.svgToolboxImage=new r.ImageInfo(P.svgToolboxUrl),x=a.ImageCache.instance.createUnloadedInfoByShapeImageInfo(I.svgToolboxImage),I.imageLoader.load(x)),I}return g(l,y),Object.defineProperty(l.prototype,"key",{get:function(){return this.properties.type},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"allowEditText",{get:function(){return this.properties.allowEditText!==!1},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"allowEditImage",{get:function(){return this.baseDescription?this.baseDescription.allowEditImage:this.properties.allowEditImage===!0},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"enableChildren",{get:function(){return this.baseDescription&&this.baseDescription.enableChildren},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"hasTemplate",{get:function(){return!!this.properties.createTemplate},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"minWidth",{get:function(){return this.properties.minWidth||this.baseDescription&&this.baseDescription.minWidth},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"minHeight",{get:function(){return this.properties.minHeight||this.baseDescription&&this.baseDescription.minHeight},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"maxWidth",{get:function(){return this.properties.maxWidth||this.baseDescription&&this.baseDescription.maxWidth},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"maxHeight",{get:function(){return this.properties.maxHeight||this.baseDescription&&this.baseDescription.maxHeight},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"keepRatioOnAutoSize",{get:function(){return this.properties.keepRatioOnAutoSize},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"toolboxSize",{get:function(){return this.properties.toolboxWidthToHeightRatio?new s.Size(this.defaultSize.width,this.defaultSize.width/this.properties.toolboxWidthToHeightRatio):this.defaultSize},enumerable:!1,configurable:!0}),l.prototype.getTextAngle=function(){return this.baseDescription&&this.baseDescription.getTextAngle()||y.prototype.getTextAngle.call(this)},l.prototype.getTitle=function(){return this.title!==void 0?this.title:y.prototype.getTitle.call(this)},l.prototype.getDefaultText=function(){return this.defaultText!==void 0?this.defaultText:y.prototype.getDefaultText.call(this)},l.prototype.getDefaultImageUrl=function(){return this.defaultImageUrl!==void 0?this.defaultImageUrl:y.prototype.getDefaultImageUrl.call(this)},l.prototype.allowResizeHorizontally=function(P){return this.properties.allowResize!==!1&&(this.baseDescription?this.baseDescription.allowResizeHorizontally(P):y.prototype.allowResizeHorizontally.call(this,P))},l.prototype.allowResizeVertically=function(P){return this.properties.allowResize!==!1&&(this.baseDescription?this.baseDescription.allowResizeVertically(P):y.prototype.allowResizeVertically.call(this,P))},l.prototype.createConnectionPoints=function(){return this.properties&&this.properties.connectionPoints&&this.properties.connectionPoints.length?this.properties.connectionPoints.map(function(P){if(P&&typeof P.x=="number"&&typeof P.y=="number"){var C=typeof P.side=="number"?P.side:t.ConnectionPointSide.Undefined;return new e.ConnectionPoint(P.x,P.y,C)}}).filter(function(P){return P}):y.prototype.createConnectionPoints.call(this)},l.prototype.getConnectionPointSides=function(){for(var P={},C=0;C<this.connectionPoints.length;C++){var I=o.ShapeDescription.getConnectionPointSideByGeometry(this.connectionPoints[C]);P[I]||(P[I]=[]),P[I].push(C)}return P},l.prototype.getConnectionPointIndexForSide=function(P){var C=this.getConnectionPointSides(),I=C[P];if(I){var x=Math.floor(I.length/2);return I.length%2==0&&x--,I[x]}return(I=C[(P+1)%4])?I[0]:(I=C[(P+3)%4])?I[I.length-1]:(I=C[(P+2)%4])?I[0]:P},l.prototype.createImagePrimitives=function(P,C){return this.baseDescription?this.baseDescription.createImagePrimitives(P,C):y.prototype.createImagePrimitives.call(this,P,C)},l.prototype.createShapePrimitives=function(P,C){var I=[],x=P.rectangle,b=x.x,S=x.y,w=x.width,T=x.height;if(this.baseDescription)I=this.baseDescription.createShapePrimitives(P,C);else{var _=C&&this.svgToolboxImage?this.svgToolboxImage:this.svgImage;if(_){var M=b+(this.properties.svgLeft&&!C?this.properties.svgLeft*w:0),A=S+(this.properties.svgTop&&!C?this.properties.svgTop*T:0),E=this.properties.svgWidth&&!C?this.properties.svgWidth*w:w,U=this.properties.svgHeight&&!C?this.properties.svgHeight*T:T;I=I.concat([new v.ImagePrimitive(M,A,E,U,_.exportUrl)])}}var R=C&&this.properties.createToolboxTemplate||this.properties.createTemplate;if(R){var O=b+(this.properties.templateLeft&&!C?this.properties.templateLeft*w:0),N=S+(this.properties.templateTop&&!C?this.properties.templateTop*T:0),V=this.properties.templateWidth&&!C?this.properties.templateWidth*w:w,H=this.properties.templateHeight&&!C?this.properties.templateHeight*T:T,L=this.properties.apiController?this.properties.apiController.createNativeShape(P):P.toNative();I=I.concat([new f.SvgElementPrimitive(O,N,V,H,R,this.properties.destroyTemplate,L)])}return I},l.prototype.createParameters=function(P){return this.baseDescription?this.baseDescription.createParameters(P):y.prototype.createParameters.call(this,P)},l.prototype.normalizeParameters=function(P,C){this.baseDescription?this.baseDescription.normalizeParameters(P,C):y.prototype.normalizeParameters.call(this,P,C)},l.prototype.modifyParameters=function(P,C,I,x){this.baseDescription?this.baseDescription.modifyParameters(P,C,I,x):y.prototype.modifyParameters.call(this,P,C,I,x)},l.prototype.getParameterPoints=function(P){return this.baseDescription?this.baseDescription.getParameterPoints(P):y.prototype.getParameterPoints.call(this,P)},l.prototype.getTextRectangle=function(P){if(this.baseDescription)return this.baseDescription.getTextRectangle(P);var C=P.rectangle,I=C.x,x=C.y,b=C.width,S=C.height;return new p.Rectangle(I+(this.properties.textLeft?this.properties.textLeft*b:0),x+(this.properties.textTop?this.properties.textTop*S:0),this.properties.textWidth?this.properties.textWidth*b:b,this.properties.textHeight?this.properties.textHeight*S:S)},l.prototype.getSizeByText=function(P,C){if(this.baseDescription)return this.baseDescription.getSizeByText(P,C);var I=this.properties.textWidth;I||(I=1);var x=this.properties.textHeight;return x||(x=1),new s.Size(P.width/I,P.height/x)},l.prototype.getImageSize=function(P,C,I){return this.baseDescription?this.baseDescription instanceof n.ShapeWithImageDescription?this.baseDescription.getImageSize(P,C,I):s.Size.empty():new s.Size(this.properties.imageWidth?this.properties.imageWidth*P.width:P.width,this.properties.imageHeight?this.properties.imageHeight*P.height:P.height).nonNegativeSize()},l.prototype.getImagePlacementRectangle=function(P,C){if(this.baseDescription)return this.baseDescription instanceof n.ShapeWithImageDescription?this.baseDescription.getImagePlacementRectangle(P,C):p.Rectangle.fromGeometry(i.Point.zero(),s.Size.empty());var I=P.x,x=P.y,b=P.width,S=P.height;return new p.Rectangle(I+(this.properties.imageLeft&&!C?this.properties.imageLeft*b:0),x+(this.properties.imageTop&&!C?this.properties.imageTop*S:0),this.properties.imageWidth&&!C?this.properties.imageWidth*b:b,this.properties.imageHeight&&!C?this.properties.imageHeight*S:S)},l.prototype.updateSvgImage=function(P){var C=P.imageUrl&&P.imageUrl===this.properties.svgToolboxUrl,I=C?this.svgToolboxImage:this.svgImage;P.base64?I.loadBase64Content(P.base64):I.setUnableToLoadFlag(),C||this.raiseShapeDescriptionChanged(this)},l}(n.ShapeWithImageDescription);h.CustomShapeDescription=m},7552:function(j,h,d){var u,g=this&&this.__extends||(u=function(e,t){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var r in o)o.hasOwnProperty(r)&&(n[r]=o[r])},u(e,t)},function(e,t){function n(){this.constructor=e}u(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(h,"__esModule",{value:!0}),h.ConnectorShapeDescription=void 0;var v=d(2259),p=d(6353),s=d(6794),i=function(e){function t(){var n=e.call(this,!1)||this;return n.defaultSize=new p.Size(.5*s.ShapeDefaultDimension,.5*s.ShapeDefaultDimension),n}return g(t,e),Object.defineProperty(t.prototype,"key",{get:function(){return v.ShapeTypes.Connector},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"keepRatioOnAutoSize",{get:function(){return!0},enumerable:!1,configurable:!0}),t}(d(7768).EllipseShapeDescription);h.ConnectorShapeDescription=i},4941:function(j,h,d){var u,g=this&&this.__extends||(u=function(n,o){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var c in a)a.hasOwnProperty(c)&&(r[c]=a[c])},u(n,o)},function(n,o){function r(){this.constructor=n}u(n,o),n.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)});Object.defineProperty(h,"__esModule",{value:!0}),h.DataShapeDescription=void 0;var v=d(1561),p=d(2259),s=d(7724),i=d(3742),e=d(6794),t=function(n){function o(){return n.call(this,void 0,!0)||this}return g(o,n),Object.defineProperty(o.prototype,"key",{get:function(){return p.ShapeTypes.Data},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"keepRatioOnAutoSize",{get:function(){return!1},enumerable:!1,configurable:!0}),o.prototype.createShapePrimitives=function(r){var a=r.rectangle,c=a.x,f=a.y,m=a.right,y=a.bottom,l=a.width,P=a.height,C=Math.min(Math.max(0,P/Math.tan(o.slopeAngle)),l),I=c+C,x=m-C;return[new s.PathPrimitive([new s.PathPrimitiveMoveToCommand(I,f),new s.PathPrimitiveLineToCommand(m,f),new s.PathPrimitiveLineToCommand(x,y),new s.PathPrimitiveLineToCommand(c,y),new s.PathPrimitiveClosePathCommand],r.style)]},o.prototype.processConnectionPoint=function(r,a){var c=r.size.height/Math.tan(o.slopeAngle),f=r.getConnectionPointSide(a);f===i.ConnectionPointSide.East?a.x-=c/2:f===i.ConnectionPointSide.West&&(a.x+=c/2)},o.prototype.getTextRectangle=function(r){var a=Math.min(Math.max(0,r.size.height/Math.tan(o.slopeAngle)),r.size.width);return r.rectangle.clone().moveRectangle(a,e.ShapeTextPadding).resize(2*-a,2*-e.ShapeTextPadding)},o.slopeAngle=81*Math.PI/180,o}(v.RectangleShapeDescription);h.DataShapeDescription=t},1034:function(j,h,d){var u,g=this&&this.__extends||(u=function(t,n){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var a in r)r.hasOwnProperty(a)&&(o[a]=r[a])},u(t,n)},function(t,n){function o(){this.constructor=t}u(t,n),t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)});Object.defineProperty(h,"__esModule",{value:!0}),h.DatabaseShapeDescription=void 0;var v=d(1561),p=d(2259),s=d(7724),i=d(418),e=function(t){function n(){var o=t.call(this,void 0,!0)||this;return o.defaultSize.width=o.defaultSize.height,o}return g(n,t),Object.defineProperty(n.prototype,"key",{get:function(){return p.ShapeTypes.Database},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"keepRatioOnAutoSize",{get:function(){return!1},enumerable:!1,configurable:!0}),n.prototype.createShapePrimitives=function(o){var r=o.rectangle,a=r.x,c=r.y,f=r.right,m=r.bottom,y=r.height,l=r.center.x,P=y*n.arcWidthRatio;return[new s.PathPrimitive([new s.PathPrimitiveMoveToCommand(f,c+P/2),new s.PathPrimitiveLineToCommand(f,m-P/2),new s.PathPrimitiveArcToCommand((f-a)/2,P/2,0,!1,!0,a,m-P/2),new s.PathPrimitiveLineToCommand(a,c+P/2)],o.style),new i.EllipsePrimitive(l,c+P/2,(f-a)/2,P/2,o.style)]},n.prototype.getTextRectangle=function(o){var r=o.rectangle,a=r.height*n.arcWidthRatio;return r.clone().resize(0,-a).clone().moveRectangle(0,a)},n.arcWidthRatio=.2,n}(v.RectangleShapeDescription);h.DatabaseShapeDescription=e},6825:function(j,h,d){var u,g=this&&this.__extends||(u=function(t,n){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var a in r)r.hasOwnProperty(a)&&(o[a]=r[a])},u(t,n)},function(t,n){function o(){this.constructor=t}u(t,n),t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)});Object.defineProperty(h,"__esModule",{value:!0}),h.DecisionShapeDescription=void 0;var v=d(5303),p=d(2259),s=d(6353),i=d(6794),e=function(t){function n(){return t.call(this,new s.Size(i.ShapeDefaultDimension,.75*i.ShapeDefaultDimension),!0)||this}return g(n,t),Object.defineProperty(n.prototype,"key",{get:function(){return p.ShapeTypes.Decision},enumerable:!1,configurable:!0}),n}(v.DiamondShapeDescription);h.DecisionShapeDescription=e},9229:function(j,h,d){var u,g=this&&this.__extends||(u=function(o,r){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var f in c)c.hasOwnProperty(f)&&(a[f]=c[f])},u(o,r)},function(o,r){function a(){this.constructor=o}u(o,r),o.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)});Object.defineProperty(h,"__esModule",{value:!0}),h.DelayShapeDescription=void 0;var v=d(1561),p=d(2259),s=d(7724),i=d(8675),e=d(6794),t=d(6353),n=function(o){function r(){var a=o.call(this,void 0,!0)||this;return a.defaultSize.width=a.defaultSize.height,a}return g(r,o),Object.defineProperty(r.prototype,"key",{get:function(){return p.ShapeTypes.Delay},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"keepRatioOnAutoSize",{get:function(){return!1},enumerable:!1,configurable:!0}),r.prototype.createShapePrimitives=function(a){var c=a.rectangle,f=c.x,m=c.y,y=c.right,l=c.bottom,P=c.center.x;return[new s.PathPrimitive([new s.PathPrimitiveMoveToCommand(f,m),new s.PathPrimitiveLineToCommand(P,m),new s.PathPrimitiveArcToCommand((y-f)/2,(l-m)/2,0,!1,!0,P,l),new s.PathPrimitiveLineToCommand(f,l),new s.PathPrimitiveClosePathCommand],a.style)]},r.prototype.getTextRectangle=function(a){var c=i.GeometryUtils.getMaxRectangleEnscribedInEllipse(a.size);return a.rectangle.clone().moveRectangle(e.ShapeTextPadding,e.ShapeTextPadding).setSize({width:c.width/2+a.size.width/2-e.ShapeTextPadding,height:c.height/2+a.size.height/2-e.ShapeTextPadding}).nonNegativeSize()},r.prototype.getSizeByText=function(a,c){var f=i.GeometryUtils.getEllipseByEnscribedRectangle(a);return new t.Size(f.width/2+a.width/2+e.ShapeTextPadding,f.height/2+a.height/2+e.ShapeTextPadding)},r.arcWidthRatio=.2,r}(v.RectangleShapeDescription);h.DelayShapeDescription=n},2650:function(j,h,d){var u,g=this&&this.__extends||(u=function(t,n){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var a in r)r.hasOwnProperty(a)&&(o[a]=r[a])},u(t,n)},function(t,n){function o(){this.constructor=t}u(t,n),t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)});Object.defineProperty(h,"__esModule",{value:!0}),h.DisplayShapeDescription=void 0;var v=d(1561),p=d(2259),s=d(7724),i=d(6794),e=function(t){function n(){return t.call(this,void 0,!0)||this}return g(n,t),Object.defineProperty(n.prototype,"key",{get:function(){return p.ShapeTypes.Display},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"keepRatioOnAutoSize",{get:function(){return!1},enumerable:!1,configurable:!0}),n.prototype.createShapePrimitives=function(o){var r=o.rectangle,a=r.x,c=r.y,f=r.right,m=r.bottom,y=r.width,l=r.center.y,P=y*n.arcWidthRatio;return[new s.PathPrimitive([new s.PathPrimitiveMoveToCommand(f-P/2,c),new s.PathPrimitiveLineToCommand(a+P/2,c),new s.PathPrimitiveLineToCommand(a,l),new s.PathPrimitiveLineToCommand(a+P/2,m),new s.PathPrimitiveLineToCommand(f-P/2,m),new s.PathPrimitiveArcToCommand(P/2,(m-c)/2,0,!1,!1,f-P/2,c)],o.style)]},n.prototype.getTextRectangle=function(o){var r=o.size.width*n.arcWidthRatio;return o.rectangle.clone().moveRectangle(r/2,i.ShapeTextPadding).resize(-r,2*-i.ShapeTextPadding).nonNegativeSize()},n.arcWidthRatio=.2,n}(v.RectangleShapeDescription);h.DisplayShapeDescription=e},3525:function(j,h,d){var u,g=this&&this.__extends||(u=function(t,n){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var a in r)r.hasOwnProperty(a)&&(o[a]=r[a])},u(t,n)},function(t,n){function o(){this.constructor=t}u(t,n),t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)});Object.defineProperty(h,"__esModule",{value:!0}),h.DocumentShapeDescription=void 0;var v=d(1561),p=d(2259),s=d(7724),i=d(3742),e=function(t){function n(){return t.call(this,void 0,!0)||this}return g(n,t),Object.defineProperty(n.prototype,"key",{get:function(){return p.ShapeTypes.Document},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"keepRatioOnAutoSize",{get:function(){return!1},enumerable:!1,configurable:!0}),n.prototype.createShapePrimitives=function(o){return this.createDocumentPrimitives(o.rectangle,o.style)},n.prototype.createDocumentPrimitives=function(o,r){var a=o.x,c=o.y,f=o.right,m=o.bottom,y=o.width,l=o.height,P=o.center.x,C=l*n.curveOffsetRatio;return[].concat([new s.PathPrimitive([new s.PathPrimitiveMoveToCommand(a,c),new s.PathPrimitiveLineToCommand(f,c),new s.PathPrimitiveLineToCommand(f,m),new s.PathPrimitiveQuadraticCurveToCommand(f-.25*y,m-2*C,P,m-C),new s.PathPrimitiveQuadraticCurveToCommand(a+.25*y,m+C,a,m-C),new s.PathPrimitiveClosePathCommand],r)])},n.prototype.processConnectionPoint=function(o,r){o.getConnectionPointSide(r)===i.ConnectionPointSide.South&&(r.y-=o.size.height*n.curveOffsetRatio)},n.prototype.getTextRectangle=function(o){var r=o.rectangle;return r.clone().resize(0,-r.height*n.curveOffsetRatio)},n.curveOffsetRatio=.1,n}(v.RectangleShapeDescription);h.DocumentShapeDescription=e},1314:function(j,h,d){var u,g=this&&this.__extends||(u=function(o,r){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var f in c)c.hasOwnProperty(f)&&(a[f]=c[f])},u(o,r)},function(o,r){function a(){this.constructor=o}u(o,r),o.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)});Object.defineProperty(h,"__esModule",{value:!0}),h.HardDiskShapeDescription=void 0;var v=d(1561),p=d(2259),s=d(7724),i=d(418),e=d(6794),t=d(6353),n=function(o){function r(){return o.call(this,void 0,!0)||this}return g(r,o),Object.defineProperty(r.prototype,"key",{get:function(){return p.ShapeTypes.HardDisk},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"keepRatioOnAutoSize",{get:function(){return!1},enumerable:!1,configurable:!0}),r.prototype.createShapePrimitives=function(a){var c=a.rectangle,f=c.x,m=c.y,y=c.right,l=c.bottom,P=c.width,C=c.center.y,I=P*r.arcWidthRatio;return[new s.PathPrimitive([new s.PathPrimitiveMoveToCommand(y-I/2,m),new s.PathPrimitiveLineToCommand(f+I/2,m),new s.PathPrimitiveArcToCommand(I/2,(l-m)/2,0,!1,!1,f+I/2,l),new s.PathPrimitiveLineToCommand(y-I/2,l)],a.style),new i.EllipsePrimitive(y-I/2,C,I/2,(l-m)/2,a.style)]},r.prototype.getTextRectangle=function(a){var c=a.rectangle,f=c.width*r.arcWidthRatio*1.5;return c.clone().resize(-f-2*e.ShapeTextPadding,-2*e.ShapeTextPadding).moveRectangle(e.ShapeTextPadding,e.ShapeTextPadding).nonNegativeSize()},r.prototype.getSizeByText=function(a,c){return new t.Size((a.width+2*e.ShapeTextPadding)/(1-1.5*r.arcWidthRatio),c.size.height+e.ShapeTextPadding)},r.arcWidthRatio=.2,r}(v.RectangleShapeDescription);h.HardDiskShapeDescription=n},2751:function(j,h,d){var u,g=this&&this.__extends||(u=function(o,r){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var f in c)c.hasOwnProperty(f)&&(a[f]=c[f])},u(o,r)},function(o,r){function a(){this.constructor=o}u(o,r),o.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)});Object.defineProperty(h,"__esModule",{value:!0}),h.InternalStorageShapeDescription=h.InternalStorageVerticalEdgeParameterName=h.InternalStorageHorizontalEdgeParameterName=void 0;var v=d(1561),p=d(2259),s=d(6629),i=d(1852),e=d(8900),t=d(7724);h.InternalStorageHorizontalEdgeParameterName="he",h.InternalStorageVerticalEdgeParameterName="ve";var n=function(o){function r(){return o.call(this,void 0,!0)||this}return g(r,o),Object.defineProperty(r.prototype,"key",{get:function(){return p.ShapeTypes.InternalStorage},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"keepRatioOnAutoSize",{get:function(){return!1},enumerable:!1,configurable:!0}),r.prototype.createShapePrimitives=function(a){var c=a.rectangle,f=c.x,m=c.y,y=c.right,l=c.bottom,P=f+a.parameters.get(h.InternalStorageHorizontalEdgeParameterName).value,C=m+a.parameters.get(h.InternalStorageVerticalEdgeParameterName).value;return o.prototype.createShapePrimitives.call(this,a).concat([new t.PathPrimitive([new t.PathPrimitiveMoveToCommand(P,m),new t.PathPrimitiveLineToCommand(P,l),new t.PathPrimitiveMoveToCommand(f,C),new t.PathPrimitiveLineToCommand(y,C)],a.style)])},r.prototype.createParameters=function(a){a.addRangeIfNotExists([new s.ShapeParameter(h.InternalStorageHorizontalEdgeParameterName,.1*this.defaultSize.width),new s.ShapeParameter(h.InternalStorageVerticalEdgeParameterName,.1*this.defaultSize.width)])},r.prototype.normalizeParameters=function(a,c){this.changeParameterValue(c,h.InternalStorageHorizontalEdgeParameterName,function(f){return Math.max(r.minEdge,Math.min(.3*a.size.width,f.value))}),this.changeParameterValue(c,h.InternalStorageVerticalEdgeParameterName,function(f){return Math.max(r.minEdge,Math.min(.3*a.size.height,f.value))})},r.prototype.modifyParameters=function(a,c,f,m){this.changeParameterValue(c,h.InternalStorageHorizontalEdgeParameterName,function(y){return y.value+f}),this.changeParameterValue(c,h.InternalStorageVerticalEdgeParameterName,function(y){return y.value+m}),this.normalizeParameters(a,c)},r.prototype.getParameterPoints=function(a){return[new i.ShapeParameterPoint("c",new e.Point(a.normalizeX(a.position.x+a.parameters.get(h.InternalStorageHorizontalEdgeParameterName).value),a.normalizeY(a.position.y+a.parameters.get(h.InternalStorageVerticalEdgeParameterName).value)))]},r.prototype.getTextRectangle=function(a){var c=a.rectangle,f=a.parameters.get(h.InternalStorageHorizontalEdgeParameterName).value;return c.clone().resize(-f,0).clone().moveRectangle(f,0)},r.minEdge=72,r}(v.RectangleShapeDescription);h.InternalStorageShapeDescription=n},9144:function(j,h,d){var u,g=this&&this.__extends||(u=function(n,o){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var c in a)a.hasOwnProperty(c)&&(r[c]=a[c])},u(n,o)},function(n,o){function r(){this.constructor=n}u(n,o),n.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)});Object.defineProperty(h,"__esModule",{value:!0}),h.ManualInputShapeDescription=void 0;var v=d(1561),p=d(2259),s=d(7724),i=d(3742),e=d(6794),t=function(n){function o(){return n.call(this,void 0,!0)||this}return g(o,n),Object.defineProperty(o.prototype,"key",{get:function(){return p.ShapeTypes.ManualInput},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"keepRatioOnAutoSize",{get:function(){return!1},enumerable:!1,configurable:!0}),o.prototype.createShapePrimitives=function(r){var a=r.rectangle,c=a.x,f=a.y,m=a.right,y=a.bottom,l=f+a.height*o.slopeHeightRatio;return[new s.PathPrimitive([new s.PathPrimitiveMoveToCommand(c,l),new s.PathPrimitiveLineToCommand(m,f),new s.PathPrimitiveLineToCommand(m,y),new s.PathPrimitiveLineToCommand(c,y),new s.PathPrimitiveClosePathCommand],r.style)]},o.prototype.processConnectionPoint=function(r,a){r.getConnectionPointSide(a)===i.ConnectionPointSide.North&&(a.y+=o.slopeHeightRatio/2*r.size.height)},o.prototype.getTextRectangle=function(r){var a=r.size.height*o.slopeHeightRatio;return r.rectangle.clone().moveRectangle(e.ShapeTextPadding,a).resize(2*-e.ShapeTextPadding,-a-e.ShapeTextPadding).nonNegativeSize()},o.slopeHeightRatio=.1,o}(v.RectangleShapeDescription);h.ManualInputShapeDescription=t},1643:function(j,h,d){var u,g=this&&this.__extends||(u=function(n,o){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var c in a)a.hasOwnProperty(c)&&(r[c]=a[c])},u(n,o)},function(n,o){function r(){this.constructor=n}u(n,o),n.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)});Object.defineProperty(h,"__esModule",{value:!0}),h.ManualOperationShapeDescription=void 0;var v=d(1561),p=d(2259),s=d(7724),i=d(3742),e=d(6794),t=function(n){function o(){return n.call(this,void 0,!0)||this}return g(o,n),Object.defineProperty(o.prototype,"key",{get:function(){return p.ShapeTypes.ManualOperation},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"keepRatioOnAutoSize",{get:function(){return!1},enumerable:!1,configurable:!0}),o.prototype.createShapePrimitives=function(r){var a=r.rectangle,c=r.rectangle,f=c.x,m=c.y,y=c.right,l=c.bottom,P=c.width,C=c.height,I=Math.min(Math.max(0,C/Math.tan(o.slopeAngle)),P),x=a.center.x,b=Math.min(f+I,x),S=Math.max(y-I,x);return[new s.PathPrimitive([new s.PathPrimitiveMoveToCommand(f,m),new s.PathPrimitiveLineToCommand(y,m),new s.PathPrimitiveLineToCommand(S,l),new s.PathPrimitiveLineToCommand(b,l),new s.PathPrimitiveClosePathCommand],r.style)]},o.prototype.processConnectionPoint=function(r,a){var c=r.size.height/Math.tan(o.slopeAngle),f=r.getConnectionPointSide(a);f===i.ConnectionPointSide.East?a.x-=c/2:f===i.ConnectionPointSide.West&&(a.x+=c/2)},o.prototype.getTextRectangle=function(r){var a=Math.min(Math.max(0,r.size.height/Math.tan(o.slopeAngle)),r.size.width);return r.rectangle.clone().moveRectangle(a,e.ShapeTextPadding).resize(2*-a,2*-e.ShapeTextPadding).nonNegativeSize()},o.slopeAngle=81*Math.PI/180,o}(v.RectangleShapeDescription);h.ManualOperationShapeDescription=t},3046:function(j,h,d){var u,g=this&&this.__extends||(u=function(o,r){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var f in c)c.hasOwnProperty(f)&&(a[f]=c[f])},u(o,r)},function(o,r){function a(){this.constructor=o}u(o,r),o.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)});Object.defineProperty(h,"__esModule",{value:!0}),h.MergeShapeDescription=void 0;var v=d(2259),p=d(8011),s=d(2117),i=d(7724),e=d(6794),t=d(6353),n=function(o){function r(){return o.call(this,!0)||this}return g(r,o),Object.defineProperty(r.prototype,"key",{get:function(){return v.ShapeTypes.Merge},enumerable:!1,configurable:!0}),r.prototype.createShapePrimitives=function(a){var c=a.rectangle,f=c.x,m=c.y,y=c.right,l=c.bottom;return[new i.PathPrimitive([new i.PathPrimitiveMoveToCommand(f,m),new i.PathPrimitiveLineToCommand(y,m),new i.PathPrimitiveLineToCommand(c.center.x,l),new i.PathPrimitiveClosePathCommand],a.style)]},r.prototype.calculateHeight=function(a){return .75*a},r.prototype.getTextRectangle=function(a){return p.Rectangle.fromGeometry(a.position.clone().offset(a.size.width/4,e.ShapeTextPadding),new t.Size(a.size.width/2,a.size.height/2-e.ShapeTextPadding))},r.prototype.getSizeByText=function(a,c){return new t.Size(2*a.width,2*(a.height+e.ShapeTextPadding))},r}(s.TriangleShapeDescription);h.MergeShapeDescription=n},2850:function(j,h,d){var u,g=this&&this.__extends||(u=function(r,a){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var m in f)f.hasOwnProperty(m)&&(c[m]=f[m])},u(r,a)},function(r,a){function c(){this.constructor=r}u(r,a),r.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)});Object.defineProperty(h,"__esModule",{value:!0}),h.MultipleDocumentsShapeDescription=void 0;var v=d(2259),p=d(7724),s=d(3525),i=d(4593),e=d(3500),t=d(6794),n=d(6353),o=function(r){function a(){return r!==null&&r.apply(this,arguments)||this}return g(a,r),Object.defineProperty(a.prototype,"key",{get:function(){return v.ShapeTypes.MultipleDocuments},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"keepRatioOnAutoSize",{get:function(){return!1},enumerable:!1,configurable:!0}),a.prototype.createShapePrimitives=function(c,f){var m=c.rectangle,y=c.rectangle,l=y.width,P=y.height,C=f?a.documentsOffsetRatioForToolbox:a.documentsOffsetRatio,I=Math.ceil(l*C),x=Math.ceil(P*C),b=(m=m.clone().inflate(-I,-x).clone().moveRectangle(-I,-x)).clone().moveRectangle(I,x),S=b.clone().moveRectangle(I,x),w=e.RenderUtils.generateSvgElementId("clipRect");return[].concat(this.createDocumentPrimitives(m,c.style,w+"1",b)).concat(this.createDocumentPrimitives(b,c.style,w+"2",S)).concat(this.createDocumentPrimitives(S,c.style))},a.prototype.createDocumentPrimitives=function(c,f,m,y){var l=c.x,P=c.y,C=c.right,I=c.bottom,x=c.width,b=c.height,S=c.center.x,w=b*s.DocumentShapeDescription.curveOffsetRatio,T=[];return T=T.concat([new p.PathPrimitive([new p.PathPrimitiveMoveToCommand(l,P),new p.PathPrimitiveLineToCommand(C,P),new p.PathPrimitiveLineToCommand(C,I),new p.PathPrimitiveQuadraticCurveToCommand(C-.25*x,I-2*w,S,I-w),new p.PathPrimitiveQuadraticCurveToCommand(l+.25*x,I+w,l,I-w),new p.PathPrimitiveClosePathCommand],f,void 0,y&&m)]),y&&m&&(T=T.concat([new i.ClipPathPrimitive(m,[new p.PathPrimitive([new p.PathPrimitiveMoveToCommand(l-f.strokeWidth,P-f.strokeWidth),new p.PathPrimitiveLineToCommand(C+f.strokeWidth,P-f.strokeWidth),new p.PathPrimitiveLineToCommand(C+f.strokeWidth,y.y),new p.PathPrimitiveLineToCommand(y.x,y.y),new p.PathPrimitiveLineToCommand(y.x,I+f.strokeWidth),new p.PathPrimitiveLineToCommand(l-f.strokeWidth,I+f.strokeWidth),new p.PathPrimitiveClosePathCommand])])])),T},a.prototype.getTextRectangle=function(c){var f=c.rectangle,m=f.width*a.documentsOffsetRatio,y=f.height*a.documentsOffsetRatio;return(f=f.clone().inflate(-m,-y).clone().moveRectangle(-m,-y)).clone().moveRectangle(2*m+t.ShapeTextPadding,2*y+t.ShapeTextPadding).clone().resize(-2*t.ShapeTextPadding,-f.height*s.DocumentShapeDescription.curveOffsetRatio-2*t.ShapeTextPadding)},a.prototype.getSizeByText=function(c,f){return new n.Size((c.width+2*t.ShapeTextPadding)/(1-2*a.documentsOffsetRatio),(c.height+2*t.ShapeTextPadding)/((1-s.DocumentShapeDescription.curveOffsetRatio)*(1-a.documentsOffsetRatio))).nonNegativeSize()},a.documentsOffsetRatio=.1,a.documentsOffsetRatioForToolbox=.16,a}(s.DocumentShapeDescription);h.MultipleDocumentsShapeDescription=o},2019:function(j,h,d){var u,g=this&&this.__extends||(u=function(n,o){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var c in a)a.hasOwnProperty(c)&&(r[c]=a[c])},u(n,o)},function(n,o){function r(){this.constructor=n}u(n,o),n.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)});Object.defineProperty(h,"__esModule",{value:!0}),h.OrShapeDescription=void 0;var v=d(2259),p=d(6353),s=d(6794),i=d(7768),e=d(7724),t=function(n){function o(){var r=n.call(this,!0)||this;return r.defaultSize=new p.Size(.5*s.ShapeDefaultDimension,.5*s.ShapeDefaultDimension),r}return g(o,n),Object.defineProperty(o.prototype,"key",{get:function(){return v.ShapeTypes.Or},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"keepRatioOnAutoSize",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"enableText",{get:function(){return!1},enumerable:!1,configurable:!0}),o.prototype.createShapePrimitives=function(r){var a=r.rectangle,c=a.x,f=a.y,m=a.right,y=a.bottom,l=a.center,P=l.x,C=l.y;return[].concat(n.prototype.createShapePrimitives.call(this,r)).concat([new e.PathPrimitive([new e.PathPrimitiveMoveToCommand(P,f),new e.PathPrimitiveLineToCommand(P,y),new e.PathPrimitiveMoveToCommand(c,C),new e.PathPrimitiveLineToCommand(m,C)],r.style)])},o}(i.EllipseShapeDescription);h.OrShapeDescription=t},8110:function(j,h,d){var u,g=this&&this.__extends||(u=function(o,r){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var f in c)c.hasOwnProperty(f)&&(a[f]=c[f])},u(o,r)},function(o,r){function a(){this.constructor=o}u(o,r),o.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)});Object.defineProperty(h,"__esModule",{value:!0}),h.PaperTapeShapeDescription=void 0;var v=d(1561),p=d(2259),s=d(7724),i=d(3742),e=d(6794),t=d(6353),n=function(o){function r(){return o.call(this,void 0,!0)||this}return g(r,o),Object.defineProperty(r.prototype,"key",{get:function(){return p.ShapeTypes.PaperTape},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"keepRatioOnAutoSize",{get:function(){return!1},enumerable:!1,configurable:!0}),r.prototype.createShapePrimitives=function(a){return this.createDocumentPrimitives(a.rectangle,a.style)},r.prototype.createDocumentPrimitives=function(a,c){var f=a.x,m=a.y,y=a.right,l=a.bottom,P=a.width,C=a.height,I=a.center.x,x=C*r.curveOffsetRatio;return[].concat([new s.PathPrimitive([new s.PathPrimitiveMoveToCommand(f,m),new s.PathPrimitiveQuadraticCurveToCommand(f+.25*P,m+2*x,I,m+x),new s.PathPrimitiveQuadraticCurveToCommand(y-.25*P,m-x,y,m+x),new s.PathPrimitiveLineToCommand(y,l),new s.PathPrimitiveQuadraticCurveToCommand(y-.25*P,l-2*x,I,l-x),new s.PathPrimitiveQuadraticCurveToCommand(f+.25*P,l+x,f,l-x),new s.PathPrimitiveClosePathCommand],c)])},r.prototype.processConnectionPoint=function(a,c){var f=a.getConnectionPointSide(c);f===i.ConnectionPointSide.North&&(c.y+=a.size.height*r.curveOffsetRatio),f===i.ConnectionPointSide.South&&(c.y-=a.size.height*r.curveOffsetRatio)},r.prototype.getTextRectangle=function(a){var c=a.rectangle;return c.clone().inflate(e.ShapeTextPadding,-c.height*r.curveOffsetRatio)},r.prototype.getSizeByText=function(a,c){return new t.Size(a.width+2*e.ShapeTextPadding,a.height/(1-2*r.curveOffsetRatio))},r.curveOffsetRatio=.1,r}(v.RectangleShapeDescription);h.PaperTapeShapeDescription=n},6508:function(j,h,d){var u,g=this&&this.__extends||(u=function(o,r){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var f in c)c.hasOwnProperty(f)&&(a[f]=c[f])},u(o,r)},function(o,r){function a(){this.constructor=o}u(o,r),o.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)});Object.defineProperty(h,"__esModule",{value:!0}),h.PredefinedProcessShapeDescription=h.PredefinedProcessEdgeParameterName=void 0;var v=d(1561),p=d(2259),s=d(6629),i=d(1852),e=d(8900),t=d(7724);h.PredefinedProcessEdgeParameterName="e";var n=function(o){function r(){return o.call(this,void 0,!0)||this}return g(r,o),Object.defineProperty(r.prototype,"key",{get:function(){return p.ShapeTypes.PredefinedProcess},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"keepRatioOnAutoSize",{get:function(){return!1},enumerable:!1,configurable:!0}),r.prototype.createShapePrimitives=function(a){var c=a.rectangle,f=c.x,m=c.y,y=c.right,l=c.bottom,P=f+a.parameters.get(h.PredefinedProcessEdgeParameterName).value,C=y-a.parameters.get(h.PredefinedProcessEdgeParameterName).value;return o.prototype.createShapePrimitives.call(this,a).concat([new t.PathPrimitive([new t.PathPrimitiveMoveToCommand(P,m),new t.PathPrimitiveLineToCommand(P,l),new t.PathPrimitiveMoveToCommand(C,m),new t.PathPrimitiveLineToCommand(C,l)],a.style)])},r.prototype.createParameters=function(a){a.addIfNotExists(new s.ShapeParameter(h.PredefinedProcessEdgeParameterName,.1*this.defaultSize.width))},r.prototype.normalizeParameters=function(a,c){this.changeParameterValue(c,h.PredefinedProcessEdgeParameterName,function(f){return Math.max(r.minEdge,Math.min(.3*a.size.width,f.value))})},r.prototype.modifyParameters=function(a,c,f,m){this.changeParameterValue(c,h.PredefinedProcessEdgeParameterName,function(y){return y.value+f}),this.normalizeParameters(a,c)},r.prototype.getParameterPoints=function(a){return[new i.ShapeParameterPoint("c",new e.Point(a.normalizeX(a.position.x+a.parameters.get(h.PredefinedProcessEdgeParameterName).value),a.position.y))]},r.prototype.getTextRectangle=function(a){var c=a.rectangle,f=a.parameters.get(h.PredefinedProcessEdgeParameterName).value;return c.clone().resize(-2*f,0).clone().moveRectangle(f,0)},r.minEdge=72,r}(v.RectangleShapeDescription);h.PredefinedProcessShapeDescription=n},4112:function(j,h,d){var u,g=this&&this.__extends||(u=function(e,t){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var r in o)o.hasOwnProperty(r)&&(n[r]=o[r])},u(e,t)},function(e,t){function n(){this.constructor=e}u(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(h,"__esModule",{value:!0}),h.PreparationShapeDescription=void 0;var v=d(2259),p=d(6353),s=d(6794),i=function(e){function t(){var n=e.call(this,!0)||this;return n.defaultSize=new p.Size(s.ShapeDefaultDimension,.75*s.ShapeDefaultDimension),n}return g(t,e),Object.defineProperty(t.prototype,"key",{get:function(){return v.ShapeTypes.Preparation},enumerable:!1,configurable:!0}),t}(d(2953).HexagonShapeDescription);h.PreparationShapeDescription=i},5331:function(j,h,d){var u,g=this&&this.__extends||(u=function(i,e){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var o in n)n.hasOwnProperty(o)&&(t[o]=n[o])},u(i,e)},function(i,e){function t(){this.constructor=i}u(i,e),i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)});Object.defineProperty(h,"__esModule",{value:!0}),h.ProcessShapeDescription=void 0;var v=d(1561),p=d(2259),s=function(i){function e(){return i.call(this,void 0,!0)||this}return g(e,i),Object.defineProperty(e.prototype,"key",{get:function(){return p.ShapeTypes.Process},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"keepRatioOnAutoSize",{get:function(){return!1},enumerable:!1,configurable:!0}),e}(v.RectangleShapeDescription);h.ProcessShapeDescription=s},4810:function(j,h,d){var u,g=this&&this.__extends||(u=function(n,o){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var c in a)a.hasOwnProperty(c)&&(r[c]=a[c])},u(n,o)},function(n,o){function r(){this.constructor=n}u(n,o),n.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)});Object.defineProperty(h,"__esModule",{value:!0}),h.StoredDataShapeDescription=void 0;var v=d(1561),p=d(2259),s=d(7724),i=d(6794),e=d(6353),t=function(n){function o(){return n.call(this,void 0,!0)||this}return g(o,n),Object.defineProperty(o.prototype,"key",{get:function(){return p.ShapeTypes.StoredData},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"keepRatioOnAutoSize",{get:function(){return!1},enumerable:!1,configurable:!0}),o.prototype.createShapePrimitives=function(r){var a=r.rectangle,c=a.x,f=a.y,m=a.right,y=a.bottom,l=a.width*o.arcWidthRatio;return[new s.PathPrimitive([new s.PathPrimitiveMoveToCommand(m,f),new s.PathPrimitiveLineToCommand(c+l/2,f),new s.PathPrimitiveArcToCommand(l/2,(y-f)/2,0,!1,!1,c+l/2,y),new s.PathPrimitiveLineToCommand(m,y),new s.PathPrimitiveArcToCommand(l/2,(y-f)/2,0,!1,!0,m,f)],r.style)]},o.prototype.getTextRectangle=function(r){var a=r.rectangle,c=a.width*o.arcWidthRatio/2;return a.clone().resize(-c-2*i.ShapeTextPadding,-2*i.ShapeTextPadding).moveRectangle(i.ShapeTextPadding,i.ShapeTextPadding).nonNegativeSize()},o.prototype.getSizeByText=function(r,a){return new e.Size((r.width+2*i.ShapeTextPadding)/(1-o.arcWidthRatio/2),r.height+2*i.ShapeTextPadding)},o.arcWidthRatio=.2,o}(v.RectangleShapeDescription);h.StoredDataShapeDescription=t},6182:function(j,h,d){var u,g=this&&this.__extends||(u=function(n,o){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var c in a)a.hasOwnProperty(c)&&(r[c]=a[c])},u(n,o)},function(n,o){function r(){this.constructor=n}u(n,o),n.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)});Object.defineProperty(h,"__esModule",{value:!0}),h.SummingJunctionShapeDescription=void 0;var v=d(2259),p=d(6353),s=d(6794),i=d(7768),e=d(7724),t=function(n){function o(){var r=n.call(this,!0)||this;return r.defaultSize=new p.Size(.5*s.ShapeDefaultDimension,.5*s.ShapeDefaultDimension),r}return g(o,n),Object.defineProperty(o.prototype,"key",{get:function(){return v.ShapeTypes.SummingJunction},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"keepRatioOnAutoSize",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"enableText",{get:function(){return!1},enumerable:!1,configurable:!0}),o.prototype.createShapePrimitives=function(r){var a=r.rectangle,c=a.width,f=a.height,m=a.center,y=m.x,l=m.y,P=c/2,C=f/2,I=Math.atan(C/P),x=1/Math.sqrt(1/Math.pow(P,2)+Math.pow(Math.tan(I),2)/Math.pow(C,2)),b=x*Math.tan(I);return[].concat(n.prototype.createShapePrimitives.call(this,r)).concat([new e.PathPrimitive([new e.PathPrimitiveMoveToCommand(y-x,l-b),new e.PathPrimitiveLineToCommand(y+x,l+b),new e.PathPrimitiveMoveToCommand(y-x,l+b),new e.PathPrimitiveLineToCommand(y+x,l-b)],r.style)])},o}(i.EllipseShapeDescription);h.SummingJunctionShapeDescription=t},6242:function(j,h,d){var u,g=this&&this.__extends||(u=function(r,a){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var m in f)f.hasOwnProperty(m)&&(c[m]=f[m])},u(r,a)},function(r,a){function c(){this.constructor=r}u(r,a),r.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)});Object.defineProperty(h,"__esModule",{value:!0}),h.TerminatorShapeDescription=void 0;var v=d(1561),p=d(2259),s=d(7724),i=d(6353),e=d(6794),t=d(8011),n=d(8675),o=function(r){function a(){return r.call(this,new i.Size(e.ShapeDefaultDimension,.5*e.ShapeDefaultDimension),!0)||this}return g(a,r),Object.defineProperty(a.prototype,"key",{get:function(){return p.ShapeTypes.Terminator},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"keepRatioOnAutoSize",{get:function(){return!1},enumerable:!1,configurable:!0}),a.prototype.createShapePrimitives=function(c){var f=c.rectangle,m=f.x,y=f.y,l=f.right,P=f.bottom,C=f.width,I=f.center.y,x=m+C*a.curveWidthRatio,b=m+C*(1-a.curveWidthRatio);return[new s.PathPrimitive([new s.PathPrimitiveMoveToCommand(x,y),new s.PathPrimitiveLineToCommand(b,y),new s.PathPrimitiveQuadraticCurveToCommand(l,y,l,I),new s.PathPrimitiveQuadraticCurveToCommand(l,P,b,P),new s.PathPrimitiveLineToCommand(x,P),new s.PathPrimitiveQuadraticCurveToCommand(m,P,m,I),new s.PathPrimitiveQuadraticCurveToCommand(m,y,x,y),new s.PathPrimitiveClosePathCommand],c.style)]},a.prototype.getTextRectangle=function(c){var f=n.GeometryUtils.getMaxRectangleEnscribedInEllipse(c.size);return t.Rectangle.fromGeometry(c.position.clone().offset((c.size.width-f.width)/2,(c.size.height-f.height)/2),f)},a.prototype.getSizeByText=function(c,f){return n.GeometryUtils.getEllipseByEnscribedRectangle(c)},a.curveWidthRatio=.3,a}(v.RectangleShapeDescription);h.TerminatorShapeDescription=o},4958:function(j,h,d){var u,g=this&&this.__extends||(u=function(o,r){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var f in c)c.hasOwnProperty(f)&&(a[f]=c[f])},u(o,r)},function(o,r){function a(){this.constructor=o}u(o,r),o.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)});Object.defineProperty(h,"__esModule",{value:!0}),h.ArrowDownShapeDescription=void 0;var v=d(7724),p=d(1852),s=d(8900),i=d(731),e=d(2259),t=d(3742),n=function(o){function r(){return o!==null&&o.apply(this,arguments)||this}return g(r,o),Object.defineProperty(r.prototype,"key",{get:function(){return e.ShapeTypes.ArrowDown},enumerable:!1,configurable:!0}),r.prototype.createShapePrimitives=function(a){var c=a.rectangle,f=c.x,m=c.y,y=c.right,l=c.bottom,P=c.width,C=c.height,I=c.center.x,x=(P-a.parameters.get(i.ArrowVerticalLineWidthParameterName).value)/2,b=C-a.parameters.get(i.ArrowVerticalTriangleHeightParameterName).value,S=a.normalizeX(f+x),w=a.normalizeY(m+b),T=a.normalizeX(y-x);return[new v.PathPrimitive([new v.PathPrimitiveMoveToCommand(S,m),new v.PathPrimitiveLineToCommand(T,m),new v.PathPrimitiveLineToCommand(T,w),new v.PathPrimitiveLineToCommand(y,w),new v.PathPrimitiveLineToCommand(I,l),new v.PathPrimitiveLineToCommand(f,w),new v.PathPrimitiveLineToCommand(S,w),new v.PathPrimitiveClosePathCommand],a.style)]},r.prototype.modifyParameters=function(a,c,f,m){this.changeParameterValue(c,i.ArrowVerticalTriangleHeightParameterName,function(y){return y.value-m}),this.changeParameterValue(c,i.ArrowVerticalLineWidthParameterName,function(y){return y.value-2*f}),this.normalizeParameters(a,c)},r.prototype.getParameterPoints=function(a){return[new p.ShapeParameterPoint("c",new s.Point(a.normalizeX(a.position.x+(a.size.width-a.parameters.get(i.ArrowVerticalLineWidthParameterName).value)/2),a.normalizeY(a.position.y+a.size.height-a.parameters.get(i.ArrowVerticalTriangleHeightParameterName).value)))]},r.prototype.processConnectionPoint=function(a,c){var f=a.parameters.get(i.ArrowVerticalTriangleHeightParameterName).value;if(c.y>a.position.y+a.size.height-f){var m=a.size.width/2/f,y=(c.y-(a.position.y+a.size.height-f))*m,l=a.getConnectionPointSide(c);l===t.ConnectionPointSide.East?c.x-=y:l===t.ConnectionPointSide.West&&(c.x+=y)}else o.prototype.processConnectionPoint.call(this,a,c)},r}(i.ArrowVerticalShapeDescription);h.ArrowDownShapeDescription=n},4493:function(j,h,d){var u,g=this&&this.__extends||(u=function(t,n){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var a in r)r.hasOwnProperty(a)&&(o[a]=r[a])},u(t,n)},function(t,n){function o(){this.constructor=t}u(t,n),t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)});Object.defineProperty(h,"__esModule",{value:!0}),h.ArrowHorizontalShapeDescription=h.ArrowVerticalLineHeightParameterName=h.ArrowVerticalTriangleWidthParameterName=void 0;var v=d(6794),p=d(6353),s=d(6629),i=d(3742);h.ArrowVerticalTriangleWidthParameterName="tw",h.ArrowVerticalLineHeightParameterName="lh";var e=function(t){function n(){return t.call(this,new p.Size(v.ShapeDefaultDimension,.375*v.ShapeDefaultDimension))||this}return g(n,t),Object.defineProperty(n.prototype,"keepRatioOnAutoSize",{get:function(){return!1},enumerable:!1,configurable:!0}),n.prototype.createParameters=function(o){o.addRangeIfNotExists([new s.ShapeParameter(h.ArrowVerticalTriangleWidthParameterName,Math.sqrt(Math.pow(this.defaultSize.height,2)-Math.pow(this.defaultSize.height/2,2))),new s.ShapeParameter(h.ArrowVerticalLineHeightParameterName,this.defaultSize.height/3)])},n.prototype.normalizeParameters=function(o,r){this.changeParameterValue(r,h.ArrowVerticalTriangleWidthParameterName,function(a){return Math.max(0,Math.min(o.size.width,a.value))}),this.changeParameterValue(r,h.ArrowVerticalLineHeightParameterName,function(a){return Math.max(0,Math.min(o.size.height,a.value))})},n.prototype.processConnectionPoint=function(o,r){var a=(o.size.height-o.parameters.get(h.ArrowVerticalLineHeightParameterName).value)/2,c=o.getConnectionPointSide(r);c===i.ConnectionPointSide.North?r.y+=a:c===i.ConnectionPointSide.South&&(r.y-=a)},n.prototype.getTextRectangle=function(o){return o.rectangle.clone().inflate(-v.ShapeTextPadding,-v.ShapeTextPadding)},n.prototype.getSizeByText=function(o,r){return o.clone().offset(2*v.ShapeTextPadding,2*v.ShapeTextPadding)},n}(v.ShapeDescription);h.ArrowHorizontalShapeDescription=e},8800:function(j,h,d){var u,g=this&&this.__extends||(u=function(n,o){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var c in a)a.hasOwnProperty(c)&&(r[c]=a[c])},u(n,o)},function(n,o){function r(){this.constructor=n}u(n,o),n.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)});Object.defineProperty(h,"__esModule",{value:!0}),h.ArrowLeftRightShapeDescription=void 0;var v=d(7724),p=d(4493),s=d(1852),i=d(8900),e=d(2259),t=function(n){function o(){return n!==null&&n.apply(this,arguments)||this}return g(o,n),Object.defineProperty(o.prototype,"key",{get:function(){return e.ShapeTypes.ArrowLeftRight},enumerable:!1,configurable:!0}),o.prototype.createShapePrimitives=function(r){var a=r.rectangle,c=a.x,f=a.y,m=a.right,y=a.bottom,l=a.height,P=a.center.y,C=r.parameters.get(p.ArrowVerticalTriangleWidthParameterName).value,I=(l-r.parameters.get(p.ArrowVerticalLineHeightParameterName).value)/2,x=r.normalizeX(c+C),b=r.normalizeY(f+I),S=r.normalizeX(m-C),w=r.normalizeY(y-I);return[new v.PathPrimitive([new v.PathPrimitiveMoveToCommand(c,P),new v.PathPrimitiveLineToCommand(x,f),new v.PathPrimitiveLineToCommand(x,b),new v.PathPrimitiveLineToCommand(S,b),new v.PathPrimitiveLineToCommand(S,f),new v.PathPrimitiveLineToCommand(m,P),new v.PathPrimitiveLineToCommand(S,y),new v.PathPrimitiveLineToCommand(S,w),new v.PathPrimitiveLineToCommand(x,w),new v.PathPrimitiveLineToCommand(x,y),new v.PathPrimitiveClosePathCommand],r.style)]},o.prototype.normalizeParameters=function(r,a){this.changeParameterValue(a,p.ArrowVerticalTriangleWidthParameterName,function(c){return Math.max(0,Math.min(r.size.width/2-2*r.strokeWidth,c.value))}),this.changeParameterValue(a,p.ArrowVerticalLineHeightParameterName,function(c){return Math.max(0,Math.min(r.size.height,c.value))})},o.prototype.modifyParameters=function(r,a,c,f){this.changeParameterValue(a,p.ArrowVerticalTriangleWidthParameterName,function(m){return m.value+c}),this.changeParameterValue(a,p.ArrowVerticalLineHeightParameterName,function(m){return m.value-2*f}),this.normalizeParameters(r,a)},o.prototype.getParameterPoints=function(r){return[new s.ShapeParameterPoint("c",new i.Point(r.normalizeX(r.position.x+r.parameters.get(p.ArrowVerticalTriangleWidthParameterName).value),r.normalizeY(r.position.y+(r.size.height-r.parameters.get(p.ArrowVerticalLineHeightParameterName).value)/2)))]},o}(p.ArrowHorizontalShapeDescription);h.ArrowLeftRightShapeDescription=t},6023:function(j,h,d){var u,g=this&&this.__extends||(u=function(o,r){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var f in c)c.hasOwnProperty(f)&&(a[f]=c[f])},u(o,r)},function(o,r){function a(){this.constructor=o}u(o,r),o.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)});Object.defineProperty(h,"__esModule",{value:!0}),h.ArrowLeftShapeDescription=void 0;var v=d(7724),p=d(4493),s=d(1852),i=d(8900),e=d(2259),t=d(3742),n=function(o){function r(){return o!==null&&o.apply(this,arguments)||this}return g(r,o),Object.defineProperty(r.prototype,"key",{get:function(){return e.ShapeTypes.ArrowLeft},enumerable:!1,configurable:!0}),r.prototype.createShapePrimitives=function(a){var c=a.rectangle,f=c.x,m=c.y,y=c.right,l=c.bottom,P=c.height,C=c.center.y,I=a.parameters.get(p.ArrowVerticalTriangleWidthParameterName).value,x=(P-a.parameters.get(p.ArrowVerticalLineHeightParameterName).value)/2,b=a.normalizeX(f+I),S=a.normalizeY(m+x),w=a.normalizeY(l-x);return[new v.PathPrimitive([new v.PathPrimitiveMoveToCommand(f,C),new v.PathPrimitiveLineToCommand(b,m),new v.PathPrimitiveLineToCommand(b,S),new v.PathPrimitiveLineToCommand(y,S),new v.PathPrimitiveLineToCommand(y,w),new v.PathPrimitiveLineToCommand(b,w),new v.PathPrimitiveLineToCommand(b,l),new v.PathPrimitiveClosePathCommand],a.style)]},r.prototype.modifyParameters=function(a,c,f,m){this.changeParameterValue(c,p.ArrowVerticalTriangleWidthParameterName,function(y){return y.value+f}),this.changeParameterValue(c,p.ArrowVerticalLineHeightParameterName,function(y){return y.value-2*m}),this.normalizeParameters(a,c)},r.prototype.getParameterPoints=function(a){return[new s.ShapeParameterPoint("c",new i.Point(a.normalizeX(a.position.x+a.parameters.get(p.ArrowVerticalTriangleWidthParameterName).value),a.normalizeY(a.position.y+(a.size.height-a.parameters.get(p.ArrowVerticalLineHeightParameterName).value)/2)))]},r.prototype.processConnectionPoint=function(a,c){var f=a.parameters.get(p.ArrowVerticalTriangleWidthParameterName).value;if(c.x<a.position.x+f){var m=a.size.height/2/f,y=(a.position.x+f-c.x)*m,l=a.getConnectionPointSide(c);l===t.ConnectionPointSide.North?c.y+=y:l===t.ConnectionPointSide.South&&(c.y-=y)}else o.prototype.processConnectionPoint.call(this,a,c)},r}(p.ArrowHorizontalShapeDescription);h.ArrowLeftShapeDescription=n},6599:function(j,h,d){var u,g=this&&this.__extends||(u=function(o,r){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var f in c)c.hasOwnProperty(f)&&(a[f]=c[f])},u(o,r)},function(o,r){function a(){this.constructor=o}u(o,r),o.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)});Object.defineProperty(h,"__esModule",{value:!0}),h.ArrowRightShapeDescription=void 0;var v=d(7724),p=d(4493),s=d(1852),i=d(8900),e=d(2259),t=d(3742),n=function(o){function r(){return o!==null&&o.apply(this,arguments)||this}return g(r,o),Object.defineProperty(r.prototype,"key",{get:function(){return e.ShapeTypes.ArrowRight},enumerable:!1,configurable:!0}),r.prototype.createShapePrimitives=function(a){var c=a.rectangle,f=c.x,m=c.y,y=c.right,l=c.bottom,P=c.width,C=c.height,I=c.center.y,x=P-a.parameters.get(p.ArrowVerticalTriangleWidthParameterName).value,b=(C-a.parameters.get(p.ArrowVerticalLineHeightParameterName).value)/2,S=a.normalizeX(f+x),w=a.normalizeY(m+b),T=a.normalizeY(l-b);return[new v.PathPrimitive([new v.PathPrimitiveMoveToCommand(f,w),new v.PathPrimitiveLineToCommand(S,w),new v.PathPrimitiveLineToCommand(S,m),new v.PathPrimitiveLineToCommand(y,I),new v.PathPrimitiveLineToCommand(S,l),new v.PathPrimitiveLineToCommand(S,T),new v.PathPrimitiveLineToCommand(f,T),new v.PathPrimitiveClosePathCommand],a.style)]},r.prototype.modifyParameters=function(a,c,f,m){this.changeParameterValue(c,p.ArrowVerticalTriangleWidthParameterName,function(y){return y.value-f}),this.changeParameterValue(c,p.ArrowVerticalLineHeightParameterName,function(y){return y.value-2*m}),this.normalizeParameters(a,c)},r.prototype.getParameterPoints=function(a){return[new s.ShapeParameterPoint("c",new i.Point(a.normalizeX(a.position.x+a.size.width-a.parameters.get(p.ArrowVerticalTriangleWidthParameterName).value),a.normalizeY(a.position.y+(a.size.height-a.parameters.get(p.ArrowVerticalLineHeightParameterName).value)/2)))]},r.prototype.processConnectionPoint=function(a,c){var f=a.parameters.get(p.ArrowVerticalTriangleWidthParameterName).value;if(c.x>a.position.x+a.size.width-f){var m=a.size.height/2/f,y=(c.x-(a.position.x+a.size.width-f))*m,l=a.getConnectionPointSide(c);l===t.ConnectionPointSide.North?c.y+=y:l===t.ConnectionPointSide.South&&(c.y-=y)}else o.prototype.processConnectionPoint.call(this,a,c)},r}(p.ArrowHorizontalShapeDescription);h.ArrowRightShapeDescription=n},9089:function(j,h,d){var u,g=this&&this.__extends||(u=function(n,o){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var c in a)a.hasOwnProperty(c)&&(r[c]=a[c])},u(n,o)},function(n,o){function r(){this.constructor=n}u(n,o),n.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)});Object.defineProperty(h,"__esModule",{value:!0}),h.ArrowUpDownShapeDescription=void 0;var v=d(7724),p=d(1852),s=d(8900),i=d(731),e=d(2259),t=function(n){function o(){return n!==null&&n.apply(this,arguments)||this}return g(o,n),Object.defineProperty(o.prototype,"key",{get:function(){return e.ShapeTypes.ArrowUpDown},enumerable:!1,configurable:!0}),o.prototype.createShapePrimitives=function(r){var a=r.rectangle,c=a.x,f=a.y,m=a.right,y=a.bottom,l=a.width,P=a.center.x,C=(l-r.parameters.get(i.ArrowVerticalLineWidthParameterName).value)/2,I=r.parameters.get(i.ArrowVerticalTriangleHeightParameterName).value,x=r.normalizeX(c+C),b=r.normalizeY(f+I),S=r.normalizeX(m-C),w=r.normalizeY(y-I);return[new v.PathPrimitive([new v.PathPrimitiveMoveToCommand(P,f),new v.PathPrimitiveLineToCommand(m,b),new v.PathPrimitiveLineToCommand(S,b),new v.PathPrimitiveLineToCommand(S,w),new v.PathPrimitiveLineToCommand(m,w),new v.PathPrimitiveLineToCommand(P,y),new v.PathPrimitiveLineToCommand(c,w),new v.PathPrimitiveLineToCommand(x,w),new v.PathPrimitiveLineToCommand(x,b),new v.PathPrimitiveLineToCommand(c,b),new v.PathPrimitiveClosePathCommand],r.style)]},o.prototype.normalizeParameters=function(r,a){this.changeParameterValue(a,i.ArrowVerticalTriangleHeightParameterName,function(c){return Math.max(0,Math.min(r.size.height/2-2*r.strokeWidth,c.value))}),this.changeParameterValue(a,i.ArrowVerticalLineWidthParameterName,function(c){return Math.max(0,Math.min(r.size.width,c.value))})},o.prototype.modifyParameters=function(r,a,c,f){this.changeParameterValue(a,i.ArrowVerticalTriangleHeightParameterName,function(m){return m.value+f}),this.changeParameterValue(a,i.ArrowVerticalLineWidthParameterName,function(m){return m.value-2*c}),this.normalizeParameters(r,a)},o.prototype.getParameterPoints=function(r){return[new p.ShapeParameterPoint("c",new s.Point(r.normalizeX(r.position.x+(r.size.width-r.parameters.get(i.ArrowVerticalLineWidthParameterName).value)/2),r.normalizeY(r.position.y+r.parameters.get(i.ArrowVerticalTriangleHeightParameterName).value)))]},o}(i.ArrowVerticalShapeDescription);h.ArrowUpDownShapeDescription=t},8327:function(j,h,d){var u,g=this&&this.__extends||(u=function(o,r){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var f in c)c.hasOwnProperty(f)&&(a[f]=c[f])},u(o,r)},function(o,r){function a(){this.constructor=o}u(o,r),o.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)});Object.defineProperty(h,"__esModule",{value:!0}),h.ArrowUpShapeDescription=void 0;var v=d(7724),p=d(1852),s=d(8900),i=d(731),e=d(2259),t=d(3742),n=function(o){function r(){return o!==null&&o.apply(this,arguments)||this}return g(r,o),Object.defineProperty(r.prototype,"key",{get:function(){return e.ShapeTypes.ArrowUp},enumerable:!1,configurable:!0}),r.prototype.createShapePrimitives=function(a){var c=a.rectangle,f=c.x,m=c.y,y=c.right,l=c.bottom,P=c.width,C=c.center.x,I=(P-a.parameters.get(i.ArrowVerticalLineWidthParameterName).value)/2,x=a.parameters.get(i.ArrowVerticalTriangleHeightParameterName).value,b=a.normalizeX(f+I),S=a.normalizeY(m+x),w=a.normalizeX(y-I);return[new v.PathPrimitive([new v.PathPrimitiveMoveToCommand(C,m),new v.PathPrimitiveLineToCommand(y,S),new v.PathPrimitiveLineToCommand(w,S),new v.PathPrimitiveLineToCommand(w,l),new v.PathPrimitiveLineToCommand(b,l),new v.PathPrimitiveLineToCommand(b,S),new v.PathPrimitiveLineToCommand(f,S),new v.PathPrimitiveClosePathCommand],a.style)]},r.prototype.modifyParameters=function(a,c,f,m){this.changeParameterValue(c,i.ArrowVerticalTriangleHeightParameterName,function(y){return y.value+m}),this.changeParameterValue(c,i.ArrowVerticalLineWidthParameterName,function(y){return y.value-2*f}),this.normalizeParameters(a,c)},r.prototype.getParameterPoints=function(a){return[new p.ShapeParameterPoint("c",new s.Point(a.normalizeX(a.position.x+(a.size.width-a.parameters.get(i.ArrowVerticalLineWidthParameterName).value)/2),a.normalizeY(a.position.y+a.parameters.get(i.ArrowVerticalTriangleHeightParameterName).value)))]},r.prototype.processConnectionPoint=function(a,c){var f=a.parameters.get(i.ArrowVerticalTriangleHeightParameterName).value;if(c.y<a.position.y+f){var m=a.size.width/2/f,y=(a.position.y+f-c.y)*m,l=a.getConnectionPointSide(c);l===t.ConnectionPointSide.East?c.x-=y:l===t.ConnectionPointSide.West&&(c.x+=y)}else o.prototype.processConnectionPoint.call(this,a,c)},r}(i.ArrowVerticalShapeDescription);h.ArrowUpShapeDescription=n},731:function(j,h,d){var u,g=this&&this.__extends||(u=function(t,n){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var a in r)r.hasOwnProperty(a)&&(o[a]=r[a])},u(t,n)},function(t,n){function o(){this.constructor=t}u(t,n),t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)});Object.defineProperty(h,"__esModule",{value:!0}),h.ArrowVerticalShapeDescription=h.ArrowVerticalLineWidthParameterName=h.ArrowVerticalTriangleHeightParameterName=void 0;var v=d(6794),p=d(6353),s=d(6629),i=d(3742);h.ArrowVerticalTriangleHeightParameterName="th",h.ArrowVerticalLineWidthParameterName="lw";var e=function(t){function n(){return t.call(this,new p.Size(.375*v.ShapeDefaultDimension,v.ShapeDefaultDimension))||this}return g(n,t),Object.defineProperty(n.prototype,"keepRatioOnAutoSize",{get:function(){return!1},enumerable:!1,configurable:!0}),n.prototype.createParameters=function(o){o.addRangeIfNotExists([new s.ShapeParameter(h.ArrowVerticalTriangleHeightParameterName,Math.sqrt(Math.pow(this.defaultSize.width,2)-Math.pow(this.defaultSize.width/2,2))),new s.ShapeParameter(h.ArrowVerticalLineWidthParameterName,this.defaultSize.width/3)])},n.prototype.normalizeParameters=function(o,r){this.changeParameterValue(r,h.ArrowVerticalTriangleHeightParameterName,function(a){return Math.max(0,Math.min(o.size.height,a.value))}),this.changeParameterValue(r,h.ArrowVerticalLineWidthParameterName,function(a){return Math.max(0,Math.min(o.size.width,a.value))})},n.prototype.processConnectionPoint=function(o,r){var a=(o.size.width-o.parameters.get(h.ArrowVerticalLineWidthParameterName).value)/2,c=o.getConnectionPointSide(r);c===i.ConnectionPointSide.East?r.x-=a:c===i.ConnectionPointSide.West&&(r.x+=a)},n.prototype.getTextRectangle=function(o){return o.rectangle.clone().inflate(-v.ShapeTextPadding,-v.ShapeTextPadding)},n.prototype.getSizeByText=function(o,r){return o.clone().offset(2*v.ShapeTextPadding,2*v.ShapeTextPadding)},n}(v.ShapeDescription);h.ArrowVerticalShapeDescription=e},2281:function(j,h,d){var u,g=this&&this.__extends||(u=function(o,r){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var f in c)c.hasOwnProperty(f)&&(a[f]=c[f])},u(o,r)},function(o,r){function a(){this.constructor=o}u(o,r),o.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)});Object.defineProperty(h,"__esModule",{value:!0}),h.CrossShapeDescription=h.CrossVerticalWidthParameterName=h.CrossHorizontalWidthParameterName=void 0;var v=d(6794),p=d(8900),s=d(6629),i=d(1852),e=d(7724),t=d(2259);h.CrossHorizontalWidthParameterName="chw",h.CrossVerticalWidthParameterName="cvw";var n=function(o){function r(){return o!==null&&o.apply(this,arguments)||this}return g(r,o),Object.defineProperty(r.prototype,"key",{get:function(){return t.ShapeTypes.Cross},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"keepRatioOnAutoSize",{get:function(){return!0},enumerable:!1,configurable:!0}),r.prototype.createShapePrimitives=function(a){var c=a.rectangle,f=c.x,m=c.y,y=c.right,l=c.bottom,P=c.width,C=c.height,I=(P-a.parameters.get(h.CrossHorizontalWidthParameterName).value)/2,x=(C-a.parameters.get(h.CrossVerticalWidthParameterName).value)/2,b=a.normalizeX(f+I),S=a.normalizeY(m+x),w=a.normalizeX(y-I),T=a.normalizeY(l-x);return[new e.PathPrimitive([new e.PathPrimitiveMoveToCommand(f,S),new e.PathPrimitiveLineToCommand(b,S),new e.PathPrimitiveLineToCommand(b,m),new e.PathPrimitiveLineToCommand(w,m),new e.PathPrimitiveLineToCommand(w,S),new e.PathPrimitiveLineToCommand(y,S),new e.PathPrimitiveLineToCommand(y,T),new e.PathPrimitiveLineToCommand(w,T),new e.PathPrimitiveLineToCommand(w,l),new e.PathPrimitiveLineToCommand(b,l),new e.PathPrimitiveLineToCommand(b,T),new e.PathPrimitiveLineToCommand(f,T),new e.PathPrimitiveClosePathCommand],a.style)]},r.prototype.createParameters=function(a){a.addRangeIfNotExists([new s.ShapeParameter(h.CrossHorizontalWidthParameterName,.2*this.defaultSize.width),new s.ShapeParameter(h.CrossVerticalWidthParameterName,.2*this.defaultSize.height)])},r.prototype.normalizeParameters=function(a,c){this.changeParameterValue(c,h.CrossHorizontalWidthParameterName,function(f){return Math.max(0,Math.min(a.size.width,f.value))}),this.changeParameterValue(c,h.CrossVerticalWidthParameterName,function(f){return Math.max(0,Math.min(a.size.height,f.value))})},r.prototype.modifyParameters=function(a,c,f,m){this.changeParameterValue(c,h.CrossHorizontalWidthParameterName,function(y){return y.value-2*f}),this.changeParameterValue(c,h.CrossVerticalWidthParameterName,function(y){return y.value-2*m}),this.normalizeParameters(a,c)},r.prototype.getParameterPoints=function(a){return[new i.ShapeParameterPoint("c",new p.Point(a.normalizeX(a.position.x+(a.size.width-a.parameters.get(h.CrossHorizontalWidthParameterName).value)/2),a.normalizeY(a.position.y+(a.size.height-a.parameters.get(h.CrossVerticalWidthParameterName).value)/2)))]},r.prototype.getTextRectangle=function(a){return a.rectangle.clone().inflate(-v.ShapeTextPadding,-v.ShapeTextPadding)},r.prototype.getSizeByText=function(a,c){return a.clone().offset(2*v.ShapeTextPadding,2*v.ShapeTextPadding)},r}(v.ShapeDescription);h.CrossShapeDescription=n},5303:function(j,h,d){var u,g=this&&this.__extends||(u=function(e,t){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var r in o)o.hasOwnProperty(r)&&(n[r]=o[r])},u(e,t)},function(e,t){function n(){this.constructor=e}u(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(h,"__esModule",{value:!0}),h.DiamondShapeDescription=void 0;var v=d(6794),p=d(7724),s=d(2259),i=function(e){function t(n,o){return n===void 0&&(n=v.ShapeDefaultSize.clone()),e.call(this,n,o)||this}return g(t,e),Object.defineProperty(t.prototype,"key",{get:function(){return s.ShapeTypes.Diamond},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"keepRatioOnAutoSize",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.createShapePrimitives=function(n){var o=n.rectangle,r=o.x,a=o.y,c=o.right,f=o.bottom,m=o.center,y=m.x,l=m.y;return[new p.PathPrimitive([new p.PathPrimitiveMoveToCommand(y,a),new p.PathPrimitiveLineToCommand(c,l),new p.PathPrimitiveLineToCommand(y,f),new p.PathPrimitiveLineToCommand(r,l),new p.PathPrimitiveClosePathCommand],n.style)]},t.prototype.getTextRectangle=function(n){return n.rectangle.clone().inflate(-n.size.width/4,-n.size.height/4)},t.prototype.getSizeByText=function(n,o){return n.clone().multiply(2,2)},t}(v.ShapeDescription);h.DiamondShapeDescription=i},7768:function(j,h,d){var u,g=this&&this.__extends||(u=function(o,r){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var f in c)c.hasOwnProperty(f)&&(a[f]=c[f])},u(o,r)},function(o,r){function a(){this.constructor=o}u(o,r),o.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)});Object.defineProperty(h,"__esModule",{value:!0}),h.EllipseShapeDescription=void 0;var v=d(6794),p=d(6353),s=d(418),i=d(2259),e=d(8675),t=d(8011),n=function(o){function r(a){return o.call(this,new p.Size(v.ShapeDefaultDimension,.75*v.ShapeDefaultDimension),a)||this}return g(r,o),Object.defineProperty(r.prototype,"key",{get:function(){return i.ShapeTypes.Ellipse},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"keepRatioOnAutoSize",{get:function(){return!1},enumerable:!1,configurable:!0}),r.prototype.getTextRectangle=function(a){var c=e.GeometryUtils.getMaxRectangleEnscribedInEllipse(a.size);return t.Rectangle.fromGeometry(a.position.clone().offset((a.size.width-c.width)/2,(a.size.height-c.height)/2),c)},r.prototype.getSizeByText=function(a,c){return e.GeometryUtils.getEllipseByEnscribedRectangle(a)},r.prototype.createShapePrimitives=function(a){var c=a.rectangle,f=c.width,m=c.height,y=c.center,l=y.x,P=y.y;return[new s.EllipsePrimitive(l,P,f/2,m/2,a.style)]},r}(v.ShapeDescription);h.EllipseShapeDescription=n},8628:function(j,h,d){var u,g=this&&this.__extends||(u=function(n,o){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var c in a)a.hasOwnProperty(c)&&(r[c]=a[c])},u(n,o)},function(n,o){function r(){this.constructor=n}u(n,o),n.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)});Object.defineProperty(h,"__esModule",{value:!0}),h.HeartShapeDescription=void 0;var v=d(6794),p=d(7724),s=d(2259),i=d(7228),e=d(3742),t=function(n){function o(){return n!==null&&n.apply(this,arguments)||this}return g(o,n),Object.defineProperty(o.prototype,"key",{get:function(){return s.ShapeTypes.Heart},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"keepRatioOnAutoSize",{get:function(){return!0},enumerable:!1,configurable:!0}),o.prototype.createConnectionPoints=function(){return[new i.ConnectionPoint(.5,.15,e.ConnectionPointSide.North),new i.ConnectionPoint(1,.25,e.ConnectionPointSide.East),new i.ConnectionPoint(.5,1,e.ConnectionPointSide.South),new i.ConnectionPoint(0,.25,e.ConnectionPointSide.West)]},o.prototype.createShapePrimitives=function(r){var a=r.rectangle,c=a.x,f=a.y,m=a.right,y=a.bottom,l=a.width,P=a.height;return[new p.PathPrimitive([new p.PathPrimitiveMoveToCommand(m-.25*l,f),new p.PathPrimitiveCubicCurveToCommand(m-.15*l,f,m,f+.1*P,m,f+.25*P),new p.PathPrimitiveCubicCurveToCommand(m,f+.3*P,m-.02*l,f+.35*P,m-.05*l,f+.4*P),new p.PathPrimitiveLineToCommand(a.center.x,y),new p.PathPrimitiveLineToCommand(c+.05*l,f+.4*P),new p.PathPrimitiveCubicCurveToCommand(c+.02*l,f+.35*P,c,f+.3*P,c,f+.25*P),new p.PathPrimitiveCubicCurveToCommand(c,f+.1*P,c+.15*l,f,c+.25*l,f),new p.PathPrimitiveCubicCurveToCommand(c+.3*l,f,c+.45*l,f+.03*P,c+.5*l,f+.15*P),new p.PathPrimitiveCubicCurveToCommand(m-.45*l,f+.03*P,m-.3*l,f,m-.25*l,f),new p.PathPrimitiveClosePathCommand],r.style)]},o.prototype.getTextRectangle=function(r){return r.rectangle.clone().inflate(-v.ShapeTextPadding,-v.ShapeTextPadding)},o.prototype.getSizeByText=function(r,a){return a.size.clone().offset(2*v.ShapeTextPadding,2*v.ShapeTextPadding)},o}(v.ShapeDescription);h.HeartShapeDescription=t},2953:function(j,h,d){var u,g=this&&this.__extends||(u=function(n,o){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var c in a)a.hasOwnProperty(c)&&(r[c]=a[c])},u(n,o)},function(n,o){function r(){this.constructor=n}u(n,o),n.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)});Object.defineProperty(h,"__esModule",{value:!0}),h.HexagonShapeDescription=void 0;var v=d(7724),p=d(2259),s=d(7314),i=d(8675),e=d(8011),t=function(n){function o(){return n!==null&&n.apply(this,arguments)||this}return g(o,n),Object.defineProperty(o.prototype,"key",{get:function(){return p.ShapeTypes.Hexagon},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"angleCount",{get:function(){return 6},enumerable:!1,configurable:!0}),o.prototype.createShapePrimitives=function(r){var a=r.rectangle,c=a.x,f=a.y,m=a.right,y=a.bottom,l=a.width,P=a.center.y,C=Math.PI-this.angle,I=l/(1+2*Math.cos(C)),x=c+(l-I)/2,b=x+I;return[new v.PathPrimitive([new v.PathPrimitiveMoveToCommand(x,f),new v.PathPrimitiveLineToCommand(b,f),new v.PathPrimitiveLineToCommand(m,P),new v.PathPrimitiveLineToCommand(b,y),new v.PathPrimitiveLineToCommand(x,y),new v.PathPrimitiveLineToCommand(c,P),new v.PathPrimitiveClosePathCommand],r.style)]},o.prototype.calculateHeight=function(r){var a=Math.PI-this.angle;return 2*(r/(1+2*Math.cos(a)))*Math.sin(a)},o.prototype.getTextRectangle=function(r){var a=i.GeometryUtils.getMaxRectangleEnscribedInEllipse(r.size);return e.Rectangle.fromGeometry(r.position.clone().offset((r.size.width-a.width)/2,(r.size.height-a.height)/2),a)},o.prototype.getSizeByText=function(r,a){return i.GeometryUtils.getEllipseByEnscribedRectangle(r)},o}(s.PolygonShapeDescription);h.HexagonShapeDescription=t},1412:function(j,h,d){var u,g=this&&this.__extends||(u=function(n,o){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var c in a)a.hasOwnProperty(c)&&(r[c]=a[c])},u(n,o)},function(n,o){function r(){this.constructor=n}u(n,o),n.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)});Object.defineProperty(h,"__esModule",{value:!0}),h.OctagonShapeDescription=void 0;var v=d(7724),p=d(2259),s=d(7314),i=d(8675),e=d(8011),t=function(n){function o(){return n!==null&&n.apply(this,arguments)||this}return g(o,n),Object.defineProperty(o.prototype,"key",{get:function(){return p.ShapeTypes.Octagon},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"angleCount",{get:function(){return 8},enumerable:!1,configurable:!0}),o.prototype.createShapePrimitives=function(r){var a=r.rectangle,c=a.x,f=a.y,m=a.right,y=a.bottom,l=a.width,P=a.height,C=Math.PI-this.angle,I=l/(1+2*Math.cos(C)),x=P/(1+2*Math.cos(C)),b=c+(l-I)/2,S=b+I,w=f+(P-x)/2,T=w+x;return[new v.PathPrimitive([new v.PathPrimitiveMoveToCommand(b,f),new v.PathPrimitiveLineToCommand(S,f),new v.PathPrimitiveLineToCommand(m,w),new v.PathPrimitiveLineToCommand(m,T),new v.PathPrimitiveLineToCommand(S,y),new v.PathPrimitiveLineToCommand(b,y),new v.PathPrimitiveLineToCommand(c,T),new v.PathPrimitiveLineToCommand(c,w),new v.PathPrimitiveClosePathCommand],r.style)]},o.prototype.calculateHeight=function(r){return r},o.prototype.getTextRectangle=function(r){var a=i.GeometryUtils.getMaxRectangleEnscribedInEllipse(r.size);return e.Rectangle.fromGeometry(r.position.clone().offset((r.size.width-a.width)/2,(r.size.height-a.height)/2),a)},o.prototype.getSizeByText=function(r,a){return i.GeometryUtils.getEllipseByEnscribedRectangle(r)},o}(s.PolygonShapeDescription);h.OctagonShapeDescription=t},8761:function(j,h,d){var u,g=this&&this.__extends||(u=function(o,r){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var f in c)c.hasOwnProperty(f)&&(a[f]=c[f])},u(o,r)},function(o,r){function a(){this.constructor=o}u(o,r),o.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)});Object.defineProperty(h,"__esModule",{value:!0}),h.PentagonShapeDescription=void 0;var v=d(7724),p=d(2259),s=d(7314),i=d(3742),e=d(8675),t=d(8011),n=function(o){function r(a){var c=o.call(this,a)||this;return c.defaultRatio=c.defaultSize.height/c.defaultSize.width,c}return g(r,o),Object.defineProperty(r.prototype,"key",{get:function(){return p.ShapeTypes.Pentagon},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"angleCount",{get:function(){return 5},enumerable:!1,configurable:!0}),r.prototype.createShapePrimitives=function(a){var c=a.rectangle,f=c.x,m=c.y,y=c.right,l=c.bottom,P=c.width,C=c.height,I=c.center.x,x=C/P/this.defaultRatio,b=Math.PI-this.angle,S=P/2*Math.tan(b/2)*x,w=m+S,T=(C-S)/Math.tan(b)/x,_=f+T,M=y-T;return[new v.PathPrimitive([new v.PathPrimitiveMoveToCommand(I,m),new v.PathPrimitiveLineToCommand(y,w),new v.PathPrimitiveLineToCommand(M,l),new v.PathPrimitiveLineToCommand(_,l),new v.PathPrimitiveLineToCommand(f,w),new v.PathPrimitiveClosePathCommand],a.style)]},r.prototype.processConnectionPoint=function(a,c){var f=a.getConnectionPointSide(c);if(f===i.ConnectionPointSide.East||f===i.ConnectionPointSide.West){var m=a.rectangle,y=m.y,l=m.width,P=m.height/l/this.defaultRatio,C=Math.PI-this.angle,I=y+l/2*Math.tan(C/2)*P;(f===i.ConnectionPointSide.East||f===i.ConnectionPointSide.West)&&(c.y=I)}},r.prototype.calculateHeight=function(a){var c=Math.PI-this.angle;return a/2*Math.tan(c/2)+a/2/Math.cos(c/2)*Math.sin(c)},r.prototype.getTextRectangle=function(a){var c=e.GeometryUtils.getMaxRectangleEnscribedInEllipse(a.size);return t.Rectangle.fromGeometry(a.position.clone().offset((a.size.width-c.width)/2,(a.size.height-c.height)/2),c)},r.prototype.getSizeByText=function(a,c){return e.GeometryUtils.getEllipseByEnscribedRectangle(a)},r}(s.PolygonShapeDescription);h.PentagonShapeDescription=n},7314:function(j,h,d){var u,g=this&&this.__extends||(u=function(s,i){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},u(s,i)},function(s,i){function e(){this.constructor=s}u(s,i),s.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)});Object.defineProperty(h,"__esModule",{value:!0}),h.PolygonShapeDescription=void 0;var v=d(6794),p=function(s){function i(e){var t=s.call(this,void 0,e)||this;return t.defaultSize.height=t.calculateHeight(v.ShapeDefaultDimension),t}return g(i,s),Object.defineProperty(i.prototype,"keepRatioOnAutoSize",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"angle",{get:function(){return Math.PI*(this.angleCount-2)/this.angleCount},enumerable:!1,configurable:!0}),i}(v.ShapeDescription);h.PolygonShapeDescription=p},1561:function(j,h,d){var u,g=this&&this.__extends||(u=function(t,n){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var a in r)r.hasOwnProperty(a)&&(o[a]=r[a])},u(t,n)},function(t,n){function o(){this.constructor=t}u(t,n),t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)});Object.defineProperty(h,"__esModule",{value:!0}),h.RectangleShapeDescription=void 0;var v=d(6794),p=d(6353),s=d(4716),i=d(2259),e=function(t){function n(o,r){return o===void 0&&(o=new p.Size(v.ShapeDefaultDimension,.75*v.ShapeDefaultDimension)),t.call(this,o,r)||this}return g(n,t),Object.defineProperty(n.prototype,"key",{get:function(){return i.ShapeTypes.Rectangle},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"keepRatioOnAutoSize",{get:function(){return!1},enumerable:!1,configurable:!0}),n.prototype.createShapePrimitives=function(o){var r=o.rectangle,a=r.x,c=r.y,f=r.width,m=r.height;return[new s.RectanglePrimitive(a,c,f,m,o.style)]},n.prototype.getTextRectangle=function(o){return o.rectangle.clone().inflate(-v.ShapeTextPadding,-v.ShapeTextPadding)},n.prototype.getSizeByText=function(o,r){return o.clone().offset(2*v.ShapeTextPadding,2*v.ShapeTextPadding)},n}(v.ShapeDescription);h.RectangleShapeDescription=e},8772:function(j,h,d){var u,g=this&&this.__extends||(u=function(r,a){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var m in f)f.hasOwnProperty(m)&&(c[m]=f[m])},u(r,a)},function(r,a){function c(){this.constructor=r}u(r,a),r.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)});Object.defineProperty(h,"__esModule",{value:!0}),h.StarShapeDescription=h.StarConvexParameterName=void 0;var v=d(7724),p=d(2259),s=d(8761),i=d(6629),e=d(1852),t=d(8900),n=d(3742);h.StarConvexParameterName="sc";var o=function(r){function a(){return r!==null&&r.apply(this,arguments)||this}return g(a,r),Object.defineProperty(a.prototype,"key",{get:function(){return p.ShapeTypes.Star},enumerable:!1,configurable:!0}),a.prototype.createShapePrimitives=function(c){var f=c.rectangle,m=f.x,y=f.y,l=f.right,P=f.width,C=f.height,I=this.getActualBottom(y,f.bottom,P,C),x=f.center.x,b=y+(I-y)/2,S=C/P,w=Math.PI-this.angle,T=P/2*Math.tan(w/2)*S,_=y+T,M=(C-T)/Math.tan(w)/S,A=m+M,E=l-M,U=c.parameters.get(h.StarConvexParameterName).value,R=this.getInnerPointDistance(x,x,l,b,y,_);return[new v.PathPrimitive([new v.PathPrimitiveMoveToCommand(x,y),new v.PathPrimitiveLineToCommand(this.getInnerPointPos(x,x,l,U,R),this.getInnerPointPos(b,y,_,U,R)),new v.PathPrimitiveLineToCommand(l,_),new v.PathPrimitiveLineToCommand(this.getInnerPointPos(x,l,E,U,R),this.getInnerPointPos(b,_,I,U,R)),new v.PathPrimitiveLineToCommand(E,I),new v.PathPrimitiveLineToCommand(this.getInnerPointPos(x,E,A,U,R),this.getInnerPointPos(b,I,I,U,R)),new v.PathPrimitiveLineToCommand(A,I),new v.PathPrimitiveLineToCommand(this.getInnerPointPos(x,A,m,U,R),this.getInnerPointPos(b,I,_,U,R)),new v.PathPrimitiveLineToCommand(m,_),new v.PathPrimitiveLineToCommand(this.getInnerPointPos(x,m,x,U,R),this.getInnerPointPos(b,_,y,U,R)),new v.PathPrimitiveClosePathCommand],c.style)]},a.prototype.createParameters=function(c){c.addRangeIfNotExists([new i.ShapeParameter(h.StarConvexParameterName,300)])},a.prototype.normalizeParameters=function(c,f){var m=c.rectangle,y=m.y,l=m.right,P=m.width,C=m.height,I=this.getActualBottom(y,m.bottom,P,C),x=m.center.x,b=y+(I-y)/2,S=C/P,w=Math.PI-this.angle,T=y+P/2*Math.tan(w/2)*S,_=this.getInnerPointDistance(x,x,l,b,y,T);this.changeParameterValue(f,h.StarConvexParameterName,function(M){return Math.max(0,Math.min(_,M.value))})},a.prototype.modifyParameters=function(c,f,m,y){var l=Math.sqrt(Math.pow(m,2)+Math.pow(y,2));(m<0||y>0)&&(l=-l),this.changeParameterValue(f,h.StarConvexParameterName,function(P){return P.value+l}),this.normalizeParameters(c,f)},a.prototype.getParameterPoints=function(c){var f=c.rectangle,m=f.y,y=f.right,l=f.width,P=f.height,C=this.getActualBottom(m,f.bottom,l,P),I=f.center.x,x=m+(C-m)/2,b=P/l,S=Math.PI-this.angle,w=m+l/2*Math.tan(S/2)*b,T=c.parameters.get(h.StarConvexParameterName).value,_=this.getInnerPointDistance(I,I,y,x,m,w),M=this.getInnerPointPos(I,I,y,T,_),A=this.getInnerPointPos(x,m,w,T,_);return[new e.ShapeParameterPoint("c",new t.Point(M,A))]},a.prototype.processConnectionPoint=function(c,f){if(r.prototype.processConnectionPoint.call(this,c,f),c.getConnectionPointSide(f)===n.ConnectionPointSide.South){var m=c.rectangle,y=m.y,l=m.right,P=m.width,C=m.height,I=this.getActualBottom(y,m.bottom,P,C),x=m.center.x,b=y+(I-y)/2,S=C/P,w=Math.PI-this.angle,T=y+P/2*Math.tan(w/2)*S,_=c.parameters.get(h.StarConvexParameterName).value,M=this.getInnerPointDistance(x,x,l,b,y,T);f.y=this.getInnerPointPos(b,I,I,_,M)}},a.prototype.getInnerPointDistanceByAxis=function(c,f,m){return Math.min(f,m)+Math.abs(f-m)/2-c},a.prototype.getInnerPointPos=function(c,f,m,y,l){var P=Math.min(1,y/l);return c+this.getInnerPointDistanceByAxis(c,f,m)*P},a.prototype.getInnerPointDistance=function(c,f,m,y,l,P){var C=this.getInnerPointDistanceByAxis(c,f,m),I=this.getInnerPointDistanceByAxis(y,l,P);return Math.sqrt(Math.pow(C,2)+Math.pow(I,2))},a.prototype.getActualBottom=function(c,f,m,y){var l=c+r.prototype.calculateHeight.call(this,m)*y/m;return l<f?l:f},a.prototype.calculateHeight=function(c){return c},a}(s.PentagonShapeDescription);h.StarShapeDescription=o},1669:function(j,h,d){var u,g=this&&this.__extends||(u=function(o,r){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var f in c)c.hasOwnProperty(f)&&(a[f]=c[f])},u(o,r)},function(o,r){function a(){this.constructor=o}u(o,r),o.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)});Object.defineProperty(h,"__esModule",{value:!0}),h.TextShapeDescription=void 0;var v=d(6794),p=d(6353),s=d(2259),i=d(4593),e=d(4716),t=d(3500),n=function(o){function r(){var a=o.call(this,new p.Size(v.ShapeDefaultDimension,.5*v.ShapeDefaultDimension),!0)||this;return a.textClipPathId=t.RenderUtils.generateSvgElementId("clipRect"),a}return g(r,o),Object.defineProperty(r.prototype,"key",{get:function(){return s.ShapeTypes.Text},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"keepRatioOnAutoSize",{get:function(){return!1},enumerable:!1,configurable:!0}),r.prototype.createShapePrimitives=function(a,c){if(c){var f=a.rectangle,m=f.x,y=f.y,l=f.width,P=f.height;return[new i.ClipPathPrimitive(this.getTextClipPathId(c),[new e.RectanglePrimitive(m,y,l,P)])]}return[]},r.prototype.getTextClipPathId=function(a){return a?this.textClipPathId:void 0},r.prototype.getSizeByTextRectangle=function(a){return a},r.prototype.getSizeByText=function(a,c){return a.clone()},r.prototype.getTextRectangle=function(a){return a.rectangle},r}(v.ShapeDescription);h.TextShapeDescription=n},2117:function(j,h,d){var u,g=this&&this.__extends||(u=function(r,a){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var m in f)f.hasOwnProperty(m)&&(c[m]=f[m])},u(r,a)},function(r,a){function c(){this.constructor=r}u(r,a),r.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)});Object.defineProperty(h,"__esModule",{value:!0}),h.TriangleShapeDescription=void 0;var v=d(6794),p=d(7724),s=d(2259),i=d(7228),e=d(3742),t=d(8011),n=d(6353),o=function(r){function a(c){var f=r.call(this,void 0,c)||this;return f.defaultSize.height=f.calculateHeight(v.ShapeDefaultDimension),f}return g(a,r),Object.defineProperty(a.prototype,"key",{get:function(){return s.ShapeTypes.Triangle},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"keepRatioOnAutoSize",{get:function(){return!1},enumerable:!1,configurable:!0}),a.prototype.createConnectionPoints=function(){return[new i.ConnectionPoint(.5,0,e.ConnectionPointSide.North),new i.ConnectionPoint(.75,.5,e.ConnectionPointSide.East),new i.ConnectionPoint(.5,1,e.ConnectionPointSide.South),new i.ConnectionPoint(.25,.5,e.ConnectionPointSide.West)]},a.prototype.createShapePrimitives=function(c){var f=c.rectangle,m=f.x,y=f.y,l=f.right,P=f.bottom;return[new p.PathPrimitive([new p.PathPrimitiveMoveToCommand(f.center.x,y),new p.PathPrimitiveLineToCommand(l,P),new p.PathPrimitiveLineToCommand(m,P),new p.PathPrimitiveClosePathCommand],c.style)]},a.prototype.calculateHeight=function(c){return Math.sqrt(Math.pow(c,2)-Math.pow(c/2,2))},a.prototype.getTextRectangle=function(c){return new t.Rectangle(c.position.x+c.size.width/4,c.position.y+c.size.height/2,c.size.width/2,c.size.height/2-v.ShapeTextPadding).nonNegativeSize()},a.prototype.getSizeByText=function(c,f){return new n.Size(2*c.width,2*c.height+v.ShapeTextPadding)},a}(v.ShapeDescription);h.TriangleShapeDescription=o},3233:function(j,h,d){var u,g=this&&this.__extends||(u=function(y,l){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,C){P.__proto__=C}||function(P,C){for(var I in C)C.hasOwnProperty(I)&&(P[I]=C[I])},u(y,l)},function(y,l){function P(){this.constructor=y}u(y,l),y.prototype=l===null?Object.create(l):(P.prototype=l.prototype,new P)});Object.defineProperty(h,"__esModule",{value:!0}),h.CardBaseDescription=void 0;var v=d(6794),p=d(8011),s=d(6353),i=d(4083),e=d(4538),t=d(7724),n=d(5329),o=d(6411),r=d(2259),a=d(6224),c=d(9291),f=d(8900),m=function(y){function l(P){return P===void 0&&(P=new s.Size(v.ShapeDefaultDimension,26/46*v.ShapeDefaultDimension)),y.call(this,P,!0)||this}return g(l,y),Object.defineProperty(l.prototype,"keepRatioOnAutoSize",{get:function(){return!1},enumerable:!1,configurable:!0}),l.prototype.getDefaultText=function(){return a.DiagramLocalizationService.shapeTexts[r.ShapeTypes.Card]},l.prototype.createShapePrimitives=function(P,C){var I=P.rectangle,x=I.x,b=I.y,S=I.width,w=I.height;return[new e.RoundedRectanglePrimitive(x,b,S,w,C?30:60,C?30:60,P.style)]},l.prototype.createImagePlaceholder=function(P){return[new e.RoundedRectanglePrimitive(P.x,P.y,P.width,P.height,c.UnitConverter.pixelsToTwips(2),c.UnitConverter.pixelsToTwips(2),void 0,i.SHAPE_IMAGE_CLASSNAMES.IMAGE_PLACEHOLDER)]},l.prototype.createEmptyImagePrimitive=function(P){return o.ShapeImageIndicator.createUserIconPrimitives(P.x,P.y,this.defaultIconSize,c.UnitConverter.pixelsToTwips(1),i.SHAPE_IMAGE_CLASSNAMES.USER_PIC)},l.prototype.createWarningPrimitive=function(P){return o.ShapeImageIndicator.createWarningIconPrimitives(P.x+this.defaultIconSize/2,P.y+this.defaultIconSize/2,this.defaultIconSize/2,i.SHAPE_IMAGE_CLASSNAMES.WARNING_MARK)},l.prototype.getTextRectangle=function(P){var C=P.rectangle,I=C.clone().inflate(-v.ShapeTextPadding,-v.ShapeTextPadding),x=this.getImageSize(C.createSize(),!0);return this.isTextAfterImage&&I.moveRectangle(this.isHorizontal?x.width:0,this.isHorizontal?0:x.height),I.resize(this.isHorizontal?-x.width:0,this.isHorizontal?0:-x.height),I.nonNegativeSize()},l.prototype.getSizeByText=function(P,C){var I=P.clone().offset(2*v.ShapeTextPadding,2*v.ShapeTextPadding),x=this.getImageSizeByTextBlockSize(I);return this.isHorizontal?I.width+=x.width:I.height+=x.height,I},l.prototype.createTextPrimitives=function(P,C){return C?this.createGraphicalTextRepresentation(P.rectangle):y.prototype.createTextPrimitives.call(this,P,C)},l.prototype.createGraphicalTextRepresentation=function(P){var C=new p.Rectangle(0,0,0,0),I=this.getImageSize(P.createSize(),!0,!0);if(this.isHorizontal){var x=this.isTextAfterImage?P.width/2-c.UnitConverter.pixelsToTwips(2):0;C.x=P.x+x+c.UnitConverter.pixelsToTwips(4),C.y=P.y+c.UnitConverter.pixelsToTwips(5),C.width=I.width-c.UnitConverter.pixelsToTwips(4),C.height=P.height-c.UnitConverter.pixelsToTwips(6)}else{var b=this.isTextAfterImage?P.height/2-c.UnitConverter.pixelsToTwips(2):0;C.x=P.x+P.width/4,C.y=P.y+b+c.UnitConverter.pixelsToTwips(4),C.width=P.width/2,C.height=I.height-c.UnitConverter.pixelsToTwips(2)}return this.createTextRepresentationPrimitives(C)},l.prototype.getImagePlacementRectangle=function(P,C){var I=this.getImageSize(P.createSize(),!1,C),x=p.Rectangle.fromGeometry(new f.Point(P.x,P.y),I),b=this.getImageSize(P.createSize(),!0,C);return this.isHorizontal&&this.isTextAfterImage?x.x+=this.getImageMargin(C):this.isHorizontal&&(x.x=P.right-b.width-this.getImageMargin(C)),this.isHorizontal||this.isTextAfterImage?x.y+=this.getImageMargin(C):x.y=P.bottom-b.height-this.getImageMargin(C),this.isHorizontal||(x.x+=(P.width-x.width)/2),x},l.prototype.createTextRepresentationPrimitives=function(P){var C=c.UnitConverter.pixelsToTwips(c.UnitConverter.twipsToPixels(P.height/3));return[new n.GroupPrimitive([new t.PathPrimitive([new t.PathPrimitiveMoveToCommand(P.x,P.y),new t.PathPrimitiveLineToCommand(P.x+P.width,P.y)]),new t.PathPrimitive([new t.PathPrimitiveMoveToCommand(P.x,P.y+C),new t.PathPrimitiveLineToCommand(P.x+P.width,P.y+C)]),new t.PathPrimitive([new t.PathPrimitiveMoveToCommand(P.x,P.y+2*C),new t.PathPrimitiveLineToCommand(P.x+.66*P.width,P.y+2*C)])],"dxdi-shape-text")]},l}(i.ShapeWithImageDescription);h.CardBaseDescription=m},3107:function(j,h,d){var u,g=this&&this.__extends||(u=function(o,r){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var f in c)c.hasOwnProperty(f)&&(a[f]=c[f])},u(o,r)},function(o,r){function a(){this.constructor=o}u(o,r),o.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)});Object.defineProperty(h,"__esModule",{value:!0}),h.CardWithImageOnRightDescription=h.CardWithImageOnLeftDescription=void 0;var v=d(6794),p=d(2259),s=d(3233),i=d(6353),e=function(o){function r(){var a=o.call(this,new i.Size(1.5*v.ShapeDefaultDimension,.5*v.ShapeDefaultDimension))||this;return a.isHorizontal=!0,a}return g(r,o),r.prototype.getToolboxHeightToWidthRatio=function(a,c){return 26/46},r.prototype.getImageSize=function(a,c,f){var m=Math.min(a.height,a.width);return c||(m=Math.max(0,m-2*this.getImageMargin(f))),new i.Size(m,m)},r.prototype.getImageSizeByTextBlockSize=function(a){return this.getImageSize(new i.Size(Number.MAX_VALUE,a.height),!0)},r}(s.CardBaseDescription),t=function(o){function r(){var a=o!==null&&o.apply(this,arguments)||this;return a.isTextAfterImage=!0,a}return g(r,o),Object.defineProperty(r.prototype,"key",{get:function(){return p.ShapeTypes.CardWithImageOnLeft},enumerable:!1,configurable:!0}),r}(e);h.CardWithImageOnLeftDescription=t;var n=function(o){function r(){var a=o!==null&&o.apply(this,arguments)||this;return a.isTextAfterImage=!1,a}return g(r,o),Object.defineProperty(r.prototype,"key",{get:function(){return p.ShapeTypes.CardWithImageOnRight},enumerable:!1,configurable:!0}),r}(e);h.CardWithImageOnRightDescription=n},2816:function(j,h,d){var u,g=this&&this.__extends||(u=function(n,o){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var c in a)a.hasOwnProperty(c)&&(r[c]=a[c])},u(n,o)},function(n,o){function r(){this.constructor=n}u(n,o),n.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)});Object.defineProperty(h,"__esModule",{value:!0}),h.CardWithImageOnTopDescription=void 0;var v=d(6794),p=d(6353),s=d(2259),i=d(3233),e=d(9291),t=function(n){function o(){var r=n.call(this,new p.Size(.8*v.ShapeDefaultDimension,v.ShapeDefaultDimension))||this;return r.isTextAfterImage=!0,r.isHorizontal=!1,r}return g(o,n),Object.defineProperty(o.prototype,"key",{get:function(){return s.ShapeTypes.CardWithImageOnTop},enumerable:!1,configurable:!0}),o.prototype.getImageSize=function(r,a,c){var f=r.width/2;e.UnitConverter.twipsToPixels(f)%2==1&&(f-=e.UnitConverter.pixelsToTwips(1));var m=Math.max(0,r.height-(a?0:2*this.getImageMargin(c)));return m=Math.min(f,m),new p.Size(m,m)},o.prototype.getImageSizeByTextBlockSize=function(r){return this.getImageSize(new p.Size(r.width,Number.MAX_VALUE),!0)},o}(i.CardBaseDescription);h.CardWithImageOnTopDescription=t},6794:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.ShapeDescription=h.ShapeTextPadding=h.ShapeDefaultSize=h.ShapeMinDimension=h.ShapeDefaultDimension=void 0;var u=d(9291),g=d(6353),v=d(6224),p=d(4246),s=d(4716),i=d(9416),e=d(8675),t=d(7228),n=d(3742);h.ShapeDefaultDimension=1440,h.ShapeMinDimension=360,h.ShapeDefaultSize=new g.Size(h.ShapeDefaultDimension,h.ShapeDefaultDimension),h.ShapeTextPadding=u.UnitConverter.pixelsToTwips(10);var o=function(){function r(a,c){a===void 0&&(a=h.ShapeDefaultSize.clone()),this.defaultSize=a,this.hasDefaultText=c,this.onChanged=new e.EventDispatcher,this.connectionPoints=this.createConnectionPoints()}return Object.defineProperty(r.prototype,"enableText",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"allowEditText",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"enableImage",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"allowEditImage",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"hasTemplate",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"enableChildren",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"minWidth",{get:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"minHeight",{get:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"maxWidth",{get:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"maxHeight",{get:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"toolboxSize",{get:function(){return this.defaultSize},enumerable:!1,configurable:!0}),r.prototype.getTitle=function(){return v.DiagramLocalizationService.shapeTexts[this.key]},r.prototype.getDefaultText=function(){return this.hasDefaultText?v.DiagramLocalizationService.shapeTexts[this.key]:""},r.prototype.getDefaultImageUrl=function(){return""},r.prototype.getConnectionPoints=function(){return this.connectionPoints},r.prototype.createConnectionPoints=function(){return[new t.ConnectionPoint(.5,0,n.ConnectionPointSide.North),new t.ConnectionPoint(1,.5,n.ConnectionPointSide.East),new t.ConnectionPoint(.5,1,n.ConnectionPointSide.South),new t.ConnectionPoint(0,.5,n.ConnectionPointSide.West)]},r.prototype.processConnectionPoint=function(a,c){},r.prototype.getConnectionPointIndexForItem=function(a,c){return c},r.prototype.getConnectionPointIndexForSide=function(a){return a},r.getConnectionPointSideByGeometry=function(a){return a.x>=a.y&&(a.x>0||a.y>0)?a.x<.5||1-a.x>=a.y?n.ConnectionPointSide.North:n.ConnectionPointSide.East:a.x>.5||1-a.x<=a.y?n.ConnectionPointSide.South:n.ConnectionPointSide.West},r.prototype.createParameters=function(a){},r.prototype.normalizeParameters=function(a,c){},r.prototype.modifyParameters=function(a,c,f,m){throw Error("Not implemented")},r.prototype.changeParameterValue=function(a,c,f){var m=a.get(c);m.value=f(m)},r.prototype.getParameterPoints=function(a){return[]},r.prototype.getExpandedSize=function(a){return a.size},r.prototype.getCollapsedSize=function(a){return a.size},r.prototype.getToolboxHeightToWidthRatio=function(a,c){return c/a},r.prototype.allowResizeHorizontally=function(a){return!0},r.prototype.allowResizeVertically=function(a){return!0},r.prototype.createPrimitives=function(a,c,f){var m=[];return m=m.concat(this.createShapePrimitives(a,f)),this.enableImage&&(m=m.concat(this.createImagePrimitives(a,f))),this.enableText&&(m=m.concat(this.createTextPrimitives(a,f))),m},r.prototype.createImagePrimitives=function(a,c){return[]},r.prototype.createTextPrimitives=function(a,c){if(a.text===void 0||a.text==="")return[];var f=this.getTextRectangle(a);return[new i.TextPrimitive(f.x,f.y,a.text,p.TextOwner.Shape,f.width,f.height,r.textSpacing,a.styleText,!1,this.getTextClipPathId(c),void 0,this.getTextAngle())]},r.prototype.getTextClipPathId=function(a){},r.prototype.getTextAngle=function(){return i.TextAngle.Angle0deg},r.prototype.getClientRectangle=function(a){return a.rectangle},r.prototype.getTextEditRectangle=function(a){return this.getTextRectangle(a)},r.prototype.createSelectorPrimitives=function(a){return[new s.RectanglePrimitive(a.position.x,a.position.y,a.size.width,a.size.height,null,"selector")]},r.prototype.raiseShapeDescriptionChanged=function(a){this.onChanged.raise1(function(c){return c.notifyShapeDescriptionChanged(a)})},r.textSpacing=u.UnitConverter.pixelsToTwips(2),r}();h.ShapeDescription=o},8397:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.ShapeDescriptionManager=void 0;var u=d(5331),g=d(6825),v=d(9144),p=d(4941),s=d(6242),i=d(6508),e=d(9089),t=d(6599),n=d(8327),o=d(2281),r=d(5303),a=d(7768),c=d(8628),f=d(1561),m=d(1669),y=d(8761),l=d(2953),P=d(1412),C=d(8772),I=d(4958),x=d(8800),b=d(6023),S=d(2117),w=d(3525),T=d(2850),_=d(4112),M=d(1314),A=d(1034),E=d(2751),U=d(8110),R=d(1643),O=d(9229),N=d(4810),V=d(3046),H=d(2650),L=d(2019),D=d(6182),K=d(6688),F=d(5759),q=d(944),ee=d(2816),Q=d(2259),X=d(7552),z=d(8675),B=d(3107),k=function(){function W(){this.descriptions={},this.descriptionTypes={},this.descriptionCategories={},this.onShapeDecriptionChanged=new z.EventDispatcher,this.register(new m.TextShapeDescription,Q.ShapeCategories.General),this.register(new f.RectangleShapeDescription,Q.ShapeCategories.General),this.register(new a.EllipseShapeDescription,Q.ShapeCategories.General),this.register(new o.CrossShapeDescription,Q.ShapeCategories.General),this.register(new S.TriangleShapeDescription,Q.ShapeCategories.General),this.register(new r.DiamondShapeDescription,Q.ShapeCategories.General),this.register(new c.HeartShapeDescription,Q.ShapeCategories.General),this.register(new y.PentagonShapeDescription,Q.ShapeCategories.General),this.register(new l.HexagonShapeDescription,Q.ShapeCategories.General),this.register(new P.OctagonShapeDescription,Q.ShapeCategories.General),this.register(new C.StarShapeDescription,Q.ShapeCategories.General),this.register(new n.ArrowUpShapeDescription,Q.ShapeCategories.General),this.register(new I.ArrowDownShapeDescription,Q.ShapeCategories.General),this.register(new b.ArrowLeftShapeDescription,Q.ShapeCategories.General),this.register(new t.ArrowRightShapeDescription,Q.ShapeCategories.General),this.register(new e.ArrowUpDownShapeDescription,Q.ShapeCategories.General),this.register(new x.ArrowLeftRightShapeDescription,Q.ShapeCategories.General),this.register(new u.ProcessShapeDescription,Q.ShapeCategories.Flowchart),this.register(new g.DecisionShapeDescription,Q.ShapeCategories.Flowchart),this.register(new s.TerminatorShapeDescription,Q.ShapeCategories.Flowchart),this.register(new i.PredefinedProcessShapeDescription,Q.ShapeCategories.Flowchart),this.register(new w.DocumentShapeDescription,Q.ShapeCategories.Flowchart),this.register(new T.MultipleDocumentsShapeDescription,Q.ShapeCategories.Flowchart),this.register(new v.ManualInputShapeDescription,Q.ShapeCategories.Flowchart),this.register(new _.PreparationShapeDescription,Q.ShapeCategories.Flowchart),this.register(new p.DataShapeDescription,Q.ShapeCategories.Flowchart),this.register(new A.DatabaseShapeDescription,Q.ShapeCategories.Flowchart),this.register(new M.HardDiskShapeDescription,Q.ShapeCategories.Flowchart),this.register(new E.InternalStorageShapeDescription,Q.ShapeCategories.Flowchart),this.register(new U.PaperTapeShapeDescription,Q.ShapeCategories.Flowchart),this.register(new R.ManualOperationShapeDescription,Q.ShapeCategories.Flowchart),this.register(new O.DelayShapeDescription,Q.ShapeCategories.Flowchart),this.register(new N.StoredDataShapeDescription,Q.ShapeCategories.Flowchart),this.register(new H.DisplayShapeDescription,Q.ShapeCategories.Flowchart),this.register(new V.MergeShapeDescription,Q.ShapeCategories.Flowchart),this.register(new X.ConnectorShapeDescription,Q.ShapeCategories.Flowchart),this.register(new L.OrShapeDescription,Q.ShapeCategories.Flowchart),this.register(new D.SummingJunctionShapeDescription,Q.ShapeCategories.Flowchart),this.register(new B.CardWithImageOnLeftDescription,Q.ShapeCategories.OrgChart),this.register(new B.CardWithImageOnRightDescription,Q.ShapeCategories.OrgChart),this.register(new ee.CardWithImageOnTopDescription,Q.ShapeCategories.OrgChart),this.register(new F.VerticalContainerDescription,Q.ShapeCategories.Containers),this.register(new q.HorizontalContainerDescription,Q.ShapeCategories.Containers)}return Object.defineProperty(W,"default",{get:function(){return W.defaultInstance},enumerable:!1,configurable:!0}),Object.defineProperty(W,"defaultContainer",{get:function(){return W.defaultContainerInstance},enumerable:!1,configurable:!0}),W.prototype.get=function(G){return this.descriptions[G]},W.prototype.getTypesByCategory=function(G){return this.descriptionTypes[G]||[]},W.prototype.getCategoryByType=function(G){return this.descriptionCategories[G]},W.prototype.getCategoryByDescription=function(G){return this.getCategoryByType(G.key)},W.prototype.register=function(G,Y,J){if(J===void 0&&(J=G.key),this.descriptions[J]!==void 0)throw Error("Description key is duplicated");this.descriptions[J]=G,this.descriptionTypes[Y]||(this.descriptionTypes[Y]=[]),this.descriptionTypes[Y].push(J),this.descriptionCategories[J]=Y,G.onChanged.add(this)},W.prototype.registerCustomShape=function(G){if(G.type===void 0)throw Error("Custom shape type is not defined");if(this.descriptions[G.type]!==void 0)throw Error("Custom shape type is duplicated");var Y=G.baseType&&this.descriptions[G.baseType];G.minWidth>G.maxWidth&&(G.maxWidth=G.minWidth),G.minHeight>G.maxHeight&&(G.maxHeight=G.minHeight),this.register(new K.CustomShapeDescription(G,Y),G.category||Q.ShapeCategories.Custom)},W.prototype.unregisterCustomShape=function(G){var Y=this.descriptions[G];if(Y instanceof K.CustomShapeDescription){Y.onChanged.remove(this);var J=this.descriptionCategories[G];delete this.descriptions[G],delete this.descriptionCategories[G];var $=this.descriptionTypes[J].indexOf(G);this.descriptionTypes[J].splice($,1),this.descriptionTypes[J].length===0&&delete this.descriptionTypes[J]}},W.prototype.unregisterAllCustomShapes=function(){var G=this;Object.keys(this.descriptions).forEach(function(Y){G.unregisterCustomShape(Y)})},W.prototype.notifyShapeDescriptionChanged=function(G){this.onShapeDecriptionChanged.raise1(function(Y){return Y.notifyShapeDescriptionChanged(G)})},W.defaultInstance=new f.RectangleShapeDescription,W.defaultContainerInstance=new F.VerticalContainerDescription,W}();h.ShapeDescriptionManager=k},4083:function(j,h,d){var u,g=this&&this.__extends||(u=function(m,y){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,P){l.__proto__=P}||function(l,P){for(var C in P)P.hasOwnProperty(C)&&(l[C]=P[C])},u(m,y)},function(m,y){function l(){this.constructor=m}u(m,y),m.prototype=y===null?Object.create(y):(l.prototype=y.prototype,new l)});Object.defineProperty(h,"__esModule",{value:!0}),h.ShapeWithImageDescription=h.SHAPE_IMAGE_CLASSNAMES=h.ShapeDefaultSize=h.ShapeDefaultDimension=void 0;var v=d(6794),p=d(8011),s=d(6353),i=d(8900),e=d(9291),t=d(1995),n=d(4716),o=d(5329),r=d(3500),a=d(4593),c=d(6411);h.ShapeDefaultDimension=1440,h.ShapeDefaultSize=new s.Size(h.ShapeDefaultDimension,h.ShapeDefaultDimension),h.SHAPE_IMAGE_CLASSNAMES={IMAGE:"dxdi-image",IMAGE_PLACEHOLDER:"dxdi-image-placeholder",LOADING_INDICATOR:"dxdi-spinner",USER_PIC:"dxdi-user",WARNING_MARK:"dxdi-warning"};var f=function(m){function y(l,P){l===void 0&&(l=h.ShapeDefaultSize.clone());var C=m.call(this,l,P)||this;return C.hasDefaultText=P,C.defaultIconSize=480,C}return g(y,m),Object.defineProperty(y.prototype,"enableImage",{get:function(){return!0},enumerable:!1,configurable:!0}),y.prototype.getImageMargin=function(l){return l?e.UnitConverter.pixelsToTwips(2):e.UnitConverter.pixelsToTwips(3)},y.prototype.createImagePrimitives=function(l,P){if(!this.enableImage)return[];var C=this.getImagePlacementRectangle(l.rectangle,P);if(P)return this.createImagePlaceholder(C);var I=[];if(I=l.image.isEmpty||l.image.unableToLoad?I.concat(this.createEmptyImagePrimitives(C,l.image.unableToLoad)):l.image.renderUrl===""?I.concat(this.createLoadingImagePrimitives(C)):I.concat(this.createLoadedImagePrimitives(C,l.image.renderUrl)),l.image.renderUrl===""){var x=r.RenderUtils.generateSvgElementId("clipImage");return[].concat([new o.GroupPrimitive(I,h.SHAPE_IMAGE_CLASSNAMES.IMAGE,void 0,x),new a.ClipPathPrimitive(x,[new n.RectanglePrimitive(C.x,C.y,C.width,C.height)])])}return I},y.prototype.createImagePlaceholder=function(l){return[]},y.prototype.createLoadedImagePrimitives=function(l,P){return[new t.ImagePrimitive(l.x,l.y,l.width,l.height,P,y.imageScalingRule,void 0,h.SHAPE_IMAGE_CLASSNAMES.IMAGE)]},y.prototype.createLoadingImagePrimitives=function(l){var P=this.getIconPlacementRectangle(l);return[c.ShapeImageIndicator.createLoadingIndicatorPrimitives(P.x,P.y,this.defaultIconSize,e.UnitConverter.pixelsToTwips(5),h.SHAPE_IMAGE_CLASSNAMES.LOADING_INDICATOR)]},y.prototype.createEmptyImagePrimitives=function(l,P){var C=this.getIconPlacementRectangle(l),I=[];return I=I.concat(this.createEmptyImagePrimitive(C)),P&&(I=I.concat(this.createWarningPrimitive(C))),I},y.prototype.createEmptyImagePrimitive=function(l){return new o.GroupPrimitive([])},y.prototype.createWarningPrimitive=function(l){return new o.GroupPrimitive([])},y.prototype.getIconPlacementRectangle=function(l){var P=p.Rectangle.fromGeometry(new i.Point(l.x,l.y),new s.Size(this.defaultIconSize,this.defaultIconSize));return P.width<l.width&&(P.x=l.x+(l.width-P.width)/2),P.height<l.height&&(P.y=l.y+(l.height-P.height)/2),P},y.imageScalingRule="xMidYMid meet",y}(v.ShapeDescription);h.ShapeWithImageDescription=f},5503:function(j,h,d){var u,g=this&&this.__extends||(u=function(r,a){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var m in f)f.hasOwnProperty(m)&&(c[m]=f[m])},u(r,a)},function(r,a){function c(){this.constructor=r}u(r,a),r.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)});Object.defineProperty(h,"__esModule",{value:!0}),h.Shape=void 0;var v=d(8011),p=d(6794),s=d(6629),i=d(3742),e=d(7228),t=d(6617),n=d(7185),o=function(r){function a(c,f,m){var y=r.call(this)||this;if(y.description=c,y.children=[],y.expanded=!0,y.expandedSize=void 0,!c)throw Error("Shape type is incorrect");y.position=f.clone();var l=m?c.toolboxSize:c.defaultSize;return y.size=l.clone(),y.text=c.getDefaultText(),y.image=new t.ImageInfo(c.getDefaultImageUrl()),y.parameters=new s.ShapeParameters,c.createParameters(y.parameters),y}return g(a,r),a.prototype.assign=function(c){r.prototype.assign.call(this,c),c.size=this.size.clone(),c.text=this.text,c.image=this.image.clone(),c.parameters=this.parameters.clone(),c.children=this.children.slice(),c.expanded=this.expanded,this.expandedSize&&(c.expandedSize=this.expandedSize.clone())},a.prototype.clone=function(){var c=new a(this.description,this.position.clone());return this.assign(c),c},Object.defineProperty(a.prototype,"enableText",{get:function(){return this.description.enableText},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"allowEditText",{get:function(){return this.description.allowEditText},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"hasTemplate",{get:function(){return this.description.hasTemplate},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"enableChildren",{get:function(){return this.description.enableChildren},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"enableImage",{get:function(){return this.description.enableImage},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"allowEditImage",{get:function(){return this.description.allowEditImage},enumerable:!1,configurable:!0}),a.prototype.getMinWidth=function(c){return typeof this.description.minWidth=="number"?this.description.minWidth:typeof c=="number"?c:p.ShapeMinDimension},a.prototype.getMinHeight=function(c){return typeof this.description.minHeight=="number"?this.description.minHeight:typeof c=="number"?c:p.ShapeMinDimension},a.prototype.getMaxWidth=function(c){return typeof this.description.maxWidth=="number"?this.description.maxWidth:typeof c=="number"?c:void 0},a.prototype.getMaxHeight=function(c){return typeof this.description.maxHeight=="number"?this.description.maxHeight:typeof c=="number"?c:void 0},a.prototype.createPrimitives=function(c){return this.description.createPrimitives(this,c)},a.prototype.createSelectorPrimitives=function(){return this.description.createSelectorPrimitives(this)},a.prototype.normalizeX=function(c){return Math.max(this.position.x,Math.min(c,this.position.x+this.size.width))},a.prototype.normalizeY=function(c){return Math.max(this.position.y,Math.min(c,this.position.y+this.size.height))},a.prototype.getConnectionPoints=function(){var c=this;return this.description.getConnectionPoints().map(function(f){var m=new e.ConnectionPoint(c.position.x+f.x*c.size.width,c.position.y+f.y*c.size.height,f.side);return c.description.processConnectionPoint(c,m),m})},a.prototype.getConnectionPointSide=function(c,f){return c.side!==i.ConnectionPointSide.Undefined?c.side:this.getConnectionPointSideByGeometry(c)},a.prototype.getConnectionPointSideByGeometry=function(c){var f=c.clone().offset(-this.position.x,-this.position.y).multiply(1/this.size.width,1/this.size.height);return p.ShapeDescription.getConnectionPointSideByGeometry(f)},a.prototype.getConnectionPointIndexForItem=function(c,f){return this.description.getConnectionPointIndexForItem(c,f)},a.prototype.getConnectionPointIndexForSide=function(c){return this.description.getConnectionPointIndexForSide(c)},a.prototype.toggleExpandedSize=function(){this.expanded?(this.size=this.getExpandedSize(),this.expandedSize=void 0):(this.expandedSize=this.size.clone(),this.size=this.getCollapsedSize())},a.prototype.getExpandedSize=function(){return this.description.getExpandedSize(this)},a.prototype.getCollapsedSize=function(){return this.description.getCollapsedSize(this)},a.prototype.getToolboxHeightToWidthRatio=function(){return this.description.getToolboxHeightToWidthRatio(this.size.width,this.size.height)},Object.defineProperty(a.prototype,"allowResizeHorizontally",{get:function(){return this.description.allowResizeHorizontally(this)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"allowResizeVertically",{get:function(){return this.description.allowResizeVertically(this)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"rectangle",{get:function(){return v.Rectangle.fromGeometry(this.position,this.size)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"clientRectangle",{get:function(){return this.description.getClientRectangle(this)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"textRectangle",{get:function(){return this.description.getTextRectangle(this)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"textEditRectangle",{get:function(){return this.description.getTextEditRectangle(this)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"textAngle",{get:function(){return this.description.getTextAngle()},enumerable:!1,configurable:!0}),a.prototype.toNative=function(c){var f=new n.NativeShape(this.key,this.dataKey);return f.type=this.description.key,f.text=this.text,f.position=this.position.clone(),f.size=this.size.clone(),f.attachedConnectorIds=this.attachedConnectors.map(function(m){return m.key}),f.applyUnits(c),f.containerId=this.container?this.container.key:null,f.containerChildItemIds=this.children.map(function(m){return m.key}),f.containerExpanded=this.expanded,f},a}(i.DiagramItem);h.Shape=o},1852:(j,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.ShapeParameterPoint=void 0;var d=function(u,g){this.key=u,this.point=g};h.ShapeParameterPoint=d},6629:(j,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.ShapeParameters=h.ShapeParameter=void 0;var d=function(g,v){this.key=g,this.value=v};h.ShapeParameter=d;var u=function(){function g(){this.items={}}return g.prototype.addIfNotExists=function(v){v.key in this.items||this.set(v)},g.prototype.set=function(v){this.items[v.key]=v},g.prototype.addRangeIfNotExists=function(v){for(var p=0;p<v.length;p++)this.addIfNotExists(v[p])},g.prototype.get=function(v){return this.items[v]},g.prototype.forEach=function(v){for(var p in this.items)Object.prototype.hasOwnProperty.call(this.items,p)&&v(this.items[p])},g.prototype.clone=function(){var v=new g;return this.forEach(function(p){v.addIfNotExists(new d(p.key,p.value))}),v},g.prototype.toObject=function(){var v={},p=!1;return this.forEach(function(s){v[s.key]={value:s.value},p=!0}),p?v:null},g.prototype.fromObject=function(v){this.forEach(function(p){var s=v[p.key];s&&typeof s.value=="number"&&(p.value=s.value)})},g}();h.ShapeParameters=u},2259:(j,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.ShapeType=h.ShapeTypes=h.ShapeCategories=void 0;var d=function(){function g(){}return g.General="general",g.Flowchart="flowchart",g.OrgChart="orgChart",g.Containers="containers",g.Custom="custom",g}();h.ShapeCategories=d;var u=function(){function g(){}return g.Text="text",g.Rectangle="rectangle",g.Ellipse="ellipse",g.Cross="cross",g.Triangle="triangle",g.Diamond="diamond",g.Heart="heart",g.Pentagon="pentagon",g.Hexagon="hexagon",g.Octagon="octagon",g.Star="star",g.ArrowLeft="arrowLeft",g.ArrowUp="arrowTop",g.ArrowRight="arrowRight",g.ArrowDown="arrowBottom",g.ArrowUpDown="arrowNorthSouth",g.ArrowLeftRight="arrowEastWest",g.Process="process",g.Decision="decision",g.Terminator="terminator",g.PredefinedProcess="predefinedProcess",g.Document="document",g.MultipleDocuments="multipleDocuments",g.ManualInput="manualInput",g.Preparation="preparation",g.Data="data",g.Database="database",g.HardDisk="hardDisk",g.InternalStorage="internalStorage",g.PaperTape="paperTape",g.ManualOperation="manualOperation",g.Delay="delay",g.StoredData="storedData",g.Display="display",g.Merge="merge",g.Connector="connector",g.Or="or",g.SummingJunction="summingJunction",g.Container="container",g.VerticalContainer="verticalContainer",g.HorizontalContainer="horizontalContainer",g.Card="card",g.CardWithImageOnLeft="cardWithImageOnLeft",g.CardWithImageOnTop="cardWithImageOnTop",g.CardWithImageOnRight="cardWithImageOnRight",g}();h.ShapeTypes=u,function(g){g[g.text=0]="text",g[g.rectangle=1]="rectangle",g[g.ellipse=2]="ellipse",g[g.cross=3]="cross",g[g.triangle=4]="triangle",g[g.diamond=5]="diamond",g[g.heart=6]="heart",g[g.pentagon=7]="pentagon",g[g.hexagon=8]="hexagon",g[g.octagon=9]="octagon",g[g.star=10]="star",g[g.arrowLeft=11]="arrowLeft",g[g.arrowTop=12]="arrowTop",g[g.arrowRight=13]="arrowRight",g[g.arrowBottom=14]="arrowBottom",g[g.arrowNorthSouth=15]="arrowNorthSouth",g[g.arrowEastWest=16]="arrowEastWest",g[g.process=17]="process",g[g.decision=18]="decision",g[g.terminator=19]="terminator",g[g.predefinedProcess=20]="predefinedProcess",g[g.document=21]="document",g[g.multipleDocuments=22]="multipleDocuments",g[g.manualInput=23]="manualInput",g[g.preparation=24]="preparation",g[g.data=25]="data",g[g.database=26]="database",g[g.hardDisk=27]="hardDisk",g[g.internalStorage=28]="internalStorage",g[g.paperTape=29]="paperTape",g[g.manualOperation=30]="manualOperation",g[g.delay=31]="delay",g[g.storedData=32]="storedData",g[g.display=33]="display",g[g.merge=34]="merge",g[g.connector=35]="connector",g[g.or=36]="or",g[g.summingJunction=37]="summingJunction",g[g.verticalContainer=38]="verticalContainer",g[g.horizontalContainer=39]="horizontalContainer",g[g.cardWithImageOnLeft=40]="cardWithImageOnLeft",g[g.cardWithImageOnTop=41]="cardWithImageOnTop",g[g.cardWithImageOnRight=42]="cardWithImageOnRight"}(h.ShapeType||(h.ShapeType={}))},1552:function(j,h,d){var u,g=this&&this.__extends||(u=function(a,c){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,m){f.__proto__=m}||function(f,m){for(var y in m)m.hasOwnProperty(y)&&(f[y]=m[y])},u(a,c)},function(a,c){function f(){this.constructor=a}u(a,c),a.prototype=c===null?Object.create(c):(f.prototype=c.prototype,new f)});Object.defineProperty(h,"__esModule",{value:!0}),h.EmptyStyle=h.StrokeStyle=h.TextAlignment=h.TextStyle=h.Style=h.DEFAULT_STROKE_DASHARRAY=h.DEFAULT_STROKE_WIDTH=h.StyleBase=void 0;var v=d(13),p=d(8396),s=d(9291),i=function(){function a(){this.createDefaultProperties()}return a.prototype.clone=function(){var c=this,f=this.createInstance();return this.forEach(function(m){f[m]=c[m]}),f},a.prototype.forEach=function(c){for(var f in this)Object.prototype.hasOwnProperty.call(this,f)&&c(f)},Object.defineProperty(a.prototype,"strokeWidthPx",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"strokeWidth",{get:function(){return s.UnitConverter.pixelsToTwips(this.strokeWidthPx)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"strokeOffset",{get:function(){return .5},enumerable:!1,configurable:!0}),a.prototype.toHash=function(){var c=this.toObject();return c?Object.keys(c).map(function(f){return f+"|"+c[f]}).join(""):""},a.prototype.toObject=function(){var c=this,f={},m=!1,y=this.getDefaultInstance();return this.forEach(function(l){c[l]!==y[l]&&(f[l]=c[l],m=!0)}),m?f:null},a.prototype.fromObject=function(c){for(var f in c)if(Object.prototype.hasOwnProperty.call(c,f)){var m=p.isColorProperty(f)?v.ColorUtils.stringToHash(c[f]):c[f];this[f]=m}},a}();h.StyleBase=i,h.DEFAULT_STROKE_WIDTH=2,h.DEFAULT_STROKE_DASHARRAY="";var e=function(a){function c(){return a!==null&&a.apply(this,arguments)||this}return g(c,a),c.prototype.createInstance=function(){return new c},c.prototype.createDefaultProperties=function(){this.fill="#ffffff",this.stroke="#000000",this["stroke-width"]=h.DEFAULT_STROKE_WIDTH.toString(),this["stroke-dasharray"]=h.DEFAULT_STROKE_DASHARRAY},c.prototype.getDefaultInstance=function(){return c.defaultInstance},c.prototype.isDefaultStrokeDashArray=function(){return this["stroke-dasharray"]===h.DEFAULT_STROKE_DASHARRAY},c.prototype.resetStrokeDashArray=function(){this["stroke-dasharray"]=h.DEFAULT_STROKE_DASHARRAY},Object.defineProperty(c.prototype,"strokeWidthPx",{get:function(){return parseInt(this["stroke-width"])},enumerable:!1,configurable:!0}),c.defaultInstance=new c,c}(i);h.Style=e;var t,n=function(a){function c(){return a!==null&&a.apply(this,arguments)||this}return g(c,a),c.prototype.createInstance=function(){return new c},c.prototype.createDefaultProperties=function(){this.fill="#000000",this["font-family"]="Arial",this["font-size"]="10pt",this["font-weight"]="",this["font-style"]="",this["text-decoration"]="",this["text-anchor"]="middle"},c.prototype.getDefaultInstance=function(){return c.defaultInstance},c.prototype.getAlignment=function(){switch(this["text-anchor"]){case"left":return t.Left;case"right":return t.Right;default:return t.Center}},c.defaultInstance=new c,c}(i);h.TextStyle=n,function(a){a[a.Left=0]="Left",a[a.Right=1]="Right",a[a.Center=2]="Center"}(t=h.TextAlignment||(h.TextAlignment={}));var o=function(a){function c(f,m){var y=a.call(this)||this;return y._strokeWidthPx=f,y._strokeOffset=m,y}return g(c,a),c.prototype.createInstance=function(){return new c},c.prototype.createDefaultProperties=function(){},c.prototype.getDefaultInstance=function(){return n.defaultInstance},Object.defineProperty(c.prototype,"strokeWidthPx",{get:function(){return this._strokeWidthPx||0},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"strokeOffset",{get:function(){return this._strokeOffset||0},enumerable:!1,configurable:!0}),c.default1pxInstance=new c(1,.5),c.default1pxNegativeOffsetInstance=new c(1,-.5),c.default2pxInstance=new c(2),c}(e);h.StrokeStyle=o;var r=function(a){function c(f){var m=a.call(this)||this;return f&&Object.keys(f).forEach(function(y){return m[y]=f[y]}),m}return g(c,a),c.prototype.createInstance=function(){return new c},c.prototype.createDefaultProperties=function(){},c.prototype.getDefaultInstance=function(){return n.defaultInstance},c.defaultInstance=new c,c}(e);h.EmptyStyle=r},6214:(j,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.ReloadContentParameters=void 0;var d=function(){function u(){this.isEmpty=!0}return u.prototype.add=function(g,v,p){g!==void 0&&(this._dataKeys===void 0&&(this._dataKeys=[]),Array.isArray(g)?this._dataKeys=this._dataKeys.concat(g):this._dataKeys.push(g)),this._getData=this._getData||v,this._layoutParameters=this._layoutParameters||p,this.isEmpty=!1},u.prototype.clear=function(){this.isEmpty=!0,this._dataKeys=void 0,this._getData=void 0,this._layoutParameters=void 0},Object.defineProperty(u.prototype,"empty",{get:function(){return this.isEmpty},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"dataKeys",{get:function(){return this._dataKeys},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"getData",{get:function(){return this._getData},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"layoutParameters",{get:function(){return this._layoutParameters},enumerable:!1,configurable:!0}),u}();h.ReloadContentParameters=d},6557:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.AutoScrollController=void 0;var u=d(1114),g=d(6907),v=d(6353),p=d(8675),s=function(){function i(e,t,n,o){this.scroll=e,this.svgElement=t,this.view=n,this.dom=o,this.leftButtonPressed=!1,this.scrollDragging=!1,this.scrollTimer=-1,this.scrollBarWidth=g.DomUtils.getVerticalScrollBarWidth()}return i.prototype.onMouseMove=function(e,t){this.clearScrollTimer(),p.EventUtils.isLeftButtonPressed(e)||(this.leftButtonPressed=!1),this.canAutoScroll()&&this.changeScrollPosition(e,t,!1)},i.prototype.onMouseDown=function(e){this.leftButtonPressed=!!p.EventUtils.isLeftButtonPressed(e)},i.prototype.onMouseUp=function(e){this.clearScrollTimer(),this.leftButtonPressed=!1},i.prototype.onMouseEnter=function(e){var t=this;p.EventUtils.isLeftButtonPressed(e)&&setTimeout(function(){t.leftButtonPressed=!0},500)},i.prototype.onDragScrollStart=function(){this.scrollDragging=!0},i.prototype.onDragScrollEnd=function(){this.scrollDragging=!1},i.prototype.canAutoScroll=function(){return this.leftButtonPressed&&!this.scrollDragging},i.prototype.changeScrollPosition=function(e,t,n){var o=this,r=!1;if(!this.view.isAutoScrollLocked()){var a=this.scroll.getScrollContainer(),c=e.pageX-g.DomUtils.getAbsolutePositionX(a),f=e.pageY-g.DomUtils.getAbsolutePositionY(a),m=this.scroll.getSize(),y=new v.Size(parseFloat(this.svgElement.style.width),parseFloat(this.svgElement.style.height)),l=m.width;m.width<y.width&&(l-=this.scrollBarWidth);var P=m.height;m.height<y.height&&(P-=this.scrollBarWidth),c<=40?(this.dom.changeByFunc(null,function(){o.view.isAutoScrollLocked()||o.scroll.offsetScroll(-o.getScrollingOffset(c),0)}),r=!0):l-40<=c&&(this.dom.changeByFunc(null,function(){o.view.isAutoScrollLocked()||o.scroll.offsetScroll(o.getScrollingOffset(l-c),0)}),r=!0),f<=40?(this.dom.changeByFunc(null,function(){o.view.isAutoScrollLocked()||o.scroll.offsetScroll(0,-o.getScrollingOffset(f))}),r=!0):P-40<=f&&(this.dom.changeByFunc(null,function(){o.view.isAutoScrollLocked()||o.scroll.offsetScroll(0,o.getScrollingOffset(P-f))}),r=!0)}(r||this.view.isAutoScrollLocked())&&(this.scrollTimer=window.setTimeout(function(){return o.changeScrollPosition(e,t,r)},50)),n&&t()},i.prototype.clearScrollTimer=function(){this.scrollTimer>-1&&(window.clearTimeout(this.scrollTimer),this.scrollTimer=-1)},i.prototype.getScrollingOffset=function(e){var t=Math.pow((40-e)/5,2);return Math.round(Math.min(t,5))},i.createMainElement=function(e){var t=document.createElement("div");return t.setAttribute("class","dxdi-control"),e.appendChild(t),t},i.createSvgElement=function(e,t){t===void 0&&(t=!1);var n=document.createElementNS(u.svgNS,"svg");return n.className.baseVal="dxdi-canvas"+(t?" export":""),e.appendChild(n),n},i}();h.AutoScrollController=s},3872:function(j,h,d){var u,g=this&&this.__extends||(u=function(c,f){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,y){m.__proto__=y}||function(m,y){for(var l in y)y.hasOwnProperty(l)&&(m[l]=y[l])},u(c,f)},function(c,f){function m(){this.constructor=c}u(c,f),c.prototype=f===null?Object.create(f):(m.prototype=f.prototype,new m)}),v=this&&this.__awaiter||function(c,f,m,y){return new(m||(m=Promise))(function(l,P){function C(b){try{x(y.next(b))}catch(S){P(S)}}function I(b){try{x(y.throw(b))}catch(S){P(S)}}function x(b){var S;b.done?l(b.value):(S=b.value,S instanceof m?S:new m(function(w){w(S)})).then(C,I)}x((y=y.apply(c,f||[])).next())})},p=this&&this.__generator||function(c,f){var m,y,l,P,C={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return P={next:I(0),throw:I(1),return:I(2)},typeof Symbol=="function"&&(P[Symbol.iterator]=function(){return this}),P;function I(x){return function(b){return function(S){if(m)throw new TypeError("Generator is already executing.");for(;C;)try{if(m=1,y&&(l=2&S[0]?y.return:S[0]?y.throw||((l=y.return)&&l.call(y),0):y.next)&&!(l=l.call(y,S[1])).done)return l;switch(y=0,l&&(S=[2&S[0],l.value]),S[0]){case 0:case 1:l=S;break;case 4:return C.label++,{value:S[1],done:!1};case 5:C.label++,y=S[1],S=[0];continue;case 7:S=C.ops.pop(),C.trys.pop();continue;default:if(l=C.trys,!((l=l.length>0&&l[l.length-1])||S[0]!==6&&S[0]!==2)){C=0;continue}if(S[0]===3&&(!l||S[1]>l[0]&&S[1]<l[3])){C.label=S[1];break}if(S[0]===6&&C.label<l[1]){C.label=l[1],l=S;break}if(l&&C.label<l[2]){C.label=l[2],C.ops.push(S);break}l[2]&&C.ops.pop(),C.trys.pop();continue}S=f.call(c,C)}catch(w){S=[6,w],y=0}finally{m=l=0}if(5&S[0])throw S[1];return{value:S[0]?S[1]:void 0,done:!0}}([x,b])}}};Object.defineProperty(h,"__esModule",{value:!0}),h.CanvasExportManager=void 0;var s=d(9291),i=d(9279),e=d(3500),t=d(7716),n=d(1114),o=d(6078),r=d(13),a=function(c){function f(m,y,l){var P=c.call(this,1,new o.ExportDOMManipulator(y),l)||this;return P.itemsContainer=m,P}return g(f,c),f.prototype.getSvgImage=function(m,y,l,P){var C=n.RenderHelper.createSvgElement(void 0,!0),I=m.clone().applyConverter(s.UnitConverter.twipsToPixelsF).clone().applyConverter(Math.ceil);e.RenderUtils.updateSvgElementSize(C,I.width,I.height,!0),C.style.backgroundColor=r.ColorUtils.colorToHash(y),this.createTextFloodFilter(this.instanceId,void 0,C,y);var x=!l&&!i.Browser.IE&&this.getExportCssRules();if(x){var b=document.createElementNS(n.svgNS,"style");b.innerHTML=x,C.appendChild(b)}if(P){var S=document.createElementNS(n.svgNS,"rect");S.setAttributeNS(null,"x","0"),S.setAttributeNS(null,"y","0"),S.setAttributeNS(null,"height",I.height.toString()),S.setAttributeNS(null,"width",I.width.toString()),S.setAttributeNS(null,"fill",C.style.backgroundColor),C.appendChild(S)}for(var w=0;w<this.itemsContainer.childNodes.length;w++){var T=this.itemsContainer.childNodes[w].cloneNode(!0);x||this.inlineStyle(T,this.itemsContainer.childNodes[w]),C.appendChild(T)}return C},f.prototype.getSvgImageUrl=function(m,y,l){var P=this.getSvgImage(m,y,l,!1);return this.getSvgBase64String(P)},f.prototype.getSvgString=function(m){return new XMLSerializer().serializeToString(m)},f.prototype.getSvgBase64String=function(m){var y=this.getSvgString(m);return f.base64Start+this.getBase64EncodeUnicode(y)},f.prototype.getBase64EncodeUnicode=function(m){return btoa(encodeURIComponent(m).replace(/%([0-9A-F]{2})/g,function(y,l){return String.fromCharCode(parseInt("0x"+l,16))}))},f.prototype.getExportCssRules=function(){for(var m=0;m<document.styleSheets.length;m++){var y=this.getRules(document.styleSheets[m]);if(y){for(var l="",P=0;P<y.length;P++){var C=y[P],I=this.isCSSStyleRule(C)?C.selectorText:null;I&&this.checkSelector(I)&&(l+=C.cssText+`
`)}if(l.length>0)return`
`+l}}},f.prototype.checkSelector=function(m){for(var y=0;y<f.exportStyleRules.length;y++)if(m.indexOf(f.exportStyleRules[y])===0)return!0;return!1},f.prototype.getRules=function(m){try{return this.isCSSStyleSheet(m)?m.rules||m.cssRules:null}catch{}},f.prototype.isCSSStyleSheet=function(m){return m.rules!==void 0},f.prototype.isCSSStyleRule=function(m){return m.selectorText!==void 0},f.prototype.inlineStyle=function(m,y){for(var l=0;l<m.childNodes.length;l++){var P=m.childNodes[l];if(P.tagName){if(P.tagName==="g")this.inlineStyle(P,y.childNodes[l]);else if(P.style){var C=window.getComputedStyle(y.childNodes[l]);if(C!==void 0)for(var I=0;I<f.exportStyleAttributes.length;I++){var x=f.exportStyleAttributes[I];P.style.setProperty(x,C.getPropertyValue(x))}this.inlineStyle(P,y.childNodes[l])}}}},f.prototype.exportSvgImage=function(m,y,l){l(this.getSvgImageUrl(m,y,!0))},f.prototype.exportBinaryImage=function(m,y,l,P,C){var I=this.getAbsoluteSize(m).clone().applyConverter(Math.ceil),x=document.createElement("canvas");x.width=I.width,x.height=I.height;var b=x.getContext("2d");if(b.fillStyle=r.ColorUtils.colorToHash(y),b.fillRect(0,0,I.width,I.height),(C||i.Browser.IE)&&typeof canvg=="object")this.exportBinaryImageCanvgAsync(m,y,x,b,l).then(function(w){return P(w)});else if(i.Browser.IE&&typeof canvg=="function")this.exportBinaryImageCanvgOld(m,y,x,b,l,P);else{var S=new Image;S.width=I.width,S.height=I.height,S.setAttribute("crossOrigin","anonymous"),S.onload=function(){b.drawImage(S,0,0),P(x.toDataURL(l,1))},S.src=this.getSvgImageUrl(m,y,!0)}},f.prototype.exportBinaryImageCanvgOld=function(m,y,l,P,C,I){var x=this.getSvgImage(m,y,!0,!1),b=this.getSvgString(x);P.drawSvg(b,0,0,null,null,{renderCallback:function(){I(l.toDataURL(C,1))}})},f.prototype.exportBinaryImageCanvgAsync=function(m,y,l,P,C){return v(this,void 0,void 0,function(){var I,x;return p(this,function(b){switch(b.label){case 0:return I=this.getSvgImage(m,y,!0,!0),x=this.getSvgString(I),[4,canvg.Canvg.fromString(P,x).render()];case 1:return b.sent(),[2,l.toDataURL(C,1)]}})})},f.prototype.exportPngImage=function(m,y,l,P){this.exportBinaryImage(m,y,"image/png",l,P)},f.prototype.exportJpgImage=function(m,y,l,P){this.exportBinaryImage(m,y,"image/jpeg",l,P)},f.prototype.notifyModelChanged=function(m){},f.prototype.notifyPageColorChanged=function(m){},f.prototype.notifyPageSizeChanged=function(m,y){},f.base64Start="data:image/svg+xml;base64,",f.exportStyleRules=[".dxdi-canvas .shape ",".dxdi-canvas .connector ",".dxdi-canvas text",".dxdi-canvas.export"],f.exportStyleAttributes=["fill","stroke","stroke-width","stroke-linejoin","font-family","font-size","font-weight","font-style","text-decoration","text-anchor"],f}(t.CanvasManagerBase);h.CanvasExportManager=a},8693:function(j,h,d){var u,g=this&&this.__extends||(u=function(c,f){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,y){m.__proto__=y}||function(m,y){for(var l in y)y.hasOwnProperty(l)&&(m[l]=y[l])},u(c,f)},function(c,f){function m(){this.constructor=c}u(c,f),c.prototype=f===null?Object.create(f):(m.prototype=f.prototype,new m)});Object.defineProperty(h,"__esModule",{value:!0}),h.CanvasItemsManager=h.CONNECTOR_CAN_MOVE=h.NOT_VALID_CSSCLASS=void 0;var v=d(2004),p=d(6031),s=d(5329),i=d(3500),e=d(5503),t=d(7959),n=d(6907),o=d(916),r=d(4867);h.NOT_VALID_CSSCLASS="not-valid",h.CONNECTOR_CAN_MOVE="can-move";var a=function(c){function f(m,y,l,P){var C=c.call(this,y,l,P)||this;return C.itemSelectorGroupContainers={},C.itemSelectorElements={},C.itemGroupContainers={},C.itemElements={},C.itemChildElements={},C.primitives={},C.selectorPrimitives={},C.selectedItems={},C.initializeContainerElements(m),C}return g(f,c),f.prototype.initializeContainerElements=function(m){this.itemSelectorsContainer=this.createAndChangePrimitiveElement(new s.GroupPrimitive([],null),m),this.itemsContainer=this.createAndChangePrimitiveElement(new s.GroupPrimitive([],null),m)},f.prototype.clear=function(){this.primitives={},this.selectorPrimitives={},i.RenderUtils.removeContent(this.itemSelectorsContainer),i.RenderUtils.removeContent(this.itemsContainer),this.itemSelectorGroupContainers={},this.itemSelectorElements={},this.itemGroupContainers={},this.itemElements={},this.itemChildElements={},this.selectedItems={}},f.prototype.applyChange=function(m){var y=m.item;return!!this.getItemParent(y.zIndex,y.container&&y.container.key)&&(y instanceof e.Shape?this.applyShapeChange(y,m.type,m.isValid):y instanceof t.Connector&&this.applyConnectorChange(y,m.type,m.isValid),!0)},f.prototype.setPointerEventsNone=function(m,y){var l=m.style;l!==void 0&&l.pointerEvents!==void 0&&(l.pointerEvents=y?"none":"");for(var P=m.childNodes,C=0;C<P.length;C++)this.setPointerEventsNone(P[C],y)},f.prototype.notifyDragStart=function(m){var y=this;m.forEach(function(l){y.itemElements[l]&&y.setPointerEventsNone(y.itemElements[l],!0),y.itemChildElements[l]&&y.setPointerEventsNone(y.itemChildElements[l],!0),y.itemSelectorElements[l]&&y.setPointerEventsNone(y.itemSelectorElements[l],!0)})},f.prototype.notifyDragEnd=function(m){var y=this;m.forEach(function(l){y.itemElements[l]&&y.setPointerEventsNone(y.itemElements[l],!1),y.itemChildElements[l]&&y.setPointerEventsNone(y.itemChildElements[l],!1),y.itemSelectorElements[l]&&y.setPointerEventsNone(y.itemSelectorElements[l],!1)})},f.prototype.notifyDragScrollStart=function(){},f.prototype.notifyDragScrollEnd=function(){},f.prototype.notifyTextInputStart=function(m,y,l,P){var C=this.itemElements[m.key];n.DomUtils.addClassName(C,"text-input")},f.prototype.notifyTextInputEnd=function(m,y){var l=this.itemElements[m.key];n.DomUtils.removeClassName(l,"text-input")},f.prototype.notifyTextInputPermissionsCheck=function(m,y){var l=this.itemElements[m.key];y?n.DomUtils.removeClassName(l,h.NOT_VALID_CSSCLASS):n.DomUtils.addClassName(l,h.NOT_VALID_CSSCLASS)},f.prototype.notifyActualZoomChanged=function(m){var y="scale("+m+")";this.dom.changeByFunc(this.itemsContainer,function(l){return l.setAttribute("transform",y)}),this.dom.changeByFunc(this.itemSelectorsContainer,function(l){return l.setAttribute("transform",y)}),this.actualZoom=m},f.prototype.notifyViewAdjusted=function(m){},f.prototype.invalidatePrimitives=function(m){this.primitives[m.key]&&(this.primitives[m.key].forEach(function(y){y.dispose()}),delete this.primitives[m.key]),this.selectorPrimitives[m.key]&&(this.selectorPrimitives[m.key].forEach(function(y){y.dispose()}),delete this.selectorPrimitives[m.key])},f.prototype.getPrimitives=function(m,y){return this.primitives[m.key]||(this.primitives[m.key]=m.createPrimitives(y)),this.primitives[m.key]},f.prototype.getSelectorPrimitives=function(m){return this.selectorPrimitives[m.key]||(this.selectorPrimitives[m.key]=m.createSelectorPrimitives()),this.selectorPrimitives[m.key]},f.prototype.getShapeSelectorClassName=function(m){var y="shape";return m.enableChildren&&(y+=" container"),m.isLocked&&(y+=" locked"),y},f.prototype.getShapeClassName=function(m,y){var l=this.getShapeSelectorClassName(m);return y?l:l+" "+h.NOT_VALID_CSSCLASS},f.prototype.applyShapeChange=function(m,y,l){var P=m.key,C=m.container&&m.container.key,I=this.getItemSelectorGroupContainer(m.zIndex,C),x=this.getItemGroupContainer(m.zIndex,C),b=this.getShapeClassName(m,l);switch(y){case v.ItemChangeType.Create:this.itemSelectorElements[P]=this.createItemElements(P,this.getSelectorPrimitives(m),I,this.getShapeSelectorClassName(m),p.MouseEventElementType.Shape),this.itemElements[P]=this.createItemElements(P,this.getPrimitives(m,this.instanceId),x,b,p.MouseEventElementType.Shape),m.enableChildren&&(this.itemChildElements[P]=this.createItemElements(P,[],x,"container-children",p.MouseEventElementType.Undefined),this.changeItemChildrenVisibility(this.itemChildElements[P],m.expanded));break;case v.ItemChangeType.Remove:this.removeItemCustomContent(this.itemSelectorElements[P],this.getSelectorPrimitives(m)),this.removeItemCustomContent(this.itemElements[P],this.getPrimitives(m,this.instanceId)),this.invalidatePrimitives(m),this.removeItemElements(this.itemSelectorElements[P]),delete this.itemSelectorElements[P],this.removeItemElements(this.itemElements[P]),delete this.itemElements[P],this.itemChildElements[P]&&(this.removeItemElements(this.itemChildElements[P]),delete this.itemChildElements[P],delete this.itemGroupContainers[P],delete this.itemSelectorGroupContainers[P]);break;case v.ItemChangeType.UpdateStructure:case v.ItemChangeType.UpdateProperties:case v.ItemChangeType.Update:y!==v.ItemChangeType.Update&&(y===v.ItemChangeType.UpdateStructure&&(this.removeItemCustomContent(this.itemSelectorElements[P],this.getSelectorPrimitives(m)),this.removeItemCustomContent(this.itemElements[P],this.getPrimitives(m,this.instanceId))),this.invalidatePrimitives(m)),this.changeItemElements(this.getSelectorPrimitives(m),this.itemSelectorElements[P],y===v.ItemChangeType.UpdateStructure),this.changeItemElements(this.getPrimitives(m,this.instanceId),this.itemElements[P],y===v.ItemChangeType.UpdateStructure),this.changeItemClassName(this.itemElements[P],b),this.itemChildElements[P]&&this.changeItemChildrenVisibility(this.itemChildElements[P],m.expanded),I!==(this.itemSelectorElements[P]&&this.itemSelectorElements[P].parentNode)&&this.moveItemElements(I,this.itemSelectorElements[P]),x!==(this.itemElements[P]&&this.itemElements[P].parentNode)&&this.moveItemElements(x,this.itemElements[P]),this.itemChildElements[P]&&x!==this.itemChildElements[P].parentNode&&this.moveItemElements(x,this.itemChildElements[P]);break;case v.ItemChangeType.UpdateClassName:this.changeItemClassName(this.itemElements[P],b)}},f.prototype.getConnectorSelectorClassName=function(m){var y="connector";return r.ModelUtils.canMoveConnector(this.selectedItems,m)?y+" "+h.CONNECTOR_CAN_MOVE:y},f.prototype.getConnectorClassName=function(m,y){var l=this.getConnectorSelectorClassName(m);return y?l:l+" "+h.NOT_VALID_CSSCLASS},f.prototype.applyConnectorChange=function(m,y,l){var P=m.key,C=m.container&&m.container.key,I=this.getItemSelectorGroupContainer(m.zIndex,C),x=this.getItemGroupContainer(m.zIndex,C),b=this.getConnectorClassName(m,l);switch(y){case v.ItemChangeType.Create:this.itemSelectorElements[P]=this.createItemElements(P,this.getSelectorPrimitives(m),I,this.getConnectorSelectorClassName(m),p.MouseEventElementType.Connector),this.itemElements[P]=this.createItemElements(P,this.getPrimitives(m,this.instanceId),x,b,p.MouseEventElementType.Connector);break;case v.ItemChangeType.Remove:this.removeItemCustomContent(this.itemSelectorElements[P],this.getSelectorPrimitives(m)),this.removeItemCustomContent(this.itemElements[P],this.getPrimitives(m,this.instanceId)),this.invalidatePrimitives(m),this.removeItemElements(this.itemSelectorElements[P]),delete this.itemSelectorElements[P],this.removeItemElements(this.itemElements[P]),delete this.itemElements[P];break;case v.ItemChangeType.UpdateStructure:case v.ItemChangeType.UpdateProperties:case v.ItemChangeType.Update:y!==v.ItemChangeType.Update&&(y===v.ItemChangeType.UpdateStructure&&(this.removeItemCustomContent(this.itemSelectorElements[P],this.getSelectorPrimitives(m)),this.removeItemCustomContent(this.itemElements[P],this.getPrimitives(m,this.instanceId))),this.invalidatePrimitives(m)),this.changeItemElements(this.getSelectorPrimitives(m),this.itemSelectorElements[P],y===v.ItemChangeType.UpdateStructure),this.changeItemClassName(this.itemSelectorElements[P],this.getConnectorSelectorClassName(m)),this.changeItemElements(this.getPrimitives(m,this.instanceId),this.itemElements[P],y===v.ItemChangeType.UpdateStructure),this.changeItemClassName(this.itemElements[P],b),I!==(this.itemSelectorElements[P]&&this.itemSelectorElements[P].parentNode)&&this.moveItemElements(I,this.itemSelectorElements[P]),x!==(this.itemElements[P]&&this.itemElements[P].parentNode)&&this.moveItemElements(x,this.itemElements[P]);break;case v.ItemChangeType.UpdateClassName:this.changeItemClassName(this.itemSelectorElements[P],this.getConnectorSelectorClassName(m)),this.changeItemClassName(this.itemElements[P],b)}},f.prototype.createItemElements=function(m,y,l,P,C){var I=this.createAndChangePrimitiveElement(new s.GroupPrimitive([],P,void 0,void 0,function(x){return i.RenderUtils.setElementEventData(x,C,m)}),l);return this.createAndChangePrimitivesElements(y,I),I},f.prototype.changeItemElements=function(m,y,l){l||m.length!==y.childNodes.length?(i.RenderUtils.removeContent(y),this.createAndChangePrimitivesElements(m,y)):this.dom.changeChildrenByPrimitives(m,y)},f.prototype.changeItemClassName=function(m,y){y&&m&&this.changePrimitiveElement(new s.GroupPrimitive([],y),m)},f.prototype.removeItemElements=function(m){m&&m.parentNode&&m.parentNode.removeChild(m)},f.prototype.removeItemCustomContent=function(m,y){m&&y&&y.length===m.childNodes.length&&y.forEach(function(l,P){l.destroyCustomContent(m.childNodes[P])})},f.prototype.moveItemElements=function(m,y,l){y&&m&&(l?m.insertBefore(y,l):m.appendChild(y))},f.prototype.changeItemChildrenVisibility=function(m,y){m.style.display=y?"":"none"},f.prototype.getItemGroupContainerKey=function(m,y){return y!==void 0?m+"_"+y:m.toString()},f.prototype.getItemGroupContainer=function(m,y){var l=y!==void 0?this.getItemParent(m,y):this.itemsContainer,P=y||"Main";if(this.itemGroupContainers[P]===void 0||this.itemGroupContainers[P][m]===void 0){this.itemGroupContainers[P]===void 0&&(this.itemGroupContainers[P]=[]);var C=Object.keys(this.itemGroupContainers[P]).map(function(I){return+I}).sort().filter(function(I){return I>m})[0];this.itemGroupContainers[P][m]=this.createAndChangePrimitiveElement(new s.GroupPrimitive([],null,m),l,this.itemGroupContainers[P][C])}return this.itemGroupContainers[P][m]},f.prototype.getItemSelectorGroupContainer=function(m,y){var l=y!==void 0?this.getItemSelectorParent(m,y):this.itemSelectorsContainer,P=y||"Main";if(this.itemSelectorGroupContainers[P]===void 0||this.itemSelectorGroupContainers[P][m]===void 0){this.itemSelectorGroupContainers[P]===void 0&&(this.itemSelectorGroupContainers[P]=[]);var C=Object.keys(this.itemSelectorGroupContainers[P]).map(function(I){return+I}).sort().filter(function(I){return I>m})[0];this.itemSelectorGroupContainers[P][m]=this.createAndChangePrimitiveElement(new s.GroupPrimitive([],null,m),l,this.itemSelectorGroupContainers[P][C])}return this.itemSelectorGroupContainers[P][m]},f.prototype.getItemParent=function(m,y){return y!==void 0?this.itemChildElements[y]:this.getItemGroupContainer(m)},f.prototype.getItemSelectorParent=function(m,y){return y!==void 0?this.itemChildElements[y]:this.getItemSelectorGroupContainer(m)},f.prototype.notifySelectionChanged=function(m){var y=this,l=r.ModelUtils.createSelectedItems(m),P=[];this.populateItems(P,l,this.selectedItems),this.populateItems(P,this.selectedItems,l),this.selectedItems=l,P.forEach(function(C){C instanceof t.Connector&&y.applyOrPostponeChanges([new v.ItemChange(C,v.ItemChangeType.UpdateClassName,!0)])})},f.prototype.populateItems=function(m,y,l){Object.keys(y).forEach(function(P){l[P]||m.push(y[P])})},f}(o.CanvasManager);h.CanvasItemsManager=a},916:function(j,h,d){var u,g=this&&this.__extends||(u=function(s,i){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},u(s,i)},function(s,i){function e(){this.constructor=s}u(s,i),s.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)});Object.defineProperty(h,"__esModule",{value:!0}),h.CanvasManager=void 0;var v=d(2004),p=function(s){function i(){var e=s!==null&&s.apply(this,arguments)||this;return e.pendingChanges={},e.pendingRemoveChanges={},e.updatesLock=0,e}return g(i,s),i.prototype.beginUpdate=function(){this.updatesLock++},i.prototype.endUpdate=function(){this.updatesLock--,this.updatesLock===0&&this.applyPendingChanges()},i.prototype.getPendingChanges=function(){var e=this;return Object.keys(this.pendingChanges).map(function(t){return e.pendingChanges[t]})},i.prototype.getPendingRemoveChanges=function(){var e=this;return Object.keys(this.pendingRemoveChanges).map(function(t){return e.pendingRemoveChanges[t]})},i.prototype.applyPendingChanges=function(){var e=this.getPendingRemoveChanges();e.length&&(this.applyChangesCore(e),this.pendingRemoveChanges={});var t=this.getPendingChanges();t.length&&(this.applyChangesCore(t),this.pendingChanges={})},i.prototype.applyChangesCore=function(e){var t=this,n=[];e.forEach(function(o){t.applyChange(o)||n.push(o)}),n.length&&n.length!==e.length&&this.applyChangesCore(n)},i.prototype.postponeChanges=function(e){var t=this;e.forEach(function(n){if(n.type===v.ItemChangeType.Remove)t.pendingRemoveChanges[n.key]=n,delete t.pendingChanges[n.key];else if(t.pendingChanges[n.key])n.type===v.ItemChangeType.Create?t.pendingChanges[n.key]=n:n.type===v.ItemChangeType.UpdateStructure?t.pendingChanges[n.key].type===v.ItemChangeType.UpdateProperties&&(t.pendingChanges[n.key]=n):n.type===v.ItemChangeType.UpdateProperties?t.pendingChanges[n.key].type===v.ItemChangeType.Update&&(t.pendingChanges[n.key]=n):n.type===v.ItemChangeType.UpdateClassName&&t.pendingChanges[n.key].type===v.ItemChangeType.UpdateClassName&&(t.pendingChanges[n.key]=n);else{if(t.pendingRemoveChanges[n.key]&&n.type!==v.ItemChangeType.Create)throw new Error("Incorrect model changes sequence.");t.pendingChanges[n.key]=n}})},i.prototype.applyOrPostponeChanges=function(e){this.updatesLock===0?this.applyChangesCore(e):this.postponeChanges(e)},i.prototype.notifyModelChanged=function(e){this.applyOrPostponeChanges(e)},i.prototype.notifyPageColorChanged=function(e){},i.prototype.notifyPageSizeChanged=function(e,t){},i}(d(7716).CanvasManagerBase);h.CanvasManager=p},7716:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.CanvasManagerBase=h.PAGE_BG_TEXTFLOOR_FILTER_IDPREFIX=void 0;var u=d(3360),g=d(9291);h.PAGE_BG_TEXTFLOOR_FILTER_IDPREFIX="page-text-flood";var v=function(){function p(s,i,e){this.elements={},this.instanceId=e,this.actualZoom=s,this.dom=i}return p.prototype.createAndChangePrimitivesElements=function(s,i){var e=this;s.forEach(function(t){e.createAndChangePrimitiveElement(t,i)})},p.prototype.createPrimitiveElement=function(s,i,e){return this.dom.createElement(s,i,e)},p.prototype.createAndChangePrimitiveElement=function(s,i,e){var t=this.createPrimitiveElement(s,i,e);return this.dom.changeByPrimitive(t,s),t},p.prototype.changePrimitiveElement=function(s,i){this.dom.changeByPrimitive(i,s)},p.prototype.getOrCreateElement=function(s,i,e,t){var n=s&&this.elements[s]||(this.elements[s]=this.createPrimitiveElement(i,e,t));return this.changePrimitiveElement(i,n),n},p.prototype.createTextFloodFilter=function(s,i,e,t){this.getOrCreateElement(i,new u.TextFloodFilterPrimitive(h.PAGE_BG_TEXTFLOOR_FILTER_IDPREFIX+s,t),e)},p.prototype.getAbsoluteSize=function(s){return s.clone().applyConverter(g.UnitConverter.twipsToPixelsF).clone().multiply(this.actualZoom,this.actualZoom)},p}();h.CanvasManagerBase=v},6043:function(j,h,d){var u,g=this&&this.__extends||(u=function(m,y){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,P){l.__proto__=P}||function(l,P){for(var C in P)P.hasOwnProperty(C)&&(l[C]=P[C])},u(m,y)},function(m,y){function l(){this.constructor=m}u(m,y),m.prototype=y===null?Object.create(y):(l.prototype=y.prototype,new l)});Object.defineProperty(h,"__esModule",{value:!0}),h.CanvasPageManager=void 0;var v=d(1552),p=d(4716),s=d(7724),i=d(1932),e=d(4593),t=d(7716),n=d(6353),o=d(8900),r=d(3500),a=d(13),c=d(9291),f=function(m){function y(l,P,C,I){var x=m.call(this,P.zoomLevel,C,I)||this;return x.snapPoint=new o.Point(0,0),x.gridPatternId=r.RenderUtils.generateSvgElementId("gridPattern"),x.pagesGridPatternId=r.RenderUtils.generateSvgElementId("pagesGridPattern"),x.pagesGridClipId=r.RenderUtils.generateSvgElementId("pagesGridClip"),x.pageColor=P.pageColor,x.modelSize=P.modelSize,x.simpleView=P.simpleView,x.gridSize=P.gridSize,x.gridVisible=P.gridVisible,x.pageSize=P.pageLandscape?new n.Size(P.pageSize.height,P.pageSize.width):P.pageSize,x.canvasViewOffset=new o.Point(0,0),x.initContainers(l),x}return g(y,m),y.prototype.initContainers=function(l){this.backgroundContainer=l},y.prototype.redraw=function(){this.redrawPage(this.pageColor),this.redrawGrid()},y.prototype.redrawPage=function(l){var P=new v.Style;P.fill=a.ColorUtils.colorToHash(l),this.getOrCreateElement("page-bg",new p.RectanglePrimitive(0,0,"100%","100%",P,"page"),this.backgroundContainer),this.createTextFloodFilter(this.instanceId,"page-bg-textflood-filter",this.backgroundContainer,l)},y.prototype.redrawGrid=function(){this.updateGridElements(),this.updatePagesGridElements()},y.prototype.getGridRectElement=function(l){return this.gridRectElement===void 0&&(this.gridRectElement=this.createPrimitiveElement(l,this.backgroundContainer)),this.gridRectElement},y.prototype.getGridPatternElement=function(l){return this.gridPatternElement===void 0&&(this.gridPatternElement=this.createPrimitiveElement(l,this.backgroundContainer)),this.gridPatternElement},y.prototype.updateGridElements=function(){var l=this,P=new p.RectanglePrimitive("0","0","100%","100%",null,"grid",null,function(A){A.style.setProperty("fill",r.RenderUtils.getUrlPathById(l.gridPatternId))}),C=this.getGridRectElement(P);if(this.gridVisible){C.style.display="",this.changePrimitiveElement(P,C);for(var I=c.UnitConverter.twipsToPixelsF(this.gridSize)*this.actualZoom,x=[0,1,2,3,4].map(function(A){return Math.round(I*A)}),b=[new s.PathPrimitiveMoveToCommand(x[4].toString(),"0"),new s.PathPrimitiveLineToCommand(x[4].toString(),x[4].toString()),new s.PathPrimitiveLineToCommand("0",x[4].toString())],S=[],w=1;w<=3;w++)S.push(new s.PathPrimitiveMoveToCommand(x[w].toString(),"0")),S.push(new s.PathPrimitiveLineToCommand(x[w].toString(),x[4].toString()));for(w=1;w<=3;w++)S.push(new s.PathPrimitiveMoveToCommand("0",x[w].toString())),S.push(new s.PathPrimitiveLineToCommand(x[4].toString(),x[w].toString()));var T=4*I,_=this.simpleView?this.canvasViewOffset:o.Point.zero(),M=new i.PatternPrimitive(this.gridPatternId,[this.createGridPathPrimitive(b,"grid-outer-line"),this.createGridPathPrimitive(S,"grid-inner-line")],this.createGridPatternPrimitivePosition(_.x,this.snapPoint.x,T),this.createGridPatternPrimitivePosition(_.y,this.snapPoint.y,T),T.toString(),T.toString());this.changePrimitiveElement(M,this.getGridPatternElement(M))}else C.style.display="none"},y.prototype.createGridPatternPrimitivePosition=function(l,P,C){return(((l+P*this.actualZoom)%C-C)%C).toString()},y.prototype.createGridPathPrimitive=function(l,P){return new s.PathPrimitive(l,v.StrokeStyle.default1pxNegativeOffsetInstance,P)},y.prototype.getPagesGridRectElement=function(l){return this.getOrCreateElement("grid-pages-rect",l,this.backgroundContainer)},y.prototype.getPagesGridClipPathElement=function(l){return this.pagesGridClipPathElement===void 0&&(this.pagesGridClipPathElement=this.createPrimitiveElement(l,this.backgroundContainer)),this.pagesGridClipPathElement},y.prototype.getPagesGridPatternElement=function(l){return this.pagesGridPatternElement===void 0&&(this.pagesGridPatternElement=this.createPrimitiveElement(l,this.backgroundContainer)),this.pagesGridPatternElement},y.prototype.updatePagesGridElements=function(){var l=this,P=this.getAbsoluteSize(this.pageSize),C=new p.RectanglePrimitive("0","0","100%","100%",null,"grid-page",this.pagesGridClipId,function(w){w.style.setProperty("fill",r.RenderUtils.getUrlPathById(l.pagesGridPatternId)),w.style.setProperty("display",l.simpleView?"none":"")});if(this.getPagesGridRectElement(C),!this.simpleView){var I=this.modelSize.clone().multiply(this.actualZoom,this.actualZoom),x=[new s.PathPrimitiveMoveToCommand((P.width-1).toString(),"0"),new s.PathPrimitiveLineToCommand((P.width-1).toString(),(P.height-1).toString()),new s.PathPrimitiveLineToCommand("0",(P.height-1).toString())],b=new i.PatternPrimitive(this.pagesGridPatternId,[new s.PathPrimitive(x,null,"pages-grid-line")],0,0,P.width.toString(),P.height.toString());this.changePrimitiveElement(b,this.getPagesGridPatternElement(b));var S=new e.ClipPathPrimitive(this.pagesGridClipId,[new p.RectanglePrimitive(0,0,(c.UnitConverter.twipsToPixelsF(I.width)-4).toString(),(c.UnitConverter.twipsToPixelsF(I.height)-4).toString())]);this.changePrimitiveElement(S,this.getPagesGridClipPathElement(S))}},y.prototype.notifyModelSizeChanged=function(l,P){this.modelSize=l.clone(),this.redraw()},y.prototype.notifyModelRectangleChanged=function(l){},y.prototype.notifySnapPointPositionChanged=function(l){this.snapPoint=l.clone().applyConverter(c.UnitConverter.twipsToPixelsF),this.redrawGrid()},y.prototype.notifyPageColorChanged=function(l){this.pageColor=l,this.redrawPage(this.pageColor)},y.prototype.notifyModelChanged=function(l){},y.prototype.notifyPageSizeChanged=function(l,P){this.pageSize=P?new n.Size(l.height,l.width):l.clone(),this.redraw()},y.prototype.notifyActualZoomChanged=function(l){this.actualZoom=l,this.redraw()},y.prototype.notifyViewAdjusted=function(l){this.canvasViewOffset.equals(l)||(this.canvasViewOffset=l,this.simpleView&&this.redraw())},y.prototype.notifyViewChanged=function(l){this.simpleView=l,this.redraw()},y.prototype.notifyGridChanged=function(l,P){this.gridVisible=l,this.gridSize=P,this.redraw()},y}(t.CanvasManagerBase);h.CanvasPageManager=f},4e3:function(j,h,d){var u,g=this&&this.__extends||(u=function(H,L){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,K){D.__proto__=K}||function(D,K){for(var F in K)K.hasOwnProperty(F)&&(D[F]=K[F])},u(H,L)},function(H,L){function D(){this.constructor=H}u(H,L),H.prototype=L===null?Object.create(L):(D.prototype=L.prototype,new D)});Object.defineProperty(h,"__esModule",{value:!0}),h.CanvasSelectionManager=h.ACTIVE_SELECTION_CSSCLASS=h.SELECTION_ELEMENT_CLASSNAMES=void 0;var v=d(7716),p=d(5329),s=d(3500),i=d(6031),e=d(3742),t=d(8675),n=d(8900),o=d(371),r=d(5503),a=d(7959),c=d(4612),f=d(4716),m=d(7724),y=d(9416),l=d(418),P=d(1552),C=d(9291),I=d(4246),x=d(9279),b=d(6907),S=d(8693),w=d(916),T=d(5596),_=d(8679),M=d(4867),A="-1";h.SELECTION_ELEMENT_CLASSNAMES={SELECTION_RECTANGLE:"selection-rect",CONNECTION_POINT:"connection-point",ACTIVE:"active",CONTAINER_TARGET:"container-target",CONNECTION_TARGET:"connection-target",EXTENSION_LINE:"extension-line",CONNECTION_MARK:"connection-mark",SELECTION_MARK:"selection-mark",LOCKED_SELECTION_MARK:"locked-selection-mark",ITEMS_SELECTION_RECT:"items-selection-rect",CONNECTOR_MULTI_SELECTION:"connector-multi-selection",CONNECTOR_SELECTION:"connector-selection",CONNECTOR_POINT_MARK:"connector-point-mark",CONNECTOR_SELECTION_MASK:"connector-selection-mask",CONNECTOR_SIDE_MARK:"connector-side-mark",ITEM_SELECTION_RECT:"item-selection-rect",ITEM_MULTI_SELECTION:"item-multi-selection-rect"},h.ACTIVE_SELECTION_CSSCLASS="dxdi-active-selection";var E=function(H){function L(D,K,F,q,ee){var Q=H.call(this,K,q,ee)||this;return Q.readOnly=F,Q.connectionPointElements=[],Q.extensionLineElements=[],Q.selectionMap={},Q.parentContainer=D,Q.initializeContainerElements(D),Q}return g(L,H),L.prototype.initializeContainerElements=function(D){this.itemSelectionContainer=this.createAndChangePrimitiveElement(new p.GroupPrimitive([],null),D),this.visualizersContainer=this.createAndChangePrimitiveElement(new p.GroupPrimitive([],null),D),this.selectionMarksContainer=this.createAndChangePrimitiveElement(new p.GroupPrimitive([],null),D)},L.prototype.clear=function(){s.RenderUtils.removeContent(this.itemSelectionContainer),s.RenderUtils.removeContent(this.selectionMarksContainer),s.RenderUtils.removeContent(this.visualizersContainer),this.selectionRectElement=void 0,this.resizeInfoElement=void 0,this.connectionPointElements=[],this.connectionTargetElement=void 0,this.containerTargetElement=void 0,this.extensionLineElements=[],this.selectionMap={}},L.prototype.showSelectionRect=function(D){b.DomUtils.addClassName(this.parentContainer,h.ACTIVE_SELECTION_CSSCLASS);var K=new f.RectanglePrimitive(D.x,D.y,D.width,D.height,P.StrokeStyle.default1pxInstance,h.SELECTION_ELEMENT_CLASSNAMES.SELECTION_RECTANGLE),F=this.getSelectionRectElement(K);this.changePrimitiveElement(K,F)},L.prototype.hideSelectionRect=function(){b.DomUtils.removeClassName(this.parentContainer,h.ACTIVE_SELECTION_CSSCLASS),this.selectionRectElement!==void 0&&this.dom.changeByFunc(this.selectionRectElement,function(D){return D.style.display="none"})},L.prototype.getSelectionRectElement=function(D){return this.selectionRectElement!==void 0?this.dom.changeByFunc(this.selectionRectElement,function(K){return K.style.display=""}):this.selectionRectElement=this.createPrimitiveElement(D,this.visualizersContainer),this.selectionRectElement},L.prototype.showResizeInfo=function(D,K){var F=new f.RectanglePrimitive(D.x,D.y,0,0,P.StrokeStyle.default1pxInstance),q=new p.GroupPrimitive([F,new y.TextPrimitive(D.x,D.y,K,I.TextOwner.Resize)],"resize-info"),ee=this.getResizeInfoElement(q);this.changePrimitiveElement(q,ee);var Q=this.dom.measurer.measureTextLine(K,null,I.TextOwner.Resize).applyConverter(C.UnitConverter.pixelsToTwips);F.width=Q.width+2*L.resizeInfoTextOffset,F.height=Q.height+2*L.resizeInfoTextOffset,F.x=D.x-Q.width/2-L.resizeInfoTextOffset,F.y=D.y-Q.height/2-L.resizeInfoTextOffset,this.changePrimitiveElement(q,ee)},L.prototype.hideResizeInfo=function(){this.resizeInfoElement!==void 0&&this.dom.changeByFunc(this.resizeInfoElement,function(D){return D.style.display="none"})},L.prototype.getResizeInfoElement=function(D){return this.resizeInfoElement!==void 0?this.dom.changeByFunc(this.resizeInfoElement,function(K){return K.style.display=""}):this.resizeInfoElement=this.createPrimitiveElement(D,this.visualizersContainer),this.resizeInfoElement},L.prototype.getConnectionPointClassName=function(D,K){var F=h.SELECTION_ELEMENT_CLASSNAMES.CONNECTION_POINT;return D&&(F+=" "+h.SELECTION_ELEMENT_CLASSNAMES.ACTIVE),K||(F+=" "+S.NOT_VALID_CSSCLASS),F},L.prototype.showConnectionPoint=function(D,K,F,q,ee,Q){this.showConnectionPointCore(2*D,K.x,K.y,L.connectionPointLargeSize,L.connectionPointLargeSize,i.MouseEventElementType.ShapeConnectionPoint,F,q,h.SELECTION_ELEMENT_CLASSNAMES.CONNECTION_POINT+" selector"+(Q?"":" "+S.NOT_VALID_CSSCLASS)),this.showConnectionPointCore(2*D+1,K.x,K.y,L.connectionPointSmallSize,L.connectionPointSmallSize,i.MouseEventElementType.ShapeConnectionPoint,F,q,this.getConnectionPointClassName(ee,Q))},L.prototype.showConnectionPointCore=function(D,K,F,q,ee,Q,X,z,B){var k=new l.EllipsePrimitive(K,F,q,ee,null,B,function(G){return s.RenderUtils.setElementEventData(G,Q,X,z)}),W=this.getConnectionPointElement(k,D);this.changePrimitiveElement(k,W)},L.prototype.hideConnectionPoints=function(){for(var D=0;D<this.connectionPointElements.length;D++)this.dom.changeByFunc(this.connectionPointElements[D],function(K){return K.style.display="none"})},L.prototype.getConnectionPointElement=function(D,K){var F=this.connectionPointElements[K];return F!==void 0?this.dom.changeByFunc(F,function(q){return q.style.display=""}):(F=this.createPrimitiveElement(D,this.visualizersContainer),this.connectionPointElements[K]=F),F},L.prototype.showContainerTarget=function(D,K){var F=new f.RectanglePrimitive(K.x,K.y,K.width,K.height,null,h.SELECTION_ELEMENT_CLASSNAMES.CONTAINER_TARGET),q=this.getContainerTargetElement(F);this.changePrimitiveElement(F,q)},L.prototype.hideContainerTarget=function(){this.containerTargetElement&&this.dom.changeByFunc(this.containerTargetElement,function(D){return D.style.display="none"})},L.prototype.getContainerTargetElement=function(D){return this.containerTargetElement!==void 0?this.dom.changeByFunc(this.containerTargetElement,function(K){return K.style.display=""}):this.containerTargetElement=this.createPrimitiveElement(D,this.itemSelectionContainer),this.containerTargetElement},L.prototype.showConnectionTarget=function(D,K){var F=new f.RectanglePrimitive(K.x,K.y,K.width,K.height,null,h.SELECTION_ELEMENT_CLASSNAMES.CONNECTION_TARGET),q=this.getConnectionTargetElement(F);this.changePrimitiveElement(F,q)},L.prototype.hideConnectionTarget=function(){this.connectionTargetElement&&this.dom.changeByFunc(this.connectionTargetElement,function(D){return D.style.display="none"})},L.prototype.getConnectionTargetElement=function(D){return this.connectionTargetElement!==void 0?this.dom.changeByFunc(this.connectionTargetElement,function(K){return K.style.display=""}):this.connectionTargetElement=this.createPrimitiveElement(D,this.itemSelectionContainer),this.connectionTargetElement},L.prototype.showExtensionLine=function(D,K,F,q,ee){var Q=h.SELECTION_ELEMENT_CLASSNAMES.EXTENSION_LINE;K!==o.ExtensionLineType.VerticalCenterAfter&&K!==o.ExtensionLineType.VerticalCenterBefore&&K!==o.ExtensionLineType.HorizontalCenterAbove&&K!==o.ExtensionLineType.HorizontalCenterBelow||(Q+=" center"),K!==o.ExtensionLineType.VerticalCenterToPageCenter&&K!==o.ExtensionLineType.HorizontalCenterToPageCenter&&K!==o.ExtensionLineType.LeftToPageCenter&&K!==o.ExtensionLineType.RightToPageCenter&&K!==o.ExtensionLineType.TopToPageCenter&&K!==o.ExtensionLineType.BottomToPageCenter||(Q+=" page");var X=0,z=0,B=0,k=0,W=0,G=0,Y=0,J=0;F.y===q.y?(X=F.x-L.extensionLineWidth,z=F.y-L.extensionLineEndingSize,B=F.x-L.extensionLineWidth,k=F.y+L.extensionLineEndingSize,W=q.x-L.extensionLineWidth,G=F.y-L.extensionLineEndingSize,Y=q.x-L.extensionLineWidth,J=F.y+L.extensionLineEndingSize):F.x===q.x&&(X=F.x-L.extensionLineEndingSize,z=F.y-L.extensionLineWidth,B=F.x+L.extensionLineEndingSize,k=F.y-L.extensionLineWidth,W=F.x-L.extensionLineEndingSize,G=q.y-L.extensionLineWidth,Y=F.x+L.extensionLineEndingSize,J=q.y-L.extensionLineWidth);var $=0,te=0;K!==o.ExtensionLineType.RightToRightAbove&&K!==o.ExtensionLineType.RightToRightBelow||($-=L.extensionLineWidth),K!==o.ExtensionLineType.BottomToBottomAfter&&K!==o.ExtensionLineType.BottomToBottomBefore||(te-=L.extensionLineWidth);var oe=[new m.PathPrimitive([m.PathPrimitiveMoveToCommand.fromPoint(F.clone().offset($,te)),m.PathPrimitiveLineToCommand.fromPoint(q.clone().offset($,te))],P.StrokeStyle.default1pxInstance,"size-line"),new m.PathPrimitive([new m.PathPrimitiveMoveToCommand(X,z),new m.PathPrimitiveLineToCommand(B,k),new m.PathPrimitiveMoveToCommand(W,G),new m.PathPrimitiveLineToCommand(Y,J)],P.StrokeStyle.default1pxInstance),new y.TextPrimitive((q.x+F.x)/2,(q.y+F.y)/2,ee,I.TextOwner.ExtensionLine,void 0,void 0,void 0,null,void 0,null,v.PAGE_BG_TEXTFLOOR_FILTER_IDPREFIX+this.instanceId)],re=new p.GroupPrimitive(oe,Q),ie=this.getExtensionLineElement(re,D);this.changePrimitiveElement(re,ie)},L.prototype.hideExtensionLines=function(){for(var D=0;D<this.extensionLineElements.length;D++)this.extensionLineElements[D]&&this.dom.changeByFunc(this.extensionLineElements[D],function(K){return K.style.display="none"})},L.prototype.getExtensionLineElement=function(D,K){var F=this.extensionLineElements[K];return F!==void 0?this.dom.changeByFunc(F,function(q){return q.style.display=""}):(F=this.createPrimitiveElement(D,this.visualizersContainer),this.extensionLineElements[K]=F),F},L.prototype.getOrCreateShapeSelection=function(D,K){var F=this.selectionMap[D.key];return F||(F=new N(this.itemSelectionContainer,this.selectionMarksContainer,this.actualZoom,this.readOnly,this.dom,D.key,D.isLocked,D.rectangle,D.style,D.allowResizeHorizontally,D.allowResizeVertically,D.description.getParameterPoints(D)),this.selectionMap[D.key]=F),K&&(K[D.key]=!0),F},L.prototype.getOrCreateConnectorSelection=function(D,K){var F=this.selectionMap[D.key],q=D.getRenderPoints(!0),ee=D.getRenderPoints(!1);return F||(F=new V(this.itemSelectionContainer,this.selectionMarksContainer,this.actualZoom,this.readOnly,this.dom,D.key,D.isLocked,D.rectangle,q,D.style,D.styleText,D.enableText,D.texts.map(function(Q){var X=t.GeometryUtils.getPathPointByPosition(ee,Q.position);return{text:D.getText(Q.position),point:X[0],pointIndex:X[1],pos:Q.position}}).sort(function(Q,X){return Q.pos-X.pos}),D.points,D.properties.lineOption),this.selectionMap[D.key]=F),K&&(K[D.key]=!0),F},L.prototype.getOrCreateMultipleSelection=function(D){var K=this.selectionMap[A];return K||(K=new O(this.itemSelectionContainer,this.selectionMarksContainer,this.actualZoom,this.readOnly,this.dom),this.selectionMap[A]=K),D[A]=!0,K},L.prototype.getMultipleSelection=function(){return this.selectionMap[A]},L.prototype.updateShapeSelection=function(D,K){D.key in this.selectionMap&&(this.getOrCreateShapeSelection(D).onModelChanged(D.isLocked,D.rectangle,D.style,D.allowResizeHorizontally,D.allowResizeVertically,D.description.getParameterPoints(D)),K&&K.onModelItemChanged(D.key,D.rectangle))},L.prototype.updateConnectorSelection=function(D,K){if(D.key in this.selectionMap){var F=D.getRenderPoints(!0),q=D.getRenderPoints(!1);this.getOrCreateConnectorSelection(D).onModelChanged(D.isLocked,D.rectangle,F,D.style,D.styleText,D.enableText,D.texts.map(function(ee){var Q=t.GeometryUtils.getPathPointByPosition(q,ee.position);return{text:D.getText(ee.position),pointIndex:Q[1],pos:ee.position,point:Q[0]}}).sort(function(ee,Q){return ee.pos-Q.pos}),D.points,D.properties.lineOption),K&&K.onModelItemChanged(D.key,D.rectangle)}},L.prototype.hideOutdatedSelection=function(D){var K=this;Object.keys(this.selectionMap).filter(function(F){return!D[F]}).forEach(function(F){K.selectionMap[F].destroy(),delete K.selectionMap[F]})},L.prototype.selectionCanBeDrawn=function(D){return!D.container||D.container.expanded&&this.selectionCanBeDrawn(D.container)},L.prototype.notifySelectionChanged=function(D){var K=this,F=D.getSelectedItems(!0).filter(function(k){return K.selectionCanBeDrawn(k)}),q={},ee=F.length>1,Q=D.getSelectedShapes(!0).filter(function(k){return K.selectionCanBeDrawn(k)}),X=D.getSelectedConnectors(!0).filter(function(k){return K.selectionCanBeDrawn(k)});if(Q.forEach(function(k){return K.getOrCreateShapeSelection(k,q).onSelectionChanged(ee)}),X.forEach(function(k){return K.getOrCreateConnectorSelection(k,q).onSelectionChanged(ee)}),ee){var z=F.length>0?F[0].strokeWidth:0,B={};F.filter(function(k){return!k.isLocked}).forEach(function(k){return B[k.key]=k.rectangle}),this.getOrCreateMultipleSelection(q).onSelectionChanged(!!Q.filter(function(k){return!k.isLocked}).length,z,B)}this.hideOutdatedSelection(q)},L.prototype.applyChangesCore=function(D){H.prototype.applyChangesCore.call(this,D);var K=this.getMultipleSelection();K&&K.onModelChanged()},L.prototype.applyChange=function(D){var K=this.getMultipleSelection();D.item instanceof r.Shape?this.updateShapeSelection(D.item,K):D.item instanceof a.Connector&&this.updateConnectorSelection(D.item,K)},L.prototype.notifyPageColorChanged=function(D){},L.prototype.notifyPageSizeChanged=function(D,K){},L.prototype.notifyActualZoomChanged=function(D){var K=this;Object.keys(this.selectionMap).forEach(function(F){return K.selectionMap[F].notifyZoomChanged(D)}),this.actualZoom=D},L.prototype.notifyViewAdjusted=function(D){},L.prototype.notifyReadOnlyChanged=function(D){var K=this;this.readOnly=D,Object.keys(this.selectionMap).forEach(function(F){return K.selectionMap[F].notifyReadOnlyChanged(D)})},L.prototype.notifySelectionRectShow=function(D){this.showSelectionRect(D.clone().multiply(this.actualZoom,this.actualZoom))},L.prototype.notifySelectionRectHide=function(){this.hideSelectionRect()},L.prototype.notifyResizeInfoShow=function(D,K){this.showResizeInfo(D.clone().multiply(this.actualZoom,this.actualZoom),K)},L.prototype.notifyResizeInfoHide=function(){this.hideResizeInfo()},L.prototype.notifyConnectionPointsShow=function(D,K,F,q){var ee=this;this.hideConnectionPoints(),K.forEach(function(Q,X){var z=Q.point.clone().multiply(ee.actualZoom,ee.actualZoom);if(q)switch(Q.side){case e.ConnectionPointSide.North:z.y=q.y*ee.actualZoom-L.connectionPointShift;break;case e.ConnectionPointSide.South:z.y=q.bottom*ee.actualZoom+L.connectionPointShift;break;case e.ConnectionPointSide.West:z.x=q.x*ee.actualZoom-L.connectionPointShift;break;case e.ConnectionPointSide.East:z.x=q.right*ee.actualZoom+L.connectionPointShift}ee.showConnectionPoint(X,z,D,X,X===F,Q.allowed)})},L.prototype.notifyConnectionPointsHide=function(){this.hideConnectionPoints()},L.prototype.notifyConnectionTargetShow=function(D,K){if(K.allowed){var F=L.correctSelectionRect(K.rect.clone().multiply(this.actualZoom,this.actualZoom),K.strokeWidth,L.connectionTargetBorderWidth,this.actualZoom,0);this.showConnectionTarget(0,F)}},L.prototype.notifyConnectionTargetHide=function(){this.hideConnectionTarget()},L.prototype.notifyContainerTargetShow=function(D,K){var F=L.correctSelectionRect(K.rect.clone().multiply(this.actualZoom,this.actualZoom),K.strokeWidth,L.connectionTargetBorderWidth,this.actualZoom,0);this.showContainerTarget(0,F)},L.prototype.notifyContainerTargetHide=function(){this.hideContainerTarget()},L.prototype.notifyExtensionLinesShow=function(D){var K=this;this.hideExtensionLines(),D.forEach(function(F,q){K.showExtensionLine(q,F.type,F.segment.startPoint.clone().multiply(K.actualZoom,K.actualZoom),F.segment.endPoint.clone().multiply(K.actualZoom,K.actualZoom),F.text)})},L.prototype.notifyExtensionLinesHide=function(){this.hideExtensionLines()},L.prototype.notifyDragStart=function(D){this.dom.changeByFunc(this.selectionMarksContainer,function(K){return K.style.display="none"})},L.prototype.notifyDragEnd=function(D){this.dom.changeByFunc(this.selectionMarksContainer,function(K){return K.style.display=""})},L.prototype.notifyDragScrollStart=function(){},L.prototype.notifyDragScrollEnd=function(){},L.prototype.notifyTextInputStart=function(D,K,F,q){this.dom.changeByFunc(this.visualizersContainer,function(ee){return ee.style.display="none"})},L.prototype.notifyTextInputEnd=function(D,K){this.dom.changeByFunc(this.visualizersContainer,function(F){return F.style.display=""})},L.prototype.notifyTextInputPermissionsCheck=function(D,K){},L.correctSelectionRect=function(D,K,F,q,ee){ee===void 0&&(ee=L.selectionOffset);var Q=C.UnitConverter.twipsToPixels(K)%2!=C.UnitConverter.twipsToPixels(F)%2,X=Math.ceil(K/2*q);D=D.clone().inflate(X,X);var z=Math.floor(F/2);if(D.x-=z,D.y-=z,D.width+=F,D.height+=F,Q){var B=L.evenOddSelectionCorrection*(C.UnitConverter.twipsToPixels(F)%2==1?-1:1);D=D.clone().moveRectangle(B,B)}return D.clone().inflate(ee,ee)},L.selectionMarkSize=C.UnitConverter.pixelsToTwips(10),L.lockedSelectionMarkSize=C.UnitConverter.pixelsToTwips(8),L.selectionOffset=C.UnitConverter.pixelsToTwips(2),L.selectionRectLineWidth=C.UnitConverter.pixelsToTwips(1),L.multiSelectionRectLineWidth=C.UnitConverter.pixelsToTwips(1),L.connectionPointSmallSize=C.UnitConverter.pixelsToTwips(5),L.connectionPointLargeSize=C.UnitConverter.pixelsToTwips(12),L.connectionPointShift=C.UnitConverter.pixelsToTwips(16),L.connectionTargetBorderWidth=C.UnitConverter.pixelsToTwips(2),L.geomertyMarkSize=C.UnitConverter.pixelsToTwips(8),L.connectorPointMarkSize=C.UnitConverter.pixelsToTwips(6),L.connectorSideMarkSize=C.UnitConverter.pixelsToTwips(6),L.extensionLineWidth=C.UnitConverter.pixelsToTwips(1),L.extensionLineOffset=C.UnitConverter.pixelsToTwips(1),L.extensionLineEndingSize=C.UnitConverter.pixelsToTwips(6),L.resizeInfoOffset=C.UnitConverter.pixelsToTwips(16),L.resizeInfoTextOffset=C.UnitConverter.pixelsToTwips(2),L.resizeInfoLineWidth=C.UnitConverter.pixelsToTwips(1),L.evenOddSelectionCorrection=C.UnitConverter.pixelsToTwips(1),L}(w.CanvasManager);h.CanvasSelectionManager=E;var U=function(){function H(L,D,K,F,q,ee){this.rectsContainer=L,this.marksContainer=D,this.key=K,this.zoomLevel=F,this.readOnly=q,this.dom=ee,this.elements={},this.updatedElements={}}return H.prototype.notifyZoomChanged=function(L){this.zoomLevel!==L&&(this.zoomLevel=L,this.redraw())},H.prototype.notifyReadOnlyChanged=function(L){this.readOnly=L,this.redraw()},H.prototype.destroy=function(){var L=this;Object.keys(this.elements).forEach(function(D){L.elements[D].parentNode.removeChild(L.elements[D]),delete L.elements[D]})},H.prototype.redraw=function(){var L=this;this.updatedElements={},this.redrawCore(),Object.keys(this.elements).filter(function(D){return!L.updatedElements[D]}).forEach(function(D){L.elements[D].parentNode.removeChild(L.elements[D]),delete L.elements[D]}),this.updatedElements={}},H.prototype.drawSelectionMarks=function(L,D,K){if(!this.readOnly){var F=D&&L.height>3*E.selectionMarkSize,q=K&&L.width>3*E.selectionMarkSize,ee=D||K;ee&&this.drawSelectionMark(0,new n.Point(L.x,L.y),E.selectionMarkSize,i.MouseEventElementType.ShapeResizeBox,i.ResizeEventSource.ResizeBox_NW,h.SELECTION_ELEMENT_CLASSNAMES.SELECTION_MARK),q&&!x.Browser.TouchUI&&this.drawSelectionMark(1,new n.Point(L.x+L.width/2,L.y),E.selectionMarkSize,i.MouseEventElementType.ShapeResizeBox,i.ResizeEventSource.ResizeBox_N,h.SELECTION_ELEMENT_CLASSNAMES.SELECTION_MARK),ee&&this.drawSelectionMark(2,new n.Point(L.right,L.y),E.selectionMarkSize,i.MouseEventElementType.ShapeResizeBox,i.ResizeEventSource.ResizeBox_NE,h.SELECTION_ELEMENT_CLASSNAMES.SELECTION_MARK),F&&!x.Browser.TouchUI&&this.drawSelectionMark(3,new n.Point(L.right,L.y+L.height/2),E.selectionMarkSize,i.MouseEventElementType.ShapeResizeBox,i.ResizeEventSource.ResizeBox_E,h.SELECTION_ELEMENT_CLASSNAMES.SELECTION_MARK),ee&&this.drawSelectionMark(4,new n.Point(L.right,L.bottom),E.selectionMarkSize,i.MouseEventElementType.ShapeResizeBox,i.ResizeEventSource.ResizeBox_SE,h.SELECTION_ELEMENT_CLASSNAMES.SELECTION_MARK),q&&!x.Browser.TouchUI&&this.drawSelectionMark(5,new n.Point(L.x+L.width/2,L.bottom),E.selectionMarkSize,i.MouseEventElementType.ShapeResizeBox,i.ResizeEventSource.ResizeBox_S,h.SELECTION_ELEMENT_CLASSNAMES.SELECTION_MARK),ee&&this.drawSelectionMark(6,new n.Point(L.x,L.bottom),E.selectionMarkSize,i.MouseEventElementType.ShapeResizeBox,i.ResizeEventSource.ResizeBox_SW,h.SELECTION_ELEMENT_CLASSNAMES.SELECTION_MARK),F&&!x.Browser.TouchUI&&this.drawSelectionMark(7,new n.Point(L.x,L.y+L.height/2),E.selectionMarkSize,i.MouseEventElementType.ShapeResizeBox,i.ResizeEventSource.ResizeBox_W,h.SELECTION_ELEMENT_CLASSNAMES.SELECTION_MARK)}},H.prototype.drawSelectionMark=function(L,D,K,F,q,ee){var Q=this;this.getOrCreateElement("SM"+L,new f.RectanglePrimitive(D.x-K/2,D.y-K/2,K,K,null,ee,void 0,function(X){s.RenderUtils.setElementEventData(X,F,Q.key,q)}),this.marksContainer)},H.prototype.drawSelectionRect=function(L,D,K){var F=new f.RectanglePrimitive(L.x,L.y,L.width,L.height,P.StrokeStyle.default1pxInstance,K,void 0,function(q){s.RenderUtils.setElementEventData(q,D,"-1",-1)});this.getOrCreateElement("shapeSelection",F,this.rectsContainer)},H.prototype.getOrCreateElement=function(L,D,K){var F=this.elements[L];return F||(F=D.createElement(function(q){return K.appendChild(q)}),this.elements[L]=F),this.updatedElements[L]=!0,this.dom.changeByPrimitive(F,D),F},H}(),R=function(H){function L(D,K,F,q,ee,Q,X,z){var B=H.call(this,D,K,F,q,ee,Q)||this;return B.isLocked=X,B.rectangle=z,B}return g(L,H),L.prototype.onSelectionChanged=function(D){this.isMultipleSelection!==D&&(this.isMultipleSelection=D,this.redraw())},L.prototype.isLockedRender=function(){return this.isLocked&&!this.readOnly},L.prototype.drawLockedSelectionMark=function(D,K,F,q){var ee=new m.PathPrimitive([new m.PathPrimitiveMoveToCommand(K.x-F/2,K.y-F/2),new m.PathPrimitiveLineToCommand(K.x+F/2,K.y+F/2),new m.PathPrimitiveMoveToCommand(K.x+F/2,K.y-F/2),new m.PathPrimitiveLineToCommand(K.x-F/2,K.y+F/2)],null,q);this.getOrCreateElement("LSM"+D,ee,this.marksContainer)},L}(U),O=function(H){function L(D,K,F,q,ee){var Q=H.call(this,D,K,"-1",F,q,ee)||this;return Q.rectangles={},Q}return g(L,H),L.prototype.onModelItemChanged=function(D,K){D in this.rectangles&&(this.rectangles[D]=K)},L.prototype.onModelChanged=function(){this.redraw()},L.prototype.onSelectionChanged=function(D,K,F){this.needDrawSelectionMarks=D,this.strokeWidth=K,this.rectangles=F,this.redraw()},L.prototype.redrawCore=function(){var D=this,K=Object.keys(this.rectangles);if(K.length){var F=t.GeometryUtils.getCommonRectangle(K.map(function(ee){return D.rectangles[ee]})).clone().multiply(this.zoomLevel,this.zoomLevel),q=E.correctSelectionRect(F,this.strokeWidth,E.selectionRectLineWidth,this.zoomLevel);this.drawSelectionRect(q,i.MouseEventElementType.SelectionRect,h.SELECTION_ELEMENT_CLASSNAMES.ITEMS_SELECTION_RECT),this.needDrawSelectionMarks&&this.drawSelectionMarks(F,!0,!0)}},L}(U),N=function(H){function L(D,K,F,q,ee,Q,X,z,B,k,W,G){var Y=H.call(this,D,K,Q,F,q,ee,X,z)||this;return Y.style=B,Y.allowResizeHorizontally=k,Y.allowResizeVertically=W,Y.shapeParameterPoints=G,Y}return g(L,H),L.prototype.onModelChanged=function(D,K,F,q,ee,Q){this.isLocked=D,this.rectangle=K,this.style=F,this.allowResizeHorizontally=q,this.allowResizeVertically=ee,this.shapeParameterPoints=Q,this.redraw()},L.prototype.redrawCore=function(){var D=this.rectangle.clone().multiply(this.zoomLevel,this.zoomLevel);this.isLockedRender()?this.drawLockedSelection(D):this.drawUnlockedSelection(D)},L.prototype.drawLockedSelection=function(D){this.drawLockedSelectionMark(0,new n.Point(D.x,D.y),E.lockedSelectionMarkSize,h.SELECTION_ELEMENT_CLASSNAMES.LOCKED_SELECTION_MARK),this.drawLockedSelectionMark(1,new n.Point(D.right,D.y),E.lockedSelectionMarkSize,h.SELECTION_ELEMENT_CLASSNAMES.LOCKED_SELECTION_MARK),this.drawLockedSelectionMark(2,new n.Point(D.right,D.bottom),E.lockedSelectionMarkSize,h.SELECTION_ELEMENT_CLASSNAMES.LOCKED_SELECTION_MARK),this.drawLockedSelectionMark(3,new n.Point(D.x,D.bottom),E.lockedSelectionMarkSize,h.SELECTION_ELEMENT_CLASSNAMES.LOCKED_SELECTION_MARK)},L.prototype.drawUnlockedSelection=function(D){var K=E.correctSelectionRect(D,this.style.strokeWidth,E.selectionRectLineWidth,this.zoomLevel);this.drawSelectionRect(K,i.MouseEventElementType.SelectionRect,this.isMultipleSelection?h.SELECTION_ELEMENT_CLASSNAMES.ITEM_MULTI_SELECTION:h.SELECTION_ELEMENT_CLASSNAMES.ITEM_SELECTION_RECT),this.isMultipleSelection||this.drawSelectionMarks(D,this.allowResizeHorizontally,this.allowResizeVertically),this.drawShapeParameterPoints()},L.prototype.drawShapeParameterPoints=function(){var D=this;this.readOnly||this.shapeParameterPoints.forEach(function(K,F){var q=K.point.clone().multiply(D.zoomLevel,D.zoomLevel);D.drawShapeParameterPoint(q,F,K.key)})},L.prototype.drawShapeParameterPoint=function(D,K,F){var q=this,ee=E.geomertyMarkSize,Q=new f.RectanglePrimitive(D.x-ee/2,D.y-ee/2,ee,ee,null,"geometry-mark",void 0,function(X){s.RenderUtils.setElementEventData(X,i.MouseEventElementType.ShapeParameterBox,q.key,F)});this.getOrCreateElement("pp"+K.toString(),Q,this.marksContainer)},L}(R),V=function(H){function L(D,K,F,q,ee,Q,X,z,B,k,W,G,Y,J,$){var te=H.call(this,D,K,Q,F,q,ee,X,z)||this;return te.renderPoints=B,te.style=k,te.styleText=W,te.enableText=G,te.texts=Y,te.points=J,te.lineType=$,te}return g(L,H),L.prototype.onModelChanged=function(D,K,F,q,ee,Q,X,z,B){this.isLocked=D,this.rectangle=K,this.renderPoints=F,this.style=q,this.styleText=ee,this.enableText=Q,this.texts=X,this.points=z,this.lineType=B,this.redraw()},L.prototype.redrawCore=function(){this.isLockedRender()?this.drawLockedSelection():this.drawUnlockedSelection()},L.prototype.drawLockedSelection=function(){var D=this;this.renderPoints.forEach(function(K,F){D.drawLockedSelectionMark(F,K,E.lockedSelectionMarkSize,h.SELECTION_ELEMENT_CLASSNAMES.LOCKED_SELECTION_MARK)})},L.prototype.drawUnlockedSelection=function(){this.drawConnectorSelection(),this.isMultipleSelection||this.readOnly||this.drawConnectorSelectionMarks()},L.prototype.drawConnectorSelection=function(){var D=[],K=[],F=this.isMultipleSelection?h.SELECTION_ELEMENT_CLASSNAMES.CONNECTOR_MULTI_SELECTION:h.SELECTION_ELEMENT_CLASSNAMES.CONNECTOR_SELECTION;this.populateSelectionPrimitiveCommands(D,K);var q=new m.PathPrimitive(D.concat(K.reverse()),P.StrokeStyle.default1pxInstance,F);this.getOrCreateElement("CS",q,this.rectsContainer)},L.prototype.populateSelectionPrimitiveCommands=function(D,K){for(var F,q,ee,Q,X=this.texts,z=this.styleText.getAlignment(),B=this.createNotSkippedRenderPoints(),k=this.zoomLevel,W=this.style.strokeWidthPx,G=this.getSelectionOffset(W),Y=W%2==0,J=B[0],$=0,te=1,oe=void 0;oe=B[te];te++){var re=B[te+1];if(F===void 0){if(q=T.Metrics.euclideanDistance(J,oe),_.MathUtils.numberCloseTo(q,0))continue;F=t.GeometryUtils.getSelectionOffsetPoint(J,oe,q).multiply(G,G)}if(re){if(Q=T.Metrics.euclideanDistance(oe,re),_.MathUtils.numberCloseTo(Q,0))continue;ee=t.GeometryUtils.getSelectionOffsetPoint(oe,re,Q).multiply(G,G)}var ie=F.x,se=F.y,ae=-ie,pe=-se,ge=ee&&ee.x,ye=ee&&ee.y,me=ee&&-ee.x,ve=ee&&-ee.y;for(Y&&(ae>0?ae-=E.evenOddSelectionCorrection:ie>0&&(ie-=E.evenOddSelectionCorrection),pe>0?pe-=E.evenOddSelectionCorrection:se>0&&(se-=E.evenOddSelectionCorrection),me>0?me-=E.evenOddSelectionCorrection:ge>0&&(ge-=E.evenOddSelectionCorrection),ve>0?ve-=E.evenOddSelectionCorrection:ye>0&&(ye-=E.evenOddSelectionCorrection));X[$]&&X[$].pointIndex<=te;){var Z=X[$],ne=this.getConnectorSelectionTextSize(Z.text,G),ce=t.GeometryUtils.getSelectionTextStartEndPoints(J,oe,q,Z.point,ne,z);X[$].pointIndex<te?(J=ce[1],D.push(m.PathPrimitiveMoveToCommand.fromPoint(J.clone().offset(ie,se).multiply(k,k))),K.push(m.PathPrimitiveLineToCommand.fromPoint(J.clone().offset(ae,pe).multiply(k,k)))):(D.length||(D.push(m.PathPrimitiveMoveToCommand.fromPoint(J.clone().offset(ie,se).multiply(k,k))),K.push(m.PathPrimitiveLineToCommand.fromPoint(J.clone().offset(ae,pe).multiply(k,k)))),D.push(m.PathPrimitiveLineToCommand.fromPoint(ce[0].clone().offset(ie,se).multiply(k,k))),D.push(m.PathPrimitiveMoveToCommand.fromPoint(ce[1].clone().offset(ie,se).multiply(k,k))),K.push(m.PathPrimitiveMoveToCommand.fromPoint(ce[0].clone().offset(ae,pe).multiply(k,k))),K.push(m.PathPrimitiveLineToCommand.fromPoint(ce[1].clone().offset(ae,pe).multiply(k,k))),J=ce[1]),$++}D.length||(D.push(m.PathPrimitiveMoveToCommand.fromPoint(J.clone().offset(ie,se).multiply(k,k))),K.push(m.PathPrimitiveLineToCommand.fromPoint(J.clone().offset(ae,pe).multiply(k,k)))),re?(t.GeometryUtils.addSelectedLinesTo(J,oe,re,ie,se,ae,pe,ge,ye,me,ve,function(Pe,de){return D.push(new m.PathPrimitiveLineToCommand(Pe*k,de*k))},function(Pe,de){return K.push(new m.PathPrimitiveLineToCommand(Pe*k,de*k))}),F=ee,q=Q):(D.push(m.PathPrimitiveLineToCommand.fromPoint(oe.clone().offset(ie,se).multiply(k,k))),K.push(m.PathPrimitiveMoveToCommand.fromPoint(oe.clone().offset(ae,pe).multiply(k,k)))),J=oe}},L.prototype.createNotSkippedRenderPoints=function(){var D=this.renderPoints.map(function(K){return K.clone()});return this.lineType===c.ConnectorLineOption.Straight?M.ModelUtils.skipUnnecessaryRenderPoints(D):M.ModelUtils.skipUnnecessaryRightAngleRenderPoints(D),D.filter(function(K){return!K.skipped})},L.prototype.getSelectionOffset=function(D){return E.selectionOffset+C.UnitConverter.pixelsToTwips(Math.round(D/2)+(D+1)%2)},L.prototype.getConnectorSelectionTextSize=function(D,K){return this.dom.measurer.measureTextLine(D,this.styleText,I.TextOwner.Connector).applyConverter(C.UnitConverter.pixelsToTwips).clone().offset(K,K).nonNegativeSize()},L.prototype.drawConnectorSelectionMarks=function(){var D=this,K=this.points.length-1;this.points.forEach(function(F,q){var ee=q===0||q===K,Q=ee?h.SELECTION_ELEMENT_CLASSNAMES.SELECTION_MARK:h.SELECTION_ELEMENT_CLASSNAMES.CONNECTOR_POINT_MARK,X=ee?E.selectionMarkSize:E.connectorPointMarkSize;ee||D.lineType===c.ConnectorLineOption.Straight?D.drawSelectionMark(q,F.clone().multiply(D.zoomLevel,D.zoomLevel),X,i.MouseEventElementType.ConnectorPoint,q,Q):D.drawSelectionMark(q,F.clone().multiply(D.zoomLevel,D.zoomLevel),X,i.MouseEventElementType.Undefined,-1,Q+" disabled")}),this.drawConnectorSideMarks()},L.prototype.drawConnectorSideMarks=function(){var D,K,F=this,q=this.lineType===c.ConnectorLineOption.Straight?i.MouseEventElementType.ConnectorSide:i.MouseEventElementType.ConnectorOrthogonalSide;this.renderPoints.forEach(function(ee,Q){if(!ee.skipped){if(D!==void 0&&F.canDrawConnectorSideMark(ee,D)){var X=F.lineType===c.ConnectorLineOption.Orthogonal?ee.x-D.x==0?"vertical":"horizontal":"";F.drawSelectionMark(F.points.length+Q-1,new n.Point(D.x+(ee.x-D.x)/2,D.y+(ee.y-D.y)/2).clone().multiply(F.zoomLevel,F.zoomLevel),E.connectorSideMarkSize,q,K+"_"+Q,h.SELECTION_ELEMENT_CLASSNAMES.CONNECTOR_SIDE_MARK+" "+X)}D=ee,K=Q}})},L.prototype.canDrawConnectorSideMark=function(D,K){if(this.lineType===c.ConnectorLineOption.Straight){var F=E.selectionMarkSize+E.connectorSideMarkSize;return T.Metrics.euclideanDistance(D,K)>F}if(this.lineType===c.ConnectorLineOption.Orthogonal){var q=K.pointIndex===0,ee=t.GeometryUtils.areDuplicatedPoints(this.points[this.points.length-1],D);return q&&ee?T.Metrics.euclideanDistance(D,K)>2*a.Connector.minOffset:!q&&ee||q&&!ee?T.Metrics.euclideanDistance(D,K)>a.Connector.minOffset:(F=E.selectionMarkSize+E.connectorSideMarkSize,T.Metrics.euclideanDistance(D,K)>F)}return!1},L}(R)},9757:function(j,h,d){var u,g=this&&this.__extends||(u=function(I,x){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,S){b.__proto__=S}||function(b,S){for(var w in S)S.hasOwnProperty(w)&&(b[w]=S[w])},u(I,x)},function(I,x){function b(){this.constructor=I}u(I,x),I.prototype=x===null?Object.create(x):(b.prototype=x.prototype,new b)});Object.defineProperty(h,"__esModule",{value:!0}),h.CanvasViewManager=h.CROP_OFFSET=h.CANVAS_SCROLL_PADDING=h.CANVAS_MIN_PADDING=void 0;var v=d(7716),p=d(240),s=d(8675),i=d(4125),e=d(6353),t=d(8900),n=d(5329),o=d(4593),r=d(4716),a=d(3500),c=d(3281),f=d(1552),m=d(6907),y=d(9291);h.CANVAS_MIN_PADDING=8,h.CANVAS_SCROLL_PADDING=18,h.CROP_OFFSET=40;var l="dxdi-drag-scroll",P="dxdi-drag-item",C=function(I){function x(b,S,w,T,_,M,A,E,U){var R=I.call(this,T,E,U)||this;return R.svgElement=S,R.paddings=new i.Offsets(0,0,0,0),R.scroll=new t.Point(0,0),R.crop=i.Offsets.empty(),R.lockAutoZoom=!1,R.autoScrollLocker=0,R.pageClipPathId=a.RenderUtils.generateSvgElementId("page-clip"),R.pageShadowId=a.RenderUtils.generateSvgElementId("page-shadow"),R.onViewChanged=new s.EventDispatcher,b.onScroll.add(R),w=w.clone().applyConverter(y.UnitConverter.twipsToPixelsF),R.scrollView=b,R.modelSize=w,R.simpleView=M,R.fixedZoomLevel=T,R.autoZoom=_,R.crop=R.rectangleToCrop(A,w),R.updateElements(w.clone().multiply(T,T),t.Point.zero(),M),R.getOrCreateElement("shadow",new c.ShadowFilterPrimitive(R.pageShadowId),R.svgElement),R.containerSize=b.getSize(),R}return g(x,I),x.prototype.adjust=function(b,S){var w;b||(b={vertical:!1,horizontal:!1},w=i.Offsets.empty()),this.containerSize=this.scrollView.getSize(),this.adjustCore(this.modelSize,this.fixedZoomLevel,this.autoZoom,this.simpleView,this.crop,b,this.containerSize,w,S),this.tryNormalizePaddings()},x.prototype.notifyModelSizeChanged=function(b,S){b=b.clone().applyConverter(y.UnitConverter.twipsToPixelsF);var w={horizontal:!S,vertical:!S};this.adjustCore(b,this.fixedZoomLevel,this.autoZoom,this.simpleView,this.crop,w,this.containerSize,S&&S.clone().applyConverter(y.UnitConverter.twipsToPixelsF)),this.modelSize=b},x.prototype.notifyModelRectangleChanged=function(b){var S=this.rectangleToCrop(b,this.modelSize);this.crop&&this.crop.equals(S)||(this.simpleView&&this.adjustCore(this.modelSize,this.fixedZoomLevel,this.autoZoom,this.simpleView,S,{horizontal:!1,vertical:!1},this.containerSize,i.Offsets.empty()),this.crop=S)},x.prototype.notifySnapPointPositionChanged=function(b){},x.prototype.notifyZoomChanged=function(b,S){this.adjustCore(this.modelSize,b,S,this.simpleView,this.crop,{horizontal:!1,vertical:!1},this.containerSize),this.fixedZoomLevel=b,this.autoZoom=S},x.prototype.notifyViewChanged=function(b){this.adjustCore(this.modelSize,this.fixedZoomLevel,this.autoZoom,b,this.crop,{vertical:!0,horizontal:!0},this.containerSize),this.simpleView=b},x.prototype.notifyGridChanged=function(b,S){},x.prototype.notifyDragStart=function(b){this.lockAutoZoom=!0,m.DomUtils.addClassName(this.svgElement,P)},x.prototype.notifyDragEnd=function(b){this.lockAutoZoom=!1,m.DomUtils.removeClassName(this.svgElement,P),this.adjustAfterDragEnd()},x.prototype.adjustAfterDragEnd=function(){this.autoZoom&&!this.autoZoomLocked&&this.adjust({horizontal:!0,vertical:this.autoZoom===p.AutoZoomMode.FitContent},this.autoZoom===p.AutoZoomMode.FitToWidth)},x.prototype.notifyShowContextToolbox=function(){this.autoZoomLocked=!0},x.prototype.notifyHideContextToolbox=function(){this.autoZoomLocked=!1,this.adjustAfterDragEnd()},x.prototype.notifyDragScrollStart=function(){m.DomUtils.addClassName(this.svgElement,l)},x.prototype.notifyDragScrollEnd=function(){m.DomUtils.removeClassName(this.svgElement,l)},x.prototype.notifyScrollChanged=function(b){this.scroll=b()},x.prototype.checkFitToCanvas=function(b){b=b||this.containerSize;var S=this.scrollView.getScrollBarWidth();b=b.clone().offset(2*-h.CANVAS_MIN_PADDING,2*-h.CANVAS_MIN_PADDING).nonNegativeSize();var w=this.getActualModelSizeWithoutZoom(this.modelSize,this.simpleView,this.crop).clone().multiply(this.actualZoom,this.actualZoom),T=this.checkScrollBars(b,S,w,i.Offsets.empty());return{vertical:(b=b.clone().offset(T.vertical?-S:0,T.horizontal?-S:0).nonNegativeSize()).height>=w.height,horizontal:b.width>=w.width}},x.prototype.rectangleToCrop=function(b,S){var w=b.clone().applyConverter(y.UnitConverter.twipsToPixelsF);return new i.Offsets(this.correctCrop(w.x),this.correctCrop(S.width-w.right),this.correctCrop(w.y),this.correctCrop(S.height-w.bottom))},x.prototype.correctCrop=function(b){return h.CROP_OFFSET*Math.floor(b/h.CROP_OFFSET)},x.prototype.setActualZoom=function(b){this.actualZoom!==b&&(this.actualZoom=b,this.raiseActualZoomChanged())},x.prototype.getActualAutoZoomLevel=function(b){if(b===p.AutoZoomMode.Disabled)return this.actualZoom;var S=this.containerSize,w=this.scrollView.getScrollBarWidth(),T=this.getActualModelSizeWithoutZoom(this.modelSize,this.simpleView,this.crop);return this.getActualAutoZoom(S,w,T,b)},x.prototype.getActualZoom=function(b,S,w,T,_){return this.lockAutoZoom?this.actualZoom:_===p.AutoZoomMode.Disabled?T:this.getActualAutoZoom(b,S,w,_)},x.prototype.getActualAutoZoom=function(b,S,w,T){return b.width===0||b.height===0?1:T===p.AutoZoomMode.FitContent?Math.min((b.width-2*h.CANVAS_MIN_PADDING)/w.width,(b.height-2*h.CANVAS_MIN_PADDING)/w.height,1):Math.min((b.width-2*h.CANVAS_MIN_PADDING-S)/w.width,1)},x.prototype.raiseActualZoomChanged=function(){var b=this;this.onViewChanged.raise1(function(S){return S.notifyActualZoomChanged(b.actualZoom)})},x.prototype.tryNormalizePaddings=function(){var b=this.scrollView.getScrollBarWidth(),S=this.getActualModelSizeWithoutZoom(this.modelSize,this.simpleView,this.crop).clone().multiply(this.actualZoom,this.actualZoom),w=new t.Point(this.paddings.left,this.paddings.top),T=new e.Size(this.paddings.right,this.paddings.bottom),_=this.getTailSpace(w,this.scroll,S,this.containerSize,b);_.equals(T)||this.applyChanges(new i.Offsets(w.x,_.width,w.y,_.height),S,this.simpleView,this.crop.clone().multiply(this.actualZoom))},x.prototype.scrollBy=function(b){var S,w,T,_=this.scroll,M=this.containerSize,A=this.scrollView.getScrollBarWidth(),E=this.getActualModelSizeWithoutZoom(this.modelSize,this.simpleView,this.crop).clone().multiply(this.actualZoom,this.actualZoom),U=this.checkScrollBars(M,A,E,this.paddings),R=new t.Point(this.paddings.left,this.paddings.top),O=new e.Size(this.paddings.right,this.paddings.bottom);return _=(S=this.changeScrollByOffset(R,_,O,E,b,M,U)).scroll,b=S.offset,R=(w=this.changeTranslateByOffset(R,O,b,U)).translate,b=w.offset,R=(T=this.cropHiddenHead(R,_)).translate,_=T.scroll,O=this.getTailSpace(R,_,E,M,A),this.applyChanges(new i.Offsets(R.x,O.width,R.y,O.height),E,this.simpleView,this.crop.clone().multiply(this.actualZoom),_),b},x.prototype.changeScrollByOffset=function(b,S,w,T,_,M,A){var E=S.clone(),U=_.clone();return _.x&&A.horizontal&&(E.x-=U.x=-this.getScrollDeltaByOffset(_.x,S.x,b.x+T.width+w.width,M.width,A.vertical)),_.y&&A.vertical&&(E.y-=U.y=-this.getScrollDeltaByOffset(_.y,S.y,b.y+T.height+w.height,M.height,A.horizontal)),{scroll:E,offset:U}},x.prototype.changeTranslateByOffset=function(b,S,w,T){var _=b.clone(),M=w.clone();return w.x&&!T.horizontal&&(_.x+=M.x=this.getTranslateDeltaByOffset(w.x,_.x,S.width)),w.y&&!T.vertical&&(_.y+=M.y=this.getTranslateDeltaByOffset(w.y,_.y,S.height)),{translate:_,offset:M}},x.prototype.getScrollDeltaByOffset=function(b,S,w,T,_){if(b>0)return-Math.min(S,b);var M=w-(T-(_?this.scrollView.getScrollBarWidth():0));return Math.min(M-S,-b)},x.prototype.getTranslateDeltaByOffset=function(b,S,w){return b?b<0?-Math.min(S-h.CANVAS_MIN_PADDING,-b):Math.min(w-h.CANVAS_MIN_PADDING,b):0},x.prototype.getActualModelSizeWithoutZoom=function(b,S,w){return S&&w?b.clone().offset(-w.horizontal,-w.vertical).nonNegativeSize():b},x.prototype.setScrollTo=function(b,S){var w=this.containerSize,T=this.getVisibileAreaAbsShift(),_=b.clone().applyConverter(y.UnitConverter.twipsToPixelsF).clone().multiply(this.actualZoom,this.actualZoom).clone().offset(T.x,T.y),M=this.scroll;S?(M.x+=_.x-S.x,M.y+=_.y-S.y):(_.x<0&&(M.x+=_.x-h.CANVAS_MIN_PADDING),_.y<0&&(M.y+=_.y-h.CANVAS_MIN_PADDING),_.x>w.width&&(M.x+=_.x-w.width+h.CANVAS_MIN_PADDING),_.y>w.height&&(M.y+=_.y-w.height+h.CANVAS_MIN_PADDING)),this.setScroll(M)},x.prototype.scrollIntoView=function(b){b=b.clone().applyConverter(y.UnitConverter.twipsToPixelsF).multiply(this.actualZoom,this.actualZoom).moveRectangle(this.paddings.left,this.paddings.top);var S=this.scroll,w=this.containerSize;if(!(b.x>=S.x&&b.y>=S.y&&b.right<=S.x+w.width&&b.bottom<=S.y+w.height)){var T=S.clone();b.x<S.x?T.x=b.x-h.CANVAS_SCROLL_PADDING:b.right>S.x+w.width&&(T.x=Math.min(b.x-h.CANVAS_SCROLL_PADDING,b.right+h.CANVAS_SCROLL_PADDING-w.width)),b.y<S.y?T.y=b.y-h.CANVAS_SCROLL_PADDING:T.y=Math.min(b.y-h.CANVAS_SCROLL_PADDING,b.bottom+h.CANVAS_SCROLL_PADDING-w.height),this.setScroll(T)}},x.prototype.setScroll=function(b){var S=this,w=this.modelSize.clone().multiply(this.actualZoom,this.actualZoom);b.x=Math.max(0,Math.min(b.x,w.width+this.paddings.horizontal-this.containerSize.width)),b.y=Math.max(0,Math.min(b.y,w.height+this.paddings.vertical-this.containerSize.height)),this.dom.changeByFunc(null,function(){S.scrollView.setScroll(b.x,b.y)}),this.scroll=b.clone()},x.prototype.updateElements=function(b,S,w){this.updatePageElement(b,S,w),this.updateCanvasElement(S)},x.prototype.updateCanvasElement=function(b){this.canvasElement=this.getOrCreateElement("dxdi-main",new n.GroupPrimitive([],"dxdi-main",null,null,function(S){S.setAttribute("transform","translate("+Math.round(b.x)+", "+Math.round(b.y)+")")}),this.svgElement)},x.prototype.updatePageElement=function(b,S,w){if(w)this.updatePageElementCore("",0,0,b.width,b.height);else{var T=S.x,_=S.y,M=b.width,A=b.height;this.createPageShadow(T,_,M,A),this.updatePageElementCore(this.pageClipPathId,Math.round(T),Math.round(_),M,A)}},x.prototype.createPageShadow=function(b,S,w,T){this.getOrCreateElement("pageShadowRect",new r.RectanglePrimitive(b.toString(),S.toString(),w.toString(),T.toString(),new f.EmptyStyle({filter:a.RenderUtils.getUrlPathById(this.pageShadowId)}),"dxdi-page-shadow"),this.svgElement,this.svgElement.firstChild)},x.prototype.updatePageElementCore=function(b,S,w,T,_){this.pageElement=this.getOrCreateElement("page",new n.GroupPrimitive([],"dxdi-page",null,b,function(M){M.setAttribute("transform","translate("+S+", "+w+")")}),this.svgElement),this.getOrCreateElement("pageClip",this.createPageClipPathPrimitive(T,_),this.svgElement)},x.prototype.createPageClipPathPrimitive=function(b,S){return new o.ClipPathPrimitive(this.pageClipPathId,[new r.RectanglePrimitive(0,0,b.toString(),S.toString())])},x.prototype.adjustCore=function(b,S,w,T,_,M,A,E,U){var R=this.getActualModelSizeWithoutZoom(b,T,_);if(this.lockAutoZoom||!w&&E&&this.modelSize)this.resizeView(R,this.actualZoom,A,T,_,E);else{var O=this.scrollView.getScrollBarWidth(),N=this.getActualZoom(A,O,R,S,w);!w||N!==this.actualZoom||M.horizontal&&(M.vertical||U)?(this.resetView(R,N,A,T,_,M),this.setActualZoom(N)):this.resizeView(R,N,A,T,_,E||i.Offsets.empty())}},x.prototype.resetView=function(b,S,w,T,_,M){var A=b.clone().multiply(S,S),E=i.Offsets.fromNumber(h.CANVAS_MIN_PADDING);!(M=M||{horizontal:!0,vertical:!0}).horizontal&&this.paddings&&(E.left=this.paddings.left,E.right=this.paddings.right),!M.vertical&&this.paddings&&(E.top=this.paddings.top,E.bottom=this.paddings.bottom);var U=this.checkScrollBars(w,this.scrollView.getScrollBarWidth(),A,E),R=this.scrollView.getScrollBarWidth(),O=M.horizontal||M.vertical?this.scroll:void 0;if(M.horizontal){var N=Math.max((w.width-(U.vertical?R:0)-A.width)/2,h.CANVAS_MIN_PADDING);E.left=N,E.right=N,O.x=0}if(M.vertical){var V=Math.max((w.height-(U.horizontal?R:0)-A.height)/2,h.CANVAS_MIN_PADDING);E.top=V,E.bottom=V,O.y=0}this.applyChanges(E,A,T,_.clone().multiply(S),O)},x.prototype.resizeView=function(b,S,w,T,_,M){var A,E,U=this.actualZoom,R=this.simpleView&&this.crop?this.crop.clone().multiply(U):i.Offsets.empty(),O=b.clone().multiply(S,S);M=M.clone().multiply(S);var N=T&&_?_.clone().multiply(S):i.Offsets.empty(),V=new t.Point(this.paddings.left,this.paddings.top),H=this.scroll;V=(A=this.applyOffset(V,H,R,N,M)).translate,H=A.scroll,V=(E=this.cropHiddenHead(V,H)).translate,H=E.scroll;var L=this.getTailSpace(V,H,O,w,this.scrollView.getScrollBarWidth());if(!T){var D=w.width-h.CANVAS_SCROLL_PADDING,K=w.height-h.CANVAS_SCROLL_PADDING;M.left<0&&V.x>D&&(V.x=D,H.x=0),M.right<0&&L.width>D&&(L.width=D,H.x>O.width&&(H.x=O.width)),M.top<0&&V.y>K&&(V.y=K,H.y=0),M.bottom<0&&L.height>K&&(L.height=K,H.y>O.height&&(H.y=O.height))}var F=new i.Offsets(V.x,L.width,V.y,L.height);this.applyChanges(F,O,T,N,H)},x.prototype.applyChanges=function(b,S,w,T,_){var M=this,A=new t.Point(b.left,b.top);w&&T&&(A=A.clone().offset(-T.left,-T.top)),this.updateElements(S,A,w),this.setSvgSize(S.width+b.horizontal,S.height+b.vertical),this.onViewChanged.raise1(function(E){return E.notifyViewAdjusted(new t.Point(A.x,A.y))}),_&&(this.lockAutoScroll(),_&&this.dom.changeByFunc(this.scrollView,function(E){E.setScroll(_.x,_.y),M.unlockAutoScroll()}),this.scroll=_),this.paddings=b},x.prototype.isAutoScrollLocked=function(){return this.autoScrollLocker!==0},x.prototype.lockAutoScroll=function(){this.autoScrollLocker++},x.prototype.unlockAutoScroll=function(){this.autoScrollLocker--},x.prototype.applyOffset=function(b,S,w,T,_){var M=b.clone(),A=S.clone(),E=this.getActualOffset(w,T,_);return E.left&&(M.x=Math.max(h.CANVAS_MIN_PADDING,M.x-E.left),A.x+=E.left-(b.x-M.x)),E.top&&(M.y=Math.max(h.CANVAS_MIN_PADDING,M.y-E.top),A.y+=E.top-(b.y-M.y)),{translate:M,scroll:A}},x.prototype.cropHiddenHead=function(b,S){var w=S.clone(),T=b.clone();if(w.x&&T.x>h.CANVAS_MIN_PADDING){var _=T.x-Math.max(h.CANVAS_MIN_PADDING,T.x-w.x);T.x-=_,w.x-=_}return w.y&&T.y>h.CANVAS_MIN_PADDING&&(_=T.y-Math.max(h.CANVAS_MIN_PADDING,T.y-w.y),T.y-=_,w.y-=_),{translate:T,scroll:w}},x.prototype.getTailSpace=function(b,S,w,T,_){var M=b.clone(),A=S.clone(),E=Math.max(T.width+A.x-(M.x+w.width),h.CANVAS_MIN_PADDING),U=Math.max(T.height+A.y-(M.y+w.height),h.CANVAS_MIN_PADDING),R=this.checkScrollBars(T,_,w,new i.Offsets(M.x,E,M.y,U));return R.vertical&&(E=Math.max(h.CANVAS_MIN_PADDING,E-_)),R.horizontal&&(U=Math.max(h.CANVAS_MIN_PADDING,U-_)),new e.Size(E,U)},x.prototype.getActualOffset=function(b,S,w){return new i.Offsets(-(S.left-b.left)+w.left,-(S.right-b.right)+w.right,-(S.top-b.top)+w.top,-(S.bottom-b.bottom)+w.bottom)},x.prototype.checkScrollBars=function(b,S,w,T){var _=b.width<w.width+T.horizontal,M=b.height<w.height+T.vertical;return _&&!M&&(M=b.height-S<w.height+T.vertical),M&&!_&&(_=b.width-S<w.width+T.horizontal),{horizontal:_,vertical:M}},x.prototype.setSvgSize=function(b,S){b===this.lastWidth&&S===this.lastHeight||(this.dom.changeByFunc(this.svgElement,function(w){return a.RenderUtils.updateSvgElementSize(w,b,S)}),this.lastWidth=b,this.lastHeight=S)},x.prototype.getVisibileAreaAbsShift=function(b){var S=this.scroll,w=this.paddings.clone(),T=this.simpleView,_=T&&this.crop?this.crop.left*this.actualZoom:0,M=T&&this.crop?this.crop.top*this.actualZoom:0;return new t.Point(w.left-_-(b?0:S.x),w.top-M-(b?0:S.y))},x.prototype.getModelPoint=function(b,S){var w=this.getVisibileAreaAbsShift(),T=b.clone().offset(-w.x,-w.y).multiply(1/this.actualZoom,1/this.actualZoom);if(S){var _=this.containerSize;if(b.x<0||b.y<0||b.x>_.width||b.y>_.height||T.x<0||T.y<0||T.x>this.modelSize.width||T.y>this.modelSize.height)return null}return T.clone().applyConverter(y.UnitConverter.pixelsToTwips)},x.prototype.getAbsolutePoint=function(b,S,w){var T=this.getVisibileAreaAbsShift(S),_=b.clone().multiply(this.actualZoom,this.actualZoom).clone().applyConverter(y.UnitConverter.twipsToPixelsF).clone().offset(T.x,T.y);if(w){if(_.x<0||_.y<0)return null;var M=this.containerSize;if(_.x>M.width||_.y>M.height)return null}return _},x}(v.CanvasManagerBase);h.CanvasViewManager=C},6078:function(j,h,d){var u,g=this&&this.__extends||(u=function(i,e){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var o in n)n.hasOwnProperty(o)&&(t[o]=n[o])},u(i,e)},function(i,e){function t(){this.constructor=i}u(i,e),i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)});Object.defineProperty(h,"__esModule",{value:!0}),h.ExportDOMManipulator=h.DOMManipulator=void 0;var v=d(9463),p=function(){function i(e){this.measurer=e,this.queue=[]}return i.prototype.createElement=function(e,t,n){return e.createElement(function(o){t!=null&&(n!==void 0?t.insertBefore(o,n):t.appendChild(o))})},i.prototype.changeChildrenByPrimitives=function(e,t){var n=this;e.forEach(function(o,r){var a=t.childNodes[r];n.changeByPrimitive(a,o)})},i.prototype.changeByFunc=function(e,t){this.doChange(e,t)},i.prototype.changeByPrimitive=function(e,t){this.doChange(e,t)},i.prototype.cancelAnimation=function(){this.rafId!==void 0&&(cancelAnimationFrame(this.rafId),this.queue=[])},i.prototype.doChange=function(e,t){v.Diagnostics.optimizeUsingRAF?(this.queue.push([e,t]),this.requestAnimation()):this.doChangeSync(e,t)},i.prototype.doChangeSync=function(e,t){typeof t=="function"?t(e):t.applyElementProperties(e,this.measurer)},i.prototype.requestAnimation=function(){var e=this;if(!this.rafRequested){this.rafRequested=!0;var t=function(){e.queue.splice(0,2e3).forEach(function(n){return e.doChangeSync(n[0],n[1])}),e.queue.length?e.rafId=requestAnimationFrame(t):(e.rafRequested=!1,e.rafId=void 0)};this.rafId=requestAnimationFrame(t)}},i}();h.DOMManipulator=p;var s=function(i){function e(){return i!==null&&i.apply(this,arguments)||this}return g(e,i),e.prototype.doChange=function(t,n){this.doChangeSync(t,n)},e}(p);h.ExportDOMManipulator=s},741:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.InputManager=void 0;var u=d(2153),g=d(6907),v=d(3500),p=d(6031),s=d(5503),i=d(7959),e=d(3714),t=d(4246),n=d(9279),o=d(9291),r=d(1114),a=d(3490),c=d(8675),f="dxdi-text-input",m=function(){function y(l,P,C,I,x,b){this.mainElement=l,this.layoutPointResolver=P,this.eventManager=C,this.textMeasurer=I,this.actualZoom=x,this.focusElementsParent=b,this.focused=!1,this.focusLocked=!1,this.createInputElements(this.mainElement,this.focusElementsParent)}return y.prototype.detachEvents=function(){this.detachInputElementEvents(),this.detachTextInputElementEvents()},y.prototype.isFocused=function(){return this.focused},y.prototype.captureFocus=function(l){l&&document.activeElement===this.textInputElement?c.HtmlFocusUtils.focusWithPreventScroll(this.textInputElement||this.inputElement):c.HtmlFocusUtils.focusWithPreventScroll(this.inputElement)},y.prototype.setClipboardData=function(l){this.clipboardInputElement.value=l,c.HtmlFocusUtils.focusWithPreventScroll(this.clipboardInputElement),this.clipboardInputElement.select(),document.execCommand("copy"),this.captureFocus()},y.prototype.getClipboardData=function(l){var P=this;navigator&&navigator.clipboard?navigator.clipboard.readText().then(function(C){l(C),P.captureFocus()}).catch(function(){l(""),P.captureFocus()}):n.Browser.IE&&(this.clipboardInputElement.value="",c.HtmlFocusUtils.focusWithPreventScroll(this.clipboardInputElement),this.clipboardInputElement.select(),document.execCommand("Paste"),l(this.clipboardInputElement.value),this.captureFocus())},y.prototype.isPasteSupportedByBrowser=function(){return n.Browser.IE||n.Browser.WebKitFamily&&navigator&&navigator.clipboard!==void 0},y.prototype.createInputElements=function(l,P){this.createFocusInputElement(P||l),this.createTextInputElement(l),this.createClipboardInputElement(P||l),this.attachInputElementEvents()},y.prototype.setInputElementFocusHandlerMode=function(l){this.textInputElementContainer.setAttribute("class","dxdi-text-input-container"),l&&this.captureFocus()},y.prototype.setInputElementTextInputMode=function(l,P,C,I,x,b){this.textInputElementContainer.setAttribute("class","dxdi-text-input-container "+x),this.textInputElement.value=l,this.setTextInputElementBounds(P,C,b),this.setTextInputElementStyle(I),this.updateTextInputPadding();var S=this.textInputElement||this.inputElement;c.HtmlFocusUtils.focusWithPreventScroll(S),S.select&&S.select()},y.prototype.setTextInputElementBounds=function(l,P,C){this.savedTextInputPosition=l,this.savedTextInputSize=P,this.savedTextInputAngle=C;var I=this.layoutPointResolver.getAbsolutePoint(l,!0);this.textInputElementContainer.style.left=I.x+"px",this.textInputElementContainer.style.top=I.y+"px",this.textInputElementContainer.style.width=P&&P.width+"px"||"0px",this.textInputElementContainer.style.height=P&&P.height+"px"||"0px";var x=[];this.textInputElementContainer.style.transform="",this.actualZoom!==1&&x.push("scale("+this.actualZoom+")"),C&&x.push("rotate("+C+"deg)"),this.textInputElementContainer.style.transform=x.join(" "),this.textInputElement.style.width=P&&P.width+"px"||"",this.textInputElement.style.height=P&&P.height+"px"||"auto"},y.prototype.setTextInputElementStyle=function(l){this.savedTextInputStyle=l,v.RenderUtils.applyStyleToElement(l,this.textInputElement)},y.prototype.createFocusInputElement=function(l){this.inputElement=document.createElement("textarea"),this.inputElement.readOnly=n.Browser.TouchUI,this.inputElement.setAttribute("class","dxdi-focus-input"),l.appendChild(this.inputElement)},y.prototype.attachInputElementEvents=function(){this.onInputBlurHandler=this.onInputBlur.bind(this),this.onInputFocusHandler=this.onInputFocus.bind(this),this.onInputKeyDownHandler=this.onInputKeyDown.bind(this),this.onInputKeyPressHandler=this.onInputKeyPress.bind(this),this.onInputKeyUpHandler=this.onInputKeyUp.bind(this),this.onPasteHandler=this.onPaste.bind(this),r.RenderHelper.addEventListener(this.inputElement,"blur",this.onInputBlurHandler),r.RenderHelper.addEventListener(this.inputElement,"focus",this.onInputFocusHandler),r.RenderHelper.addEventListener(this.inputElement,"keydown",this.onInputKeyDownHandler),r.RenderHelper.addEventListener(this.inputElement,"keypress",this.onInputKeyPressHandler),r.RenderHelper.addEventListener(this.inputElement,"keyup",this.onInputKeyUpHandler),r.RenderHelper.addEventListener(this.inputElement,"paste",this.onPasteHandler)},y.prototype.detachInputElementEvents=function(){r.RenderHelper.removeEventListener(this.inputElement,"blur",this.onInputBlurHandler),r.RenderHelper.removeEventListener(this.inputElement,"focus",this.onInputFocusHandler),r.RenderHelper.removeEventListener(this.inputElement,"keydown",this.onInputKeyDownHandler),r.RenderHelper.removeEventListener(this.inputElement,"keypress",this.onInputKeyPressHandler),r.RenderHelper.removeEventListener(this.inputElement,"keyup",this.onInputKeyUpHandler),r.RenderHelper.removeEventListener(this.inputElement,"paste",this.onPasteHandler)},y.prototype.createTextInputElement=function(l){this.textInputElementContainer=document.createElement("div"),this.textInputElementContainer.setAttribute("class","dxdi-text-input-container"),l.appendChild(this.textInputElementContainer),this.textInputElement=document.createElement("textarea"),this.textInputElement.setAttribute("class",f),this.attachTextInputElementEvents(),this.textInputElementContainer.appendChild(this.textInputElement)},y.prototype.attachTextInputElementEvents=function(){this.onTextInputBlurHandler=this.onTextInputBlur.bind(this),this.onTextInputFocusHandler=this.onTextInputFocus.bind(this),this.onTextInputKeyDownHandler=this.onTextInputKeyDown.bind(this),this.onTextInputMouseWheelHandler=this.onTextInputMouseWheel.bind(this),this.onTextInputMouseUpHandler=this.onTextInputMouseUp.bind(this),this.onTextInputKeyUpHandler=this.onTextInputKeyUp.bind(this),this.onTextInputChangeHandler=this.onTextInputChange.bind(this),r.RenderHelper.addEventListener(this.textInputElement,"mousewheel",this.onTextInputMouseWheelHandler),r.RenderHelper.addEventListener(this.textInputElement,"mouseup",this.onTextInputMouseUpHandler),r.RenderHelper.addEventListener(this.textInputElement,"blur",this.onTextInputBlurHandler),r.RenderHelper.addEventListener(this.textInputElement,"focus",this.onTextInputFocusHandler),r.RenderHelper.addEventListener(this.textInputElement,"keydown",this.onTextInputKeyDownHandler),r.RenderHelper.addEventListener(this.textInputElement,"keyup",this.onTextInputKeyUpHandler),r.RenderHelper.addEventListener(this.textInputElement,"change",this.onTextInputChangeHandler)},y.prototype.detachTextInputElementEvents=function(){r.RenderHelper.removeEventListener(this.textInputElement,"mousewheel",this.onTextInputMouseWheelHandler),r.RenderHelper.removeEventListener(this.textInputElement,"mouseup",this.onTextInputMouseUpHandler),r.RenderHelper.removeEventListener(this.textInputElement,"blur",this.onTextInputBlurHandler),r.RenderHelper.removeEventListener(this.textInputElement,"focus",this.onTextInputFocusHandler),r.RenderHelper.removeEventListener(this.textInputElement,"keydown",this.onTextInputKeyDownHandler),r.RenderHelper.removeEventListener(this.textInputElement,"keyup",this.onTextInputKeyUpHandler),r.RenderHelper.removeEventListener(this.textInputElement,"change",this.onTextInputChangeHandler)},y.prototype.createClipboardInputElement=function(l){this.clipboardInputElement=document.createElement("textarea"),this.clipboardInputElement.setAttribute("class","dxdi-clipboard-input"),l.appendChild(this.clipboardInputElement)},y.prototype.blurControl=function(){this.focusLocked||(this.focused=!1,g.DomUtils.removeClassName(this.mainElement,"focused"))},y.prototype.focusControl=function(){this.focused=!0,this.focusLocked=!1,g.DomUtils.addClassName(this.mainElement,"focused")},y.prototype.updateTextInputPadding=function(){var l=this.textInputElement.value;if(this.savedTextInputSize){C=this.textMeasurer.measureWords(l,this.savedTextInputStyle,t.TextOwner.Shape),I=a.getTextHeight(l,this.savedTextInputSize.width,C,!0);var P=Math.max(0,.5*(this.savedTextInputSize.height-I));this.textInputElement.style.paddingTop=Math.ceil(P)+"px",this.textInputElement.style.height=Math.floor(this.savedTextInputSize.height)+"px"}else{var C=this.textMeasurer.measureWords(" ",this.savedTextInputStyle,t.TextOwner.Connector),I=a.getLineHeight(C)*((a.textToParagraphs(l).length||1)+1);this.textInputElement.style.height=Math.ceil(I)+"px"}},y.prototype.onInputBlur=function(l){var P=this;this.blurControl(),v.raiseEvent(l,this.getDiagramFocusEvent(l),function(C){return P.eventManager.onBlur(C)})},y.prototype.onInputFocus=function(l){var P=this;this.focusControl(),v.raiseEvent(l,this.getDiagramFocusEvent(l),function(C){return P.eventManager.onFocus(C)})},y.prototype.onInputKeyDown=function(l){var P=this;v.raiseEvent(l,this.getDiagramKeyboardEvent(l),function(C){return P.eventManager.onKeyDown(C)})},y.prototype.onInputKeyPress=function(l){!l.preventDefault||n.Browser.Safari&&l.code==="KeyV"||l.preventDefault()},y.prototype.onInputKeyUp=function(l){var P=this;v.raiseEvent(l,this.getDiagramKeyboardEvent(l),function(C){return P.eventManager.onKeyUp(C)})},y.prototype.onTextInputBlur=function(l){var P=this;if(this.eventManager.canFinishTextEditing())this.blurControl(),v.raiseEvent(l,this.getDiagramFocusEvent(l),function(I){return P.eventManager.onTextInputBlur(I)});else{var C=e.EvtUtils.getEventSource(l);document.activeElement!==C&&C.focus()}},y.prototype.onTextInputFocus=function(l){var P=this;this.focusControl(),v.raiseEvent(l,this.getDiagramFocusEvent(l),function(C){return P.eventManager.onTextInputFocus(C)})},y.prototype.onTextInputKeyDown=function(l){var P=this;v.raiseEvent(l,this.getDiagramKeyboardEvent(l),function(C){return P.eventManager.onTextInputKeyDown(C)})},y.prototype.onTextInputKeyUp=function(l){this.updateTextInputPadding()},y.prototype.onTextInputChange=function(l){this.updateTextInputPadding()},y.prototype.onPaste=function(l){var P=this;v.raiseEvent(l,this.getDiagramClipboardEvent(l),function(C){return P.eventManager.onPaste(C)})},y.prototype.onTextInputMouseWheel=function(l){this.mouseWheelHandler&&this.mouseWheelHandler(l)},y.prototype.onTextInputMouseUp=function(l){l.stopPropagation&&l.stopPropagation(),e.EvtUtils.cancelBubble(l)},y.prototype.getDiagramKeyboardEvent=function(l){return new p.DiagramKeyboardEvent(u.KeyUtils.getKeyModifiers(l),u.KeyUtils.getEventKeyCode(l),this.textInputElement.value)},y.prototype.getTextInputElementValue=function(){return this.textInputElement.value},y.prototype.getDiagramFocusEvent=function(l){return new p.DiagramFocusEvent(l.target.value)},y.prototype.getDiagramClipboardEvent=function(l){var P,C=l.clipboardData||l.originalEvent&&l.originalEvent.clipboardData;return P=C!==void 0?C.getData("text/plain"):window.clipboardData.getData("Text"),new p.DiagramClipboardEvent(P)},y.prototype.isTextInputElement=function(l){return typeof l.className=="string"&&l.className.indexOf(f)>-1},y.prototype.lockFocus=function(){var l=this;this.focusLocked=!0,setTimeout(function(){return l.focusLocked=!1},10)},y.prototype.notifyViewAdjusted=function(l){},y.prototype.notifyActualZoomChanged=function(l){this.actualZoom=l,this.savedTextInputPosition&&this.savedTextInputSize&&this.setTextInputElementBounds(this.savedTextInputPosition,this.savedTextInputSize,this.savedTextInputAngle)},y.prototype.notifyTextInputStart=function(l,P,C,I){var x,b="";l instanceof s.Shape?(b="shape-text",x=l.textAngle):l instanceof i.Connector&&(b="connector-text"),I=I&&I.clone().applyConverter(o.UnitConverter.twipsToPixels),this.setInputElementTextInputMode(P,C,I,l.styleText,b,x)},y.prototype.notifyTextInputEnd=function(l,P){this.setInputElementFocusHandlerMode(P)},y.prototype.notifyTextInputPermissionsCheck=function(l,P){},y}();h.InputManager=m},4246:(j,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.TextOwner=void 0,function(d){d[d.Shape=0]="Shape",d[d.Connector=1]="Connector",d[d.ExtensionLine=2]="ExtensionLine",d[d.Resize=3]="Resize"}(h.TextOwner||(h.TextOwner={}))},1733:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.TextMeasurer=void 0;var u=d(6353),g=d(3500),v=d(5503),p=d(7959),s=d(4246),i=d(1114),e=d(3490),t=function(){function n(o){this.cache={},this.fontSizeCache={},this.containers={},this.parent=o,this.createNodes()}return n.prototype.measureWords=function(o,r,a){var c=this,f={words:{},fontSize:-1},m=typeof o=="string"?this.splitToWords(o,!1):o.reduce(function(C,I){return C.concat(c.splitToWords(I,!1))},[]);m.push(" ");var y=this.getStyleHash(r,a),l=this.tryLoadWordsToMeasurer(m,r,y,a,void 0,void 0,void 0,void 0,f);if(l){var P=this.containers[a];this.putElementsInDOM(P,l),this.beforeMeasureInDOM(),this.measureElementsInDOM(l,f),this.afterMeasureInDOM()}return f},n.prototype.measureTextLine=function(o,r,a){var c=this.measureWords(o,r,a);return e.getTextLineSize(o,c)},n.prototype.onNewModel=function(o,r){var a=this;r.changeByFunc(null,function(){return a.onNewModelCore(o)})},n.prototype.onNewModelCore=function(o){var r=o.filter(function(m){return m instanceof v.Shape}),a=o.filter(function(m){return m instanceof p.Connector}),c=this.tryLoadShapeTexts(r),f=this.tryLoadConnectorTexts(a);(c||f)&&(c&&this.putElementsInDOM(this.containers[s.TextOwner.Shape],c),f&&this.putElementsInDOM(this.containers[s.TextOwner.Connector],f),this.beforeMeasureInDOM(),c&&this.measureElementsInDOM(c),f&&this.measureElementsInDOM(f),this.afterMeasureInDOM())},n.prototype.replaceParent=function(o){this.parent!==o&&(this.mainElement.parentNode&&o.appendChild(this.mainElement),this.parent=o)},n.prototype.clean=function(){g.RenderUtils.removeElement(this.mainElement)},n.prototype.tryLoadShapeTexts=function(o){var r=this,a={},c=[],f=[],m=[];return o.forEach(function(y){var l=r.getStyleHash(y.styleText,s.TextOwner.Shape);r.tryLoadWordsToMeasurer(r.splitToWords(y.text,!0),y.styleText,l,s.TextOwner.Shape,a,c,f,m)}),c.length?{elements:c,hashes:f,styleHashes:m}:null},n.prototype.tryLoadConnectorTexts=function(o){var r=this,a={},c=[],f=[],m=[];return o.forEach(function(y){var l=y.texts.map(function(C){return C.value}).reduce(function(C,I){return C.concat(r.splitToWords(I,!1))},[]);if(l.length){l.push(" ");var P=r.getStyleHash(y.styleText,s.TextOwner.Connector);r.tryLoadWordsToMeasurer(l,y.styleText,P,s.TextOwner.Connector,a,c,f,m)}}),c.length?{elements:c,hashes:f,styleHashes:m}:null},n.prototype.tryLoadWordsToMeasurer=function(o,r,a,c,f,m,y,l,P){var C=this,I=[];return m=m||[],y=y||[],l=l||[],f=f||{},o.forEach(function(x){return C.tryLoadWordToMeasurer(x,r,a,c,f,m,y,l,I,P)}),m.length?{elements:m,hashes:y,styleHashes:l,newWords:I}:null},n.prototype.putElementsInDOM=function(o,r){for(o.parentNode&&o.parentNode.removeChild(o);o.firstChild;)o.removeChild(o.firstChild);r.elements.forEach(function(a){return o.appendChild(a)}),this.svgElement.appendChild(o)},n.prototype.measureElementsInDOM=function(o,r){for(var a=o.hashes,c=o.elements,f=o.newWords,m=a.length,y=0;y<m;y++){var l=this.getDomElementSize(c[y]);l&&(l.isEmpty()||(this.cache[a[y]]=l),r&&(r.words[f[y]]=l));var P=o.styleHashes[y];this.fontSizeCache[P]===void 0&&(this.fontSizeCache[P]=this.getDomFontSize(c[y])),r&&r.fontSize<0&&(r.fontSize=this.fontSizeCache[P])}},n.prototype.beforeMeasureInDOM=function(){this.parent.appendChild(this.mainElement)},n.prototype.afterMeasureInDOM=function(){this.mainElement.parentNode&&this.mainElement.parentNode.removeChild(this.mainElement)},n.prototype.tryLoadWordToMeasurer=function(o,r,a,c,f,m,y,l,P,C){var I=this.getHash(o,r,c),x=this.cache[I];x||f[I]?x&&C&&(C.words[o]=x,C.fontSize=this.fontSizeCache[a]):(f[I]=!0,y.push(I),m.push(this.createElement(o,r)),l.push(a),P.push(o))},n.prototype.getHash=function(o,r,a){return a+"|"+(r&&r.toHash())+"|"+o},n.prototype.getStyleHash=function(o,r){return this.getHash(" ",o,r)},n.prototype.createElement=function(o,r){var a=document.createElementNS(i.svgNS,"text");return o===" "&&a.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),a.textContent=o,r&&g.RenderUtils.applyStyleToElement(r,a),a},n.prototype.splitToWords=function(o,r){var a=e.textToWords(o);return r&&a.push(" "),a},n.prototype.getDomFontSize=function(o){return parseFloat(window.getComputedStyle(o).fontSize)},n.prototype.getDomElementSize=function(o){var r;try{r=o.getBBox()}catch{}return r?new u.Size(r.width,r.height):new u.Size(0,0)},n.prototype.createNodes=function(){this.mainElement=i.RenderHelper.createMainElement(void 0,!0),this.svgElement=i.RenderHelper.createSvgElement(this.mainElement,!1),this.createContainer(s.TextOwner.Shape,"shape"),this.createContainer(s.TextOwner.Connector,"connector"),this.createContainer(s.TextOwner.ExtensionLine,"extension-line"),this.createContainer(s.TextOwner.Resize,"resize-info")},n.prototype.createContainer=function(o,r){var a=document.createElementNS(i.svgNS,"g");a.setAttribute("class",r),this.containers[o]=a},n}();h.TextMeasurer=t},4593:function(j,h,d){var u,g=this&&this.__extends||(u=function(s,i){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},u(s,i)},function(s,i){function e(){this.constructor=s}u(s,i),s.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)});Object.defineProperty(h,"__esModule",{value:!0}),h.ClipPathPrimitive=void 0;var v=d(1114),p=function(s){function i(e,t){var n=s.call(this)||this;return n.id=e,n.children=t,n}return g(i,s),i.prototype.createMainElement=function(){var e=document.createElementNS(v.svgNS,"clipPath");return e.setAttribute("id",this.id),e},i.prototype.applyElementProperties=function(e,t){this.id&&e.setAttribute("id",this.id),s.prototype.applyElementProperties.call(this,e,t)},i}(d(4178).SvgPrimitive);h.ClipPathPrimitive=p},418:function(j,h,d){var u,g=this&&this.__extends||(u=function(s,i){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},u(s,i)},function(s,i){function e(){this.constructor=s}u(s,i),s.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)});Object.defineProperty(h,"__esModule",{value:!0}),h.EllipsePrimitive=void 0;var v=d(1114),p=function(s){function i(e,t,n,o,r,a,c){var f=s.call(this,r,a,void 0,c)||this;return f.cx=e,f.cy=t,f.rx=n,f.ry=o,f}return g(i,s),i.prototype.createMainElement=function(){return document.createElementNS(v.svgNS,"ellipse")},i.prototype.applyElementProperties=function(e,t){this.setUnitAttribute(e,"cx",this.cx),this.setUnitAttribute(e,"cy",this.cy),this.setUnitAttribute(e,"rx",this.rx),this.setUnitAttribute(e,"ry",this.ry),this.setPositionCorrectionAttribute(e),s.prototype.applyElementProperties.call(this,e,t)},i}(d(4178).SvgPrimitive);h.EllipsePrimitive=p},4628:function(j,h,d){var u,g=this&&this.__extends||(u=function(s,i){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},u(s,i)},function(s,i){function e(){this.constructor=s}u(s,i),s.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)});Object.defineProperty(h,"__esModule",{value:!0}),h.FilterPrimitive=void 0;var v=d(1114),p=function(s){function i(e,t,n,o,r){var a=s.call(this)||this;return a.id=e,a.x=t,a.y=n,a.width=o,a.height=r,a}return g(i,s),i.prototype.createMainElement=function(){var e=document.createElementNS(v.svgNS,"filter");return e.setAttribute("id",this.id),e},i.prototype.applyElementProperties=function(e,t){this.id&&e.setAttribute("id",this.id),this.setUnitAttribute(e,"x",this.x),this.setUnitAttribute(e,"y",this.y),this.setUnitAttribute(e,"width",this.width),this.setUnitAttribute(e,"height",this.height),this.setPositionCorrectionAttribute(e),s.prototype.applyElementProperties.call(this,e,t)},i}(d(4178).SvgPrimitive);h.FilterPrimitive=p},5329:function(j,h,d){var u,g=this&&this.__extends||(u=function(s,i){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},u(s,i)},function(s,i){function e(){this.constructor=s}u(s,i),s.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)});Object.defineProperty(h,"__esModule",{value:!0}),h.GroupPrimitive=void 0;var v=d(1114),p=function(s){function i(e,t,n,o,r,a){var c=s.call(this,null,t,o,r)||this;return c.zIndex=n,c.onBeforeDispose=a,c.children=e,c}return g(i,s),i.prototype.createMainElement=function(){return document.createElementNS(v.svgNS,"g")},i.prototype.applyElementProperties=function(e,t){(this.zIndex||this.zIndex===0)&&e.style.setProperty("z-index",this.zIndex.toString()),s.prototype.applyElementProperties.call(this,e,t)},i.prototype.dispose=function(){this.onBeforeDispose&&this.onBeforeDispose(),s.prototype.dispose.call(this)},i}(d(4178).SvgPrimitive);h.GroupPrimitive=p},1995:function(j,h,d){var u,g=this&&this.__extends||(u=function(s,i){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},u(s,i)},function(s,i){function e(){this.constructor=s}u(s,i),s.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)});Object.defineProperty(h,"__esModule",{value:!0}),h.ImagePrimitive=void 0;var v=d(1114),p=function(s){function i(e,t,n,o,r,a,c,f){a===void 0&&(a="none");var m=s.call(this,c,f)||this;return m.x=e,m.y=t,m.width=n,m.height=o,m.url=r,m.preserveAspectRatio=a,m}return g(i,s),i.prototype.createMainElement=function(){return document.createElementNS(v.svgNS,"image")},i.prototype.applyElementProperties=function(e,t){this.setUnitAttribute(e,"x",this.x),this.setUnitAttribute(e,"y",this.y),this.setUnitAttribute(e,"width",this.width),this.setUnitAttribute(e,"height",this.height),this.setPositionCorrectionAttribute(e),e.setAttribute("href",this.url),e.setAttribute("preserveAspectRatio",this.preserveAspectRatio),s.prototype.applyElementProperties.call(this,e,t)},i}(d(4178).SvgPrimitive);h.ImagePrimitive=p},7724:function(j,h,d){var u,g=this&&this.__extends||(u=function(f,m){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,l){y.__proto__=l}||function(y,l){for(var P in l)l.hasOwnProperty(P)&&(y[P]=l[P])},u(f,m)},function(f,m){function y(){this.constructor=f}u(f,m),f.prototype=m===null?Object.create(m):(y.prototype=m.prototype,new y)});Object.defineProperty(h,"__esModule",{value:!0}),h.PathPrimitiveClosePathCommand=h.PathPrimitiveArcToCommand=h.PathPrimitiveQuadraticCurveToCommand=h.PathPrimitiveCubicCurveToCommand=h.PathPrimitiveLineToCommand=h.PathPrimitiveMoveToCommand=h.PathPrimitiveCommand=h.PathPrimitive=void 0;var v=d(1114),p=d(4178),s=d(9886),i=function(f){function m(y,l,P,C,I){var x=f.call(this,l,P,C,I)||this;return x.commands=y.map(function(b){return b.style=l,b}),x}return g(m,f),m.prototype.createMainElement=function(){return document.createElementNS(v.svgNS,"path")},m.prototype.applyElementProperties=function(y,l){y.setAttribute("d",this.commands.map(function(P){return P.toString()}).join(" ")),this.setPositionCorrectionAttribute(y),f.prototype.applyElementProperties.call(this,y,l)},m}(p.SvgPrimitive);h.PathPrimitive=i;var e=function(f){function m(){return f!==null&&f.apply(this,arguments)||this}return g(m,f),m}(s.PrimitiveObject);h.PathPrimitiveCommand=e;var t=function(f){function m(y,l){var P=f.call(this)||this;return P.x=y,P.y=l,P}return g(m,f),m.prototype.toString=function(){return"M "+this.getUnitVaue(this.x)+" "+this.getUnitVaue(this.y)},m.fromPoint=function(y){return new m(y.x,y.y)},m}(e);h.PathPrimitiveMoveToCommand=t;var n=function(f){function m(y,l){var P=f.call(this)||this;return P.x=y,P.y=l,P}return g(m,f),m.prototype.toString=function(){return"L "+this.getUnitVaue(this.x)+" "+this.getUnitVaue(this.y)},m.fromPoint=function(y){return new m(y.x,y.y)},m}(e);h.PathPrimitiveLineToCommand=n;var o=function(f){function m(y,l,P,C,I,x){var b=f.call(this)||this;return b.x1=y,b.y1=l,b.x2=P,b.y2=C,b.x3=I,b.y3=x,b}return g(m,f),m.prototype.toString=function(){return"C "+this.getUnitVaue(this.x1)+" "+this.getUnitVaue(this.y1)+","+this.getUnitVaue(this.x2)+" "+this.getUnitVaue(this.y2)+","+this.getUnitVaue(this.x3)+" "+this.getUnitVaue(this.y3)},m}(e);h.PathPrimitiveCubicCurveToCommand=o;var r=function(f){function m(y,l,P,C){var I=f.call(this)||this;return I.x1=y,I.y1=l,I.x2=P,I.y2=C,I}return g(m,f),m.prototype.toString=function(){return"Q "+this.getUnitVaue(this.x1)+" "+this.getUnitVaue(this.y1)+","+this.getUnitVaue(this.x2)+" "+this.getUnitVaue(this.y2)},m}(e);h.PathPrimitiveQuadraticCurveToCommand=r;var a=function(f){function m(y,l,P,C,I,x,b){var S=f.call(this)||this;return S.rx=y,S.ry=l,S.xAxisRotation=P,S.largeArcFlag=C,S.sweepFag=I,S.x=x,S.y=b,S}return g(m,f),m.prototype.toString=function(){return"A "+this.getUnitVaue(this.rx)+" "+this.getUnitVaue(this.ry)+" "+this.getUnitVaue(this.xAxisRotation)+" "+(this.largeArcFlag?"1":"0")+" "+(this.sweepFag?"1":"0")+this.getUnitVaue(this.x)+","+this.getUnitVaue(this.y)},m}(e);h.PathPrimitiveArcToCommand=a;var c=function(f){function m(){return f.call(this)||this}return g(m,f),m.prototype.toString=function(){return"z"},m}(e);h.PathPrimitiveClosePathCommand=c},1932:function(j,h,d){var u,g=this&&this.__extends||(u=function(s,i){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},u(s,i)},function(s,i){function e(){this.constructor=s}u(s,i),s.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)});Object.defineProperty(h,"__esModule",{value:!0}),h.PatternPrimitive=void 0;var v=d(1114),p=function(s){function i(e,t,n,o,r,a,c){var f=s.call(this,c)||this;return f.id=e,f.x=n,f.y=o,f.width=r,f.height=a,f.children=t,f}return g(i,s),i.prototype.createMainElement=function(){var e=document.createElementNS(v.svgNS,"pattern");return e.setAttribute("patternUnits","userSpaceOnUse"),e.setAttribute("id",this.id),e},i.prototype.applyElementProperties=function(e,t){this.setUnitAttribute(e,"x",this.x),this.setUnitAttribute(e,"y",this.y),this.setUnitAttribute(e,"width",this.width),this.setUnitAttribute(e,"height",this.height),this.setPositionCorrectionAttribute(e),s.prototype.applyElementProperties.call(this,e,t)},i}(d(4178).SvgPrimitive);h.PatternPrimitive=p},4178:function(j,h,d){var u,g=this&&this.__extends||(u=function(s,i){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},u(s,i)},function(s,i){function e(){this.constructor=s}u(s,i),s.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)});Object.defineProperty(h,"__esModule",{value:!0}),h.SvgPrimitive=void 0;var v=d(3500),p=function(s){function i(e,t,n,o){var r=s.call(this,e)||this;return r.className=t,r.clipPathId=n,r.onApplyProperties=o,r.children=[],r}return g(i,s),i.prototype.createElement=function(e){var t=this.createMainElement();return this.createChildElements(t),e(t),this.createCustomContent(t),t},i.prototype.createChildElements=function(e){for(var t=0;t<this.children.length;t++)this.children[t].createElement(function(n){return e.appendChild(n)})},i.prototype.applyElementProperties=function(e,t){this.applyElementStyleProperties(e),this.className&&e.setAttribute("class",this.className),typeof this.clipPathId=="string"&&(this.clipPathId?e.setAttribute("clip-path",v.RenderUtils.getUrlPathById(this.clipPathId)):e.removeAttribute("clip-path")),this.onApplyProperties&&this.onApplyProperties(e),this.applyChildrenProperties(e,t)},i.prototype.applyChildrenProperties=function(e,t){for(var n=0;n<this.children.length;n++)this.children[n].applyElementProperties(e.childNodes[n],t)},i.prototype.applyElementStyleProperties=function(e){this.applyElementStylePropertiesCore(e)},i.prototype.applyElementStylePropertiesCore=function(e,t){t===void 0&&(t=!1),this.style&&v.RenderUtils.applyStyleToElement(this.style,e,t)},i.prototype.createCustomContent=function(e){},i.prototype.destroyCustomContent=function(e){},i.prototype.dispose=function(){this.children&&this.children.forEach(function(e){return e.dispose()})},i}(d(9886).PrimitiveObject);h.SvgPrimitive=p},9886:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.PrimitiveObject=void 0;var u=d(9291),g=function(){function v(p){this.style=p}return Object.defineProperty(v.prototype,"strokeWidthPx",{get:function(){return this.style?this.style.strokeWidthPx:0},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"strokeOffset",{get:function(){return this.style?this.style.strokeOffset:0},enumerable:!1,configurable:!0}),v.prototype.getUnitVaue=function(p){return typeof p=="number"?u.UnitConverter.twipsToPixels(p).toString():p},v.prototype.setUnitAttribute=function(p,s,i){i!=null&&p.setAttribute(s,this.getUnitVaue(i))},v.prototype.setPositionCorrectionAttribute=function(p){var s=this.strokeWidthPx%2==1?"translate("+this.strokeOffset+", "+this.strokeOffset+")":"";p.setAttribute("transform",s)},v}();h.PrimitiveObject=g},4716:function(j,h,d){var u,g=this&&this.__extends||(u=function(s,i){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},u(s,i)},function(s,i){function e(){this.constructor=s}u(s,i),s.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)});Object.defineProperty(h,"__esModule",{value:!0}),h.RectanglePrimitive=void 0;var v=d(1114),p=function(s){function i(e,t,n,o,r,a,c,f){var m=s.call(this,r,a,c,f)||this;return m.x=e,m.y=t,m.width=n,m.height=o,m}return g(i,s),i.prototype.createMainElement=function(){return document.createElementNS(v.svgNS,"rect")},i.prototype.applyElementProperties=function(e,t){this.setUnitAttribute(e,"x",this.x),this.setUnitAttribute(e,"y",this.y),this.setUnitAttribute(e,"width",this.width),this.setUnitAttribute(e,"height",this.height),this.setPositionCorrectionAttribute(e),s.prototype.applyElementProperties.call(this,e,t)},i}(d(4178).SvgPrimitive);h.RectanglePrimitive=p},4538:function(j,h,d){var u,g=this&&this.__extends||(u=function(s,i){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},u(s,i)},function(s,i){function e(){this.constructor=s}u(s,i),s.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)});Object.defineProperty(h,"__esModule",{value:!0}),h.RoundedRectanglePrimitive=void 0;var v=d(1114),p=function(s){function i(e,t,n,o,r,a,c,f,m,y){r===void 0&&(r=0),a===void 0&&(a=0);var l=s.call(this,e,t,n,o,c,f,m,y)||this;return l.x=e,l.y=t,l.width=n,l.height=o,l.rx=r,l.ry=a,l}return g(i,s),i.prototype.createMainElement=function(){return document.createElementNS(v.svgNS,"rect")},i.prototype.applyElementProperties=function(e,t){this.setUnitAttribute(e,"rx",this.rx),this.setUnitAttribute(e,"ry",this.ry),s.prototype.applyElementProperties.call(this,e,t)},i}(d(4716).RectanglePrimitive);h.RoundedRectanglePrimitive=p},3281:function(j,h,d){var u,g=this&&this.__extends||(u=function(i,e){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var o in n)n.hasOwnProperty(o)&&(t[o]=n[o])},u(i,e)},function(i,e){function t(){this.constructor=i}u(i,e),i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)});Object.defineProperty(h,"__esModule",{value:!0}),h.ShadowFilterPrimitive=void 0;var v=d(4628),p=d(1114),s=function(i){function e(){return i!==null&&i.apply(this,arguments)||this}return g(e,i),e.prototype.createChildElements=function(t){var n=document.createElementNS(p.svgNS,"feGaussianBlur");n.setAttribute("in","SourceGraphic"),n.setAttribute("stdDeviation","4.6"),t.appendChild(n);var o=document.createElementNS(p.svgNS,"feOffset");o.setAttribute("dx","0"),o.setAttribute("dy","0"),t.appendChild(o);var r=document.createElementNS(p.svgNS,"feMerge");t.appendChild(r);var a=document.createElementNS(p.svgNS,"feMergeNode");r.appendChild(a);var c=document.createElementNS(p.svgNS,"feMergeNode");c.setAttribute("in","SourceGraphic"),r.appendChild(c)},e}(v.FilterPrimitive);h.ShadowFilterPrimitive=s},1248:function(j,h,d){var u,g=this&&this.__extends||(u=function(s,i){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},u(s,i)},function(s,i){function e(){this.constructor=s}u(s,i),s.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)});Object.defineProperty(h,"__esModule",{value:!0}),h.SvgElementPrimitive=void 0;var v=d(1114),p=function(s){function i(e,t,n,o,r,a,c,f,m){var y=s.call(this,null,f,void 0,m)||this;return y.x=e,y.y=t,y.width=n,y.height=o,y.createContent=r,y.destroyContent=a,y.data=c,y}return g(i,s),i.prototype.createMainElement=function(){return document.createElementNS(v.svgNS,"svg")},i.prototype.applyElementProperties=function(e,t){this.setUnitAttribute(e,"x",this.x),this.setUnitAttribute(e,"y",this.y),this.setUnitAttribute(e,"width",this.width),this.setUnitAttribute(e,"height",this.height),this.setPositionCorrectionAttribute(e),s.prototype.applyElementProperties.call(this,e,t)},i.prototype.createCustomContent=function(e){this.createContent&&this.createContent(e,this.data)},i.prototype.destroyCustomContent=function(e){this.destroyContent&&this.destroyContent(e)},i}(d(4178).SvgPrimitive);h.SvgElementPrimitive=p},3360:function(j,h,d){var u,g=this&&this.__extends||(u=function(n,o){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var c in a)a.hasOwnProperty(c)&&(r[c]=a[c])},u(n,o)},function(n,o){function r(){this.constructor=n}u(n,o),n.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)});Object.defineProperty(h,"__esModule",{value:!0}),h.TextFloodFilterPrimitive=h.TextFilterPrimitive=void 0;var v=d(1114),p=d(4628),s=d(6613),i=d(13),e=function(n){function o(r,a,c,f,m){a===void 0&&(a="-0.05"),c===void 0&&(c="-0.05"),f===void 0&&(f="1.1"),m===void 0&&(m="1.1");var y=n.call(this,r,a,c,f,m)||this;return y.id=r,y.x=a,y.y=c,y.width=f,y.height=m,y}return g(o,n),o.prototype.createChildElements=function(r){var a=document.createElementNS(v.svgNS,"feFlood");r.appendChild(a);var c=document.createElementNS(v.svgNS,"feComposite");c.setAttribute("in","SourceGraphic"),c.setAttribute("operator","atop"),r.appendChild(c)},o}(p.FilterPrimitive);h.TextFilterPrimitive=e;var t=function(n){function o(r,a,c,f,m,y){c===void 0&&(c="-0.05"),f===void 0&&(f="-0.05"),m===void 0&&(m="1.1"),y===void 0&&(y="1.1");var l=n.call(this,r,c,f,m,y)||this;return l.id=r,l.floodColor=a,l.x=c,l.y=f,l.width=m,l.height=y,l}return g(o,n),o.prototype.applyChildrenProperties=function(r){for(var a=void 0,c=0;a=r.childNodes[c];c++)if(a.nodeName&&a.nodeName.toUpperCase()==="FEFLOOD"){this.prepareFEFloodNode(a);break}},o.prototype.prepareFEFloodNode=function(r){var a=i.ColorUtils.colorToHash(this.floodColor);r.setAttribute("flood-color",a),r.setAttribute("class","text-filter-flood"),this.floodColor!==s.DiagramModel.defaultPageColor?r.style.setProperty("flood-color",a):r.style.setProperty("flood-color","")},o}(e);h.TextFloodFilterPrimitive=t},9416:function(j,h,d){var u,g=this&&this.__extends||(u=function(f,m){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,l){y.__proto__=l}||function(y,l){for(var P in l)l.hasOwnProperty(P)&&(y[P]=l[P])},u(f,m)},function(f,m){function y(){this.constructor=f}u(f,m),f.prototype=m===null?Object.create(m):(y.prototype=m.prototype,new y)});Object.defineProperty(h,"__esModule",{value:!0}),h.TextPrimitive270degRenderHelper=h.TextPrimitive180degRenderHelper=h.TextPrimitive90degRenderHelper=h.TextPrimitiveRenderHelper=h.TextPrimitive=h.TextAngle=void 0;var v,p=d(9291),s=d(1114),i=d(4178),e=d(3500),t=d(3490);(function(f){f[f.Angle0deg=0]="Angle0deg",f[f.Angle90deg=90]="Angle90deg",f[f.Angle180deg=180]="Angle180deg",f[f.Angle270deg=270]="Angle270deg"})(v=h.TextAngle||(h.TextAngle={}));var n=function(f){function m(y,l,P,C,I,x,b,S,w,T,_,M,A){var E=f.call(this,S,"",T,A)||this;return E.x=y,E.y=l,E.text=P,E.owner=C,E.textWidth=I,E.textHeight=x,E.textSpacing=b,E.reverseTextAhchor=w,E.angle=M,E.filterId=_,E.textSegmens=t.textToParagraphs(E.text),E.renderHelper=E.createRenderHelper(),E.textWidth!==void 0&&E.textWidth!==void 0&&(E.x=E.renderHelper.getTextX(E.x),E.y=E.renderHelper.getTextY(E.y)),E}return g(m,f),m.prototype.createMainElement=function(){return document.createElementNS(s.svgNS,"text")},m.prototype.applyElementProperties=function(y,l){this.setUnitAttribute(y,"x",this.x),this.setUnitAttribute(y,"y",this.y),this.filterId&&y.setAttribute("filter",e.RenderUtils.getUrlPathById(this.filterId)),f.prototype.applyElementProperties.call(this,y,l),y.getAttribute("appliedText")!==this.text||y.getAttribute("appliedSize")!==(this.fitToSize&&this.fitToSize.toString())?(this.createTSpanElements(y,l),y.setAttribute("appliedText",this.text),y.setAttribute("appliedSize",this.fitToSize&&this.fitToSize.toString())):this.prepareTSpanElements(y),this.renderHelper.prepareMainElement(y,this.x,this.y)},m.prototype.createTSpanElements=function(y,l){var P=this;e.RenderUtils.removeContent(y),this.textSegmens.forEach(function(I,x){if(!I&&P.textSegmens.length>1)P.createTSpanElement(y).textContent=" ";else if(P.fitToSize){var b=t.textToWords(I),S=t.wordsByLines(p.UnitConverter.twipsToPixels(P.fitToSize),b,function(){return l.measureWords(b,P.style,P.owner)});S.forEach(function(w){P.createTSpanElement(y).textContent=w}),!S.length&&(P.createTSpanElement(y).textContent=" ")}else P.createTSpanElement(y).textContent=I});var C=y.firstChild;C&&this.prepareFirstTSpanElement(C,y.childNodes.length)},m.prototype.createTSpanElement=function(y){var l=document.createElementNS(s.svgNS,"tspan");return y.appendChild(l),this.prepareTSpanElement(l),l},m.prototype.prepareTSpanElements=function(y){for(var l=0;l<y.childNodes.length;l++){var P=y.childNodes[l];this.prepareTSpanElement(P)}var C=y.firstChild;C&&this.prepareFirstTSpanElement(C,y.childNodes.length)},m.prototype.prepareTSpanElement=function(y){this.renderHelper.prepareTSpanElement(y,this.x,this.y)},m.prototype.prepareFirstTSpanElement=function(y,l){this.renderHelper.prepareFirstTSpanElement(y,l)},m.prototype.applyElementStyleProperties=function(y){this.applyElementStylePropertiesCore(y,this.reverseTextAhchor)},Object.defineProperty(m.prototype,"fitToSize",{get:function(){return this.renderHelper.fitToSize},enumerable:!1,configurable:!0}),m.prototype.createRenderHelper=function(){switch(this.angle){case v.Angle90deg:return new r(this);case v.Angle180deg:return new a(this);case v.Angle270deg:return new c(this);default:return new o(this)}},m.baselineCorrection=.35,m}(i.SvgPrimitive);h.TextPrimitive=n;var o=function(){function f(m){this.primitive=m}return Object.defineProperty(f.prototype,"textWidth",{get:function(){return this.primitive.textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"textHeight",{get:function(){return this.primitive.textHeight},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"fitToSize",{get:function(){return this.textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"textAnchor",{get:function(){return this.primitive.style["text-anchor"]},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"textSpacing",{get:function(){return this.primitive.textSpacing},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"angle",{get:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"needRotation",{get:function(){return!1},enumerable:!1,configurable:!0}),f.prototype.prepareMainElement=function(m,y,l){this.needRotation&&m.setAttribute("transform","rotate("+this.angle+", "+p.UnitConverter.twipsToPixels(y)+", "+p.UnitConverter.twipsToPixels(l)+")")},f.prototype.prepareTSpanElement=function(m,y,l){this.primitive.setUnitAttribute(m,"x",y),m.setAttribute("dy",t.LINE_HEIGHT+"em")},f.prototype.prepareFirstTSpanElement=function(m,y){var l=-(y-1)/2+n.baselineCorrection;m.setAttribute("dy",l.toFixed(2)+"em")},f.prototype.getTextX=function(m){return this.textAnchor&&this.textAnchor!=="middle"?this.textAnchor==="end"?m+this.textWidth-this.textSpacing:this.textAnchor==="start"?m+this.textSpacing:m:m+this.textWidth/2},f.prototype.getTextY=function(m){return m+this.textHeight/2},f.prototype.setUnitAttribute=function(m,y,l){this.primitive.setUnitAttribute(m,y,l)},f}();h.TextPrimitiveRenderHelper=o;var r=function(f){function m(y){return f.call(this,y)||this}return g(m,f),Object.defineProperty(m.prototype,"fitToSize",{get:function(){return this.textHeight},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"angle",{get:function(){return 90},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"needRotation",{get:function(){return!0},enumerable:!1,configurable:!0}),m.prototype.getTextX=function(y){return y+this.textWidth/2},m.prototype.getTextY=function(y){return this.textAnchor&&this.textAnchor!=="middle"?this.textAnchor==="end"?y+this.textHeight-this.textSpacing:this.textAnchor==="start"?y+this.textSpacing:y:y+this.textHeight/2},m}(o);h.TextPrimitive90degRenderHelper=r;var a=function(f){function m(y){return f.call(this,y)||this}return g(m,f),Object.defineProperty(m.prototype,"angle",{get:function(){return 180},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"needRotation",{get:function(){return!0},enumerable:!1,configurable:!0}),m.prototype.getTextX=function(y){return this.textAnchor&&this.textAnchor!=="middle"?this.textAnchor==="start"?y+this.textWidth-this.textSpacing:this.textAnchor==="end"?y+this.textSpacing:y:y+this.textWidth/2},m}(o);h.TextPrimitive180degRenderHelper=a;var c=function(f){function m(y){return f.call(this,y)||this}return g(m,f),Object.defineProperty(m.prototype,"angle",{get:function(){return 270},enumerable:!1,configurable:!0}),m.prototype.getTextY=function(y){return this.textAnchor&&this.textAnchor!=="middle"?this.textAnchor==="start"?y+this.textHeight-this.textSpacing:this.textAnchor==="end"?y+this.textSpacing:y:y+this.textHeight/2},m}(r);h.TextPrimitive270degRenderHelper=c},1114:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.RenderHelper=h.svgNS=void 0;var u=d(9463);h.svgNS="http://www.w3.org/2000/svg";var g=function(){function v(){}return v.createSvgElement=function(p,s){s===void 0&&(s=!1);var i=document.createElementNS(h.svgNS,"svg");return i.className.baseVal="dxdi-canvas"+(s?" export":""),p&&p.appendChild(i),i},v.createMainElement=function(p,s){s===void 0&&(s=!1);var i=document.createElement("div");return i.setAttribute("class","dxdi-control"+(s?" measurer":"")),u.Diagnostics.optimizeLayers&&(i.style.transform="translateZ(0)"),p&&p.appendChild(i),i},v.addEventListener=function(p,s,i){p.addEventListener(s,i)},v.removeEventListener=function(p,s,i){p.removeEventListener(s,i)},v}();h.RenderHelper=g},8098:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.RenderManager=h.DBL_CLICK_TIMEOUT=h.LONG_TOUCH_TIMEOUT=void 0;var u=d(6031),g=d(3714),v=d(6907),p=d(8900),s=d(2153),i=d(9279),e=d(3500),t=d(8693),n=d(7376),o=d(240),r=d(741),a=d(6043),c=d(9757),f=d(4e3),m=d(6557),y=d(1733),l=d(1114),P=d(6078),C=d(8675),I="dxdi-touch-action";h.LONG_TOUCH_TIMEOUT=500,h.DBL_CLICK_TIMEOUT=500;var x=function(){function b(S,w,T,_,M,A,E){this.moveLocked=!1,this.lockMouseMoveTimer=-1,this.lastClickElement=void 0,this.longTouchTimer=void 0,this.dblTouchTimer=void 0,this.pointers={};var U=l.RenderHelper.createMainElement(S),R=l.RenderHelper.createSvgElement(U);this.instanceId=M,this.scroll=A||new n.NativeScrollView(S),this.measurer=T,this.dom=new P.DOMManipulator(this.measurer),this.view=new c.CanvasViewManager(this.scroll,R,_.modelSize,_.zoomLevel,_.autoZoom,_.simpleView,_.rectangle,this.dom,this.instanceId),this.input=new r.InputManager(U,this.view,w,this.measurer,_.zoomLevel,E),this.items=new t.CanvasItemsManager(this.view.canvasElement,_.zoomLevel,this.dom,this.instanceId),this.page=new a.CanvasPageManager(this.view.pageElement,_,this.dom,this.instanceId),this.selection=new f.CanvasSelectionManager(this.view.canvasElement,_.zoomLevel,_.readOnly,this.dom,this.instanceId),this.contextMenuEnabled=_.contextMenuEnabled,this.view.onViewChanged.add(this.page),this.view.onViewChanged.add(this.items),this.view.onViewChanged.add(this.selection),this.view.onViewChanged.add(this.input),this.autoScroll=new m.AutoScrollController(this.scroll,R,this.view,this.dom),this.attachEvents(R),this.mainElement=U,this.svgElement=R,this.events=w,this.notifyReadOnlyChanged(_.readOnly)}return b.prototype.clean=function(S){this.killLockMouseMoveTimer(),this.clearLastMouseDownEvent(),this.detachEvents(this.svgElement),this.scroll.detachEvents(),this.input.detachEvents(),this.dom.cancelAnimation(),S&&S(this.mainElement)},b.prototype.replaceParent=function(S,w){this.mainElement&&this.mainElement.parentNode!==S&&S.appendChild(this.mainElement),w&&w!==this.scroll&&(this.scroll&&this.scroll.detachEvents(),this.scroll=w),this.measurer instanceof y.TextMeasurer&&this.measurer.replaceParent(S)},b.prototype.update=function(S){this.view.adjust({horizontal:!S,vertical:!S}),this.page.redraw()},b.prototype.onNewModel=function(S){this.measurer.onNewModel(S,this.dom)},b.prototype.clear=function(){this.items.clear(),this.selection.clear()},b.prototype.attachPointerEvents=function(S){v.DomUtils.addClassName(S,I),l.RenderHelper.addEventListener(S,"pointerdown",this.onPointerDownHandler),l.RenderHelper.addEventListener(i.Browser.TouchUI?S:document,"pointerup",this.onPointerUpHandler),l.RenderHelper.addEventListener(i.Browser.TouchUI?S:document,"pointermove",this.onPointerMoveHandler),l.RenderHelper.addEventListener(S,"pointercancel",this.onPointerCancelHandler),l.RenderHelper.addEventListener(S,"pointerleave",this.onPointerLeaveHandler)},b.prototype.detachPointerEvents=function(S){l.RenderHelper.removeEventListener(S,"pointerdown",this.onPointerDownHandler),l.RenderHelper.removeEventListener(i.Browser.TouchUI?S:document,"pointerup",this.onPointerUpHandler),l.RenderHelper.removeEventListener(i.Browser.TouchUI?S:document,"pointermove",this.onPointerMoveHandler),l.RenderHelper.removeEventListener(S,"pointercancel",this.onPointerCancelHandler),l.RenderHelper.removeEventListener(S,"pointerleave",this.onPointerLeaveHandler),v.DomUtils.removeClassName(S,I)},b.prototype.attachMouseTouchEvents=function(S){l.RenderHelper.addEventListener(S,this.mouseDownEventName,this.onMouseDownHandler),l.RenderHelper.addEventListener(document,this.mouseMoveEventName,this.onMouseMoveHandler),l.RenderHelper.addEventListener(document,this.mouseUpEventName,this.onMouseUpHandler)},b.prototype.detachMouseTouchEvents=function(S){l.RenderHelper.removeEventListener(S,this.mouseDownEventName,this.onMouseDownHandler),l.RenderHelper.removeEventListener(document,this.mouseMoveEventName,this.onMouseMoveHandler),l.RenderHelper.removeEventListener(document,this.mouseUpEventName,this.onMouseUpHandler)},b.prototype.attachEvents=function(S){this.mouseDownEventName=i.Browser.TouchUI?"touchstart":"mousedown",this.mouseMoveEventName=i.Browser.TouchUI?"touchmove":"mousemove",this.mouseUpEventName=i.Browser.TouchUI?"touchend":"mouseup",this.onPointerDownHandler=this.onPointerDown.bind(this),this.onPointerUpHandler=this.onPointerUp.bind(this),this.onPointerMoveHandler=this.onPointerMove.bind(this),this.onPointerCancelHandler=this.onPointerCancel.bind(this),this.onPointerLeaveHandler=this.onPointerLeave.bind(this),this.onMouseDownHandler=this.onMouseDown.bind(this),this.onMouseEnterHandler=this.onMouseEnter.bind(this),this.onMouseLeaveHandler=this.onMouseLeave.bind(this),this.onMouseWheelHandler=this.onMouseWheel.bind(this),this.onMouseDblClickHandler=this.onMouseDblClick.bind(this),this.onContextMenuHandler=this.onContextMenu.bind(this),this.onMouseMoveHandler=this.onMouseMove.bind(this),this.onMouseUpHandler=this.onMouseUp.bind(this),this.onWindowResizelHandler=this.onWindowResize.bind(this),this.onOrientationChangeHandler=this.onOrientationChange.bind(this),this.onMouseClickHandler=this.onMouseClick.bind(this),C.EventUtils.isPointerEvents()?this.attachPointerEvents(S):(this.attachMouseTouchEvents(S),l.RenderHelper.addEventListener(S,"mouseenter",this.onMouseEnterHandler),l.RenderHelper.addEventListener(S,"mouseleave",this.onMouseLeaveHandler)),l.RenderHelper.addEventListener(S,"wheel",this.onMouseWheelHandler),l.RenderHelper.addEventListener(S,"dblclick",this.onMouseDblClickHandler),l.RenderHelper.addEventListener(S,"click",this.onMouseClickHandler),l.RenderHelper.addEventListener(S,"contextmenu",this.onContextMenuHandler),l.RenderHelper.addEventListener(window,"resize",this.onWindowResizelHandler),l.RenderHelper.addEventListener(window,"orientationchange",this.onOrientationChangeHandler),this.input.mouseWheelHandler=this.onMouseWheelHandler},b.prototype.detachEvents=function(S){C.EventUtils.isPointerEvents()?this.detachPointerEvents(S):(this.detachMouseTouchEvents(S),l.RenderHelper.removeEventListener(S,"mouseenter",this.onMouseEnterHandler),l.RenderHelper.removeEventListener(S,"mouseleave",this.onMouseLeaveHandler)),l.RenderHelper.removeEventListener(S,"wheel",this.onMouseWheelHandler),l.RenderHelper.removeEventListener(S,"dblclick",this.onMouseDblClickHandler),l.RenderHelper.removeEventListener(S,"contextmenu",this.onContextMenuHandler),l.RenderHelper.removeEventListener(S,"click",this.onMouseClickHandler),l.RenderHelper.removeEventListener(window,"resize",this.onWindowResizelHandler),l.RenderHelper.removeEventListener(window,"orientationchange",this.onOrientationChangeHandler)},b.prototype.setPointerPosition=function(S){this.pointers[S.pointerId]={clientX:S.clientX,clientY:S.clientY}},b.prototype.clearPointerPosition=function(S){delete this.pointers[S.pointerId]},b.prototype.onPointerDown=function(S){this.setPointerPosition(S),this.getPointerCount()>2&&(this.pointers={}),this.onMouseDown(S)},b.prototype.onPointerUp=function(S){this.clearPointerPosition(S),this.onMouseUp(S)},b.prototype.onPointerMove=function(S){(i.Browser.TouchUI&&!C.EventUtils.isMousePointer(S)||C.EventUtils.isLeftButtonPressed(S))&&this.setPointerPosition(S),this.onMouseMove(S)},b.prototype.onPointerCancel=function(S){this.clearPointerPosition(S)},b.prototype.onPointerLeave=function(S){C.EventUtils.isMousePointer(S)&&this.onMouseLeave(S),this.clearPointerPosition(S)},b.prototype.onMouseDown=function(S){var w=this;this.lockMouseMove(),this.input.lockFocus(),this.autoScroll.onMouseDown(S),this.lastDownMouseEvent=this.createDiagramMouseEvent(S),e.raiseEvent(S,this.lastDownMouseEvent,function(M){return w.events.onMouseDown(M)}),this.events.canFinishTextEditing()&&this.input.captureFocus(),C.EventUtils.isTouchEvent(S)&&this.processTouchDown(S);var T=g.EvtUtils.getEventSource(S),_=T&&T.tagName;if(i.Browser.TouchUI||_.toLowerCase()==="img"||_.toLowerCase()==="image")return g.EvtUtils.preventEventAndBubble(S),!1},b.prototype.onMouseMove=function(S){var w=this;this.moveLocked||(this.autoScroll.onMouseMove(S,function(){return w.onMouseMoveCore(S)}),this.onMouseMoveCore(S),i.Browser.IE&&this.lockMouseMove(),C.EventUtils.isTouchEvent(S)&&this.processTouchMove(S))},b.prototype.onMouseMoveCore=function(S){var w=this;e.raiseEvent(S,this.createDiagramMouseEvent(S),function(T){return w.events.onMouseMove(T)})},b.prototype.onMouseUp=function(S){var w=this;this.lockMouseMove();var T=this.createDiagramMouseEvent(S);e.raiseEvent(S,T,function(_){return w.events.onMouseUp(_)}),this.autoScroll.onMouseUp(S),T.source.type!==u.MouseEventElementType.Undefined&&this.input.captureFocus(!0),C.EventUtils.isTouchEvent(S)&&this.processTouchUp(S)},b.prototype.onMouseEnter=function(S){var w=this;this.autoScroll.onMouseEnter(S),e.raiseEvent(S,this.createDiagramMouseEvent(S),function(T){return w.events.onMouseEnter(T)})},b.prototype.onMouseLeave=function(S){var w=this;e.raiseEvent(S,this.createDiagramMouseEvent(S),function(T){return w.events.onMouseLeave(T)})},b.prototype.onMouseDblClick=function(S){var w=this;e.raiseEvent(S,this.createDiagramMouseEvent(S),function(T){return w.events.onDblClick(T)})},b.prototype.onMouseClick=function(S){var w=this;C.EventUtils.isTouchEvent(S)?C.EventUtils.isMousePointer(S)||this.input.captureFocus():e.raiseEvent(S,this.createActualMouseClickEvent(S),function(T){return w.events.onClick(T)})},b.prototype.createActualMouseClickEvent=function(S){return this.lastDownMouseEvent?new u.DiagramMouseEvent(this.lastDownMouseEvent.modifiers,this.lastDownMouseEvent.button,this.lastDownMouseEvent.offsetPoint.clone(),this.lastDownMouseEvent.modelPoint.clone(),this.lastDownMouseEvent.source,this.createDiagramMouseEventTouches(S)):this.createDiagramMouseEvent(S)},b.prototype.onContextMenu=function(S){var w=this;if(this.contextMenuEnabled)return S.buttons!==1&&e.raiseEvent(S,this.createDiagramContextMenuEvent(S),function(T){return w.events.onContextMenu(T)}),this.input.captureFocus(),g.EvtUtils.preventEventAndBubble(S)},b.prototype.processTouchDown=function(S){var w=this;this.touchDownPoint=this.getTouchPointFromEvent(S),this.resetLongTouch(),this.longTouchTimer=setTimeout(function(){e.raiseEvent(S,w.createDiagramMouseEvent(S),function(T){return w.events.onLongTouch(T)}),w.resetLongTouch(),w.resetDblClick()},h.LONG_TOUCH_TIMEOUT)},b.prototype.processTouchMove=function(S){var w=this.getTouchPointFromEvent(S);this.touchDownPoint&&w&&(Math.abs(this.touchDownPoint.x-w.x)>b.touchPositionLimit||Math.abs(this.touchDownPoint.y-w.y)>b.touchPositionLimit)&&(this.resetLongTouch(),this.resetDblClick())},b.prototype.getPointers=function(){var S=this;return Object.keys(this.pointers).map(function(w){return S.pointers[w]})},b.prototype.getPointerCount=function(){return Object.keys(this.pointers).length},b.prototype.getTouchPointFromEvent=function(S){var w,T=S.touches;if(T&&T.length>0)w=new p.Point(T[0].clientX,T[0].clientY);else{var _=this.getPointers();_.length&&(w=new p.Point(_[0].clientX,_[0].clientY))}return w},b.prototype.processTouchUp=function(S){var w=this;if(this.longTouchTimer!==void 0){e.raiseEvent(S,this.createDiagramMouseEvent(S),function(_){return w.events.onClick(_)});var T=g.EvtUtils.getEventSource(S);this.dblTouchTimer!==void 0&&this.lastClickElement===T?(e.raiseEvent(S,this.createDiagramMouseEvent(S),function(_){return w.events.onDblClick(_)}),this.resetDblClick()):(this.resetDblClick(),this.dblTouchTimer=setTimeout(function(){return w.dblTouchTimer=void 0},h.DBL_CLICK_TIMEOUT)),this.lastClickElement=T}this.resetLongTouch(),this.touchDownPoint=void 0},b.prototype.resetLongTouch=function(){this.longTouchTimer!==void 0&&clearTimeout(this.longTouchTimer),this.longTouchTimer=void 0},b.prototype.resetDblClick=function(){this.dblTouchTimer!==void 0&&clearTimeout(this.dblTouchTimer),this.dblTouchTimer=void 0},b.prototype.onOrientationChange=function(){var S=this;setTimeout(function(){return S.onWindowResize()},100)},b.prototype.onWindowResize=function(){var S={horizontal:!1,vertical:!1};if(this.view.autoZoom!==o.AutoZoomMode.Disabled)S.horizontal=!0,S.vertical=!0;else{var w=this.view.checkFitToCanvas(),T=this.view.checkFitToCanvas(this.scroll.getSize());S={horizontal:w.horizontal!==T.horizontal||T.horizontal,vertical:w.vertical!==T.vertical||T.vertical}}this.view.adjust(S)},b.prototype.onMouseWheel=function(S){var w=this;e.raiseEvent(S,this.createDiagramWheelEvent(S),function(T){return w.events.onMouseWheel(T)})},b.prototype.notifyModelSizeChanged=function(S,w){this.view.notifyModelSizeChanged(S,w)},b.prototype.notifyModelRectangleChanged=function(S){this.view.notifyModelRectangleChanged(S)},b.prototype.notifyReadOnlyChanged=function(S){v.DomUtils.toggleClassName(this.mainElement,"dxdi-read-only",S)},b.prototype.notifyDragStart=function(S){},b.prototype.notifyDragEnd=function(S){},b.prototype.notifyDragScrollStart=function(){this.autoScroll.onDragScrollStart()},b.prototype.notifyDragScrollEnd=function(){this.autoScroll.onDragScrollEnd()},b.prototype.notifyToolboxDragStart=function(S){this.onMouseEnter(S)},b.prototype.notifyToolboxDragEnd=function(S){S&&C.EventUtils.isPointerEvents()&&this.onMouseUp(S)},b.prototype.notifyToolboxDraggingMouseMove=function(S){this.onMouseMove(S)},b.prototype.createDiagramMouseEvent=function(S){var w=s.KeyUtils.getKeyModifiers(S),T=function(R){return i.Browser.MSTouchUI?R.button!==2:C.EventUtils.isLeftButtonPressed(R)}(S)?u.MouseButton.Left:u.MouseButton.Right,_=this.getOffsetPointByEvent(S),M=this.getModelPoint(_),A=C.EventUtils.isTouchEvent(S),E=this.getEventSource(S,A),U=this.createDiagramMouseEventTouches(S);return new u.DiagramMouseEvent(w,T,_,M,E,U,A)},b.prototype.createDiagramMouseEventTouches=function(S){var w=[];if(S.touches)for(var T=0;T<S.touches.length;T++){var _=S.touches[T].clientX,M=S.touches[T].clientY,A=this.getOffsetPointByEventPoint(_,M),E=this.getModelPoint(A);w.push(new u.DiagramMouseEventTouch(A,E))}else{var U=this.getPointers();for(T=0;T<U.length;T++)_=U[T].clientX,M=U[T].clientY,A=this.getOffsetPointByEventPoint(_,M),E=this.getModelPoint(A),w.push(new u.DiagramMouseEventTouch(A,E))}return w},b.prototype.createDiagramContextMenuEvent=function(S){var w=s.KeyUtils.getKeyModifiers(S),T=new p.Point(S.pageX,S.pageY),_=this.getOffsetPointByEvent(S),M=this.getModelPoint(_);return new u.DiagramContextMenuEvent(w,T,M)},b.prototype.createDiagramWheelEvent=function(S){var w=s.KeyUtils.getKeyModifiers(S),T=this.getOffsetPointByEvent(S),_=this.view.getModelPoint(T),M=this.getEventSource(S),A=S.deltaX||S.originalEvent&&S.originalEvent.deltaX,E=S.deltaY||S.originalEvent&&S.originalEvent.deltaY;return new u.DiagramWheelEvent(w,A,E,T,_,M)},b.prototype.getEventSource=function(S,w){var T=w?g.EvtUtils.getEventSourceByPosition(S):g.EvtUtils.getEventSource(S);if(this.isDiagramControl(T))for(;T&&!this.isDocumentContainer(T);){var _=e.RenderUtils.getElementEventData(T);if(_!==void 0)return _;if(this.input.isTextInputElement(T))return new u.MouseEventSource(u.MouseEventElementType.Document);T=T.parentNode}var M=new u.MouseEventSource(u.MouseEventElementType.Undefined);return T&&this.isDocumentContainer(T)&&(M.type=u.MouseEventElementType.Background),M},b.prototype.isDiagramControl=function(S){for(;S;){if(this.isDocumentContainer(S))return!0;S=S.parentNode}return!1},b.prototype.isDocumentContainer=function(S){return S===this.mainElement},b.prototype.lockMouseMove=function(){var S=this;this.moveLocked=!0,this.lockMouseMoveTimer=setTimeout(function(){S.moveLocked=!1,S.lockMouseMoveTimer=-1},10)},b.prototype.killLockMouseMoveTimer=function(){this.lockMouseMoveTimer!==-1&&(clearTimeout(this.lockMouseMoveTimer),this.lockMouseMoveTimer=-1)},b.prototype.clearLastMouseDownEvent=function(){this.lastDownMouseEvent=void 0},b.prototype.getModelPoint=function(S){return this.view.getModelPoint(S)},b.prototype.getOffsetPointByEvent=function(S){var w=g.EvtUtils.getEventX(S),T=g.EvtUtils.getEventY(S);return this.getOffsetPointByEventPoint(w,T)},b.prototype.getOffsetPointByEventPoint=function(S,w){var T=this.scroll.getScrollContainer(),_=v.DomUtils.getAbsolutePositionX(T),M=v.DomUtils.getAbsolutePositionY(T);return new p.Point(S-_,w-M)},b.prototype.getModelPointByEventPoint=function(S,w){var T=this.getOffsetPointByEventPoint(S,w);return this.view.getModelPoint(T)},b.prototype.getEventPointByModelPoint=function(S){var w=this.view.getAbsolutePoint(S),T=this.scroll.getScrollContainer();return new p.Point(v.DomUtils.getAbsolutePositionX(T)+w.x,v.DomUtils.getAbsolutePositionY(T)+w.y)},b.touchPositionLimit=4,b}();h.RenderManager=x},7376:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.NativeScrollView=void 0;var u=d(8675),g=d(6353),v=d(8900),p=d(6907),s=d(1114),i=function(){function e(t){this.onScroll=new u.EventDispatcher,this.scrollBarWidth=p.DomUtils.getVerticalScrollBarWidth(),this.mainElement=t,this.attachEvents()}return e.prototype.attachEvents=function(){var t=this;this.onScrollHandler=function(){return t.onScroll.raise1(function(n){return n.notifyScrollChanged(function(){return t.getScroll()})})},s.RenderHelper.addEventListener(this.mainElement,"scroll",this.onScrollHandler)},e.prototype.detachEvents=function(){s.RenderHelper.removeEventListener(this.mainElement,"scroll",this.onScrollHandler)},e.prototype.getScrollContainer=function(){return this.mainElement},e.prototype.setScroll=function(t,n){var o=this;this.mainElement.style.overflow="scroll",this.mainElement.scrollLeft=t,this.mainElement.scrollTop=n,this.mainElement.style.overflow="",this.onScroll.raise1(function(r){return r.notifyScrollChanged(function(){return o.getScroll()})})},e.prototype.offsetScroll=function(t,n){var o=this;t&&(this.mainElement.scrollLeft+=t),n&&(this.mainElement.scrollTop+=n),this.onScroll.raise1(function(r){return r.notifyScrollChanged(function(){return o.getScroll()})})},e.prototype.getScroll=function(){return new v.Point(this.mainElement.scrollLeft,this.mainElement.scrollTop)},e.prototype.getSize=function(){var t=this.mainElement.getBoundingClientRect();return new g.Size(Math.floor(t.width),Math.floor(t.height))},e.prototype.getScrollBarWidth=function(){return this.scrollBarWidth},e}();h.NativeScrollView=i},6411:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.ShapeImageIndicator=void 0;var u=d(418),g=d(7724),v=d(5329),p=d(9279),s=d(4716),i=d(9291),e=function(){function t(n,o,r,a,c){this.x=n,this.y=o,this.size=r,this.borderThickness=a,this.className=c,this.animationStarted=!1}return t.createLoadingIndicatorPrimitives=function(n,o,r,a,c){return new t(n,o,r,a,c).createLoadingIndicatorPrimitive()},t.createUserIconPrimitives=function(n,o,r,a,c){return new t(n,o,r,a,c).createUserIconPrimitive()},t.createWarningIconPrimitives=function(n,o,r,a){return new t(n,o,r,void 0,a).createWarningIconPrimitive()},t.prototype.rotate=function(n,o,r,a){if(this.animationStarted){var c="rotate("+Math.round(a)%1080/3+" "+o+" "+r+")";n.setAttribute("transform",c),this.animationRequestId=requestAnimationFrame((function(f){this.rotate(n,o,r,f)}).bind(this))}},t.prototype.onApplyLoadingIndicatorElementProperties=function(n){var o=[i.UnitConverter.twipsToPixelsF(this.x+this.size/2),i.UnitConverter.twipsToPixelsF(this.y+this.size/2)],r=o[0],a=o[1];p.Browser.IE?(this.animationRequestId=requestAnimationFrame((function(c){this.rotate(n,r,a,c)}).bind(this)),this.animationStarted=!0):n.style.setProperty("transform-origin",r+"px "+a+"px")},t.prototype.center=function(){return[i.UnitConverter.twipsToPixelsF(this.x+this.size/2),i.UnitConverter.twipsToPixelsF(this.y+this.size/2)]},t.prototype.createLoadingIndicatorPrimitive=function(){var n=this.center(),o=n[0],r=n[1],a=i.UnitConverter.twipsToPixelsF(this.size/2-this.borderThickness/2);return new v.GroupPrimitive([new u.EllipsePrimitive(o+"",r+"",a+"",a+""),new g.PathPrimitive([new g.PathPrimitiveMoveToCommand(o+a+"",r+""),new g.PathPrimitiveArcToCommand(a+"",a+"",0,!1,!1,o+"",r-a+"")])],this.className,void 0,void 0,this.onApplyLoadingIndicatorElementProperties.bind(this),this.onBeforeDispose.bind(this))},t.prototype.createUserIconPrimitive=function(){var n=this.center(),o=n[0],r=n[1],a=i.UnitConverter.twipsToPixelsF(this.size/2-this.borderThickness/2),c=i.UnitConverter.twipsToPixelsF(this.size);return new v.GroupPrimitive([new u.EllipsePrimitive(o+"",r+"",a+"",a+"",void 0,"dxdi-background"),new u.EllipsePrimitive(o+"",r-c/8+"",c/8+"",c/8+""),new g.PathPrimitive([new g.PathPrimitiveMoveToCommand(o+"",r+c/16+""),new g.PathPrimitiveCubicCurveToCommand(o+.1375*c+"",r+c/16+"",o+c/4+"",r+.11875*c+"",o+c/4+"",r+.1875*c+""),new g.PathPrimitiveLineToCommand(o+c/4+"",r+c/4+""),new g.PathPrimitiveLineToCommand(o-c/4+"",r+c/4+""),new g.PathPrimitiveLineToCommand(o-c/4+"",r+.1875*c+""),new g.PathPrimitiveCubicCurveToCommand(o-c/4+"",r+.11875*c+"",o-.1375*c+"",r+c/16+"",o+"",r+c/16+""),new g.PathPrimitiveClosePathCommand])],this.className)},t.prototype.createWarningIconPrimitive=function(){var n=this.center(),o=n[0],r=n[1],a=i.UnitConverter.twipsToPixelsF(this.size/2)-1,c=i.UnitConverter.twipsToPixelsF(this.size/8);return new v.GroupPrimitive([new u.EllipsePrimitive(o+"",r+"",a+"",a+""),new s.RectanglePrimitive(o-c/2+.5+"",r+a-i.UnitConverter.twipsToPixelsF(this.size/4)+"",c+"",c+""),new s.RectanglePrimitive(o-c/2+.5+"",r-a+i.UnitConverter.twipsToPixelsF(this.size/4)-c+"",c+"",a+"")],this.className)},t.prototype.onBeforeDispose=function(){this.animationRequestId&&cancelAnimationFrame(this.animationRequestId),this.animationStarted=!1},t}();h.ShapeImageIndicator=e},4724:function(j,h,d){var u,g=this&&this.__extends||(u=function(c,f){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,y){m.__proto__=y}||function(m,y){for(var l in y)y.hasOwnProperty(l)&&(m[l]=y[l])},u(c,f)},function(c,f){function m(){this.constructor=c}u(c,f),c.prototype=f===null?Object.create(f):(m.prototype=f.prototype,new m)});Object.defineProperty(h,"__esModule",{value:!0}),h.IconToolbox=void 0;var v=d(4602),p=d(1114),s=d(5503),i=d(9291),e=d(8900),t=d(1669),n=d(1552),o=d(6688),r=d(4716),a=function(c){function f(m,y,l,P,C,I,x,b,S){var w=c.call(this,m,y,l,P,C,I)||this;return w.options=x,w.measurer=b,w.instanceId=S,w}return g(f,c),f.prototype.createElements=function(m,y){var l=document.createElementNS(p.svgNS,"svg");l.className.baseVal="dxdi-canvas",m.appendChild(l),this.drawShapeIcons(l,y,this.options.toolboxWidth||l.getBoundingClientRect().width)},f.prototype.drawShapeIcons=function(m,y,l){var P=this,C=n.DEFAULT_STROKE_WIDTH,I=l-2*C,x=this.options.shapeIconSize;!x&&this.options.shapeIconSpacing&&this.options.shapeIconCountInRow&&(x=Math.floor((I-(this.options.shapeIconCountInRow-1)*this.options.shapeIconSpacing)/this.options.shapeIconCountInRow)),x||(x=32);var b=x=Math.max(x,this.options.shapeIconSpacing/2),S=this.options.shapeIconCountInRow;if(!S)for(S=1;b<I;)(b+=this.options.shapeIconSpacing+x)<I&&S++;var w=S>1?(I-x*S)/(S-1):0,T=C,_=C,M=i.UnitConverter.pixelsToTwips(x);y.forEach(function(A,E){E>0&&E%S==0&&(T=C,_+=x+w);var U=P.shapeDescriptionManager.get(A),R=P.createShape(U,T,_,x<26);P.updateShapeIconBounds(R,x);var O=P.drawShape(m,R);P.drawSelector(O,i.UnitConverter.pixelsToTwips(T),i.UnitConverter.pixelsToTwips(_),M),T+=x+w}),m.style.height=_+x+C+"px",m.style.width=l+"px"},f.prototype.drawShape=function(m,y){var l=this,P=y.description.createPrimitives(y,this.instanceId,!0),C=document.createElementNS(p.svgNS,"g");if(C.setAttribute("data-tb-type",y.description.key.toString()),C.setAttribute("class","toolbox-item"),C.setAttribute("title",y.description.getTitle()),this.options.shapeIconAttributes)for(var I in this.options.shapeIconAttributes)Object.prototype.hasOwnProperty.call(this.options.shapeIconAttributes,I)&&C.setAttribute(I,this.options.shapeIconAttributes[I]);return m.appendChild(C),P.forEach(function(x){var b=x.createElement(function(S){return C.appendChild(S)});x.applyElementProperties(b,l.measurer)}),C},f.prototype.drawSelector=function(m,y,l,P){var C=this,I=new r.RectanglePrimitive(y,l,P,P,void 0,"selector");I.createElement(function(x){I.applyElementProperties(x,C.measurer),m.appendChild(x)})},f.prototype.createShape=function(m,y,l,P){var C=i.UnitConverter.pixelsToTwips(y),I=i.UnitConverter.pixelsToTwips(l),x=new s.Shape(m,new e.Point(C,I),!0);return this.needResetShapeText(m)?x.text="":P&&(x.text="T"),x},f.prototype.needResetShapeText=function(m){return!(m instanceof t.TextShapeDescription)&&!(m instanceof o.CustomShapeDescription&&m.baseDescription instanceof t.TextShapeDescription)},f.prototype.updateShapeIconBounds=function(m,y){var l=i.UnitConverter.pixelsToTwips(y);if(m.size.height=m.size.width*m.getToolboxHeightToWidthRatio(),m.size.width>m.size.height){var P=m.size.height/m.size.width;m.size.width=l,m.size.height=l*P,m.position.y=m.position.y+(l-m.size.height)/2,m.parameters.forEach(function(C){C.value=C.value*l/m.description.defaultSize.width})}else m.size.width<m.size.height?(P=m.size.width/m.size.height,m.size.height=l,m.size.width=l*P,m.position.x=m.position.x+(l-m.size.width)/2,m.parameters.forEach(function(C){C.value=C.value*l/m.description.defaultSize.height})):(m.size.width=l,m.size.height=l,m.parameters.forEach(function(C){C.value=C.value*l/m.description.defaultSize.width}))},f.prototype.createDraggingElement=function(m){var y=document.createElement("DIV");y.setAttribute("class","dxdi-toolbox-drag-item"),document.body.appendChild(y);var l=document.createElementNS(p.svgNS,"svg");l.className.baseVal="dxdi-canvas",y.appendChild(l);var P=this.shapeDescriptionManager.get(m.evt.data),C=this.createShape(P,n.DEFAULT_STROKE_WIDTH,n.DEFAULT_STROKE_WIDTH);return this.drawShape(l,C),y.style.width=i.UnitConverter.twipsToPixels(C.size.width)+2*n.DEFAULT_STROKE_WIDTH+"px",y.style.height=i.UnitConverter.twipsToPixels(C.size.height)+2*n.DEFAULT_STROKE_WIDTH+"px",y},f}(v.Toolbox);h.IconToolbox=a},5947:function(j,h,d){var u,g=this&&this.__extends||(u=function(p,s){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t])},u(p,s)},function(p,s){function i(){this.constructor=p}u(p,s),p.prototype=s===null?Object.create(s):(i.prototype=s.prototype,new i)});Object.defineProperty(h,"__esModule",{value:!0}),h.TextToolbox=void 0;var v=function(p){function s(i,e,t,n,o,r){return p.call(this,i,e,t,n,o,r)||this}return g(s,p),s.prototype.createElements=function(i,e){var t=this;e.forEach(function(n){var o=t.shapeDescriptionManager.get(n),r=document.createElement("div");r.setAttribute("class","toolbox-text-item"),r.setAttribute("data-tb-type",n),r.textContent=o.getDefaultText()||o.getTitle(),i.appendChild(r)})},s.prototype.createDraggingElement=function(i){var e=document.createElement("DIV");e.setAttribute("class","dxdi-toolbox-drag-text-item");var t=this.shapeDescriptionManager.get(i.evt.data);return e.textContent=t.getDefaultText()||t.getTitle(),document.body.appendChild(e),e},s}(d(4602).Toolbox);h.TextToolbox=v},4602:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.DiagramDraggingEvent=h.ToolboxDraggingObject=h.Toolbox=void 0;var u,g=d(8675),v=d(8900),p=d(3714),s=d(4914),i=d(6907),e=d(9279),t=d(1114),n=d(8693),o="dxdi-toolbox",r="dxdi-tb-start-drag-flag",a=function(){function m(y,l,P,C,I,x){this.readOnly=l,this.allowDragging=P,this.shapeDescriptionManager=C,this.shapeTypes=I,this.getAllowedShapeTypes=x,this.dragPrepareTimeout=-1,this.dragState=u.None,this.emulateDragEvents=e.Browser.WebKitTouchUI,this.onDragOperation=new g.EventDispatcher,this.onClickOperation=new g.EventDispatcher,y&&(this.mainElement=this.createMainElement(y),this.attachHandlers(this.mainElement))}return m.prototype.clean=function(y){this.detachHandlers(this.mainElement),y&&y(this.mainElement)},m.prototype.createMainElement=function(y){var l=document.createElement("div");return l.setAttribute("class",o),l.draggable=!0,this.emulateDragEvents&&(l.tabIndex=0),y.appendChild(l),l},m.prototype.attachHandlers=function(y){this.onElementMouseDownHandler=this.onElementMouseDown.bind(this),this.onElementMouseUpHandler=this.onElementMouseUp.bind(this),this.onMouseDownHandler=this.onMouseDown.bind(this),this.onMouseMoveHandler=this.onMouseMove.bind(this),this.onMouseUpHandler=this.onMouseUp.bind(this),this.onDragStartHandler=this.onDragStart.bind(this),this.onTouchMoveHandler=this.onTouchMove.bind(this),this.emulateDragEvents||t.RenderHelper.addEventListener(y,"dragstart",this.onDragStartHandler),g.EventUtils.isPointerEvents()?(this.mouseDownEventName="pointerdown",this.mouseMoveEventName="pointermove",this.mouseUpEventName="pointerup"):(this.mouseDownEventName=e.Browser.TouchUI?"touchstart":"mousedown",this.mouseMoveEventName=e.Browser.TouchUI?"touchmove":"mousemove",this.mouseUpEventName=e.Browser.TouchUI?"touchend":"mouseup"),t.RenderHelper.addEventListener(y,"touchmove",this.onTouchMoveHandler),t.RenderHelper.addEventListener(y,this.mouseDownEventName,this.onElementMouseDownHandler),t.RenderHelper.addEventListener(y,this.mouseUpEventName,this.onElementMouseUpHandler),t.RenderHelper.addEventListener(y,this.mouseDownEventName,this.onMouseDownHandler),t.RenderHelper.addEventListener(document,this.mouseMoveEventName,this.onMouseMoveHandler),t.RenderHelper.addEventListener(document,this.mouseUpEventName,this.onMouseUpHandler)},m.prototype.detachHandlers=function(y){this.emulateDragEvents||t.RenderHelper.removeEventListener(y,"dragstart",this.onDragStartHandler),t.RenderHelper.removeEventListener(y,"touchmove",this.onTouchMoveHandler),t.RenderHelper.removeEventListener(y,this.mouseDownEventName,this.onElementMouseDownHandler),t.RenderHelper.removeEventListener(y,this.mouseUpEventName,this.onElementMouseUpHandler),t.RenderHelper.removeEventListener(y,this.mouseDownEventName,this.onMouseDownHandler),t.RenderHelper.removeEventListener(document,this.mouseMoveEventName,this.onMouseMoveHandler),t.RenderHelper.removeEventListener(document,this.mouseUpEventName,this.onMouseUpHandler)},m.prototype.render=function(y){this.mainElement.childNodes&&(this.mainElement.innerHTML="");var l=this.shapeTypes;return l=this.getAllowedShapeTypes?this.getAllowedShapeTypes(l):l,(l=y?l.filter(y):l).length&&this.createElements(this.mainElement,l),!!l.length},m.prototype.createDraggingObject=function(y){var l=new f;return l.data=y,l.onFinishDragging=this.resetDragState.bind(this),l.onCaptured=this.capture.bind(this),new c(l)},m.prototype.getDragShapeType=function(y){for(;y&&!i.DomUtils.hasClassName(y,o);){if(y.getAttribute&&y.getAttribute("data-tb-type"))return y.getAttribute("data-tb-type");y=y.parentNode}},m.prototype.getTouchPointFromEvent=function(y){var l,P=y.touches;return P&&P.length>0?l=new v.Point(P[0].clientX,P[0].clientY):y.clientX&&y.clientY&&(l=new v.Point(y.clientX,y.clientY)),l},m.prototype.onElementMouseDown=function(y){this.mouseDownShapeType=this.getDragShapeType(p.EvtUtils.getEventSource(y)),this.touchDownPoint=this.getTouchPointFromEvent(y)},m.prototype.onElementMouseUp=function(y){var l=this.getDragShapeType(p.EvtUtils.getEventSource(y));l&&l===this.mouseDownShapeType&&this.onClickOperation.raise("notifyToolboxClick",l),this.mouseDownShapeType=void 0,this.touchDownPoint=void 0},m.prototype.onMouseDown=function(y){this.setDragState(u.Prepare,y),e.Browser.TouchUI&&g.EventUtils.isMousePointer(y)&&this.setDragState(u.Start,y)},m.prototype.onDragStart=function(y){this.setDragState(u.Start,y),y.preventDefault()},m.prototype.onTouchMove=function(y){this.draggingObject&&y.preventDefault()},m.prototype.isLeftButtonPressed=function(y){return p.EvtUtils.isLeftButtonPressed(y)||y.type==="pointermove"&&e.Browser.TouchUI&&e.Browser.MacOSMobilePlatform&&g.EventUtils.isMousePointer(y)},m.prototype.onMouseMove=function(y){if(e.Browser.TouchUI&&e.Browser.MacOSMobilePlatform){var l=this.getTouchPointFromEvent(y);if(this.touchDownPoint&&l&&this.touchDownPoint.x===l.x&&this.touchDownPoint.y===l.y)return}this.setDragState(this.isLeftButtonPressed(y)?u.Dragging:u.None,y),g.EventUtils.isPointerEvents()&&this.raiseDraggingMouseMove(y)},m.prototype.onMouseUp=function(y){this.setDragState(u.None,y)},m.prototype.updateDraggingElementPosition=function(y,l){var P=this.draggingObject.element,C=y-P.offsetWidth/2,I=l-P.offsetHeight/2;s.SetAbsoluteX(P,C),s.SetAbsoluteY(P,I)},m.prototype.setDragState=function(y,l){if(!this.readOnly&&this.allowDragging&&!(y===u.None&&y===this.dragState||(this.dragPrepareTimeout>-1&&(clearTimeout(this.dragPrepareTimeout),this.dragPrepareTimeout=-1,this.dragPrepareEvent=void 0),y-this.dragState>1||y!==u.None&&y<this.dragState)))switch(this.dragState=y,y){case u.Prepare:this.prepareDragging(l)||this.setDragState(u.None,l),!this.emulateDragEvents&&g.EventUtils.isMousePointer(l)||(this.dragPrepareTimeout=setTimeout(this.onDragPrepareTimeout.bind(this),800),this.dragPrepareEvent=l);break;case u.Start:i.DomUtils.addClassName(document.body,"dxdi-dragging"),this.startDragging(l);break;case u.Dragging:this.doDragging(l);break;case u.None:this.finishDragging(l)}},m.prototype.resetDragState=function(){this.setDragState(u.None,void 0)},m.prototype.onDragPrepareTimeout=function(){this.dragPrepareTimeout=-1,this.dragState===u.Prepare&&this.setDragState(u.Start,this.dragPrepareEvent),this.dragPrepareEvent=void 0},m.prototype.prepareDragging=function(y){return this.dragStartPoint=new v.Point(p.EvtUtils.getEventX(y),p.EvtUtils.getEventY(y)),this.dragStartShapeType=this.getDragShapeType(p.EvtUtils.getEventSource(y)),g.EventUtils.isMousePointer(y)&&i.DomUtils.addClassName(this.mainElement,r),!this.emulateDragEvents&&g.EventUtils.isMousePointer(y)||g.HtmlFocusUtils.focusWithPreventScroll(this.mainElement),!!this.dragStartShapeType},m.prototype.startDragging=function(y){this.draggingObject=this.createDraggingObject(this.dragStartShapeType),this.dragStartShapeType?(this.raiseDragStart(y),this.draggingObject.element=this.createDraggingElement(this.draggingObject),this.draggingObject.captured!==void 0&&this.capture(this.draggingObject.captured,!0),this.updateDraggingElementPosition(this.dragStartPoint.x,this.dragStartPoint.y)):i.DomUtils.addClassName(document.body,n.NOT_VALID_CSSCLASS)},m.prototype.doDragging=function(y){this.draggingObject.element&&this.updateDraggingElementPosition(p.EvtUtils.getEventX(y),p.EvtUtils.getEventY(y))},m.prototype.finishDragging=function(y){if(this.draggingObject){this.raiseDragEnd(y);var l=this.draggingObject.element;l&&l.parentNode.removeChild(l),delete this.draggingObject}this.dragStartPoint=void 0,this.dragStartShapeType=void 0,i.DomUtils.removeClassName(this.mainElement,r),i.DomUtils.removeClassName(document.body,n.NOT_VALID_CSSCLASS),setTimeout(function(){return i.DomUtils.removeClassName(document.body,"dxdi-dragging")},500)},m.prototype.capture=function(y,l){this.draggingObject&&(this.draggingObject.captured!==y||l)&&(this.draggingObject.captured=y,this.draggingObject.element&&i.DomUtils.toggleClassName(this.draggingObject.element,"dxdi-tb-drag-captured",y))},m.prototype.raiseDragStart=function(y){this.onDragOperation.raise("notifyToolboxDragStart",y)},m.prototype.raiseDragEnd=function(y){this.onDragOperation.raise("notifyToolboxDragEnd",y)},m.prototype.raiseDraggingMouseMove=function(y){this.onDragOperation.raise("notifyToolboxDraggingMouseMove",y)},m.prototype.notifyReadOnlyChanged=function(y){this.readOnly=y},m}();h.Toolbox=a,function(m){m[m.None=-1]="None",m[m.Prepare=0]="Prepare",m[m.Start=1]="Start",m[m.Dragging=2]="Dragging"}(u||(u={}));var c=function(m){this.evt=m};h.ToolboxDraggingObject=c;var f=function(){};h.DiagramDraggingEvent=f},3298:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.ToolboxManager=void 0;var u=d(5947),g=d(4724),v=d(1733),p=d(8679),s=function(){function i(e){this.shapeDescriptionManager=e,this.toolboxes=[],this.measurers={}}return i.prototype.create=function(e,t,n,o,r,a,c,f){var m=Array.isArray(r)?r:this.shapeDescriptionManager.getTypesByCategory(r),y=o?new u.TextToolbox(e,t,n,this.shapeDescriptionManager,m,a):new g.IconToolbox(e,t,n,this.shapeDescriptionManager,m,a,f,this.getOrCreateMeasurer(e),c);return y.render(),this.toolboxes.push(y),y},i.prototype.clean=function(e,t){var n=this;if(t)t.clean(e),this.toolboxes.splice(this.toolboxes.indexOf(t),1),Object.keys(this.measurers).forEach(function(r){n.measurers[r]===t.measurer&&delete n.measurers[r]});else{for(var o=0;o<this.toolboxes.length;o++)this.toolboxes[o].clean(e);this.toolboxes=[],this.measurers={}}},i.prototype.refresh=function(e){this.toolboxes.forEach(function(t,n){(!e||Array.isArray(e)&&e.indexOf(n)>-1||n===e)&&t.render()})},i.prototype.applyFilter=function(e,t){var n=this;return this.toolboxes.reduce(function(o,r,a){return(!t||Array.isArray(t)&&t.indexOf(a)>-1||a===t)&&r.render(function(c){return n.searchFilter(c,e,a)})&&o.push(a),o},[])},i.prototype.searchFilter=function(e,t,n,o){if(!t||o&&o.indexOf(n)===-1)return!0;t=t.toLowerCase();var r=this.shapeDescriptionManager.get(e);return r.getTitle().toLowerCase().indexOf(t)>-1||r.getDefaultText().toLowerCase().indexOf(t)>-1},i.prototype.getOrCreateMeasurer=function(e){var t=e.getAttribute("data-dxdiMeasurerID");return t&&this.measurers[t]||(t=p.MathUtils.generateGuid(),this.measurers[t]=new v.TextMeasurer(e),e.setAttribute("data-dxdiMeasurerID",t)),this.measurers[t]},i}();h.ToolboxManager=s},3500:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.raiseEvent=h.RenderUtils=void 0;var u=d(6031),g=d(8679),v=function(){function p(){}return p.updateSvgElementSize=function(s,i,e,t){s.style.width=i+"px",s.style.height=e+"px",s.setAttribute("viewBox","0 0 "+i+" "+e),t&&(s.setAttribute("width",i.toString()),s.setAttribute("height",e.toString()))},p.removeElement=function(s){s&&s.parentNode&&s.parentNode.removeChild(s)},p.removeContent=function(s){for(;s&&s.firstChild;)s.removeChild(s.firstChild)},p.setElementEventData=function(s,i,e,t){i!==u.MouseEventElementType.Undefined&&(s.setAttribute("data-type",i.toString()),e!==void 0&&s.setAttribute("data-key",e.toString()),t!==void 0&&s.setAttribute("data-value",t.toString()))},p.getElementEventData=function(s){if(s.getAttribute&&s.getAttribute("data-type"))return new u.MouseEventSource(parseInt(s.getAttribute("data-type")),s.getAttribute("data-key"),s.getAttribute("data-value"));var i=s.getAttribute&&s.getAttribute("class");return i==="dxdi-page"||i==="dxdi-main"?new u.MouseEventSource(u.MouseEventElementType.Document):void 0},p.getHtmlElementStylePropertyName=function(s){switch(s){case"fill":return"color";case"text-anchor":return"text-align"}return s},p.getTextAnchorValue=function(s,i){if(i===void 0&&(i=!1),i){if(s==="start")return"end";if(s==="end")return"start"}return s},p.getStrokeDasharrayValue=function(s,i){if(i){var e=s&&s.toString();return(e?e.split(/[\s,]+/):[]).map(function(t){return parseInt(t)/2*i}).join(",")}return s},p.applyStyleToElement=function(s,i,e){var t=this;e===void 0&&(e=!1);var n=s.getDefaultInstance();s.forEach(function(o){var r=s[o],a=i instanceof HTMLElement?t.getHtmlElementStylePropertyName(o):o;if(r!==void 0&&r!==""&&r!==n[o]){switch(o){case"text-anchor":r=t.getTextAnchorValue(r,e);break;case"stroke-dasharray":r=t.getStrokeDasharrayValue(r,parseInt(s["stroke-width"]))}i.style.setProperty(a,r)}else i.style.setProperty(a,"")})},p.generateSvgElementId=function(s){return s+"_"+g.MathUtils.generateGuid()},p.getUrlPathById=function(s){return"url(#"+s+")"},p}();h.RenderUtils=v,h.raiseEvent=function(p,s,i){i(s),s.preventDefault&&p.preventDefault()}},5401:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.InputPosition=void 0;var u=d(6823),g=d(4914),v=function(){function p(s){this.selection=s,this.initialProperties=new u.InputPositionProperties(this.selection),this.defaultProperties=new u.InputPositionProperties(this.selection,this.initialProperties,!0),this.currentProperties=new u.InputPositionProperties(this.selection,this.defaultProperties)}return p.prototype.initialize=function(){this.reset(),this.defaultProperties.reset()},p.prototype.reset=function(){this.currentProperties.reset()},p.prototype.getDefaultConnectorProperties=function(){return this.defaultProperties.getConnectorProperties()},p.prototype.getDefaultConnectorPropertyValue=function(s){return this.defaultProperties.getConnectorPropertyValue(s)},p.prototype.getCurrentConnectorPropertyValue=function(s){return this.currentProperties.getConnectorPropertyValue(s)},p.prototype.setConnectorPropertyValue=function(s,i){this.currentProperties.setConnectorPropertyValue(s,i),this.selection.isEmpty(!0)&&this.defaultProperties.setConnectorPropertyValue(s,i)},p.prototype.setInitialConnectorProperties=function(s){for(var i in this.defaultProperties.reset(),this.currentProperties.reset(),s)Object.prototype.hasOwnProperty.call(s,i)&&this.initialProperties.setConnectorPropertyValue(i,s[i])},p.prototype.getDefaultStyle=function(){return this.defaultProperties.getStyle()},p.prototype.getDefaultStylePropertyValue=function(s){return this.defaultProperties.getStylePropertyValue(s)},p.prototype.getDefaultTextStyle=function(){return this.defaultProperties.getTextStyle()},p.prototype.getDefaultTextStylePropertyValue=function(s){return this.defaultProperties.getTextStylePropertyValue(s)},p.prototype.getCurrentStylePropertyValue=function(s){return this.currentProperties.getStylePropertyValue(s)},p.prototype.getCurrentTextStylePropertyValue=function(s){return this.currentProperties.getTextStylePropertyValue(s)},p.prototype.setStylePropertyValue=function(s,i){this.currentProperties.setStylePropertyValue(s,i),this.selection.isEmpty(!0)&&this.defaultProperties.setStylePropertyValue(s,i)},p.prototype.setTextStylePropertyValue=function(s,i){this.currentProperties.setTextStylePropertyValue(s,i),this.selection.isEmpty(!0)&&this.defaultProperties.setTextStylePropertyValue(s,i)},p.prototype.setInitialStyleProperties=function(s){this.defaultProperties.reset(),this.currentProperties.reset();var i=typeof s=="string"?g.Data.cssTextToObject(s):s;for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&this.initialProperties.setStylePropertyValue(e,i[e])},p.prototype.setInitialTextStyleProperties=function(s){this.defaultProperties.reset(),this.currentProperties.reset();var i=typeof s=="string"?g.Data.cssTextToObject(s):s;for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&this.initialProperties.setTextStylePropertyValue(e,i[e])},p.prototype.notifySelectionChanged=function(s){this.reset()},p}();h.InputPosition=v},6823:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.InputPositionProperties=void 0;var u=d(4612),g=d(1552),v=function(){function p(s,i,e){this.selection=s,this.baseProperties=i,this.disableMergingStyles=e,this.selection=s}return p.prototype.reset=function(){this.connectorProperties=null,this.style=null,this.textStyle=null},p.prototype.getConnectorProperties=function(){return this.connectorProperties||(this.connectorProperties=this.baseProperties?this.baseProperties.getConnectorProperties().clone():new u.ConnectorProperties,this.updateConnectorProperties(this.connectorProperties)),this.connectorProperties},p.prototype.getConnectorPropertyValue=function(s){return this.getConnectorProperties()[s]},p.prototype.setConnectorPropertyValue=function(s,i){this.getConnectorProperties()[s]=i},p.prototype.getStyle=function(){return this.style||(this.style=this.baseProperties?this.baseProperties.getStyle().clone():new g.Style,this.disableMergingStyles||this.updateStyle(this.style,"style")),this.style},p.prototype.getStylePropertyValue=function(s){return this.getStyle()[s]},p.prototype.setStylePropertyValue=function(s,i){this.getStyle()[s]=i},p.prototype.getTextStyle=function(){return this.textStyle||(this.textStyle=this.baseProperties?this.baseProperties.getTextStyle().clone():new g.TextStyle,this.disableMergingStyles||this.updateStyle(this.textStyle,"styleText")),this.textStyle},p.prototype.getTextStylePropertyValue=function(s){return this.getTextStyle()[s]},p.prototype.setTextStylePropertyValue=function(s,i){this.getTextStyle()[s]=i},p.prototype.updateConnectorProperties=function(s){var i=this,e=this.selection.getSelectedConnectors(!0);s.forEach(function(t){i.updatePropertyValue(s,e,function(n){return n.properties},t)})},p.prototype.updateStyle=function(s,i){var e=this,t=this.selection.getSelectedItems(!0);s.forEach(function(n){e.updatePropertyValue(s,t,function(o){return o[i]},n)})},p.prototype.updatePropertyValue=function(s,i,e,t){var n,o=!1;i.forEach(function(r){var a=e(r)[t];if(n===void 0&&a!==void 0)n=a,o=!0;else if(o&&n!==a)return void(n=void 0)}),o&&(s[t]=n)},p}();h.InputPositionProperties=v},9021:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.Selection=void 0;var u=d(8675),g=d(5401),v=d(5503),p=d(7959),s=d(4914),i=function(){function e(t){this.onChanged=new u.EventDispatcher,this.inputPosition=new g.InputPosition(this),this.onChanged.add(this.inputPosition),this.initialize(t)}return e.prototype.initialize=function(t){this.model=t,this.keys=[],this.inputPosition.initialize()},e.prototype.add=function(t){this.keys.indexOf(t)<0&&(this.keys.push(t),this.raiseSelectionChanged())},e.prototype.remove=function(t){this.keys.indexOf(t)>=0&&(this.keys.splice(this.keys.indexOf(t),1),this.raiseSelectionChanged())},e.prototype.clear=function(){this.keys.length>0&&(this.keys=[],this.raiseSelectionChanged())},e.prototype.set=function(t,n){!n&&s.Data.ArrayEqual(t,this.keys)||(this.keys=t,this.raiseSelectionChanged())},e.prototype.getKeys=function(){return this.keys},e.prototype.getKey=function(t){return this.keys[t]},e.prototype.getSelectedItemsInsideContainers=function(t){var n=this,o=t.slice();return t.forEach(function(r){r instanceof v.Shape&&n.getSelectedItemsInsideContainers(n.model.getChildren(r)).forEach(function(a){o.indexOf(a)!==-1||n.hasKey(a.key)||o.push(a)})}),o},e.prototype.getSelectedItemsCore=function(t){var n=this;return this.keys.map(function(o){return n.model.findItem(o)}).filter(function(o){return o&&(t||!o.isLocked)})},e.prototype.getSelectedItems=function(t,n){return n?this.getSelectedItemsInsideContainers(this.getSelectedItemsCore(t)):this.getSelectedItemsCore(t)},e.prototype.getSelectedShapes=function(t,n){var o=this;if(n){var r=this.getSelectedItemsCore(t);return this.getSelectedItemsInsideContainers(r).map(function(a){return a instanceof v.Shape?a:void 0}).filter(function(a){return a})}return this.keys.map(function(a){return o.model.findShape(a)}).filter(function(a){return a&&(t||!a.isLocked)})},e.prototype.getSelectedConnectors=function(t,n){var o=this;if(n){var r=this.keys.map(function(a){return o.model.findItem(a)});return this.getSelectedItemsInsideContainers(r).map(function(a){return a instanceof p.Connector?a:void 0}).filter(function(a){return a&&(t||!a.isLocked)})}return this.keys.map(function(a){return o.model.findConnector(a)}).filter(function(a){return a&&(t||!a.isLocked)})},e.prototype.hasKey=function(t){return this.keys.indexOf(t)>=0},e.prototype.isEmpty=function(t){return!this.getSelectedItems(t).length},e.prototype.selectRect=function(t){var n=[];this.model.iterateItems(function(o){o.intersectedByRect(t)&&n.push(o.key)}),this.set(n)},e.prototype.raiseSelectionChanged=function(){this.onChanged.raise("notifySelectionChanged",this)},e}();h.Selection=i},240:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.ConnectorRoutingMode=h.AutoZoomMode=h.DiagramSettings=void 0;var u,g,v=d(8675),p=d(6353),s=d(5383),i=d(4867),e=function(){function t(){this.onZoomChanged=new v.EventDispatcher,this.onViewChanged=new v.EventDispatcher,this.onReadOnlyChanged=new v.EventDispatcher,this.onConnectorRoutingModeChanged=new v.EventDispatcher,this._zoomLevel=1,this._zoomLevelWasChanged=!1,this._zoomLevelItems=[.5,.75,1,1.25,1.5,2,3],this._simpleView=!1,this._fullscreen=!1,this._readOnly=!1,this._autoZoom=u.Disabled,this._snapToGrid=!0,this._showGrid=!0,this._contextMenuEnabled=!0,this._gridSize=180,this._gridSizeItems=[90,180,360,720],this._pageSizeItems=[{size:new p.Size(12240,15840),text:"US-Letter ({width} x {height})"},{size:new p.Size(12240,20160),text:"US-Legal ({width} x {height})"},{size:new p.Size(15817,24491),text:"US-Tabloid ({width} x {height})"},{size:new p.Size(47679,67408),text:"A0 ({width} x {height})"},{size:new p.Size(33676,47679),text:"A1 ({width} x {height})"},{size:new p.Size(23811,33676),text:"A2 ({width} x {height})"},{size:new p.Size(16838,23811),text:"A3 ({width} x {height})"},{size:new p.Size(11906,16838),text:"A4 ({width} x {height})"},{size:new p.Size(8391,11906),text:"A5 ({width} x {height})"},{size:new p.Size(5953,8391),text:"A6 ({width} x {height})"},{size:new p.Size(4195,5953),text:"A7 ({width} x {height})"}],this._viewUnits=s.DiagramUnit.In,this._connectorRoutingMode=g.AllShapesOnly,this._reloadInsertedItemRequired=!1,this._useCanvgForExportToImage=!0}return Object.defineProperty(t.prototype,"zoomLevel",{get:function(){return this._zoomLevel},set:function(n){var o=this;(n=t.correctZoomLevel(n))!==this._zoomLevel&&(this._zoomLevel=n,this._zoomLevelWasChanged=!0,this.onZoomChanged.raise1(function(r){return r.notifyZoomChanged(n,o._autoZoom)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"zoomLevelWasChanged",{get:function(){return this._zoomLevelWasChanged},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"zoomLevelItems",{get:function(){return this._zoomLevelItems},set:function(n){(n=n.map(function(o){return t.correctZoomLevel(o)}))!==this._zoomLevelItems&&(this._zoomLevelItems=n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"autoZoom",{get:function(){return this._autoZoom},set:function(n){var o=this;n!==this._autoZoom&&(this._autoZoom=n,this.onZoomChanged.raise1(function(r){return r.notifyZoomChanged(o._zoomLevel,n)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"simpleView",{get:function(){return this._simpleView},set:function(n){n!==this._simpleView&&(this._simpleView=n,this.notifyViewChanged())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"readOnly",{get:function(){return this._readOnly},set:function(n){n!==this._readOnly&&(this._readOnly=n,this.onReadOnlyChanged.raise1(function(o){return o.notifyReadOnlyChanged(n)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullscreen",{get:function(){return this._fullscreen},set:function(n){this._fullscreen=n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"snapToGrid",{get:function(){return this._snapToGrid},set:function(n){this._snapToGrid=n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showGrid",{get:function(){return this._showGrid},set:function(n){var o=this;n!==this._showGrid&&(this._showGrid=n,this.onViewChanged.raise1(function(r){return r.notifyGridChanged(o.showGrid,o.gridSize)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"contextMenuEnabled",{get:function(){return this._contextMenuEnabled},set:function(n){this._contextMenuEnabled=n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"gridSize",{get:function(){return this._gridSize},set:function(n){var o=this;n!==this._gridSize&&(this._gridSize=n,this.onViewChanged.raise1(function(r){return r.notifyGridChanged(o.showGrid,o.gridSize)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"gridSizeItems",{get:function(){return this._gridSizeItems},set:function(n){n!==this._gridSizeItems&&(this._gridSizeItems=n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pageSizeItems",{get:function(){return this._pageSizeItems},set:function(n){n!==this._pageSizeItems&&(this._pageSizeItems=n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"viewUnits",{get:function(){return this._viewUnits},set:function(n){this._viewUnits=n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"connectorRoutingMode",{get:function(){return this._connectorRoutingMode},set:function(n){n!==this._connectorRoutingMode&&(this._connectorRoutingMode=n,this.onConnectorRoutingModeChanged.raise1(function(o){return o.notifyConnectorRoutingModeChanged(n)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"reloadInsertedItemRequired",{get:function(){return this._reloadInsertedItemRequired},set:function(n){this._reloadInsertedItemRequired=n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"useCanvgForExportToImage",{get:function(){return this._useCanvgForExportToImage},set:function(n){this._useCanvgForExportToImage=n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shapeMinWidth",{get:function(){return this._shapeMinWidth},set:function(n){this._shapeMinWidth=n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shapeMinHeight",{get:function(){return this._shapeMinHeight},set:function(n){this._shapeMinHeight=n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shapeMaxWidth",{get:function(){return this._shapeMaxWidth},set:function(n){this._shapeMaxWidth=n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shapeMaxHeight",{get:function(){return this._shapeMaxHeight},set:function(n){this._shapeMaxHeight=n},enumerable:!1,configurable:!0}),t.prototype.applyShapeSizeSettings=function(n,o){n&&(typeof n.shapeMaxHeight=="number"&&(this.shapeMaxHeight=i.ModelUtils.getTwipsValue(o,n.shapeMaxHeight)),typeof n.shapeMinHeight=="number"&&(this.shapeMinHeight=i.ModelUtils.getTwipsValue(o,n.shapeMinHeight)),typeof n.shapeMaxWidth=="number"&&(this.shapeMaxWidth=i.ModelUtils.getTwipsValue(o,n.shapeMaxWidth)),typeof n.shapeMinWidth=="number"&&(this.shapeMinWidth=i.ModelUtils.getTwipsValue(o,n.shapeMinWidth)))},t.prototype.notifyViewChanged=function(){var n=this;this.onViewChanged.raise1(function(o){return o.notifyViewChanged(n._simpleView)})},t.correctZoomLevel=function(n){return Math.min(10,Math.max(n,.01))},t}();h.DiagramSettings=e,function(t){t[t.Disabled=0]="Disabled",t[t.FitContent=1]="FitContent",t[t.FitToWidth=2]="FitToWidth"}(u=h.AutoZoomMode||(h.AutoZoomMode={})),function(t){t[t.None=0]="None",t[t.ConnectorShapesOnly=1]="ConnectorShapesOnly",t[t.AllShapesOnly=2]="AllShapesOnly"}(g=h.ConnectorRoutingMode||(h.ConnectorRoutingMode={}))},2230:function(j,h,d){var u,g=this&&this.__extends||(u=function(p,s){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t])},u(p,s)},function(p,s){function i(){this.constructor=p}u(p,s),p.prototype=s===null?Object.create(s):(i.prototype=s.prototype,new i)});Object.defineProperty(h,"__esModule",{value:!0}),h.BarManager=void 0;var v=function(p){function s(i){var e=p.call(this)||this;return e.bars=[],e.control=i,e}return g(s,p),s.prototype.clean=function(){var i=this;this.bars.forEach(function(e){return e.onChanged.remove(i)}),this.bars=[]},s.prototype.registerBar=function(i){this.bars.push(i),i.onChanged.add(this),this.updateBarItemsState(i)},s.prototype.updateItemsState=function(i){if(!this.isUpdateLocked())for(var e=0,t=void 0;t=this.bars[e];e++)this.updateBarItemsState(t,i)},s.prototype.updateBarItemsState=function(i,e){if(!this.isUpdateLocked()){if(this.control.permissionsProvider.beginUpdateUI(),i.isVisible()){var t=void 0;if(e){var n=i.getCommandKeys().reduce(function(a,c){return a[c]=!0,a},{});t=e.filter(function(a){return n[a]})}else t=i.getCommandKeys();for(var o=t.length,r=0;r<o;r++)this.updateBarItem(i,t[r])}this.control.permissionsProvider.endUpdateUI()}},s.prototype.updateBarItem=function(i,e){var t=this.control.commandManager.getCommand(e);if(t){var n=t.getState();if(i.setItemVisible(e,n.visible),n.visible&&(i.setItemEnabled(e,n.enabled),!n.denyUpdateValue)){var o=this.getItemValue(n.value);n.items&&i.setItemSubItems(e,n.items),i.setItemValue(e,o,this.getDefaultItemValue(n.defaultValue))}}},s.prototype.setEnabled=function(i){for(var e=0,t=void 0;t=this.bars[e];e++)t.setEnabled(i)},s.prototype.notifyBarCommandExecuted=function(i,e){this.control.commandManager.getCommand(i).execute(e)||this.updateItemsState([i])},s.prototype.notifyBarUpdateRequested=function(){this.updateItemsState()},s.prototype.notifySelectionChanged=function(i){this.updateItemsState()},s.prototype.onUpdateUnlocked=function(i){},s.prototype.getItemValue=function(i){return i},s.prototype.getDefaultItemValue=function(i){return i},s}(d(1772).BatchUpdatableObject);h.BarManager=v},8675:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.EventUtils=h.HtmlFocusUtils=h.ObjectUtils=h.GeometryUtils=h.Utils=h.EventDispatcher=h.Range=h.LineEquation=void 0,d(7097);var u=d(6353),g=d(8900),v=d(8011),p=d(2400),s=d(5596),i=d(8679),e=d(9716),t=d(1335),n=d(1552),o=d(9279),r=d(3714),a=function(){function I(x,b,S){this.aParam=x,this.bParam=b,this.cParam=S}return I.fromPoints=function(x,b,S){return S===void 0&&(S=1e-5),y.areDuplicatedPoints(x,b,S)?void 0:new I(b.y-x.y,x.x-b.x,b.x*x.y-x.x*b.y)},I.prototype.getPointIntersection=function(x,b){b===void 0&&(b=1e-5);var S=this.aParam,w=this.bParam,T=this.cParam,_=x.aParam,M=x.bParam,A=x.cParam,E=_*w-S*M;if(i.MathUtils.numberCloseTo(E,0,b))return null;if(S===0){var U=(M*T-A*w)/(w*_);return this.createPoint(U,-T/w)}var R=(A*S-T*_)/E;return this.createPoint((-w*R-T)/S,R)},I.prototype.containsPoint=function(x,b){return b===void 0&&(b=1e-5),i.MathUtils.numberCloseTo(this.aParam*x.x+this.bParam*x.y+this.cParam,0,b)},I.prototype.createPoint=function(x,b,S){return S===void 0&&(S=1e-5),new g.Point(i.MathUtils.numberCloseTo(x,0,S)?0:x,i.MathUtils.numberCloseTo(b,0,S)?0:b)},I}();h.LineEquation=a;var c=function(){function I(x,b){this.from=x,this.to=b!==void 0?b:x}return Object.defineProperty(I.prototype,"length",{get:function(){return Math.abs(this.to-this.from)},enumerable:!1,configurable:!0}),I.prototype.extend=function(x){this.from=Math.min(x.from,this.from),this.to=Math.max(x.to,this.to)},I.prototype.includes=function(x){return x>=this.from&&x<=this.to},I.fromLength=function(x,b){return new I(x,x+b)},I}();h.Range=c;var f=function(){function I(){this.listeners=[]}return I.prototype.add=function(x){if(!x)throw new Error("Not Implemented");this.hasEventListener(x)||this.listeners.push(x)},I.prototype.remove=function(x){for(var b=0,S=void 0;S=this.listeners[b];b++)if(S===x){this.listeners.splice(b,1);break}},I.prototype.raise=function(x){for(var b=[],S=1;S<arguments.length;S++)b[S-1]=arguments[S];for(var w=0,T=void 0;T=this.listeners[w];w++){var _=T[x];_&&_.apply(T,b)}},I.prototype.raise1=function(x){for(var b=0,S=void 0;S=this.listeners[b];b++)x(S)},I.prototype.hasEventListener=function(x){for(var b=0,S=this.listeners.length;b<S;b++)if(this.listeners[b]===x)return!0;return!1},I}();h.EventDispatcher=f;var m=function(){function I(){}return I.flatten=function(x){return[].concat.apply([],x)},I}();h.Utils=m;var y=function(){function I(){}return I.arePointsOfOrthogonalLine=function(x,b,S){return S?x.y===b.y:x.x===b.x},I.getCommonRectangle=function(x){if(!x.length)return new v.Rectangle(0,0,0,0);var b=Number.MAX_VALUE,S=-Number.MAX_VALUE,w=Number.MAX_VALUE,T=-Number.MAX_VALUE;return x.forEach(function(_){b=Math.min(b,_.x),S=Math.max(S,_.right),w=Math.min(w,_.y),T=Math.max(T,_.bottom)}),new v.Rectangle(b,w,S-b,T-w)},I.findFreeSpace=function(x,b,S,w){var T=[w?w.x:0],_=[w?w.y:0];x.forEach(function(V){T.push(V.x),T.push(V.right),_.push(V.y),_.push(V.bottom)}),T=T.sort(function(V,H){return V-H}).reduce(function(V,H,L){return T[L-1]!==H&&V.push(H)&&V||V},[]);for(var M=(_=_.sort(function(V,H){return V-H}).reduce(function(V,H,L){return _[L-1]!==H&&V.push(H)&&V||V},[])).map(function(V){return T.map(function(H,L){return T[L+1]-H})}),A=function(V,H){for(var L=p.SearchUtils.binaryIndexOf(T,function(Q){return Q-H.x}),D=p.SearchUtils.binaryIndexOf(T,function(Q){return Q-H.right}),K=p.SearchUtils.binaryIndexOf(_,function(Q){return Q-H.y}),F=p.SearchUtils.binaryIndexOf(_,function(Q){return Q-H.bottom}),q=K;q<F;q++)for(var ee=L;ee<D;ee++)M[q][ee]*=-1},E=0,U=void 0;U=x[E];E++)A(0,U);for(var R=0;R<_.length;R++)for(var O=0;O<T.length-1;O++){var N=this.checkRect(M,_,T,R,O,b,S);if(N>0)O=N;else if(N===0)return new g.Point(T[O],_[R])}return null},I.checkRect=function(x,b,S,w,T,_,M){for(var A=0,E=0,U=S.length-2,R=w;R<b.length;R++){A=b[R+1]-b[w];for(var O=T;O<=U;O++){if(x[R][O]<0)return O===0?-1:O;if(E=S[O+1]-S[T],_.width<=E||!M&&O===S.length-2&&_.width/2<=E){if(_.height<=A||!M&&R===b.length-2&&_.height/2<=A)return 0;U=O}}}},I.getArrowPoints=function(x,b,S,w){if(x.x===b.x&&x.y===b.y)return{point1:x.clone(),point2:x.clone(),point3:x.clone()};var T=b.x-x.x,_=b.y-x.y,M=Math.sqrt(Math.pow(T,2)+Math.pow(_,2)),A=T/M,E=_/M,U=x.x+S*A+w*E,R=x.y+S*E-w*A,O=x.x+S*A-w*E,N=x.y+S*E+w*A,V=x.x+S*A,H=x.y+S*E;return{point1:new g.Point(U,R),point2:new g.Point(O,N),point3:new g.Point(V,H)}},I.createSegments=function(x){for(var b=[],S=1;S<x.length;S++)b.push(new t.Segment(x[S-1],x[S]));return b},I.createRectagle=function(x){var b=x.map(function(A){return A.x}),S=x.map(function(A){return A.y}),w=b.reduce(function(A,E){return Math.min(A,E)},Number.MAX_VALUE),T=b.reduce(function(A,E){return Math.max(A,E)},-Number.MAX_VALUE),_=S.reduce(function(A,E){return Math.min(A,E)},Number.MAX_VALUE),M=S.reduce(function(A,E){return Math.max(A,E)},-Number.MAX_VALUE);return new v.Rectangle(w,_,T-w,M-_)},I.createSegmentsFromRectangle=function(x){var b=[],S=new g.Point(x.x,x.y),w=new g.Point(x.right,x.y),T=new g.Point(x.right,x.bottom),_=new g.Point(x.x,x.bottom);return b.push(new t.Segment(S,w)),b.push(new t.Segment(w,T)),b.push(new t.Segment(T,_)),b.push(new t.Segment(_,S)),b},I.areSegmentsCutRectangle=function(x,b){if(!b)return!1;for(var S=I.createSegmentsFromRectangle(b),w=!1,T=!1,_=function(E){if(w&&T)return{value:!0};var U=x[E];if(U.isIntersectedByRect(b)){var R=U.startPoint,O=U.endPoint,N=b.containsPoint(R),V=b.containsPoint(O);if(!N&&!V)return{value:!0};if(N&&!V){var H=S.filter(function(F){return F.containsPoint(R)});return H.length>0&&S.filter(function(F){return H.length===1?!F.containsPoint(H[0].startPoint)&&!F.containsPoint(H[0].endPoint):F!==H[0]&&F!==H[1]}).some(function(F){return U.isIntersected(F)})&&!w&&(w=!0),T||(T=!0),"continue"}if(!N&&V){w||(w=!0,T&&(T=!1));var L=S.filter(function(F){return F.containsPoint(O)});return L.length>0&&S.filter(function(F){return L.length===1?!F.containsPoint(L[0].startPoint)&&!F.containsPoint(L[0].endPoint):F!==L[0]&&F!==L[1]}).some(function(F){return U.isIntersected(F)})&&!T&&(T=!0),"continue"}var D=S.filter(function(F){return F.containsPoint(R)}),K=S.filter(function(F){return F.containsPoint(O)});if(D.length===2&&K.length===2)return{value:!0};if(D.length===1&&K.length===1&&D[0]!==K[0])return{value:!0};T||K.length!==1||D.length||(T=!0),w||D.length!==1||K.length||(w=!0,T&&(T=!1))}},M=0;M<x.length;M++){var A=_(M);if(typeof A=="object")return A.value}return w&&T},I.areIntersectedSegments=function(x,b){if(!b)return!1;for(var S,w=0;S=x[w];){for(var T=0,_=void 0;_=b[T];){if(_.isIntersected(S))return!0;T++}w++}return!1},I.isLineIntersected=function(x,b,S,w,T){var _=a.fromPoints(x,b),M=S.startPoint,A=S.endPoint;if(_.containsPoint(M)&&_.containsPoint(A))return!w&&!T;var E=a.fromPoints(M,A).getPointIntersection(_);return!(!E||!S.containsPoint(E))&&(w?!I.areDuplicatedPoints(M,E):!T||!I.areDuplicatedPoints(A,E))},I.removeUnnecessaryPoints=function(x,b,S,w){S===void 0&&(S=function(T){return T!==void 0}),w===void 0&&(w=1e-5),this.removeUnnecessaryPointsCore(x,b,S,w),this.removeBackwardPoints(x,b,S,w),this.removeUnnecessaryPointsCore(x,b,S,w)},I.removeUnnecessaryRightAnglePoints=function(x,b,S,w){S===void 0&&(S=function(T){return T!==void 0}),w===void 0&&(w=1e-5),this.removeUnnecessaryPointsCore(x,b,S,w),this.removeBackwardPoints(x,b,S,w),this.removeNotRightAnglePoints(x,b,S,w),this.removeUnnecessaryPointsCore(x,b,S,w)},I.removeUnnecessaryPointsCore=function(x,b,S,w){S===void 0&&(S=function(T){return T!==void 0}),w===void 0&&(w=1e-5),this.removeDuplicatedPoints(x,b,S,w),this.removeNotCornersPoints(x,b,S,w)},I.removeNotRightAnglePoints=function(x,b,S,w){S===void 0&&(S=function(E){return E!==void 0}),w===void 0&&(w=1e-5);for(var T,_=0;(T=x[_])&&x.length>2;){var M=this.getNextPoint(x,_,1,S),A=this.getNextPoint(x,_,-1,S);A&&M&&!I.isRightAngleCorner(A,T,M,w)&&b(T,_)||_++}},I.removeDuplicatedPoints=function(x,b,S,w){S===void 0&&(S=function(E){return E!==void 0}),w===void 0&&(w=1e-5);for(var T,_=0;(T=x[_])&&x.length>2;){var M=this.getNextPoint(x,_,1,S);if(M&&I.areDuplicatedPoints(T,M,w)){var A=_===x.length-2?_:_+1;if(b(x[A],A))continue}_++}},I.removeNotCornersPoints=function(x,b,S,w){S===void 0&&(S=function(E){return E!==void 0}),w===void 0&&(w=1e-5);for(var T,_=0;(T=x[_])&&x.length>2;){var M=this.getNextPoint(x,_,1,S),A=this.getNextPoint(x,_,-1,S);A&&M&&!I.isCorner(A,T,M,w)&&b(T,_)||_++}},I.removeBackwardPoints=function(x,b,S,w){S===void 0&&(S=function(E){return E!==void 0}),w===void 0&&(w=1e-5);for(var T,_=0;(T=x[_])&&x.length>2;){var M=this.getNextPoint(x,_,1,S),A=this.getNextPoint(x,_,-1,S);A&&M&&I.isBackwardPoint(A,T,M,w)&&b(T,_)||_++}},I.isRightAngleCorner=function(x,b,S,w){return w===void 0&&(w=1e-5),i.MathUtils.numberCloseTo(I.createAngle(x,b,S),Math.PI/2,w)||i.MathUtils.numberCloseTo(I.createAngle(x,b,S),Math.PI,w)||i.MathUtils.numberCloseTo(I.createAngle(x,b,S),3*Math.PI/2,w)},I.isCorner=function(x,b,S,w){return w===void 0&&(w=1e-5),!i.MathUtils.numberCloseTo(I.createAngle(x,b,S),0,w)},I.areDuplicatedPoints=function(x,b,S){return S===void 0&&(S=1e-5),i.MathUtils.numberCloseTo(x.x,b.x,S)&&i.MathUtils.numberCloseTo(x.y,b.y,S)},I.isBackwardPoint=function(x,b,S,w){return w===void 0&&(w=1e-5),i.MathUtils.numberCloseTo(I.createAngle(x,b,S),Math.PI,w)},I.createAngle=function(x,b,S){var w=e.Vector.fromPoints(b,S),T=e.Vector.fromPoints(x,b),_=w.x,M=w.y,A=T.x,E=T.y,U=Math.atan2(_*E-A*M,_*A+M*E);return U<0?2*Math.PI+U:U},I.getNextPoint=function(x,b,S,w){for(var T,_=b+S;T=x[_];){if(w(T))return T;_+=S}},I.addSelectedLinesTo=function(x,b,S,w,T,_,M,A,E,U,R,O,N,V){V===void 0&&(V=1e-5);var H=b.y-x.y,L=S.y-b.y,D=x.x-b.x,K=b.x-S.x,F=H*K-L*D;if(!i.MathUtils.numberCloseTo(F,0,V)){var q=H*(x.x+w)+D*(x.y+T),ee=L*(b.x+A)+K*(b.y+E);O((K*q-D*ee)/F,(H*ee-L*q)/F);var Q=H*(x.x+_)+D*(x.y+M),X=L*(b.x+U)+K*(b.y+R);N((K*Q-D*X)/F,(H*X-L*Q)/F)}},I.getSelectionOffsetPoint=function(x,b,S){return new g.Point((x.y-b.y)/S,(b.x-x.x)/S)},I.getSelectionTextStartEndPoints=function(x,b,S,w,T,_){var M=(b.x-x.x)/S,A=(b.y-x.y)/S,E=T.width*M+T.height*A;switch(_){case n.TextAlignment.Left:return[w,new g.Point(w.x+M*E,w.y+A*E)];case n.TextAlignment.Right:return[new g.Point(w.x-M*E,w.y-A*E),w];default:return[new g.Point(w.x-.5*M*E,w.y-.5*A*E),new g.Point(w.x+.5*M*E,w.y+.5*A*E)]}},I.getPathLength=function(x){var b,S=0;return x.forEach(function(w){b!==void 0&&(S+=s.Metrics.euclideanDistance(w,b)),b=w}),S},I.getPathPointByPosition=function(x,b){if(!x.length)throw new Error("Invalid points");if(0>b||b>1)throw new Error("Invalid relative position");var S=this.getPathLength(x);if(x.length<=2&&S===0||b===0)return[x[0],0];for(var w=S*b,T=0,_=1;_<x.length;_++){var M=s.Metrics.euclideanDistance(x[_],x[_-1]);if(T+M>=w){var A=w-T,E=(x[_].x-x[_-1].x)/M,U=(x[_].y-x[_-1].y)/M;return[new g.Point(x[_-1].x+E*A,x[_-1].y+U*A),_]}T+=M}return[x[x.length-1],x.length-1]},I.getLineAngle=function(x,b){return Math.atan2(b.y-x.y,b.x-x.x)},I.getTriangleBeginAngle=function(x,b,S){var w=this.getLineAngle(x,b),T=this.getLineAngle(x,S);return Math.abs(T-w)},I.getTriangleEndAngle=function(x,b,S){var w=this.getLineAngle(x,b),T=this.getLineAngle(S,b);return Math.abs(w-T)},I.getPathPointByPoint=function(x,b){if(!x.length)throw new Error("Invalid points");if(x.length===1)return x[0];for(var S,w=Number.MAX_VALUE,T=1;T<x.length;T++){var _=x[T-1],M=x[T];if(b.equals(_)){S=_.clone();break}if(b.equals(M)){S=M.clone();break}var A=this.getTriangleBeginAngle(_,M,b),E=this.getTriangleEndAngle(_,M,b),U=s.Metrics.euclideanDistance(b,_),R=s.Metrics.euclideanDistance(b,M),O=U*Math.sin(A),N=void 0;if((N=Math.PI/2<=A&&A<=3*Math.PI/2?U:Math.PI/2<=E&&E<=3*Math.PI/2?R:Math.abs(O))<w)if(w=N,Math.PI/2<=A&&A<=3*Math.PI/2)S=_.clone();else if(Math.PI/2<=E&&E<=3*Math.PI/2)S=M.clone();else{var V=Math.fround||Math.round,H=this.getLineAngle(_,M),L=V(Math.abs(O*Math.sin(H))),D=V(Math.abs(O*Math.cos(H))),K=b.y-_.y<V((b.x-_.x)*Math.tan(H));0<=H&&H<=Math.PI/2?(L*=K?-1:1,D*=K?1:-1):Math.PI/2<=H&&H<=Math.PI||0>=H&&H>=-Math.PI/2?(L*=K?1:-1,D*=K?1:-1):-Math.PI/2>=H&&H>=-Math.PI&&(L*=K?-1:1,D*=K?1:-1),S=b.clone().offset(L,D)}}return S},I.getPathPositionByPoint=function(x,b,S){S===void 0&&(S=100),b=this.getPathPointByPoint(x,b);for(var w=this.getPathLength(x),T=0,_=1;_<x.length;_++){var M=x[_-1],A=x[_],E=s.Metrics.euclideanDistance(A,M),U=Math.atan((A.y-M.y)/(A.x-M.x)),R=Math.fround||Math.round;if(b.x===A.x&&b.x===M.x||b.y===A.y&&b.y===M.y||R(b.y-M.y)===R((b.x-M.x)*Math.tan(U)))return Math.sin(U)!==0?T+=Math.abs((b.y-M.y)/Math.sin(U)):T+=Math.abs(b.x-M.x),Math.round(T*S/w)/S;T+=E}return 1},I.arePointsEqual=function(x,b){var S=x.length;if(S!==b.length)return!1;for(var w=0;w<S;w++)if(!x[w].equals(b[w]))return!1;return!0},I.getMaxRectangleEnscribedInEllipse=function(x){var b=x.width*Math.sqrt(2)/2,S=x.height*Math.sqrt(2)/2;return new u.Size(b,S)},I.getEllipseByEnscribedRectangle=function(x){return new u.Size(2*x.width/Math.sqrt(2),2*x.height/Math.sqrt(2))},I}();h.GeometryUtils=y;var l=function(){function I(){}return I.cloneObject=function(x){return x&&Object.assign({},x)},I.compareObjects=function(x,b){return x===b||typeof x=="object"&&typeof b=="object"&&this.isDeepEqual(x,b)},I.isDeepEqual=function(x,b){var S=x?Object.getOwnPropertyNames(x):[],w=b?Object.getOwnPropertyNames(b):[];if(S.length!==w.length)return!1;for(var T=0;T<S.length;T++){var _=S[T];switch(typeof x[_]){case"object":if(!this.isDeepEqual(x[_],b[_]))return!1;break;case"number":if(!(isNaN(x[_])&&isNaN(b[_])||x[_]===b[_]))return!1;break;default:if(x[_]!==b[_])return!1}}return!0},I}();h.ObjectUtils=l;var P=function(){function I(){}return I.focusWithPreventScroll=function(x){try{var b=o.Browser.Safari,S=b&&this.getHtmlScrollPosition();if(b){var w=x.parentElement&&x.parentElement.getBoundingClientRect();if(w){var T=w.left<0?1-w.left:0,_=w.top<0?1-w.top:0,M=window.frameElement&&window.frameElement.getBoundingClientRect();M&&(M.top<0&&-M.top>w.top&&(_=-M.top-w.top+1),M.left<0&&-M.left>w.left&&(T=-M.left-w.left+1)),x.style.setProperty("left",T+"px","important"),x.style.setProperty("top",_+"px","important")}}if(x.focus({preventScroll:!0}),b){var A=this.getHtmlScrollPosition();l.compareObjects(S,A)||this.setHtmlScrollPosition(S),x.style.setProperty("left","-1000px","important"),x.style.setProperty("top","-1000px","important")}}catch{}},I.getHtmlScrollPosition=function(){return{pos:this.getDocumentScrollPosition(window,document),iframePos:window.top!==window&&this.getDocumentScrollPosition(window.top,window.top.document)}},I.getDocumentScrollPosition=function(x,b){return{left:x.pageXOffset||b.documentElement.scrollLeft||b.body.scrollLeft,top:x.pageYOffset||b.documentElement.scrollTop||b.body.scrollTop}},I.setHtmlScrollPosition=function(x){this.setDocumentScrollPosition(document,x.pos),window.top!==window&&x.iframePos&&this.setDocumentScrollPosition(window.top.document,x.iframePos)},I.setDocumentScrollPosition=function(x,b){x.documentElement.scrollTop=b.top,x.documentElement.scrollLeft=b.left,x.body.scrollTop=b.top,x.body.scrollLeft=b.left},I}();h.HtmlFocusUtils=P;var C=function(){function I(){}return I.isLeftButtonPressed=function(x){return r.EvtUtils.isLeftButtonPressed(x)},I.isPointerEvents=function(){return window.PointerEvent},I.isMousePointer=function(x){return this.isPointerEvents()&&(x.pointerType&&x.pointerType==="mouse"||o.Browser.Firefox&&x.type==="click")},I.isTouchMode=function(){return o.Browser.TouchUI||window.navigator&&window.navigator.maxTouchPoints>0},I.isTouchEvent=function(x){return o.Browser.TouchUI||!I.isMousePointer(x)},I}();h.EventUtils=C},4914:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.Data=h.SetAbsoluteY=h.SetAbsoluteX=void 0;var u=d(6907),g=d(2491);function v(i){return!isNaN(parseFloat(i))&&isFinite(i)}function p(i,e,t){return i-=function(n,o){var r=function(c){var f=document.createElement("DIV");return f.style.top="0px",f.style.left="0px",f.style.visibility="hidden",f.style.position=u.DomUtils.getCurrentStyle(c).position,f}(n);r.style.position==="static"&&(r.style.position="absolute"),n.parentNode.appendChild(r);var a=o?u.DomUtils.getAbsolutePositionX(r):u.DomUtils.getAbsolutePositionY(r);return n.parentNode.removeChild(r),Math.round(a)}(e,t),i}h.SetAbsoluteX=function(i,e){i.style.left=p(e,i,!0)+"px"},h.SetAbsoluteY=function(i,e){i.style.top=p(e,i,!1)+"px"};var s=function(){function i(){}return i.ArrayInsert=function(e,t,n){if(0<=n&&n<e.length){for(var o=e.length;o>n;o--)e[o]=e[o-1];e[n]=t}else e.push(t)},i.ArrayRemove=function(e,t){var n=i.ArrayIndexOf(e,t);n>-1&&i.ArrayRemoveAt(e,n)},i.ArrayRemoveAt=function(e,t){if(t>=0&&t<e.length){for(var n=t;n<e.length-1;n++)e[n]=e[n+1];e.pop()}},i.ArrayClear=function(e){for(;e.length>0;)e.pop()},i.ArrayIndexOf=function(e,t,n){if(n){for(o=0;o<e.length;o++)if(n(e[o],t))return o}else for(var o=0;o<e.length;o++)if(e[o]===t)return o;return-1},i.ArrayContains=function(e,t){return i.ArrayIndexOf(e,t)>=0},i.ArrayEqual=function(e,t){var n=e.length;if(n!==t.length)return!1;for(var o=0;o<n;o++)if(e[o]!==t[o])return!1;return!0},i.ArraySame=function(e,t){return e.length===t.length&&e.every(function(n){return i.ArrayContains(t,n)})},i.ArrayGetIntegerEdgeValues=function(e){var t=i.CollectionToArray(e);return i.ArrayIntegerAscendingSort(t),{start:t[0],end:t[t.length-1]}},i.ArrayIntegerAscendingSort=function(e){i.ArrayIntegerSort(e,!1)},i.ArrayIntegerSort=function(e,t){e.sort(function(n,o){var r=0;return n>o?r=1:n<o&&(r=-1),t&&(r*=-1),r})},i.CollectionsUnionToArray=function(e,t){for(var n=[],o=e.length,r=t.length,a=0;a<o+r;a++)a<o?n.push(e[a]):n.push(t[a-o]);return n},i.CollectionToArray=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n]);return t},i.CreateHashTableFromArray=function(e){for(var t=[],n=0;n<e.length;n++)t[e[n]]=1;return t},i.CreateIndexHashTableFromArray=function(e){for(var t=[],n=0;n<e.length;n++)t[e[n]]=n;return t},i.ArrayToHash=function(e,t,n){return e instanceof Array?e.reduce(function(o,r,a){var c=t(r,a),f=n(r,a);return o[c]=f,o},{}):{}},i.Sum=function(e,t){return e instanceof Array?e.reduce(function(n,o){var r=t?t(o):o;return v(r)||(r=0),n+r},0):0},i.Min=function(e,t){return i.CalculateArrayMinMax(e,t,!1)},i.Max=function(e,t){return i.CalculateArrayMinMax(e,t,!0)},i.NearestLeftBinarySearchComparer=function(e,t,n){var o=e[t],r=o<n;return r&&t===e.length-1||r&&e[t+1]>=n?0:o<n?-1:1},i.ArrayBinarySearch=function(e,t,n,o,r){n||(n=i.defaultBinarySearchComparer),g.isDefined(o)||(o=0),g.isDefined(r)||(r=e.length-o);for(var a=o+r-1;o<=a;){var c=o+(a-o>>1),f=n(e,c,t);if(f===0)return c;f<0?o=c+1:a=c-1}return-(o+1)},i.ArrayFlatten=function(e){var t=[];return e.forEach(function(n){t=t.concat(n)}),t},i.GetDistinctArray=function(e){for(var t=[],n=0;n<e.length;n++){var o=e[n];i.ArrayIndexOf(t,o)===-1&&t.push(o)}return t},i.ForEach=function(e,t){if(Array.prototype.forEach)Array.prototype.forEach.call(e,t);else for(var n=0,o=e.length;n<o;n++)t(e[n],n,e)},i.MergeHashTables=function(e,t){if(!t||typeof t=="string")return e;for(var n in e||(e={}),t)n&&!(n in e)&&(e[n]=t[n]);return e},i.Range=function(e,t){return(e=parseInt(e)||0)<0&&(e=0),(t=parseInt(t)||0)<0&&(t=0),Array(e).map(function(n,o){return t+o})},i.CalculateArrayMinMax=function(e,t,n){if(!(e instanceof Array))return 0;var o=n?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY;return e.reduce(function(r,a){var c=t?t(a):a;return v(c)||(c=o),(n?Math.max:Math.min)(c,r)},o)},i.byRange=function(e,t,n){return Math.min(Math.max(e,t),n)},i.defaultBinarySearchComparer=function(e,t,n){var o=e[t];return o===n?0:o<n?-1:1},i.cssTextToObject=function(e){return e?(e=e.replace(/\/\*(.|\s)*?\*\//g,"").replace(/\s+/g," ")).split(";").reduce(function(t,n){if(n){var o=/\s*([^:]+?)\s*:\s*([^;]*)\s*$/.exec(n);if(o){var r=o[1],a=o[2];r&&a&&(t[r.trim()]=a.trim())}return t}return t},{}):{}},i.objectToCssText=function(e){return e?Object.keys(e).reduce(function(t,n){var o=n.trim(),r=e[n];return o&&r&&t.push(o+": "+r.toString().trim()),t},[]).join("; "):""},i}();h.Data=s},8396:(j,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.isColorProperty=void 0;var d={stroke:!0,fill:!0};h.isColorProperty=function(u){return d[u]}},3490:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.getLineHeight=h.getTextHeight=h.getTextLineSize=h.getOptimalTextRectangle=h.TEXTRECT_RATIO_EPS=h.textToParagraphs=h.textToWords=h.wordsByLines=h.LINE_HEIGHT=void 0;var u=d(8675),g=d(6353),v=d(4914),p=/\s/gm;function s(m,y,l){if(y.length===1)return y;for(var P=l(),C=P.words[" "].width,I=[],x=0,b=-1,S=0;S<y.length;S++){var w=y[S],T=P.words[w].width;b===-1||x+C+T>m?(b=I.push(w)-1,x=T):(x+=C+T,I[b]+=" "+w)}return I}function i(m){return m.split(p).filter(function(y){return y.length})}function e(m){return m.split(`
`)}h.LINE_HEIGHT=1.05,h.wordsByLines=s,h.textToWords=i,h.textToParagraphs=e,h.TEXTRECT_RATIO_EPS=1.2;var t=1;function n(m,y,l){var P=m<1?1/m:m,C=y<1?1/y:y,I=P/C;return(I<1?1/I:I)<=l?0:C>P?1:-1}function o(m,y,l,P){return r(c(m,y,l,!1),P)}function r(m,y){return[v.Data.byRange(m,y.from,y.to),m<=y.to]}function a(m,y){return i(m).reduce(function(l,P,C){var I=y.words[P];return l.width+=I.width,l.height=Math.max(l.height,I.height),C>0&&(l.width+=y.words[" "].width),l},new g.Size(0,0))}function c(m,y,l,P){var C=Array.isArray(m)?m:e(m);return!P||C.length&&(C.length!==1||C[0].length)?C.reduce(function(I,x){return I+s(y,i(x),function(){return l}).length},0)*f(l):f(l)}function f(m){return m.fontSize*h.LINE_HEIGHT}h.getOptimalTextRectangle=function(m,y,l,P,C,I,x,b,S,w){if(x===void 0&&(x=0),b===void 0&&(b=Number.MAX_SAFE_INTEGER||Number.MAX_VALUE),S===void 0&&(S=0),w===void 0&&(w=Number.MAX_SAFE_INTEGER||Number.MAX_VALUE),!m)return new g.Size(v.Data.byRange(C.width,x,b),v.Data.byRange(C.height,S,w));if(x>b||S>w)throw new Error("Min size cannot exceed max size");if(x===b&&S===w)return new g.Size(x,S);var T=P.measureWords(m,y,l),_=e(m),M=Object.keys(T.words).reduce(function(R,O){return Math.max(R,T.words[O].width)},0),A=new u.Range(v.Data.byRange(Math.max(C.width,M),x,b),b),E=new u.Range(v.Data.byRange(C.height,S,w),w);if(M<=C.width&&c(_,C.width,T,!1)<=C.height&&A.includes(C.width)&&E.includes(C.height))return C;var U=C.width/C.height;return function(R,O,N,V,H,L){for(var D,K,F=R.reduce(function(W,G){return Math.max(W,a(G,O).width)},0),q=new g.Size(0,0),ee=new g.Size(0,0),Q=0,X=0,z=0;z<5;z++){if(z===0)ee.width=r(F,V)[0];else{if(!(Math.abs(Q)>t))break;ee.width=r(q.width+Q,V)[0]}if(D=o(R,ee.width,O,H),ee.height=D[0],K=D[1],z===0&&(X=(q=ee.clone()).width/q.height/N),z===0&&!K)break;var B=ee.width/ee.height,k=B/N;if(z===0)Q=(ee.width/k-ee.width)/2;else if(K){if(!n(N,B,h.TEXTRECT_RATIO_EPS)){q=ee.clone(),X=k;break}if(!(n(X,k,1)<0))break;q=ee.clone(),X=k,Q=(ee.width/k-ee.width)/2,k<1&&(Q/=2)}else Q/=2}return L&&(q.height=v.Data.byRange(q.width/N,q.height,H.to)),q}(_,T,U,A,E,I)},h.getTextLineSize=a,h.getTextHeight=c,h.getLineHeight=f},6734:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.ViewController=void 0;var u=d(7156),g=Math.log(.05),v=Math.log(3),p=t(1),s=[u.DiagramCommand.ZoomLevel,u.DiagramCommand.ZoomLevelInPercentage,u.DiagramCommand.Zoom100,u.DiagramCommand.Zoom125,u.DiagramCommand.Zoom200,u.DiagramCommand.Zoom25,u.DiagramCommand.Zoom50,u.DiagramCommand.Zoom75],i=[u.DiagramCommand.SwitchAutoZoom,u.DiagramCommand.ToggleAutoZoom,u.DiagramCommand.AutoZoomToContent,u.DiagramCommand.AutoZoomToWidth],e=function(){function n(o,r){this.settings=o,this.bars=r,o.onZoomChanged.add(this),this.autoZoom=o.autoZoom}return n.prototype.initialize=function(o){this.view=o,this.view.onViewChanged.add(this)},n.prototype.scrollTo=function(o,r){this.view&&this.view.setScrollTo(o,r)},n.prototype.scrollBy=function(o){return!this.view||o.x===0&&o.y===0?o:this.view.scrollBy(o)},n.prototype.scrollIntoView=function(o){this.view&&this.view.scrollIntoView(o)},n.prototype.normalize=function(){this.view.tryNormalizePaddings()},n.prototype.getNextStepZoom=function(o){var r=this.getNearestCurrentZoomStep(),a=o?1:-1,c=Math.min(39,Math.max(0,r+a));if(c!==p){var f=g+(v-g)*c/39;return Math.exp(f)}return 1},n.prototype.getNearestCurrentZoomStep=function(){return t(this.getZoom())},n.prototype.getZoom=function(){return this.view?this.view.actualZoom:this.settings.zoomLevel},n.prototype.resetScroll=function(){this.view.adjust({horizontal:!0,vertical:!0})},n.prototype.notifyViewAdjusted=function(o){},n.prototype.notifyActualZoomChanged=function(o){this.bars.updateItemsState(s)},n.prototype.notifyZoomChanged=function(o,r){this.autoZoom!==r&&(this.autoZoom=r,this.bars.updateItemsState(i))},n}();function t(n){var o=Math.log(n);return Math.round(39*(o-g)/(v-g))}h.ViewController=e},3607:(j,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.DiagramModelOperation=h.Diagnostics=h.RenderHelper=h.DiagramLocalizationService=h.NativeConnector=h.NativeShape=h.ShapeType=h.ColorUtils=h.PageOrientation=h.ConnectorPosition=h.ConnectorLineOption=h.ConnectorLineEnding=h.AutoZoomMode=h.Browser=h.UnitConverter=h.EventDispatcher=h.DataLayoutOrientation=h.DataLayoutType=h.ShapeCategories=h.ShapeTypes=h.DiagramUnit=h.default=h.DiagramControl=h.DiagramCommand=h.Point=h.Size=void 0;var u=d(7156);Object.defineProperty(h,"DiagramCommand",{enumerable:!0,get:function(){return u.DiagramCommand}});var g=d(2106);Object.defineProperty(h,"DiagramControl",{enumerable:!0,get:function(){return g.DiagramControl}}),Object.defineProperty(h,"default",{enumerable:!0,get:function(){return g.DiagramControl}});var v=d(6353);Object.defineProperty(h,"Size",{enumerable:!0,get:function(){return v.Size}});var p=d(8900);Object.defineProperty(h,"Point",{enumerable:!0,get:function(){return p.Point}});var s=d(8675);Object.defineProperty(h,"EventDispatcher",{enumerable:!0,get:function(){return s.EventDispatcher}});var i=d(2259);Object.defineProperty(h,"ShapeTypes",{enumerable:!0,get:function(){return i.ShapeTypes}}),Object.defineProperty(h,"ShapeCategories",{enumerable:!0,get:function(){return i.ShapeCategories}}),Object.defineProperty(h,"ShapeType",{enumerable:!0,get:function(){return i.ShapeType}});var e=d(9291);Object.defineProperty(h,"UnitConverter",{enumerable:!0,get:function(){return e.UnitConverter}});var t=d(9279);Object.defineProperty(h,"Browser",{enumerable:!0,get:function(){return t.Browser}});var n=d(240);Object.defineProperty(h,"AutoZoomMode",{enumerable:!0,get:function(){return n.AutoZoomMode}});var o=d(3503);Object.defineProperty(h,"DataLayoutType",{enumerable:!0,get:function(){return o.DataLayoutType}});var r=d(8710);Object.defineProperty(h,"DataLayoutOrientation",{enumerable:!0,get:function(){return r.DataLayoutOrientation}}),d(8721);var a=d(4612);Object.defineProperty(h,"ConnectorLineEnding",{enumerable:!0,get:function(){return a.ConnectorLineEnding}}),Object.defineProperty(h,"ConnectorLineOption",{enumerable:!0,get:function(){return a.ConnectorLineOption}});var c=d(13);Object.defineProperty(h,"ColorUtils",{enumerable:!0,get:function(){return c.ColorUtils}});var f=d(9463);Object.defineProperty(h,"Diagnostics",{enumerable:!0,get:function(){return f.Diagnostics}});var m=d(7185);Object.defineProperty(h,"NativeShape",{enumerable:!0,get:function(){return m.NativeShape}}),Object.defineProperty(h,"NativeConnector",{enumerable:!0,get:function(){return m.NativeConnector}});var y=d(6224);Object.defineProperty(h,"DiagramLocalizationService",{enumerable:!0,get:function(){return y.DiagramLocalizationService}});var l=d(1114);Object.defineProperty(h,"RenderHelper",{enumerable:!0,get:function(){return l.RenderHelper}});var P=d(5383);Object.defineProperty(h,"DiagramUnit",{enumerable:!0,get:function(){return P.DiagramUnit}}),Object.defineProperty(h,"PageOrientation",{enumerable:!0,get:function(){return P.PageOrientation}});var C=d(6879);Object.defineProperty(h,"DiagramModelOperation",{enumerable:!0,get:function(){return C.DiagramModelOperation}});var I=d(7959);Object.defineProperty(h,"ConnectorPosition",{enumerable:!0,get:function(){return I.ConnectorPosition}})},655:(j,h,d)=>{d.r(h),d.d(h,{__assign:()=>v,__asyncDelegator:()=>P,__asyncGenerator:()=>l,__asyncValues:()=>C,__await:()=>y,__awaiter:()=>t,__classPrivateFieldGet:()=>w,__classPrivateFieldSet:()=>T,__createBinding:()=>o,__decorate:()=>s,__exportStar:()=>r,__extends:()=>g,__generator:()=>n,__importDefault:()=>S,__importStar:()=>b,__makeTemplateObject:()=>I,__metadata:()=>e,__param:()=>i,__read:()=>c,__rest:()=>p,__spread:()=>f,__spreadArrays:()=>m,__values:()=>a});var u=function(_,M){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,E){A.__proto__=E}||function(A,E){for(var U in E)Object.prototype.hasOwnProperty.call(E,U)&&(A[U]=E[U])},u(_,M)};function g(_,M){function A(){this.constructor=_}u(_,M),_.prototype=M===null?Object.create(M):(A.prototype=M.prototype,new A)}var v=function(){return v=Object.assign||function(_){for(var M,A=1,E=arguments.length;A<E;A++)for(var U in M=arguments[A])Object.prototype.hasOwnProperty.call(M,U)&&(_[U]=M[U]);return _},v.apply(this,arguments)};function p(_,M){var A={};for(var E in _)Object.prototype.hasOwnProperty.call(_,E)&&M.indexOf(E)<0&&(A[E]=_[E]);if(_!=null&&typeof Object.getOwnPropertySymbols=="function"){var U=0;for(E=Object.getOwnPropertySymbols(_);U<E.length;U++)M.indexOf(E[U])<0&&Object.prototype.propertyIsEnumerable.call(_,E[U])&&(A[E[U]]=_[E[U]])}return A}function s(_,M,A,E){var U,R=arguments.length,O=R<3?M:E===null?E=Object.getOwnPropertyDescriptor(M,A):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")O=Reflect.decorate(_,M,A,E);else for(var N=_.length-1;N>=0;N--)(U=_[N])&&(O=(R<3?U(O):R>3?U(M,A,O):U(M,A))||O);return R>3&&O&&Object.defineProperty(M,A,O),O}function i(_,M){return function(A,E){M(A,E,_)}}function e(_,M){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(_,M)}function t(_,M,A,E){return new(A||(A=Promise))(function(U,R){function O(H){try{V(E.next(H))}catch(L){R(L)}}function N(H){try{V(E.throw(H))}catch(L){R(L)}}function V(H){var L;H.done?U(H.value):(L=H.value,L instanceof A?L:new A(function(D){D(L)})).then(O,N)}V((E=E.apply(_,M||[])).next())})}function n(_,M){var A,E,U,R,O={label:0,sent:function(){if(1&U[0])throw U[1];return U[1]},trys:[],ops:[]};return R={next:N(0),throw:N(1),return:N(2)},typeof Symbol=="function"&&(R[Symbol.iterator]=function(){return this}),R;function N(V){return function(H){return function(L){if(A)throw new TypeError("Generator is already executing.");for(;O;)try{if(A=1,E&&(U=2&L[0]?E.return:L[0]?E.throw||((U=E.return)&&U.call(E),0):E.next)&&!(U=U.call(E,L[1])).done)return U;switch(E=0,U&&(L=[2&L[0],U.value]),L[0]){case 0:case 1:U=L;break;case 4:return O.label++,{value:L[1],done:!1};case 5:O.label++,E=L[1],L=[0];continue;case 7:L=O.ops.pop(),O.trys.pop();continue;default:if(U=O.trys,!((U=U.length>0&&U[U.length-1])||L[0]!==6&&L[0]!==2)){O=0;continue}if(L[0]===3&&(!U||L[1]>U[0]&&L[1]<U[3])){O.label=L[1];break}if(L[0]===6&&O.label<U[1]){O.label=U[1],U=L;break}if(U&&O.label<U[2]){O.label=U[2],O.ops.push(L);break}U[2]&&O.ops.pop(),O.trys.pop();continue}L=M.call(_,O)}catch(D){L=[6,D],E=0}finally{A=U=0}if(5&L[0])throw L[1];return{value:L[0]?L[1]:void 0,done:!0}}([V,H])}}}var o=Object.create?function(_,M,A,E){E===void 0&&(E=A),Object.defineProperty(_,E,{enumerable:!0,get:function(){return M[A]}})}:function(_,M,A,E){E===void 0&&(E=A),_[E]=M[A]};function r(_,M){for(var A in _)A==="default"||Object.prototype.hasOwnProperty.call(M,A)||o(M,_,A)}function a(_){var M=typeof Symbol=="function"&&Symbol.iterator,A=M&&_[M],E=0;if(A)return A.call(_);if(_&&typeof _.length=="number")return{next:function(){return _&&E>=_.length&&(_=void 0),{value:_&&_[E++],done:!_}}};throw new TypeError(M?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(_,M){var A=typeof Symbol=="function"&&_[Symbol.iterator];if(!A)return _;var E,U,R=A.call(_),O=[];try{for(;(M===void 0||M-- >0)&&!(E=R.next()).done;)O.push(E.value)}catch(N){U={error:N}}finally{try{E&&!E.done&&(A=R.return)&&A.call(R)}finally{if(U)throw U.error}}return O}function f(){for(var _=[],M=0;M<arguments.length;M++)_=_.concat(c(arguments[M]));return _}function m(){for(var _=0,M=0,A=arguments.length;M<A;M++)_+=arguments[M].length;var E=Array(_),U=0;for(M=0;M<A;M++)for(var R=arguments[M],O=0,N=R.length;O<N;O++,U++)E[U]=R[O];return E}function y(_){return this instanceof y?(this.v=_,this):new y(_)}function l(_,M,A){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var E,U=A.apply(_,M||[]),R=[];return E={},O("next"),O("throw"),O("return"),E[Symbol.asyncIterator]=function(){return this},E;function O(D){U[D]&&(E[D]=function(K){return new Promise(function(F,q){R.push([D,K,F,q])>1||N(D,K)})})}function N(D,K){try{(F=U[D](K)).value instanceof y?Promise.resolve(F.value.v).then(V,H):L(R[0][2],F)}catch(q){L(R[0][3],q)}var F}function V(D){N("next",D)}function H(D){N("throw",D)}function L(D,K){D(K),R.shift(),R.length&&N(R[0][0],R[0][1])}}function P(_){var M,A;return M={},E("next"),E("throw",function(U){throw U}),E("return"),M[Symbol.iterator]=function(){return this},M;function E(U,R){M[U]=_[U]?function(O){return(A=!A)?{value:y(_[U](O)),done:U==="return"}:R?R(O):O}:R}}function C(_){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var M,A=_[Symbol.asyncIterator];return A?A.call(_):(_=a(_),M={},E("next"),E("throw"),E("return"),M[Symbol.asyncIterator]=function(){return this},M);function E(U){M[U]=_[U]&&function(R){return new Promise(function(O,N){(function(V,H,L,D){Promise.resolve(D).then(function(K){V({value:K,done:L})},H)})(O,N,(R=_[U](R)).done,R.value)})}}}function I(_,M){return Object.defineProperty?Object.defineProperty(_,"raw",{value:M}):_.raw=M,_}var x=Object.create?function(_,M){Object.defineProperty(_,"default",{enumerable:!0,value:M})}:function(_,M){_.default=M};function b(_){if(_&&_.__esModule)return _;var M={};if(_!=null)for(var A in _)A!=="default"&&Object.prototype.hasOwnProperty.call(_,A)&&o(M,_,A);return x(M,_),M}function S(_){return _&&_.__esModule?_:{default:_}}function w(_,M){if(!M.has(_))throw new TypeError("attempted to get private field on non-instance");return M.get(_)}function T(_,M,A){if(!M.has(_))throw new TypeError("attempted to set private field on non-instance");return M.set(_,A),A}}},le={};function ue(j){var h=le[j];if(h!==void 0)return h.exports;var d=le[j]={exports:{}};return fe[j].call(d.exports,d,d.exports,ue),d.exports}return ue.d=(j,h)=>{for(var d in h)ue.o(h,d)&&!ue.o(j,d)&&Object.defineProperty(j,d,{enumerable:!0,get:h[d]})},ue.o=(j,h)=>Object.prototype.hasOwnProperty.call(j,h),ue.r=j=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(j,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(j,"__esModule",{value:!0})},ue(3607)})())})(Ie);var we=Ie.exports;const Me=Oe(we),Ee=_e({__proto__:null,default:Me},[we]);export{Me as D,Ee as a,Te as c,Oe as g};
